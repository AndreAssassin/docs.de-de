---
title: Entwerfen mit Verweistypen, die NULL-Werte zulassen
description: Dieses erweiterte Tutorial enthält eine Einführung zu Verweistypen, die NULL-Werte zulassen. Sie erfahren, wie Sie Ihre Entwurfsabsicht ausdrücken, wenn die Verweiswerte Null sein können, und wie Sie den Compiler durchsetzen, wenn sie nicht NULL sein können.
ms.date: 02/19/2019
ms.custom: mvc
ms.openlocfilehash: 289b864aaa0380a31e93ef223fb5b5780e35892a
ms.sourcegitcommit: 96543603ae29bc05cecccb8667974d058af63b4a
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 05/24/2019
ms.locfileid: "66195846"
---
# <a name="tutorial-migrate-existing-code-with-nullable-reference-types"></a><span data-ttu-id="2036e-104">Tutorial: Migrieren vorhandenen Codes mit Verweistypen, die NULL-Werte zulassen</span><span class="sxs-lookup"><span data-stu-id="2036e-104">Tutorial: Migrate existing code with nullable reference types</span></span>

<span data-ttu-id="2036e-105">C# 8 führt **Verweistypen, die NULL-Werte zulassen** ein, die Verweistypen auf die gleiche Weise ergänzen, wie NULL-Werte zulassenden Werttypen Werttypen ergänzen.</span><span class="sxs-lookup"><span data-stu-id="2036e-105">C# 8 introduces **nullable reference types**, which complement reference types the same way nullable value types complement value types.</span></span> <span data-ttu-id="2036e-106">Sie deklarieren eine Variable zu einem **Verweistyp, der NULL-Werte zulässt**, indem Sie `?` an den Typen anfügen.</span><span class="sxs-lookup"><span data-stu-id="2036e-106">You declare a variable to be a **nullable reference type** by appending a `?` to the type.</span></span> <span data-ttu-id="2036e-107">Beispielsweise stellt `string?` eine `string` dar, die NULL-Werte zulässt.</span><span class="sxs-lookup"><span data-stu-id="2036e-107">For example, `string?` represents a nullable `string`.</span></span> <span data-ttu-id="2036e-108">Mit diesen neuen Typen können Sie Ihre Entwurfsabsicht besser zum Ausdruck bringen: Einige Variablen *müssen immer einen Wert* haben, bei anderen  *kann ein Wert fehlen*.</span><span class="sxs-lookup"><span data-stu-id="2036e-108">You can use these new types to more clearly express your design intent: some variables *must always have a value*, others *may be missing a value*.</span></span> <span data-ttu-id="2036e-109">Alle vorhandenen Variablen eines Verweistyps würden als NULL-Werte zulassende Verweistypen interpretiert.</span><span class="sxs-lookup"><span data-stu-id="2036e-109">Any existing variables of a reference type would be interpreted as a non-nullable reference type.</span></span> 

<span data-ttu-id="2036e-110">In diesem Tutorial lernen Sie, wie die folgenden Aufgaben ausgeführt werden:</span><span class="sxs-lookup"><span data-stu-id="2036e-110">In this tutorial, you'll learn how to:</span></span>

> [!div class="checklist"]
> * <span data-ttu-id="2036e-111">Aktivieren von NULL-Verweis-Überprüfungen beim Arbeiten mit Code.</span><span class="sxs-lookup"><span data-stu-id="2036e-111">Enable null reference checks as you work with code.</span></span>
> * <span data-ttu-id="2036e-112">Diagnostizieren und Korrigieren verschiedener Warnungen im Zusammenhang mit NULL-Werten.</span><span class="sxs-lookup"><span data-stu-id="2036e-112">Diagnose and correct different warnings related to null values.</span></span>
> * <span data-ttu-id="2036e-113">Verwalten der Schnittstelle zwischen NULL-Werte zulassenden und NULL-Werte nicht zulassenden Kontexten.</span><span class="sxs-lookup"><span data-stu-id="2036e-113">Manage the interface between nullable enabled and nullable disabled contexts.</span></span>
> * <span data-ttu-id="2036e-114">Steuern NULL-Werte zulassender Anmerkungskontexte.</span><span class="sxs-lookup"><span data-stu-id="2036e-114">Control nullable annotation contexts.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="2036e-115">Erforderliche Komponenten</span><span class="sxs-lookup"><span data-stu-id="2036e-115">Prerequisites</span></span>

<span data-ttu-id="2036e-116">Sie müssen Ihren Computer zur Ausführung von .NET Core einrichten, einschließlich des C# 8.0 Beta-Compilers.</span><span class="sxs-lookup"><span data-stu-id="2036e-116">You'll need to set up your machine to run .NET Core, including the C# 8.0 beta compiler.</span></span> <span data-ttu-id="2036e-117">Der C# 8 Beta-Compiler ist mit [Visual Studio 2019](https://visualstudio.microsoft.com/downloads/?utm_medium=microsoft&utm_source=docs.microsoft.com&utm_campaign=inline+link&utm_content=download+vs2019) oder der neueste[ Vorschauversion von .NET Core 3.0](https://dotnet.microsoft.com/download/dotnet-core/3.0) verfügbar.</span><span class="sxs-lookup"><span data-stu-id="2036e-117">The C# 8 beta compiler is available with [Visual Studio 2019](https://visualstudio.microsoft.com/downloads/?utm_medium=microsoft&utm_source=docs.microsoft.com&utm_campaign=inline+link&utm_content=download+vs2019), or the latest [.NET Core 3.0 preview](https://dotnet.microsoft.com/download/dotnet-core/3.0).</span></span>

<span data-ttu-id="2036e-118">In diesem Tutorial wird vorausgesetzt, dass Sie C# und .NET, einschließlich Visual Studio oder die .NET Core-CLI kennen.</span><span class="sxs-lookup"><span data-stu-id="2036e-118">This tutorial assumes you're familiar with C# and .NET, including either Visual Studio or the .NET Core CLI.</span></span>

## <a name="explore-the-sample-application"></a><span data-ttu-id="2036e-119">Untersuchen der Beispielanwendung</span><span class="sxs-lookup"><span data-stu-id="2036e-119">Explore the sample application</span></span>

<span data-ttu-id="2036e-120">Die Beispielanwendung, die Sie migrieren, ist eine RSS-Feed-Reader-Web-App.</span><span class="sxs-lookup"><span data-stu-id="2036e-120">The sample application that you'll migrate is an RSS feed reader web app.</span></span> <span data-ttu-id="2036e-121">Sie liest aus einem einzelnen RSS-Feed und zeigt Zusammenfassungen für die neuesten Artikel an.</span><span class="sxs-lookup"><span data-stu-id="2036e-121">It reads from a single RSS feed and displays summaries for the most recent articles.</span></span> <span data-ttu-id="2036e-122">Sie können auf einen der Artikel klicken, um auf die Website zuzugreifen.</span><span class="sxs-lookup"><span data-stu-id="2036e-122">You can click on any of the articles to visit the site.</span></span> <span data-ttu-id="2036e-123">Die Anwendung ist relativ neu, wurde jedoch geschrieben, bevor NULL-Werte zulassende Verweistypen verfügbar waren.</span><span class="sxs-lookup"><span data-stu-id="2036e-123">The application is relatively new but was written before nullable reference types were available.</span></span> <span data-ttu-id="2036e-124">Die Entwurfsentscheidungen für die Anwendung stellten bewährte Prinzipien dar, nutzen diese wichtige Sprachfunktion jedoch nicht.</span><span class="sxs-lookup"><span data-stu-id="2036e-124">The design decisions for the application represented sound principles, but don't take advantage of this important language feature.</span></span>

<span data-ttu-id="2036e-125">Die Beispielanwendung enthält eine Komponententestbibliothek, die die wichtigsten Funktionen der App überprüft.</span><span class="sxs-lookup"><span data-stu-id="2036e-125">The sample application includes a unit test library that validates the major functionality of the app.</span></span> <span data-ttu-id="2036e-126">Das Projekt wird die sichere Aktualisierung erleichtern, wenn Sie Teile der Implementierung entsprechend der generierten Warnungen ändern.</span><span class="sxs-lookup"><span data-stu-id="2036e-126">That project will make it easier to upgrade safely, if you change any of the implementation based on the warnings generated.</span></span> <span data-ttu-id="2036e-127">Sie können den Startercode aus dem Repository [dotnet/samples](https://github.com/dotnet/samples/tree/master/csharp/tutorials/nullable-reference-migration/start) auf GitHub herunterladen.</span><span class="sxs-lookup"><span data-stu-id="2036e-127">You can download the starter code from the [dotnet/samples](https://github.com/dotnet/samples/tree/master/csharp/tutorials/nullable-reference-migration/start) GitHub repository.</span></span>

<span data-ttu-id="2036e-128">Ihr Ziel beim Migrieren eines Projekts sollte die Nutzung neuer Sprachfeatures sein, sodass Sie deutlich Ihre Absicht bezüglich des Zulassens von NULL-Werten bei Variablen ausdrücken, und zwar so, dass der Compiler keine Warnungen generiert, wenn Sie für den NULL-Werte zulassenden Anmerkungskontext und den NULL-Werte zulassenden Warnungskontext `enabled` festlegen.</span><span class="sxs-lookup"><span data-stu-id="2036e-128">Your goal migrating a project should be to leverage the new language features so that you clearly express your intent on the nullability of variables, and do so in such a way that the compiler doesn't generate warnings when you have the nullable annotation context and nullable warning context set to `enabled`.</span></span>

## <a name="upgrade-the-projects-to-c-8"></a><span data-ttu-id="2036e-129">Aktualisieren der Projekte auf C# 8</span><span class="sxs-lookup"><span data-stu-id="2036e-129">Upgrade the projects to C# 8</span></span>

<span data-ttu-id="2036e-130">Ein guter erster Schritt ist, den Bereich der Migrationsaufgabe zu bestimmen.</span><span class="sxs-lookup"><span data-stu-id="2036e-130">A good first step is to determine the scope of the migration task.</span></span> <span data-ttu-id="2036e-131">Beginnen Sie mit dem Upgrade des Projekts auf C# 8.0 (oder höher).</span><span class="sxs-lookup"><span data-stu-id="2036e-131">Start by upgrading the project to C# 8.0 (or newer).</span></span> <span data-ttu-id="2036e-132">Fügen Sie das `LangVersion`-Element beiden CSPROJ-Dateien für das Webprojekt und das Komponententestprojekt hinzu:</span><span class="sxs-lookup"><span data-stu-id="2036e-132">Add the `LangVersion` element to both csproj files for the web project and the unit test project:</span></span>

```xml
<LangVersion>8.0</LangVersion>
```

<span data-ttu-id="2036e-133">Beim Aktualisieren der Sprachversion wird C# 8.0 ausgewählt, aber dies aktiviert nicht den NULL-Werte zulassenden Anmerkungskontext oder den NULL-Werte zulassenden Warnungskontext.</span><span class="sxs-lookup"><span data-stu-id="2036e-133">Upgrading the language version selects C# 8.0, but does not enable the nullable annotation context or the nullable warning context.</span></span> <span data-ttu-id="2036e-134">Erstellen Sie das Projekt neu, um sicherzustellen, dass es ohne Warnungen erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="2036e-134">Rebuild the project to ensure that it builds without warnings.</span></span>

<span data-ttu-id="2036e-135">Ein guter nächster Schritt ist, den NULL-Werte zulassenden Anmerkungskontext zu aktivieren und zu sehen, wie viele Warnungen generiert werden.</span><span class="sxs-lookup"><span data-stu-id="2036e-135">A good next step is to turn on the nullable annotation context and see how many warnings are generated.</span></span> <span data-ttu-id="2036e-136">Fügen Sie das folgende Element beiden CSPROJ-Dateien in der Projektmappe hinzu, direkt unterhalb des `LangVersion`-Elements:</span><span class="sxs-lookup"><span data-stu-id="2036e-136">Add the following element to both csproj files in the solution, directly under the `LangVersion` element:</span></span>

```xml
<Nullable>enable</Nullable>
```

> [!IMPORTANT]
> <span data-ttu-id="2036e-137">Das `Nullable`-Element hieß früher `NullableContextOptions`.</span><span class="sxs-lookup"><span data-stu-id="2036e-137">The `Nullable` element was previously named `NullableContextOptions`.</span></span> <span data-ttu-id="2036e-138">Die Umbenennung erfolgt in Visual Studio 2019, 16.2-p1.</span><span class="sxs-lookup"><span data-stu-id="2036e-138">The rename ships with Visual Studio 2019, 16.2-p1.</span></span> <span data-ttu-id="2036e-139">Das .NET Core SDK 3.0.100-preview5-011568 umfasst diese Änderung nicht.</span><span class="sxs-lookup"><span data-stu-id="2036e-139">The .NET Core SDK 3.0.100-preview5-011568 does not have this change.</span></span> <span data-ttu-id="2036e-140">Wenn Sie die .NET Core-CLI verwenden, müssen Sie `NullableContextOptions`weiter verwenden, bis die nächste Vorschauversion verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="2036e-140">If you are using the .NET Core CLI, you'll need to use `NullableContextOptions` until the next preview is available.</span></span>

<span data-ttu-id="2036e-141">Führen Sie einen Testbuild durch, und beachten Sie die Liste der Warnungen.</span><span class="sxs-lookup"><span data-stu-id="2036e-141">Do a test build, and notice the warning list.</span></span> <span data-ttu-id="2036e-142">In dieser kleinen Anwendung generiert der Compiler fünf Warnungen, daher sollten Sie den NULL-Werte zulassenden Anmerkungskontext aktiviert lassen und beginnen, Warnungen für das gesamte Projekt zu beheben.</span><span class="sxs-lookup"><span data-stu-id="2036e-142">In this small application, the compiler generates five warnings, so it's likely you'd leave the nullable annotation context enabled and start fixing warnings for the entire project.</span></span>

<span data-ttu-id="2036e-143">Diese Strategie funktioniert nur bei kleineren Projekten.</span><span class="sxs-lookup"><span data-stu-id="2036e-143">That strategy works only for smaller projects.</span></span> <span data-ttu-id="2036e-144">Bei größeren Projekten erschwert die Anzahl der Warnungen, die durch das Aktivieren des NULL-Werte zulassenden Anmerkungskontexts für die gesamte Codebase generiert werden, die systematische Behebung der Warnungen.</span><span class="sxs-lookup"><span data-stu-id="2036e-144">For any larger projects, the number of warnings generated by enabling the nullable annotation context for the entire codebase makes it harder to fix the warnings systematically.</span></span> <span data-ttu-id="2036e-145">Für größere Enterprise-Projekte müssen Sie häufig jeweils ein Projekt migrieren.</span><span class="sxs-lookup"><span data-stu-id="2036e-145">For larger enterprise projects, you'll often want to migrate one project at a time.</span></span> <span data-ttu-id="2036e-146">In jedem Projekt migrieren Sie jeweils eine Klasse oder eine Datei.</span><span class="sxs-lookup"><span data-stu-id="2036e-146">In each project, migrate one class or file at a time.</span></span>

## <a name="warnings-help-discover-original-design-intent"></a><span data-ttu-id="2036e-147">Warnungen tragen dazu bei, die ursprüngliche Entwurfsabsicht zu ermitteln</span><span class="sxs-lookup"><span data-stu-id="2036e-147">Warnings help discover original design intent</span></span>

<span data-ttu-id="2036e-148">Es gibt zwei Klassen, die mehrere Warnungen generieren.</span><span class="sxs-lookup"><span data-stu-id="2036e-148">There are two classes that generate multiple warnings.</span></span> <span data-ttu-id="2036e-149">Beginnen Sie mit der `NewsStoryViewModel`-Klasse.</span><span class="sxs-lookup"><span data-stu-id="2036e-149">Start with the `NewsStoryViewModel` class.</span></span> <span data-ttu-id="2036e-150">Entfernen Sie das `Nullable`-Element aus beiden CSPROJ-Dateien, damit Sie den Bereich der Warnungen auf die Abschnitte des Codes beschränken können, mit denen Sie arbeiten.</span><span class="sxs-lookup"><span data-stu-id="2036e-150">Remove the `Nullable` element from both csproj files so that you can limit the scope of warnings to the sections of code you're working with.</span></span> <span data-ttu-id="2036e-151">Öffnen Sie die *NewsStoryViewModel.cs*-Datei, und fügen Sie die folgenden Anweisungen zum Aktivieren des NULL-Werte zulassenden Anmerkungskontexts für das `NewsStoryViewModel` hinzu, und stellen Sie es nach dieser Klassendefinition wieder her:</span><span class="sxs-lookup"><span data-stu-id="2036e-151">Open the *NewsStoryViewModel.cs* file and add the following directives to enable the nullable annotation context for the `NewsStoryViewModel` and restore it following that class definition:</span></span>

```csharp
#nullable enable
public class NewsStoryViewModel
{
    public DateTimeOffset Published { get; set; }
    public string Title { get; set; }
    public string Uri { get; set; }
}
#nullable restore
```

<span data-ttu-id="2036e-152">Mit diesen beiden Anweisungen können Sie sich auf Ihre Migration konzentrieren.</span><span class="sxs-lookup"><span data-stu-id="2036e-152">These two directives help you focus your migration efforts.</span></span> <span data-ttu-id="2036e-153">Die NULL-Werte zulassenden Warnungen werden für den Bereich des Codes generiert, an dem Sie aktiv arbeiten.</span><span class="sxs-lookup"><span data-stu-id="2036e-153">The nullable warnings are generated for the area of code you're actively working on.</span></span> <span data-ttu-id="2036e-154">Sie müssen sie aktiviert lassen, bis Sie bereit sind, die Warnungen für das gesamte Projekt zu aktivieren.</span><span class="sxs-lookup"><span data-stu-id="2036e-154">You'll leave them on until you're ready to turn on the warnings for the entire project.</span></span> <span data-ttu-id="2036e-155">Verwenden Sie den Wert `restore` statt `disable`, sodass Sie später nicht versehentlich den Kontext deaktivieren, wenn Sie NULL-Werte zulassende Anmerkungen für das gesamte Projekt aktiviert haben.</span><span class="sxs-lookup"><span data-stu-id="2036e-155">You should use the `restore` rather than `disable` value so that you don't accidentally disable the context later when you've turned on nullable annotations for the entire project.</span></span> <span data-ttu-id="2036e-156">Nachdem Sie für das gesamte Projekt den NULL-Werte zulassenden Anmerkungskontext aktiviert haben, können Sie alle `#nullable`-Pragmas aus dem Projekt entfernen.</span><span class="sxs-lookup"><span data-stu-id="2036e-156">Once you've turned on the nullable annotation context for the entire project, you can remove all the `#nullable` pragmas from that project.</span></span>

<span data-ttu-id="2036e-157">Die `NewsStoryViewModel`-Klasse ist ein Datenübertragungsobjekt (Data Transfer Object, DTO), und zwei der Eigenschaften sind Lese-/Schreibzeichenfolgen:</span><span class="sxs-lookup"><span data-stu-id="2036e-157">The `NewsStoryViewModel` class is a data transfer object (DTO) and two of the properties are read/write strings:</span></span>

[!code-csharp[InitialViewModel](~/samples/csharp/tutorials/nullable-reference-migration/start/SimpleFeedReader/ViewModels/NewsStoryViewModel.cs#StarterViewModel)]

<span data-ttu-id="2036e-158">Diese beiden Eigenschaften lösen `CS8618` aus: „Initialisierung der NULL-Werte nicht zulassenden Eigenschaft wird aufgehoben“.</span><span class="sxs-lookup"><span data-stu-id="2036e-158">These two properties cause `CS8618`, "Non-nullable property is uninitialized".</span></span> <span data-ttu-id="2036e-159">Das ist deutlich genug: Beide `string`-Eigenschaften weisen den Standardwert `null` auf, wenn ein `NewsStoryViewModel` erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="2036e-159">That's clear enough: both `string` properties have the default value of `null` when a `NewsStoryViewModel` is constructed.</span></span> <span data-ttu-id="2036e-160">Es ist wichtig, zu ermitteln, wie `NewsStoryViewModel`-Objekte erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="2036e-160">What's important to discover is how `NewsStoryViewModel` objects are constructed.</span></span> <span data-ttu-id="2036e-161">Wenn Sie diese Klasse betrachten, ist nicht erkennbar, ob der `null`-Wert Teil des Entwurfs ist, oder ob diese Objekte bei ihrer Erstellung auf Werte ungleich Null festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="2036e-161">Looking at this class, you can't tell if the `null` value is part of the design, or if these objects are set to non-null values whenever one is created.</span></span> <span data-ttu-id="2036e-162">Die neuen Storys werden in der `GetNews`-Methode der `NewsService`-Klasse erstellt:</span><span class="sxs-lookup"><span data-stu-id="2036e-162">The news stories are created in the `GetNews` method of the `NewsService` class:</span></span>

[!code-csharp[StarterCreateNewsItem](~/samples/csharp/tutorials/nullable-reference-migration/start/SimpleFeedReader/Services/NewsService.cs#CreateNewsItem)]

<span data-ttu-id="2036e-163">Im vorherigen Codeblock ist einiges los.</span><span class="sxs-lookup"><span data-stu-id="2036e-163">There's quite a bit going on in the preceding block of code.</span></span> <span data-ttu-id="2036e-164">Diese Anwendung verwendet das [AutoMapper](https://automapper.org/)-NuGet-Paket zum Erstellen eines Nachrichtenelements aus einem `ISyndicationItem`.</span><span class="sxs-lookup"><span data-stu-id="2036e-164">This application uses the [AutoMapper](https://automapper.org/) NuGet package to construct a news item from an `ISyndicationItem`.</span></span> <span data-ttu-id="2036e-165">Sie haben festgestellt, dass in dieser einen Anweisung die Nachrichtenelemente erstellt und die Eigenschaften festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="2036e-165">You've discovered that the news story items are constructed and the properties are set in that one statement.</span></span> <span data-ttu-id="2036e-166">Das bedeutet, dass der Entwurf für das `NewsStoryViewModel` angibt, dass diese Eigenschaften nie den Wert `null` haben sollten.</span><span class="sxs-lookup"><span data-stu-id="2036e-166">That means the design for the `NewsStoryViewModel` indicates that these properties should never have the `null` value.</span></span> <span data-ttu-id="2036e-167">Diese Eigenschaften sollten **Nullwerte nicht zulassende Verweistypen** sein.</span><span class="sxs-lookup"><span data-stu-id="2036e-167">These properties should be **nonnullable reference types**.</span></span> <span data-ttu-id="2036e-168">Das drückt am besten die ursprüngliche Entwurfsabsicht aus.</span><span class="sxs-lookup"><span data-stu-id="2036e-168">That best expresses the original design intent.</span></span> <span data-ttu-id="2036e-169">Jedes `NewsStoryViewModel` *ist* in der Tat mit NULL nicht zulassenden Werten ordnungsgemäß instanziiert.</span><span class="sxs-lookup"><span data-stu-id="2036e-169">In fact, any `NewsStoryViewModel` *is* correctly instantiated with non-null values.</span></span> <span data-ttu-id="2036e-170">Das macht den folgenden Initialisierungscode zu einer gültigen Fehlerbehebung:</span><span class="sxs-lookup"><span data-stu-id="2036e-170">That makes the following initialization code a valid fix:</span></span>

```csharp
public class NewsStoryViewModel
{
    public DateTimeOffset Published { get; set; }
    public string Title { get; set; } = default!;
    public string Uri { get; set; } = default!;
}
```

<span data-ttu-id="2036e-171">Die Zuweisung von `Title` und `Uri` zu `default`, die `null` für den `string`-Typ ist, ändert das Laufzeitverhalten des Programms nicht.</span><span class="sxs-lookup"><span data-stu-id="2036e-171">The assignment of `Title` and `Uri` to `default` which is `null` for the `string` type doesn't change the runtime behavior of the program.</span></span> <span data-ttu-id="2036e-172">Das `NewsStoryViewModel` ist immer noch mit NULL-Werten erstellt, aber jetzt gibt der Compiler keine Warnungen aus.</span><span class="sxs-lookup"><span data-stu-id="2036e-172">The `NewsStoryViewModel` is still constructed with null values, but now the compiler reports no warnings.</span></span> <span data-ttu-id="2036e-173">Der **NULL-tolerante Operator**, das `!`-Zeichen, das auf den `default`-Ausdruck folgt, teilt dem Compiler mit, dass der vorherige Ausdruck nicht NULL ist.</span><span class="sxs-lookup"><span data-stu-id="2036e-173">The **null-forgiving operator**, the `!` character following the `default` expression tells the compiler that the preceding expression is not null.</span></span> <span data-ttu-id="2036e-174">Diese Technik kann zweckmäßig sein, wenn andere Änderungen viel größere Änderungen einer Codebasis erzwingen, aber in dieser Anwendung gibt es eine relativ schnelle und bessere Lösung: Machen Sie das `NewsStoryViewModel` zu einem unveränderlichen Typ, in dem alle Eigenschaften im Konstruktor festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="2036e-174">This technique may be expedient when other changes force much larger changes to a code base, but in this application there is a relatively quick and better solution: Make the `NewsStoryViewModel` an immutable type where all the properties are set in the constructor.</span></span> <span data-ttu-id="2036e-175">Nehmen Sie am `NewsStoryViewModel` die folgenden Änderungen vor:</span><span class="sxs-lookup"><span data-stu-id="2036e-175">Make the following changes to the `NewsStoryViewModel`:</span></span>

[!code-csharp[FinishedViewModel](~/samples/csharp/tutorials/nullable-reference-migration/finished/SimpleFeedReader/ViewModels/NewsStoryViewModel.cs#FinishedViewModel)]

<span data-ttu-id="2036e-176">Sobald das geschehen ist, müssen Sie den Code aktualisieren, der den AutoMapper konfiguriert, sodass er den Konstruktor verwendet, anstatt Eigenschaften festzulegen.</span><span class="sxs-lookup"><span data-stu-id="2036e-176">Once that's done, you need to update the code that configures the AutoMapper so that it uses the constructor rather than setting properties.</span></span> <span data-ttu-id="2036e-177">Öffnen Sie `NewsService.cs`, und suchen Sie unten in der Datei den folgenden Code:</span><span class="sxs-lookup"><span data-stu-id="2036e-177">Open `NewsService.cs` and look for the following code at the bottom of the file:</span></span>

[!code-csharp[StarterAutoMapper](~/samples/csharp/tutorials/nullable-reference-migration/start/SimpleFeedReader/Services/NewsService.cs#ConfigureAutoMapper)]

<span data-ttu-id="2036e-178">Dieser Code weist Eigenschaften des `ISyndicationItem`-Objekts den `NewsStoryViewModel`-Eigenschaften zu.</span><span class="sxs-lookup"><span data-stu-id="2036e-178">That code maps properties of the `ISyndicationItem` object to the `NewsStoryViewModel` properties.</span></span> <span data-ttu-id="2036e-179">Sie möchten, dass der AutoMapper die Zuordnung stattdessen mithilfe eines Konstruktors bereitstellt.</span><span class="sxs-lookup"><span data-stu-id="2036e-179">You want the AutoMapper to provide the mapping using a constructor instead.</span></span> <span data-ttu-id="2036e-180">Ersetzen Sie den obigen Code mit der folgenden Automapper-Konfiguration:</span><span class="sxs-lookup"><span data-stu-id="2036e-180">Replace the above code with the following automapper configuration:</span></span>

[!code-csharp[FinishedViewModel](~/samples/csharp/tutorials/nullable-reference-migration/finished/SimpleFeedReader/Services/NewsService.cs#ConfigureAutoMapper)]

<span data-ttu-id="2036e-181">Beachten Sie: Da diese Klasse klein ist, und Sie sie sorgfältig untersucht haben, sollten Sie die `#nullable enable`-Anweisung über dieser Klassendeklaration aktivieren.</span><span class="sxs-lookup"><span data-stu-id="2036e-181">Notice that because this class is small, and you've examined carefully, you should turn on the `#nullable enable` directive above this class declaration.</span></span> <span data-ttu-id="2036e-182">Die Änderung am Konstruktor könnte etwas beschädigt haben, darum lohnt es sich, alle Tests auszuführen und die Anwendung zu testen, bevor Sie fortfahren.</span><span class="sxs-lookup"><span data-stu-id="2036e-182">The change to the constructor could have broken something, so it's worthwhile to run all the tests and test the application before moving on.</span></span>

<span data-ttu-id="2036e-183">Der erste Satz von Änderungen zeigte Ihnen, wie Sie ermitteln, wann der ursprüngliche Entwurf anzeigte, dass für Variablen nicht `null` festgelegt werden sollte.</span><span class="sxs-lookup"><span data-stu-id="2036e-183">The first set of changes showed you how to discover when the original design indicated that variables shouldn't be set to `null`.</span></span> <span data-ttu-id="2036e-184">Diese Technik wird als **Korrigieren nach Erstellung** bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="2036e-184">The technique is referred to as **correct by construction**.</span></span> <span data-ttu-id="2036e-185">Sie deklarieren, dass ein Objekt und seine Eigenschaften nicht `null` sein können, wenn es erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="2036e-185">You declare that an object and its properties cannot be `null` when it's constructed.</span></span> <span data-ttu-id="2036e-186">Die Flussanalyse des Compilers bietet die Gewissheit, dass diese Eigenschaften nach der Erstellung nicht auf `null` gesetzt sind.</span><span class="sxs-lookup"><span data-stu-id="2036e-186">The compiler's flow analysis provides assurance that those properties aren't set to `null` after construction.</span></span> <span data-ttu-id="2036e-187">Beachten Sie, dass dieser Konstruktor durch externen Code aufgerufen wird, und dieser Code **ignoriert NULL-Werte**.</span><span class="sxs-lookup"><span data-stu-id="2036e-187">Note that this constructor is called by external code, and that code is **nullable oblivious**.</span></span> <span data-ttu-id="2036e-188">Die neue Syntax bietet keine Runtimeüberprüfung.</span><span class="sxs-lookup"><span data-stu-id="2036e-188">The new syntax doesn't provide runtime checking.</span></span> <span data-ttu-id="2036e-189">Externer Code könnte die Flussanalyse des Compilers umgehen.</span><span class="sxs-lookup"><span data-stu-id="2036e-189">External code might circumvent the compiler's flow analysis.</span></span> 

<span data-ttu-id="2036e-190">In anderen Fällen bietet die Struktur einer Klasse andere Hinweise zur Absicht.</span><span class="sxs-lookup"><span data-stu-id="2036e-190">Other times, the structure of a class provides different clues to the intent.</span></span> <span data-ttu-id="2036e-191">Öffnen Sie die *Error.cshtml.cs*-Datei im Ordner *Pages*.</span><span class="sxs-lookup"><span data-stu-id="2036e-191">Open the *Error.cshtml.cs* file in the *Pages* folder.</span></span> <span data-ttu-id="2036e-192">Das `ErrorViewModel` enthält folgenden Code:</span><span class="sxs-lookup"><span data-stu-id="2036e-192">The `ErrorViewModel` contains the following code:</span></span>

[!code-csharp[StarterErrorModel](~/samples/csharp/tutorials/nullable-reference-migration/start/SimpleFeedReader/Pages/Error.cshtml.cs#StartErrorModel)]

<span data-ttu-id="2036e-193">Fügen Sie die `#nullable enable`-Anweisung vor der Klassendeklaration und eine `#nullable restore`-Anweisung dahinter hinzu.</span><span class="sxs-lookup"><span data-stu-id="2036e-193">Add the `#nullable enable` directive before the class declaration, and a `#nullable restore` directive after it.</span></span> <span data-ttu-id="2036e-194">Sie erhalten eine Warnung, das `RequestId` nicht initialisiert ist.</span><span class="sxs-lookup"><span data-stu-id="2036e-194">You'll get one warning that `RequestId` is not initialized.</span></span> <span data-ttu-id="2036e-195">Wenn Sie die Klasse betrachten, sollten Sie entscheiden, dass die `RequestId`-Eigenschaft in einigen Fällen NULL sein sollte.</span><span class="sxs-lookup"><span data-stu-id="2036e-195">By looking at the class, you should decide that the `RequestId` property should be null in some cases.</span></span> <span data-ttu-id="2036e-196">Das Vorhandensein der `ShowRequestId`-Eigenschaft gibt an, dass fehlende Werte möglich sind.</span><span class="sxs-lookup"><span data-stu-id="2036e-196">The existence of the `ShowRequestId` property indicates that missing values are possible.</span></span> <span data-ttu-id="2036e-197">Da `null` gültig ist, fügen Sie `?` dem `string`-Typ hinzu, um anzugeben, dass die `RequestId`-Eigenschaft ein *NULL-Werte zulassender Verweistyp* ist.</span><span class="sxs-lookup"><span data-stu-id="2036e-197">Because `null` is valid, add the `?` on the `string` type to indicate the `RequestId` property is a *nullable reference type*.</span></span> <span data-ttu-id="2036e-198">Die finale Klasse sieht wie im folgenden Beispiel aus:</span><span class="sxs-lookup"><span data-stu-id="2036e-198">The final class looks like the following example:</span></span>

[!code-csharp[FinishedErrorModel](~/samples/csharp/tutorials/nullable-reference-migration/finished/SimpleFeedReader/Pages/Error.cshtml.cs#ErrorModel)]

<span data-ttu-id="2036e-199">Überprüfen Sie die Verwendung der Eigenschaft, und Sie sehen, dass die Eigenschaft auf der entsprechenden Seite vor dem Rendern im Markup auf NULL überprüft wird.</span><span class="sxs-lookup"><span data-stu-id="2036e-199">Check for the uses of the property, and you see that in the associated page, the property is checked for null before rendering it in markup.</span></span> <span data-ttu-id="2036e-200">Das ist eine sichere Verwendung eines NULL-Werte zulassenden Verweistyps, also sind Sie mit dieser Klasse fertig.</span><span class="sxs-lookup"><span data-stu-id="2036e-200">That's a safe use of a nullable reference type, so you're done with this class.</span></span>

## <a name="fixing-nulls-causes-change"></a><span data-ttu-id="2036e-201">Beheben von NULL-Werten führt zu Änderungen</span><span class="sxs-lookup"><span data-stu-id="2036e-201">Fixing nulls causes change</span></span>

<span data-ttu-id="2036e-202">In vielen Fällen führt das Beheben einer Reihe von Warnungen in zugehörigem Code zu neuen Warnungen.</span><span class="sxs-lookup"><span data-stu-id="2036e-202">Frequently, the fix for one set of warnings creates new warnings in related code.</span></span> <span data-ttu-id="2036e-203">Sehen wir uns die Warnungen in Aktion durch Beheben der `index.cshtml.cs`-Klasse an.</span><span class="sxs-lookup"><span data-stu-id="2036e-203">Let's see the warnings in action by fixing the `index.cshtml.cs` class.</span></span> <span data-ttu-id="2036e-204">Öffnen Sie die Datei `index.cshtml.cs`, und überprüfen Sie den Code.</span><span class="sxs-lookup"><span data-stu-id="2036e-204">Open the `index.cshtml.cs` file and examine the code.</span></span> <span data-ttu-id="2036e-205">Diese Datei enthält den Code für die Indexseite:</span><span class="sxs-lookup"><span data-stu-id="2036e-205">This file contains the code behind for the index page:</span></span>

[!code-csharp[StarterIndexModel](~/samples/csharp/tutorials/nullable-reference-migration/start/SimpleFeedReader/Pages/Index.cshtml.cs#IndexModelStart)]

<span data-ttu-id="2036e-206">Fügen Sie die `#nullable enable`-Anweisung hinzu, und Sie sehen zwei Warnungen.</span><span class="sxs-lookup"><span data-stu-id="2036e-206">Add the `#nullable enable` directive and you'll see two warnings.</span></span> <span data-ttu-id="2036e-207">Weder die `ErrorText`-Eigenschaft noch die `NewsItems`-Eigenschaft ist initialisiert.</span><span class="sxs-lookup"><span data-stu-id="2036e-207">Neither the `ErrorText` property nor the `NewsItems` property is initialized.</span></span> <span data-ttu-id="2036e-208">Bei einer Untersuchung dieser Klasse würden Sie zu dem Schluss kommen, dass beide Eigenschaften Nullwerte zulassende Verweistypen sein sollten: Beide haben private Setter.</span><span class="sxs-lookup"><span data-stu-id="2036e-208">An examination of this class would lead you to believe that both properties should be nullable reference types: Both have private setters.</span></span> <span data-ttu-id="2036e-209">Genau einer wird in der `OnGet`-Methode zugewiesen.</span><span class="sxs-lookup"><span data-stu-id="2036e-209">Exactly one is assigned in the `OnGet` method.</span></span> <span data-ttu-id="2036e-210">Bevor Sie Änderungen vornehmen, betrachten Sie die Benutzer beider Eigenschaften.</span><span class="sxs-lookup"><span data-stu-id="2036e-210">Before making changes, look at the consumers of both properties.</span></span> <span data-ttu-id="2036e-211">Auf der Seite selbst wird `ErrorText` vor dem Generieren von Markups für Fehler auf NULL überprüft.</span><span class="sxs-lookup"><span data-stu-id="2036e-211">In the page itself, the `ErrorText` is checked against null before generating markup for any errors.</span></span> <span data-ttu-id="2036e-212">Die `NewsItems`-Sammlung wird auf `null` überprüft, und um sicherzustellen, dass die Sammlung Elemente enthält.</span><span class="sxs-lookup"><span data-stu-id="2036e-212">The `NewsItems` collection is checked against `null`, and checked to ensure the collection has items.</span></span> <span data-ttu-id="2036e-213">Eine schnelle Lösung wäre, beide Eigenschaften zu Nullwerte zulassenden Verweistypen zu machen.</span><span class="sxs-lookup"><span data-stu-id="2036e-213">A quick fix would be to make both properties nullable reference types.</span></span> <span data-ttu-id="2036e-214">Eine bessere Lösung wäre, die Sammlung eines Nullwerte nicht zulassenden Verweistyps zu erstellen und beim Abrufen von Nachrichten der vorhandenen Sammlung Elemente hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="2036e-214">A better fix would be to make the collection a nonnullable reference type, and add items to the existing collection when retrieving news.</span></span> <span data-ttu-id="2036e-215">Die erste Lösung ist, `?` dem `string`-Typ für den `ErrorText` hinzuzufügen:</span><span class="sxs-lookup"><span data-stu-id="2036e-215">The first fix is to add the `?` to the `string` type for the `ErrorText`:</span></span>

[!code-csharp[UpdateErrorText](~/samples/csharp/tutorials/nullable-reference-migration/finished/SimpleFeedReader/Pages/Index.cshtml.cs#UpdateErrorText)]

<span data-ttu-id="2036e-216">Diese Änderung würde anderen Code nicht beeinflussen, da jeder Zugriff auf die `ErrorText`-Eigenschaft bereits durch NULL-Überprüfungen geschützt wurde.</span><span class="sxs-lookup"><span data-stu-id="2036e-216">That change won't ripple through other code, because any access to the `ErrorText` property was already guarded by null checks.</span></span> <span data-ttu-id="2036e-217">Initialisieren Sie als Nächstes die `NewsItems`-Liste, und entfernen Sie den Eigenschaftensetter, und machen Sie ihn zu einer schreibgeschützten Eigenschaft:</span><span class="sxs-lookup"><span data-stu-id="2036e-217">Next, initialize the `NewsItems` list and remove the property setter, making it a readonly property:</span></span>

[!code-csharp[InitializeNewsItems](~/samples/csharp/tutorials/nullable-reference-migration/finished/SimpleFeedReader/Pages/Index.cshtml.cs#InitializeNewsItems)]

<span data-ttu-id="2036e-218">Damit wird die Warnung behoben, jedoch ein Fehler eingeführt.</span><span class="sxs-lookup"><span data-stu-id="2036e-218">That fixed the warning but introduced an error.</span></span> <span data-ttu-id="2036e-219">Die `NewsItems`-Liste ist nun **korrigiert nach Erstellung**, aber der Code, der die Liste in `OnGet` festlegt, muss der neuen API entsprechend geändert werden.</span><span class="sxs-lookup"><span data-stu-id="2036e-219">The `NewsItems` list is now **correct by construction**, but the code that sets the list in `OnGet` must change to match the new API.</span></span> <span data-ttu-id="2036e-220">Rufen Sie anstelle einer Zuweisung `AddRange` auf, um die Nachrichtenelemente der vorhandenen Liste hinzuzufügen:</span><span class="sxs-lookup"><span data-stu-id="2036e-220">Instead of an assignment, call `AddRange` to add the news items to the existing list:</span></span>

[!code-csharp[AddRange](~/samples/csharp/tutorials/nullable-reference-migration/finished/SimpleFeedReader/Pages/Index.cshtml.cs#AddRange)]

<span data-ttu-id="2036e-221">`AddRange` anstelle einer Zuordnung zu verwenden bedeutet, dass die `GetNews`-Methode `IEnumerable` anstelle einer `List` zurückgeben kann.</span><span class="sxs-lookup"><span data-stu-id="2036e-221">Using `AddRange` instead of an assignment means that the `GetNews` method can return an `IEnumerable` instead of a `List`.</span></span> <span data-ttu-id="2036e-222">Das spart eine Zuordnung.</span><span class="sxs-lookup"><span data-stu-id="2036e-222">That saves one allocation.</span></span> <span data-ttu-id="2036e-223">Ändern Sie die Signatur der Methode, und entfernen Sie den `ToList`-Aufruf, wie im folgenden Codebeispiel gezeigt:</span><span class="sxs-lookup"><span data-stu-id="2036e-223">Change the signature of the method, and remove the `ToList` call, as shown in the following code sample:</span></span>

[!code-csharp[GetNews](~/samples/csharp/tutorials/nullable-reference-migration/finished/SimpleFeedReader/Services/NewsService.cs#GetNewsFinished)]

<span data-ttu-id="2036e-224">Ändern der Signatur unterbricht auch einen der Tests.</span><span class="sxs-lookup"><span data-stu-id="2036e-224">Changing the signature breaks one of tests as well.</span></span> <span data-ttu-id="2036e-225">Öffnen Sie die `NewsServiceTests.cs`-Datei im `Services`-Ordner des `SimpleFeedReader.Tests`-Projekts.</span><span class="sxs-lookup"><span data-stu-id="2036e-225">Open the `NewsServiceTests.cs` file in the `Services` folder of the `SimpleFeedReader.Tests` project.</span></span> <span data-ttu-id="2036e-226">Navigieren Sie zum `Returns_News_Stories_Given_Valid_Uri`-Test, und ändern Sie den Typ der `result`-Variablen in `IEnumerable<NewsItem>`.</span><span class="sxs-lookup"><span data-stu-id="2036e-226">Navigate to the `Returns_News_Stories_Given_Valid_Uri` test and change the type of the `result` variable to `IEnumerable<NewsItem>`.</span></span> <span data-ttu-id="2036e-227">Ändern des Typs bedeutet, dass die `Count`-Eigenschaft nicht mehr verfügbar ist, also ersetzen Sie die `Count`-Eigenschaft in `Assert` mit einem Aufruf von `Any()`:</span><span class="sxs-lookup"><span data-stu-id="2036e-227">Changing the type means the `Count` property is no longer available, so replace the `Count` property in the `Assert` with a call to `Any()`:</span></span>

[!code-csharp[FixTests](~/samples/csharp/tutorials/nullable-reference-migration/finished/SimpleFeedReader.Tests/Services/NewsServiceTests.cs#FixTestSignature)]

<span data-ttu-id="2036e-228">Sie müssen ebenfalls eine `using System.Linq`-Anweisung am Anfang der Datei hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="2036e-228">You'll need to add a `using System.Linq` statement to the beginning of the file as well.</span></span>

<span data-ttu-id="2036e-229">Dieser Satz von Änderungen hebt die besondere Berücksichtigung bei der Aktualisierung von Code hervor, der generische Instanziierungen enthält.</span><span class="sxs-lookup"><span data-stu-id="2036e-229">This set of changes highlights special consideration when updating code that includes generic instantiations.</span></span> <span data-ttu-id="2036e-230">Die Liste und die Elemente in der Liste sind nicht NULL-Werte zulassende Typen.</span><span class="sxs-lookup"><span data-stu-id="2036e-230">Both the list and the elements in the list of non-nullable types.</span></span> <span data-ttu-id="2036e-231">Die einen oder anderen oder beide könnten NULL-Werte zulassende Typen sein.</span><span class="sxs-lookup"><span data-stu-id="2036e-231">Either or both could be nullable types.</span></span> <span data-ttu-id="2036e-232">Alle folgenden Deklarationen sind zulässig:</span><span class="sxs-lookup"><span data-stu-id="2036e-232">All the following declarations are allowed:</span></span>

- <span data-ttu-id="2036e-233">`List<NewsStoryViewModel>`: Nullwerte nicht zulassende Liste Nullwerte nicht zulassender Ansichtsmodelle.</span><span class="sxs-lookup"><span data-stu-id="2036e-233">`List<NewsStoryViewModel>`: nonnullable list of nonullable view models.</span></span>
- <span data-ttu-id="2036e-234">`List<NewsStoryViewModel?>`: Nullwerte nicht zulassende Liste Nullwerte zulassender Ansichtsmodelle.</span><span class="sxs-lookup"><span data-stu-id="2036e-234">`List<NewsStoryViewModel?>`: nonnullable list of nullable view models.</span></span>
- <span data-ttu-id="2036e-235">`List<NewsStoryViewModel>?`: Nullwerte zulassende Liste Nullwerte nicht zulassender Ansichtsmodelle.</span><span class="sxs-lookup"><span data-stu-id="2036e-235">`List<NewsStoryViewModel>?`: nullable list of nonnullable view models.</span></span>
- <span data-ttu-id="2036e-236">`List<NewsStoryViewModel?>?`: Nullwerte zulassende Liste Nullwerte zulassender Ansichtsmodelle.</span><span class="sxs-lookup"><span data-stu-id="2036e-236">`List<NewsStoryViewModel?>?`: nullable list of nullable view models.</span></span>

## <a name="interfaces-with-external-code"></a><span data-ttu-id="2036e-237">Schnittstellen mit externem Code</span><span class="sxs-lookup"><span data-stu-id="2036e-237">Interfaces with external code</span></span>

<span data-ttu-id="2036e-238">Da Sie Änderungen an der `NewsService`-Klasse vorgenommen haben, aktivieren Sie die `#nullable enable`-Anmerkung für diese Klasse.</span><span class="sxs-lookup"><span data-stu-id="2036e-238">You've made changes to the `NewsService` class, so turn on the `#nullable enable` annotation for that class.</span></span> <span data-ttu-id="2036e-239">Dadurch werden keine neuen Warnungen generiert.</span><span class="sxs-lookup"><span data-stu-id="2036e-239">This won't generate any new warnings.</span></span> <span data-ttu-id="2036e-240">Eine sorgfältige Prüfung der Klasse könnte jedoch die Veranschaulichung einiger Einschränkungen der Flussanalyse des Compilers erleichtern.</span><span class="sxs-lookup"><span data-stu-id="2036e-240">However, careful examination of the class helps to illustrate some of the limitations of the compiler's flow analysis.</span></span> <span data-ttu-id="2036e-241">Untersuchen Sie den Konstruktor:</span><span class="sxs-lookup"><span data-stu-id="2036e-241">Examine the constructor:</span></span>

[!code-csharp[ServiceConstructor](~/samples/csharp/tutorials/nullable-reference-migration/finished/SimpleFeedReader/Services/NewsService.cs#ServiceConstructor)]

<span data-ttu-id="2036e-242">Der `IMapper`-Parameter ist als Nullwerte nicht zulassender Verweis typisiert.</span><span class="sxs-lookup"><span data-stu-id="2036e-242">The `IMapper` parameter is typed as a nonnullable reference.</span></span> <span data-ttu-id="2036e-243">Er wird vom ASP.NET Core-Infrastrukturcode aufgerufen, sodass der Compiler nicht wirklich weiß, dass der `IMapper` niemals NULL sein wird.</span><span class="sxs-lookup"><span data-stu-id="2036e-243">It's called by ASP.NET Core infrastructure code, so the compiler doesn't really know that the `IMapper` will never be null.</span></span> <span data-ttu-id="2036e-244">Der standardmäßige ASP.NET Core-Abhängigkeitsinjektionscontainer (DI) löst eine Ausnahme aus, wenn er einen notwendigen Dienst nicht auflösen kann, damit der Code korrekt ist.</span><span class="sxs-lookup"><span data-stu-id="2036e-244">The default ASP.NET Core dependency injection (DI) container throws an exception if it can't resolve a necessary service, so the code is correct.</span></span> <span data-ttu-id="2036e-245">Der Compiler kann nicht alle Aufrufe Ihrer öffentlichen APIs überprüfen, auch wenn der Code mit NULL-Werte zulassenden Anmerkungskontexten kompiliert wird.</span><span class="sxs-lookup"><span data-stu-id="2036e-245">The compiler can't validate all calls to your public APIs, even if your code is compiled with nullable annotation contexts enabled.</span></span> <span data-ttu-id="2036e-246">Darüber hinaus können Ihre Bibliotheken von Projekten genutzt werden, für die die Nutzung NULL-Werte zulassender Verweistypen noch nicht festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="2036e-246">Furthermore, your libraries may be consumed by projects that have not yet opted into using nullable reference types.</span></span> <span data-ttu-id="2036e-247">Überprüfen Sie die Eingaben in öffentliche APIs, obwohl Sie sie als Nullwerte nicht zulassende Typen deklariert haben.</span><span class="sxs-lookup"><span data-stu-id="2036e-247">Validate inputs to public APIs even though you've declared them as nonnullable types.</span></span>

## <a name="get-the-code"></a><span data-ttu-id="2036e-248">Abrufen des Codes</span><span class="sxs-lookup"><span data-stu-id="2036e-248">Get the code</span></span>

<span data-ttu-id="2036e-249">Da Sie die Warnungen behoben haben, die Sie in der ersten Testkompilierung identifizierten, können Sie jetzt den NULL-Werte zulassenden Anmerkungskontext für beide Projekte aktivieren.</span><span class="sxs-lookup"><span data-stu-id="2036e-249">You've fixed the warnings you identified in the initial test compile, so now you can turn on the nullable annotation context for both projects.</span></span> <span data-ttu-id="2036e-250">Erstellen Sie die Projekte neu; der Compiler gibt keine Warnungen aus.</span><span class="sxs-lookup"><span data-stu-id="2036e-250">Rebuild the projects; the compiler reports no warnings.</span></span> <span data-ttu-id="2036e-251">Den Code für das fertige Projekt können Sie im GitHub-Repository [dotnet/samples](https://github.com/dotnet/samples/tree/master/csharp/tutorials/nullable-reference-migration/finished) aufrufen.</span><span class="sxs-lookup"><span data-stu-id="2036e-251">You can get the code for the finished project in the [dotnet/samples](https://github.com/dotnet/samples/tree/master/csharp/tutorials/nullable-reference-migration/finished) GitHub repository.</span></span>

<span data-ttu-id="2036e-252">Die neuen Features, die NULL-Werte zulassende Verweistypen unterstützen, helfen Ihnen, mögliche Fehler in der Behandlung von `null`-Werten in Ihrem Code zu suchen und zu beheben.</span><span class="sxs-lookup"><span data-stu-id="2036e-252">The new features that support nullable reference types help you find and fix potential errors in how you handle `null` values in your code.</span></span> <span data-ttu-id="2036e-253">Das Aktivieren des NULL-Werte zulassenden Anmerkungskontexts ermöglicht Ihnen, Ihre Entwurfsabsicht auszudrücken: Einige Variablen sollten niemals NULL sein, andere Variablen können NULL-Werte enthalten.</span><span class="sxs-lookup"><span data-stu-id="2036e-253">Enabling the nullable annotation context allows you to express your design intent: some variables should never be null, other variables may contain null values.</span></span> <span data-ttu-id="2036e-254">Diese Funktionen erleichtern Ihnen, Ihre Entwurfsabsicht zu deklarieren.</span><span class="sxs-lookup"><span data-stu-id="2036e-254">These features make it easier for you to declare your design intent.</span></span> <span data-ttu-id="2036e-255">Auf ähnliche Weise weist der NULL-Werte zulassende Warnungskontext den Compiler an, Warnungen auszugeben, wenn Sie diese Absicht verletzt haben.</span><span class="sxs-lookup"><span data-stu-id="2036e-255">Similarly, the nullable warning context instructs the compiler to issue warnings when you have violated that intent.</span></span> <span data-ttu-id="2036e-256">Diese Warnungen leiten Sie an, Aktualisierungen vorzunehmen, die Ihren Code robuster machen, sodass das Auslösen einer `NullReferenceException` während der Ausführung unwahrscheinlicher wird.</span><span class="sxs-lookup"><span data-stu-id="2036e-256">Those warnings guide you to make updates that make your code more resilient and less likely to throw a `NullReferenceException` during execution.</span></span> <span data-ttu-id="2036e-257">Sie können den Rahmen dieser Kontexte steuern, damit Sie sich auf lokale zu migrierende Codebereiche konzentrieren können, während die übrige Codebasis hiervon unberührt bleibt.</span><span class="sxs-lookup"><span data-stu-id="2036e-257">You can control the scope of these contexts so that you can focus on local areas of code to migrate while the remaining codebase is untouched.</span></span> <span data-ttu-id="2036e-258">In der Praxis können Sie diese Migrationsaufgabe als Teil der regelmäßigen Wartung Ihrer Klassen durchführen.</span><span class="sxs-lookup"><span data-stu-id="2036e-258">In practice, you can make this migration task a part of regular maintenance to your classes.</span></span> <span data-ttu-id="2036e-259">Dieses Tutorial veranschaulicht das Verfahren zum Migrieren einer Anwendung zur Verwendung von NULL-Werte zulassenden Verweistypen.</span><span class="sxs-lookup"><span data-stu-id="2036e-259">This tutorial demonstrated the process to migrate an application to use nullable reference types.</span></span> <span data-ttu-id="2036e-260">Der PR von [Jon Skeet](https://github.com/jskeet) zum Integrieren Nullwerte zulassender Verweistypen in [NodaTime](https://github.com/nodatime/nodatime/pull/1240/commits) bietet Ihnen ein umfangreicheren Beispiel dieses Prozesses aus der realen Welt.</span><span class="sxs-lookup"><span data-stu-id="2036e-260">You can explore a larger real-world example of this process by examining the PR [Jon Skeet](https://github.com/jskeet) made to incorporate nullable reference types into [NodaTime](https://github.com/nodatime/nodatime/pull/1240/commits).</span></span>
