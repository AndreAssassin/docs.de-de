---
title: Verwenden von Delegaten – C#-Programmierhandbuch
ms.custom: seodec18
ms.date: 07/20/2015
helpviewer_keywords:
- delegates [C#], how to use
ms.assetid: 99a2fc27-a32e-4a34-921c-e65497520eec
ms.openlocfilehash: 27f47d74a6e0775588e40760fe54c281a7f5e233
ms.sourcegitcommit: 30a83efb57c468da74e9e218de26cf88d3254597
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 07/20/2019
ms.locfileid: "68363789"
---
# <a name="using-delegates-c-programming-guide"></a><span data-ttu-id="aae99-102">Verwenden von Delegaten (C#-Programmierhandbuch)</span><span class="sxs-lookup"><span data-stu-id="aae99-102">Using Delegates (C# Programming Guide)</span></span>
<span data-ttu-id="aae99-103">Ein [Delegat](../../../csharp/language-reference/keywords/delegate.md) ist ein Typ, der ähnlich einem Funktionszeiger in C und C++ eine Methode sicher kapselt.</span><span class="sxs-lookup"><span data-stu-id="aae99-103">A [delegate](../../../csharp/language-reference/keywords/delegate.md) is a type that safely encapsulates a method, similar to a function pointer in C and C++.</span></span> <span data-ttu-id="aae99-104">Im Gegensatz zu C-Funktionszeigern sind Delegate objektorientiert, typsicher und sicher.</span><span class="sxs-lookup"><span data-stu-id="aae99-104">Unlike C function pointers, delegates are object-oriented, type safe, and secure.</span></span> <span data-ttu-id="aae99-105">Der Typ eines Delegaten wird durch den Namen des Delegaten definiert.</span><span class="sxs-lookup"><span data-stu-id="aae99-105">The type of a delegate is defined by the name of the delegate.</span></span> <span data-ttu-id="aae99-106">Im folgenden Beispiel wird ein Delegat mit dem Namen `Del` deklariert, der eine Methode kapseln kann, die eine [Zeichenfolge](../../../csharp/language-reference/keywords/string.md) als Argument übernimmt und [void](../../../csharp/language-reference/keywords/void.md) zurückgibt:</span><span class="sxs-lookup"><span data-stu-id="aae99-106">The following example declares a delegate named `Del` that can encapsulate a method that takes a [string](../../../csharp/language-reference/keywords/string.md) as an argument and returns [void](../../../csharp/language-reference/keywords/void.md):</span></span>  
  
 [!code-csharp[csProgGuideDelegates#21](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideDelegates/CS/Delegates.cs#21)]  
  
 <span data-ttu-id="aae99-107">Ein Delegatobjekt wird normalerweise durch Angabe des Namens der Methode, die der Delegat umschließt, oder mit einer [anonymen Funktion](../../../csharp/programming-guide/statements-expressions-operators/anonymous-functions.md) erstellt.</span><span class="sxs-lookup"><span data-stu-id="aae99-107">A delegate object is normally constructed by providing the name of the method the delegate will wrap, or with an [anonymous function](../../../csharp/programming-guide/statements-expressions-operators/anonymous-functions.md).</span></span> <span data-ttu-id="aae99-108">Sobald ein Delegat instanziiert ist, wird vom Delegaten ein Methodenaufruf an den Delegaten an diese Methode übergeben.</span><span class="sxs-lookup"><span data-stu-id="aae99-108">Once a delegate is instantiated, a method call made to the delegate will be passed by the delegate to that method.</span></span> <span data-ttu-id="aae99-109">Die vom Aufrufer an den Delegaten übergebenen Parameter werden an die Methode übergeben, und der Rückgabewert von der Methode wird ggf. durch den Delegaten an den Aufrufer zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="aae99-109">The parameters passed to the delegate by the caller are passed to the method, and the return value, if any, from the method is returned to the caller by the delegate.</span></span> <span data-ttu-id="aae99-110">Dies wird als Aufrufen des Delegaten bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="aae99-110">This is known as invoking the delegate.</span></span> <span data-ttu-id="aae99-111">Ein instanziierter Delegat kann wie die eingeschlossene Methode selbst aufgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="aae99-111">An instantiated delegate can be invoked as if it were the wrapped method itself.</span></span> <span data-ttu-id="aae99-112">Beispiel:</span><span class="sxs-lookup"><span data-stu-id="aae99-112">For example:</span></span>  
  
 [!code-csharp[csProgGuideDelegates#22](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideDelegates/CS/Delegates.cs#22)]  
  
 [!code-csharp[csProgGuideDelegates#23](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideDelegates/CS/Delegates.cs#23)]  
  
 <span data-ttu-id="aae99-113">Delegattypen werden von der <xref:System.Delegate>-Klasse im .NET Framework abgeleitet.</span><span class="sxs-lookup"><span data-stu-id="aae99-113">Delegate types are derived from the <xref:System.Delegate> class in the .NET Framework.</span></span> <span data-ttu-id="aae99-114">Delegattypen sind [versiegelt](../../../csharp/language-reference/keywords/sealed.md) – von Ihnen kann nicht abgeleitet werden – und es ist nicht möglich benutzerdefinierte Klassen von <xref:System.Delegate> abzuleiten.</span><span class="sxs-lookup"><span data-stu-id="aae99-114">Delegate types are [sealed](../../../csharp/language-reference/keywords/sealed.md)—they cannot be derived from— and it is not possible to derive custom classes from <xref:System.Delegate>.</span></span> <span data-ttu-id="aae99-115">Da der instanziierte Delegat ein Objekt ist, kann er als Parameter übergeben oder einer Eigenschaft zugewiesen werden.</span><span class="sxs-lookup"><span data-stu-id="aae99-115">Because the instantiated delegate is an object, it can be passed as a parameter, or assigned to a property.</span></span> <span data-ttu-id="aae99-116">Dies ermöglicht es einer Methode, einen Delegaten als Parameter zu akzeptieren und den Delegaten zu einem späteren Zeitpunkt aufzurufen.</span><span class="sxs-lookup"><span data-stu-id="aae99-116">This allows a method to accept a delegate as a parameter, and call the delegate at some later time.</span></span> <span data-ttu-id="aae99-117">Dies wird als asynchroner Rückruf bezeichnet und ist eine häufig verwendete Methode, um einen Aufrufer darüber zu benachrichtigen, dass ein langer Prozess abgeschlossen wurde.</span><span class="sxs-lookup"><span data-stu-id="aae99-117">This is known as an asynchronous callback, and is a common method of notifying a caller when a long process has completed.</span></span> <span data-ttu-id="aae99-118">Wenn ein Delegat auf diese Weise verwendet wird, benötigt der Code, der den Delegaten verwendet, keine Kenntnisse über die Implementierung der verwendeten Methode.</span><span class="sxs-lookup"><span data-stu-id="aae99-118">When a delegate is used in this fashion, the code using the delegate does not need any knowledge of the implementation of the method being used.</span></span> <span data-ttu-id="aae99-119">Die Funktion ähnelt den bereitgestellten Kapselungsschnittstellen.</span><span class="sxs-lookup"><span data-stu-id="aae99-119">The functionality is similar to the encapsulation interfaces provide.</span></span>  
  
 <span data-ttu-id="aae99-120">Ein weiterer häufiger Einsatzbereich von Rückrufen ist die Definition einer benutzerdefinierten Vergleichsmethode und die Übergabe dieses Delegaten an eine Sortiermethode.</span><span class="sxs-lookup"><span data-stu-id="aae99-120">Another common use of callbacks is defining a custom comparison method and passing that delegate to a sort method.</span></span> <span data-ttu-id="aae99-121">Dadurch kann der Code des Aufrufers Teil des Sortieralgorithmus werden.</span><span class="sxs-lookup"><span data-stu-id="aae99-121">It allows the caller's code to become part of the sort algorithm.</span></span> <span data-ttu-id="aae99-122">Im folgenden Beispiel wird der Typ `Del` als Parameter verwendet:</span><span class="sxs-lookup"><span data-stu-id="aae99-122">The following example method uses the `Del` type as a parameter:</span></span>  
  
 [!code-csharp[csProgGuideDelegates#24](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideDelegates/CS/Delegates.cs#24)]  
  
 <span data-ttu-id="aae99-123">Sie können anschließend den oben erstellten Delegaten an diese Methode übergeben:</span><span class="sxs-lookup"><span data-stu-id="aae99-123">You can then pass the delegate created above to that method:</span></span>  
  
 [!code-csharp[csProgGuideDelegates#25](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideDelegates/CS/Delegates.cs#25)]  
  
 <span data-ttu-id="aae99-124">woraufhin die folgende Ausgabe auf der Konsole angezeigt wird:</span><span class="sxs-lookup"><span data-stu-id="aae99-124">and receive the following output to the console:</span></span>  
  
 `The number is: 3`  
  
 <span data-ttu-id="aae99-125">Wenn Sie den Delegaten als Abstraktion verwenden, muss `MethodWithCallback` die Konsole nicht direkt aufrufen, d. h., bei der Entwicklung muss keine Konsole berücksichtigt werden.</span><span class="sxs-lookup"><span data-stu-id="aae99-125">Using the delegate as an abstraction, `MethodWithCallback` does not need to call the console directly—it does not have to be designed with a console in mind.</span></span> <span data-ttu-id="aae99-126">`MethodWithCallback` bereitet einfach eine Zeichenfolge vor und übergibt sie an eine andere Methode.</span><span class="sxs-lookup"><span data-stu-id="aae99-126">What `MethodWithCallback` does is simply prepare a string and pass the string to another method.</span></span> <span data-ttu-id="aae99-127">Dies ist besonders leistungsstark, da eine delegierte Methode eine beliebige Anzahl Parameter verwenden kann.</span><span class="sxs-lookup"><span data-stu-id="aae99-127">This is especially powerful since a delegated method can use any number of parameters.</span></span>  
  
 <span data-ttu-id="aae99-128">Wenn ein Delegat erstellt wurde, um eine Instanzenmethode zu umschließen, verweist der Delegat sowohl auf die Instanz als auch auf die Methode.</span><span class="sxs-lookup"><span data-stu-id="aae99-128">When a delegate is constructed to wrap an instance method, the delegate references both the instance and the method.</span></span> <span data-ttu-id="aae99-129">Ein Delegat kennt nicht den Instanzentyp, abgesehen von der umschlossenen Methode, sodass ein Delegat auf jede Art von Objekt verweisen kann, sofern es eine Methode für das Objekt gibt, die mit der Signatur des Delegaten übereinstimmt.</span><span class="sxs-lookup"><span data-stu-id="aae99-129">A delegate has no knowledge of the instance type aside from the method it wraps, so a delegate can refer to any type of object as long as there is a method on that object that matches the delegate signature.</span></span> <span data-ttu-id="aae99-130">Wenn ein Delegat erstellt wurde, um eine statische Methode zu umschließen, verweist er nur auf die Methode.</span><span class="sxs-lookup"><span data-stu-id="aae99-130">When a delegate is constructed to wrap a static method, it only references the method.</span></span> <span data-ttu-id="aae99-131">Betrachten Sie hierzu die folgenden Deklarationen:</span><span class="sxs-lookup"><span data-stu-id="aae99-131">Consider the following declarations:</span></span>  
  
 [!code-csharp[csProgGuideDelegates#26](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideDelegates/CS/Delegates.cs#26)]  
  
 <span data-ttu-id="aae99-132">Zusammen mit der zuvor dargestellten statischen `DelegateMethod` verfügen Sie jetzt über drei Methoden, die von einer `Del`-Instanz umschlossen werden können.</span><span class="sxs-lookup"><span data-stu-id="aae99-132">Along with the static `DelegateMethod` shown previously, we now have three methods that can be wrapped by a `Del` instance.</span></span>  
  
 <span data-ttu-id="aae99-133">Ein Delegat kann bei Aufruf mehr als eine Methode aufrufen.</span><span class="sxs-lookup"><span data-stu-id="aae99-133">A delegate can call more than one method when invoked.</span></span> <span data-ttu-id="aae99-134">Dies wird als Multicasting bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="aae99-134">This is referred to as multicasting.</span></span> <span data-ttu-id="aae99-135">Um der Liste an Methoden des Delegaten, sprich der Aufrufliste, eine weitere Methode hinzuzufügen, müssen lediglich zwei Delegaten mithilfe der Additions- oder Additionszuweisungsoperatoren ('+' oder '+=') hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="aae99-135">To add an extra method to the delegate's list of methods—the invocation list—simply requires adding two delegates using the addition or addition assignment operators ('+' or '+=').</span></span> <span data-ttu-id="aae99-136">Beispiel:</span><span class="sxs-lookup"><span data-stu-id="aae99-136">For example:</span></span>  
  
 [!code-csharp[csProgGuideDelegates#27](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideDelegates/CS/Delegates.cs#27)]  
  
 <span data-ttu-id="aae99-137">Zu diesem Zeitpunkt enthält `allMethodsDelegate` drei Methoden in der Aufrufliste: `Method1`, `Method2` und `DelegateMethod`.</span><span class="sxs-lookup"><span data-stu-id="aae99-137">At this point `allMethodsDelegate` contains three methods in its invocation list—`Method1`, `Method2`, and `DelegateMethod`.</span></span> <span data-ttu-id="aae99-138">Die ursprünglichen drei Delegaten, `d1`, `d2` und `d3`, bleiben unverändert.</span><span class="sxs-lookup"><span data-stu-id="aae99-138">The original three delegates, `d1`, `d2`, and `d3`, remain unchanged.</span></span> <span data-ttu-id="aae99-139">Wenn `allMethodsDelegate` aufgerufen wird, werden alle drei Methoden nacheinander aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="aae99-139">When `allMethodsDelegate` is invoked, all three methods are called in order.</span></span> <span data-ttu-id="aae99-140">Wenn der Delegat Verweisparameter verwendet, wird der Verweis wiederum nacheinander an jede der drei Methoden übergeben, und alle Änderungen einer Methode sind für die nächste Methode sichtbar.</span><span class="sxs-lookup"><span data-stu-id="aae99-140">If the delegate uses reference parameters, the reference is passed sequentially to each of the three methods in turn, and any changes by one method are visible to the next method.</span></span> <span data-ttu-id="aae99-141">Wenn eine der Methoden eine Ausnahme auslöst, die nicht innerhalb der Methode abgefangen wird, wird diese Ausnahme an den Aufrufer des Delegaten übergeben und keine der nachfolgenden Methoden in der Aufrufliste wird aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="aae99-141">When any of the methods throws an exception that is not caught within the method, that exception is passed to the caller of the delegate and no subsequent methods in the invocation list are called.</span></span> <span data-ttu-id="aae99-142">Wenn der Delegat über einen Rückgabewert und/oder out-Parameter verfügt, gibt er den Rückgabewert und die Parameter der letzten aufgerufenen Methode zurück.</span><span class="sxs-lookup"><span data-stu-id="aae99-142">If the delegate has a return value and/or out parameters, it returns the return value and parameters of the last method invoked.</span></span> <span data-ttu-id="aae99-143">Entfernen Sie eine Methode aus der Aufrufliste, indem Sie den Subtraktions- oder Subtraktionszuweisungsoperator ('-' oder '-=') verwenden.</span><span class="sxs-lookup"><span data-stu-id="aae99-143">To remove a method from the invocation list, use the decrement or decrement assignment operator ('-' or '-=').</span></span> <span data-ttu-id="aae99-144">Beispiel:</span><span class="sxs-lookup"><span data-stu-id="aae99-144">For example:</span></span>  
  
 [!code-csharp[csProgGuideDelegates#28](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideDelegates/CS/Delegates.cs#28)]  
  
 <span data-ttu-id="aae99-145">Da Delegattypen von `System.Delegate` abgeleitet werden, können die Methoden und Eigenschaften, die durch diese Klasse definiert werden, für den Delegaten aufgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="aae99-145">Because delegate types are derived from `System.Delegate`, the methods and properties defined by that class can be called on the delegate.</span></span> <span data-ttu-id="aae99-146">Beispiel: Schreiben Sie Folgendes, um die Anzahl der Methoden in der Aufrufliste eines Delegaten zu ermitteln:</span><span class="sxs-lookup"><span data-stu-id="aae99-146">For example, to find the number of methods in a delegate's invocation list, you may write:</span></span>  
  
 [!code-csharp[csProgGuideDelegates#29](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideDelegates/CS/Delegates.cs#29)]  
  
 <span data-ttu-id="aae99-147">Delegaten mit mehr als einer Methode in der Aufrufliste werden von <xref:System.MulticastDelegate>, einer Unterklasse von `System.Delegate`, abgeleitet.</span><span class="sxs-lookup"><span data-stu-id="aae99-147">Delegates with more than one method in their invocation list derive from <xref:System.MulticastDelegate>, which is a subclass of `System.Delegate`.</span></span> <span data-ttu-id="aae99-148">Der obige Code funktioniert in jedem Fall, da beide Klassen `GetInvocationList` unterstützen.</span><span class="sxs-lookup"><span data-stu-id="aae99-148">The above code works in either case because both classes support `GetInvocationList`.</span></span>  
  
 <span data-ttu-id="aae99-149">Multicastdelegaten werden ausgiebig bei der Ereignisbehandlung verwendet.</span><span class="sxs-lookup"><span data-stu-id="aae99-149">Multicast delegates are used extensively in event handling.</span></span> <span data-ttu-id="aae99-150">Ereignisquellobjekte senden Ereignisbenachrichtigungen an Empfängerobjekte, die für den Erhalt dieses Ereignisses registriert wurden.</span><span class="sxs-lookup"><span data-stu-id="aae99-150">Event source objects send event notifications to recipient objects that have registered to receive that event.</span></span> <span data-ttu-id="aae99-151">Um sich für ein Ereignis zu registrieren, erstellt der Empfänger eine Methode zur Behandlung des Ereignisses, dann erstellt er einen Delegaten für die Methode und übergibt den Delegaten an die Ereignisquelle.</span><span class="sxs-lookup"><span data-stu-id="aae99-151">To register for an event, the recipient creates a method designed to handle the event, then creates a delegate for that method and passes the delegate to the event source.</span></span> <span data-ttu-id="aae99-152">Die Quelle ruft den Delegaten auf, wenn das Ereignis eintritt.</span><span class="sxs-lookup"><span data-stu-id="aae99-152">The source calls the delegate when the event occurs.</span></span> <span data-ttu-id="aae99-153">Der Delegat ruft dann die Ereignisbehandlungsmethode für den Empfänger auf und übermittelt die Ereignisdaten.</span><span class="sxs-lookup"><span data-stu-id="aae99-153">The delegate then calls the event handling method on the recipient, delivering the event data.</span></span> <span data-ttu-id="aae99-154">Der Delegattyp für ein bestimmtes Ereignis wird von der Ereignisquelle definiert.</span><span class="sxs-lookup"><span data-stu-id="aae99-154">The delegate type for a given event is defined by the event source.</span></span> <span data-ttu-id="aae99-155">Weitere Informationen finden Sie unter [Ereignisse](../../../csharp/programming-guide/events/index.md).</span><span class="sxs-lookup"><span data-stu-id="aae99-155">For more, see [Events](../../../csharp/programming-guide/events/index.md).</span></span>  
  
 <span data-ttu-id="aae99-156">Beim Vergleichen von zwei unterschiedlichen zugewiesenen Typen zur Kompilierzeit kommt es zu einem Kompilierungsfehler.</span><span class="sxs-lookup"><span data-stu-id="aae99-156">Comparing delegates of two different types assigned at compile-time will result in a compilation error.</span></span> <span data-ttu-id="aae99-157">Falls die Delegatinstanzen statisch vom Typ `System.Delegate` sind, dann ist der Vergleich zulässig, gibt jedoch zur Laufzeit "False" zurück.</span><span class="sxs-lookup"><span data-stu-id="aae99-157">If the delegate instances are statically of the type `System.Delegate`, then the comparison is allowed, but will return false at run time.</span></span> <span data-ttu-id="aae99-158">Beispiel:</span><span class="sxs-lookup"><span data-stu-id="aae99-158">For example:</span></span>  
  
 [!code-csharp[csProgGuideDelegates#30](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideDelegates/CS/Delegates.cs#30)]  
  
## <a name="see-also"></a><span data-ttu-id="aae99-159">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="aae99-159">See also</span></span>

- [<span data-ttu-id="aae99-160">C#-Programmierhandbuch</span><span class="sxs-lookup"><span data-stu-id="aae99-160">C# Programming Guide</span></span>](../../../csharp/programming-guide/index.md)
- [<span data-ttu-id="aae99-161">Delegaten</span><span class="sxs-lookup"><span data-stu-id="aae99-161">Delegates</span></span>](../../../csharp/programming-guide/delegates/index.md)
- [<span data-ttu-id="aae99-162">Verwenden von Varianz bei Delegaten</span><span class="sxs-lookup"><span data-stu-id="aae99-162">Using Variance in Delegates</span></span>](../../../csharp/programming-guide/concepts/covariance-contravariance/using-variance-in-delegates.md)
- [<span data-ttu-id="aae99-163">Varianz bei Delegaten</span><span class="sxs-lookup"><span data-stu-id="aae99-163">Variance in Delegates</span></span>](../../../csharp/programming-guide/concepts/covariance-contravariance/variance-in-delegates.md)
- [<span data-ttu-id="aae99-164">Verwenden von Varianz für die generischen Delegaten Func und Action</span><span class="sxs-lookup"><span data-stu-id="aae99-164">Using Variance for Func and Action Generic Delegates</span></span>](../../../csharp/programming-guide/concepts/covariance-contravariance/using-variance-for-func-and-action-generic-delegates.md)
- [<span data-ttu-id="aae99-165">Ereignisse</span><span class="sxs-lookup"><span data-stu-id="aae99-165">Events</span></span>](../../../csharp/programming-guide/events/index.md)
