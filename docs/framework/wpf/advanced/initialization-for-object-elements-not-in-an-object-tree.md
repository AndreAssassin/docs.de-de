---
title: Initialisierung für Objektelemente außerhalb einer Objektstruktur
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- logical tree [WPF]
- visual tree [WPF]
- elements [WPF], initializing
- initializing elements [WPF]
ms.assetid: 7b8dfc9b-46ac-4ce8-b7bb-035734d688b7
ms.openlocfilehash: 1a1d956ee7f41ac1ac0fc9bd051a18b9ff438930
ms.sourcegitcommit: 944ddc52b7f2632f30c668815f92b378efd38eea
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 11/03/2019
ms.locfileid: "73459835"
---
# <a name="initialization-for-object-elements-not-in-an-object-tree"></a><span data-ttu-id="85123-102">Initialisierung für Objektelemente außerhalb einer Objektstruktur</span><span class="sxs-lookup"><span data-stu-id="85123-102">Initialization for Object Elements Not in an Object Tree</span></span>
<span data-ttu-id="85123-103">Einige Aspekte der [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]-Initialisierung werden für Prozesse zurückgestellt, die sich in der Regel darauf verlassen, dass das Element entweder mit einer logischen Struktur oder einer visuellen Struktur verbunden wird.</span><span class="sxs-lookup"><span data-stu-id="85123-103">Some aspects of [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] initialization are deferred to processes that typically rely on that element being connected to either the logical tree or visual tree.</span></span> <span data-ttu-id="85123-104">Dieses Thema beschreibt die Schritte, die möglicherweise erforderlich sind, um ein Element zu initialisieren, das nicht mit einer dieser Strukturen verbunden ist.</span><span class="sxs-lookup"><span data-stu-id="85123-104">This topic describes the steps that may be necessary in order to initialize an element that is not connected to either tree.</span></span>  

## <a name="elements-and-the-logical-tree"></a><span data-ttu-id="85123-105">Elemente und die logische Struktur</span><span class="sxs-lookup"><span data-stu-id="85123-105">Elements and the Logical Tree</span></span>  
 <span data-ttu-id="85123-106">Beim Erstellen einer Instanz einer [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]-Klasse im Code sollten Sie bedenken, dass verschiedene Aspekte der Objektinitialisierung für eine [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]-Klasse absichtlich keinen Teil des Codes sind, der beim Aufrufen des Klassenkonstruktors ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="85123-106">When you create an instance of a [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] class in code, you should be aware that several aspects of object initialization for a [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] class are deliberately not a part of the code that is executed when calling the class constructor.</span></span> <span data-ttu-id="85123-107">Insbesondere für eine Steuerelementklasse ist der Großteil der visuellen Darstellung dieses Steuerelements nicht vom Konstruktor definiert.</span><span class="sxs-lookup"><span data-stu-id="85123-107">Particularly for a control class, most of the visual representation of that control is not defined by the constructor.</span></span> <span data-ttu-id="85123-108">Stattdessen wird die visuelle Darstellung durch die Vorlage des Steuerelements definiert.</span><span class="sxs-lookup"><span data-stu-id="85123-108">Instead, the visual representation is defined by the control's template.</span></span> <span data-ttu-id="85123-109">Die Vorlage stammt möglicherweise aus einer Vielzahl von Quellen, ganz oft wird die Vorlage jedoch aus Designstilen.</span><span class="sxs-lookup"><span data-stu-id="85123-109">The template potentially comes from a variety of sources, but most often the template is obtained from theme styles.</span></span> <span data-ttu-id="85123-110">Vorlagen sind eine effektive späte Bindung; die erforderliche Vorlage wird dem fraglichen Steuerelement nicht angefügt, solange das Steuerelement nicht für Layout bereit ist.</span><span class="sxs-lookup"><span data-stu-id="85123-110">Templates are effectively late-binding; the necessary template is not attached to the control in question until the control is ready for layout.</span></span> <span data-ttu-id="85123-111">Das Steuerelement ist so lange nicht für Layout bereit, bis es einer logischen Struktur angefügt wird, die eine Verbindung mit einer Renderingoberfläche auf der Stammebene eingeht.</span><span class="sxs-lookup"><span data-stu-id="85123-111">And the control is not ready for layout until it is attached to a logical tree that connects to a rendering surface at the root.</span></span> <span data-ttu-id="85123-112">Es ist das Rootebenenelement, dass das Rendering aller untergeordneten Elemente initiiert, so wie in der logischen Struktur definiert.</span><span class="sxs-lookup"><span data-stu-id="85123-112">It is that root-level element that initiates the rendering of all of its child elements as defined in the logical tree.</span></span>  
  
 <span data-ttu-id="85123-113">Die visuelle Struktur beteiligt sich auch an diesem Prozess.</span><span class="sxs-lookup"><span data-stu-id="85123-113">The visual tree also participates in this process.</span></span> <span data-ttu-id="85123-114">Elemente, die Teil der visuellen Struktur durch die Vorlagen sind, werden ebenfalls nicht vollständig instanziiert, bis sie verbunden sind.</span><span class="sxs-lookup"><span data-stu-id="85123-114">Elements that are part of the visual tree through the templates are also not fully instantiated until connected.</span></span>  
  
 <span data-ttu-id="85123-115">Die Folgen dieses Verhaltens sind, dass bestimmte Vorgänge, die auf den fertigen visuellen Merkmalen eines Elements basieren, zusätzliche Schritte erfordern.</span><span class="sxs-lookup"><span data-stu-id="85123-115">The consequences of this behavior are that certain operations that rely on the completed visual characteristics of an element require additional steps.</span></span> <span data-ttu-id="85123-116">Ein Beispiel ist, wenn Sie versuchen, visuelle Merkmale einer Klasse abzurufen, die erstellt aber noch nicht einer Struktur angefügt wurde.</span><span class="sxs-lookup"><span data-stu-id="85123-116">An example is if you are attempting to get the visual characteristics of a class that was constructed but not yet attached to a tree.</span></span> <span data-ttu-id="85123-117">Wenn Sie z. b. <xref:System.Windows.Media.Imaging.RenderTargetBitmap.Render%2A> auf einem <xref:System.Windows.Media.Imaging.RenderTargetBitmap> aufzurufen haben und das visuelle Element, das Sie übergeben, ein Element ist, das nicht mit einer Struktur verbunden ist, ist dieses Element erst visuell abgeschlossen, wenn weitere Initialisierungs Schritte ausgeführt wurden.</span><span class="sxs-lookup"><span data-stu-id="85123-117">For instance, if you want to call <xref:System.Windows.Media.Imaging.RenderTargetBitmap.Render%2A> on a <xref:System.Windows.Media.Imaging.RenderTargetBitmap> and the visual you are passing is an element not connected to a tree, that element is not visually complete until additional initialization steps are completed.</span></span>  
  
### <a name="using-begininit-and-endinit-to-initialize-the-element"></a><span data-ttu-id="85123-118">Verwenden von BeginInit und EndInit zum Initialisieren des Elements</span><span class="sxs-lookup"><span data-stu-id="85123-118">Using BeginInit and EndInit to Initialize the Element</span></span>  
 <span data-ttu-id="85123-119">Verschiedene Klassen in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] die <xref:System.ComponentModel.ISupportInitialize>-Schnittstelle implementieren.</span><span class="sxs-lookup"><span data-stu-id="85123-119">Various classes in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] implement the <xref:System.ComponentModel.ISupportInitialize> interface.</span></span> <span data-ttu-id="85123-120">Verwenden Sie die Methoden <xref:System.ComponentModel.ISupportInitialize.BeginInit%2A> und <xref:System.ComponentModel.ISupportInitialize.EndInit%2A> der-Schnittstelle, um einen Bereich im Code anzugeben, der Initialisierungs Schritte enthält (z. b. das Festlegen von Eigenschafts Werten, die sich auf das Rendering auswirken).</span><span class="sxs-lookup"><span data-stu-id="85123-120">You use the <xref:System.ComponentModel.ISupportInitialize.BeginInit%2A> and <xref:System.ComponentModel.ISupportInitialize.EndInit%2A> methods of the interface to denote a region in your code that contains initialization steps (such as setting property values that affect rendering).</span></span> <span data-ttu-id="85123-121">Nachdem <xref:System.ComponentModel.ISupportInitialize.EndInit%2A> in der Sequenz aufgerufen wurde, kann das Layoutsystem das Element verarbeiten und mit der Suche nach einem impliziten Stil beginnen.</span><span class="sxs-lookup"><span data-stu-id="85123-121">After <xref:System.ComponentModel.ISupportInitialize.EndInit%2A> is called in the sequence, the layout system can process the element and start looking for an implicit style.</span></span>  
  
 <span data-ttu-id="85123-122">Wenn das Element, für das Sie Eigenschaften festlegen, eine <xref:System.Windows.FrameworkElement> oder <xref:System.Windows.FrameworkContentElement> abgeleitete Klasse ist, können Sie die Klassen Versionen von <xref:System.Windows.FrameworkElement.BeginInit%2A> und <xref:System.Windows.FrameworkElement.EndInit%2A> anstelle von Umwandlungen in <xref:System.ComponentModel.ISupportInitialize>aufzurufen.</span><span class="sxs-lookup"><span data-stu-id="85123-122">If the element you are setting properties on is a <xref:System.Windows.FrameworkElement> or <xref:System.Windows.FrameworkContentElement> derived class, then you can call the class versions of <xref:System.Windows.FrameworkElement.BeginInit%2A> and <xref:System.Windows.FrameworkElement.EndInit%2A> rather than casting to <xref:System.ComponentModel.ISupportInitialize>.</span></span>  
  
### <a name="sample-code"></a><span data-ttu-id="85123-123">Beispielcode</span><span class="sxs-lookup"><span data-stu-id="85123-123">Sample Code</span></span>  
 <span data-ttu-id="85123-124">Das folgende Beispiel zeigt Beispielcode für eine Konsolenanwendung, die Renderingerweiterungen und <xref:System.Windows.Markup.XamlReader.Load%28System.IO.Stream%29?displayProperty=nameWithType> einer losen [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] Datei verwendet, um die ordnungsgemäße Platzierung <xref:System.Windows.FrameworkElement.BeginInit%2A> und <xref:System.Windows.FrameworkElement.EndInit%2A> von anderen API-aufrufen zu veranschaulichen, die Eigenschaften anpassen, die sich auf das Rendering auswirken.</span><span class="sxs-lookup"><span data-stu-id="85123-124">The following example is sample code for a console application that uses rendering APIs and <xref:System.Windows.Markup.XamlReader.Load%28System.IO.Stream%29?displayProperty=nameWithType> of a loose [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] file to illustrate the proper placement of <xref:System.Windows.FrameworkElement.BeginInit%2A> and <xref:System.Windows.FrameworkElement.EndInit%2A> around other API calls that adjust properties that affect rendering.</span></span>  
  
 <span data-ttu-id="85123-125">Das Beispiel veranschaulicht nur die Hauptfunktion.</span><span class="sxs-lookup"><span data-stu-id="85123-125">The example illustrates the main function only.</span></span> <span data-ttu-id="85123-126">Die Funktionen `Rasterize` und `Save` (nicht dargestellt) sind Hilfsfunktionen, die die Verarbeitung und E/A erledigen.</span><span class="sxs-lookup"><span data-stu-id="85123-126">The functions `Rasterize` and `Save` (not shown) are utility functions that take care of image processing and IO.</span></span>  
  
 [!code-csharp[InitializeElements#Main](~/samples/snippets/csharp/VS_Snippets_Wpf/InitializeElements/CSharp/initializeelements.cs#main)]
 [!code-vb[InitializeElements#Main](~/samples/snippets/visualbasic/VS_Snippets_Wpf/InitializeElements/VisualBasic/initializeelements.vb#main)]  
  
## <a name="see-also"></a><span data-ttu-id="85123-127">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="85123-127">See also</span></span>

- [<span data-ttu-id="85123-128">Strukturen in WPF</span><span class="sxs-lookup"><span data-stu-id="85123-128">Trees in WPF</span></span>](trees-in-wpf.md)
- [<span data-ttu-id="85123-129">Übersicht über das WPF-Grafikrendering</span><span class="sxs-lookup"><span data-stu-id="85123-129">WPF Graphics Rendering Overview</span></span>](../graphics-multimedia/wpf-graphics-rendering-overview.md)
- [<span data-ttu-id="85123-130">Übersicht über XAML (WPF)</span><span class="sxs-lookup"><span data-stu-id="85123-130">XAML Overview (WPF)</span></span>](../../../desktop-wpf/fundamentals/xaml.md)
