---
title: Übersicht über Freezable-Objekte
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- Freezable objects [WPF], description
- unfreezing Freezable objects [WPF]
- classes [WPF], Freezable
ms.assetid: 89c71692-4f43-4057-b611-67c6a8a863a2
ms.openlocfilehash: b1887afd19407898d8de1d92252e29778899fb89
ms.sourcegitcommit: 011314e0c8eb4cf4a11d92078f58176c8c3efd2d
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 02/09/2020
ms.locfileid: "77095189"
---
# <a name="freezable-objects-overview"></a><span data-ttu-id="2deb9-102">Übersicht über Freezable-Objekte</span><span class="sxs-lookup"><span data-stu-id="2deb9-102">Freezable Objects Overview</span></span>

<span data-ttu-id="2deb9-103">In diesem Thema wird beschrieben, wie <xref:System.Windows.Freezable>-Objekte effektiv verwendet und erstellt werden, die spezielle Funktionen zur Verbesserung der Anwendungsleistung bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="2deb9-103">This topic describes how to effectively use and create <xref:System.Windows.Freezable> objects, which provide special features that can help improve application performance.</span></span> <span data-ttu-id="2deb9-104">Beispiele für frei wählbare Objekte sind Pinsel, Stifte, Transformationen, Geometrien und Animationen.</span><span class="sxs-lookup"><span data-stu-id="2deb9-104">Examples of freezable objects include brushes, pens, transformations, geometries, and animations.</span></span>

<a name="whatisafreezable"></a>

## <a name="what-is-a-freezable"></a><span data-ttu-id="2deb9-105">Was ist ein frei wählbarer?</span><span class="sxs-lookup"><span data-stu-id="2deb9-105">What Is a Freezable?</span></span>

<span data-ttu-id="2deb9-106">Ein <xref:System.Windows.Freezable> ist ein spezieller Objekttyp, der zwei Zustände aufweist: nicht fixiert und fixiert.</span><span class="sxs-lookup"><span data-stu-id="2deb9-106">A <xref:System.Windows.Freezable> is a special type of object that has two states: unfrozen and frozen.</span></span> <span data-ttu-id="2deb9-107">Wenn das Objekt nicht fixiert ist, verhält sich ein <xref:System.Windows.Freezable> wie ein beliebiges anderes Objekt.</span><span class="sxs-lookup"><span data-stu-id="2deb9-107">When unfrozen, a <xref:System.Windows.Freezable> appears to behave like any other object.</span></span> <span data-ttu-id="2deb9-108">Wenn Sie eingefroren ist, kann eine <xref:System.Windows.Freezable> nicht mehr geändert werden.</span><span class="sxs-lookup"><span data-stu-id="2deb9-108">When frozen, a <xref:System.Windows.Freezable> can no longer be modified.</span></span>

<span data-ttu-id="2deb9-109">Ein <xref:System.Windows.Freezable> stellt ein <xref:System.Windows.Freezable.Changed> Ereignis bereit, mit dem Beobachter über Änderungen am Objekt benachrichtigt werden können.</span><span class="sxs-lookup"><span data-stu-id="2deb9-109">A <xref:System.Windows.Freezable> provides a <xref:System.Windows.Freezable.Changed> event to notify observers of any modifications to the object.</span></span> <span data-ttu-id="2deb9-110">Das Einfrieren einer <xref:System.Windows.Freezable> kann die Leistung verbessern, da Sie keine Ressourcen mehr für Änderungs Benachrichtigungen aufwenden muss.</span><span class="sxs-lookup"><span data-stu-id="2deb9-110">Freezing a <xref:System.Windows.Freezable> can improve its performance, because it no longer needs to spend resources on change notifications.</span></span> <span data-ttu-id="2deb9-111">Eine fixierte <xref:System.Windows.Freezable> kann auch Thread übergreifend freigegeben werden, während eine nicht fixierte <xref:System.Windows.Freezable> nicht.</span><span class="sxs-lookup"><span data-stu-id="2deb9-111">A frozen <xref:System.Windows.Freezable> can also be shared across threads, while an unfrozen <xref:System.Windows.Freezable> cannot.</span></span>

<span data-ttu-id="2deb9-112">Obwohl die <xref:System.Windows.Freezable>-Klasse viele Anwendungen enthält, sind die meisten <xref:System.Windows.Freezable> Objekte in [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] mit dem Grafik Subsystem verknüpft.</span><span class="sxs-lookup"><span data-stu-id="2deb9-112">Although the <xref:System.Windows.Freezable> class has many applications, most <xref:System.Windows.Freezable> objects in [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] are related to the graphics sub-system.</span></span>

<span data-ttu-id="2deb9-113">Die <xref:System.Windows.Freezable>-Klasse vereinfacht die Verwendung bestimmter Grafiksystem Objekte und kann dabei helfen, die Anwendungsleistung zu verbessern.</span><span class="sxs-lookup"><span data-stu-id="2deb9-113">The <xref:System.Windows.Freezable> class makes it easier to use certain graphics system objects and can help improve application performance.</span></span> <span data-ttu-id="2deb9-114">Beispiele für Typen, die von <xref:System.Windows.Freezable> erben, sind die Klassen <xref:System.Windows.Media.Brush>, <xref:System.Windows.Media.Transform>und <xref:System.Windows.Media.Geometry>.</span><span class="sxs-lookup"><span data-stu-id="2deb9-114">Examples of types that inherit from <xref:System.Windows.Freezable> include the <xref:System.Windows.Media.Brush>, <xref:System.Windows.Media.Transform>, and <xref:System.Windows.Media.Geometry> classes.</span></span> <span data-ttu-id="2deb9-115">Da Sie nicht verwaltete Ressourcen enthalten, muss das System diese Objekte auf Änderungen überwachen und dann die entsprechenden nicht verwalteten Ressourcen aktualisieren, wenn Änderungen am ursprünglichen Objekt vorgenommen werden.</span><span class="sxs-lookup"><span data-stu-id="2deb9-115">Because they contain unmanaged resources, the system must monitor these objects for modifications, and then update their corresponding unmanaged resources when there is a change to the original object.</span></span> <span data-ttu-id="2deb9-116">Selbst wenn Sie ein Grafiksystem Objekt nicht tatsächlich ändern, muss das System trotzdem einige Ressourcen für die Überwachung des Objekts aufwenden, falls Sie es ändern.</span><span class="sxs-lookup"><span data-stu-id="2deb9-116">Even if you don't actually modify a graphics system object, the system must still spend some of its resources monitoring the object, in case you do change it.</span></span>

<span data-ttu-id="2deb9-117">Nehmen Sie beispielsweise an, Sie erstellen einen <xref:System.Windows.Media.SolidColorBrush> Pinsel und verwenden ihn, um den Hintergrund einer Schaltfläche zu zeichnen.</span><span class="sxs-lookup"><span data-stu-id="2deb9-117">For example, suppose you create a <xref:System.Windows.Media.SolidColorBrush> brush and use it to paint the background of a button.</span></span>

[!code-csharp[freezablesample_procedural#FrozenExamplePart1](~/samples/snippets/csharp/VS_Snippets_Wpf/freezablesample_procedural/CSharp/freezablesample.cs#frozenexamplepart1)]
[!code-vb[freezablesample_procedural#FrozenExamplePart1](~/samples/snippets/visualbasic/VS_Snippets_Wpf/freezablesample_procedural/visualbasic/freezablesample.vb#frozenexamplepart1)]

<span data-ttu-id="2deb9-118">Wenn die Schaltfläche gerendert wird, verwendet das [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] Grafik-unter System die Informationen, die Sie angegeben haben, um eine Gruppe von Pixeln zu zeichnen, um die Darstellung einer Schaltfläche zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="2deb9-118">When the button is rendered, the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] graphics sub-system uses the information you provided to paint a group of pixels to create the appearance of a button.</span></span> <span data-ttu-id="2deb9-119">Obwohl Sie einen Pinsel mit voll Tonfarbe verwendet haben, um zu beschreiben, wie die Schaltfläche gezeichnet werden soll, führt der Pinsel mit voll Tonfarbe das Zeichnen nicht aus.</span><span class="sxs-lookup"><span data-stu-id="2deb9-119">Although you used a solid color brush to describe how the button should be painted, your solid color brush doesn't actually do the painting.</span></span> <span data-ttu-id="2deb9-120">Das Grafiksystem generiert schnelle, Low-Level-Objekte für die Schaltfläche und den Pinsel, und es handelt sich um die Objekte, die auf dem Bildschirm tatsächlich angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="2deb9-120">The graphics system generates fast, low-level objects for the button and the brush, and it is those objects that actually appear on the screen.</span></span>

<span data-ttu-id="2deb9-121">Wenn Sie den Pinsel ändern, müssten diese Objekte auf niedriger Ebene erneut generiert werden.</span><span class="sxs-lookup"><span data-stu-id="2deb9-121">If you were to modify the brush, those low-level objects would have to be regenerated.</span></span> <span data-ttu-id="2deb9-122">Die auffüllbare Klasse bietet einem Pinsel die Möglichkeit, die entsprechenden generierten Objekte auf niedriger Ebene zu finden und bei Änderungen zu aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="2deb9-122">The freezable class is what gives a brush the ability to find its corresponding generated, low-level objects and to update them when it changes.</span></span> <span data-ttu-id="2deb9-123">Wenn diese Fähigkeit aktiviert ist, wird der Pinsel als "nicht eingefroren" bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="2deb9-123">When this ability is enabled, the brush is said to be "unfrozen."</span></span>

<span data-ttu-id="2deb9-124">Mit der <xref:System.Windows.Freezable.Freeze%2A>-Methode eines frei wählbaren s können Sie diese selbst Aktualisierungs Fähigkeit deaktivieren.</span><span class="sxs-lookup"><span data-stu-id="2deb9-124">A freezable's <xref:System.Windows.Freezable.Freeze%2A> method enables you to disable this self-updating ability.</span></span> <span data-ttu-id="2deb9-125">Mit dieser Methode können Sie den Pinsel als "eingefroren" oder als nicht änderbar festlegen.</span><span class="sxs-lookup"><span data-stu-id="2deb9-125">You can use this method to make the brush become "frozen," or unmodifiable.</span></span>

> [!NOTE]
> <span data-ttu-id="2deb9-126">Nicht jedes frei wählbare Objekt kann eingefroren werden.</span><span class="sxs-lookup"><span data-stu-id="2deb9-126">Not every Freezable object can be frozen.</span></span> <span data-ttu-id="2deb9-127">Um das Auslösen eines <xref:System.InvalidOperationException>zu vermeiden, überprüfen Sie den Wert der <xref:System.Windows.Freezable.CanFreeze%2A>-Eigenschaft des frei wählbaren Objekts, um zu bestimmen, ob er eingefroren werden kann, bevor versucht wird, ihn zu fixieren</span><span class="sxs-lookup"><span data-stu-id="2deb9-127">To avoid throwing an <xref:System.InvalidOperationException>, check the value of the Freezable object's <xref:System.Windows.Freezable.CanFreeze%2A> property to determine whether it can be frozen before attempting to freeze it.</span></span>

[!code-csharp[freezablesample_procedural#FrozenExamplePart2](~/samples/snippets/csharp/VS_Snippets_Wpf/freezablesample_procedural/CSharp/freezablesample.cs#frozenexamplepart2)]
[!code-vb[freezablesample_procedural#FrozenExamplePart2](~/samples/snippets/visualbasic/VS_Snippets_Wpf/freezablesample_procedural/visualbasic/freezablesample.vb#frozenexamplepart2)]

<span data-ttu-id="2deb9-128">Wenn Sie nicht mehr die Möglichkeit haben, eine frei wählbare zu ändern, bietet das Einfrieren Leistungsvorteile.</span><span class="sxs-lookup"><span data-stu-id="2deb9-128">When you no longer need to modify a freezable, freezing it provides performance benefits.</span></span> <span data-ttu-id="2deb9-129">Wenn Sie in diesem Beispiel den Pinsel fixieren würden, muss das Grafiksystem nicht mehr auf Änderungen überwachen.</span><span class="sxs-lookup"><span data-stu-id="2deb9-129">If you were to freeze the brush in this example, the graphics system would no longer need to monitor it for changes.</span></span> <span data-ttu-id="2deb9-130">Das Grafiksystem kann auch andere Optimierungen vornehmen, da es weiß, dass sich der Pinsel nicht ändert.</span><span class="sxs-lookup"><span data-stu-id="2deb9-130">The graphics system can also make other optimizations, because it knows the brush won't change.</span></span>

> [!NOTE]
> <span data-ttu-id="2deb9-131">Aus Gründen der praktische Arbeit bleiben frei wählbare Objekte nicht fixiert, es sei denn, Sie fixieren Sie explizit.</span><span class="sxs-lookup"><span data-stu-id="2deb9-131">For convenience, freezable objects remain unfrozen unless you explicitly freeze them.</span></span>

<a name="frozenfreezables"></a>

## <a name="using-freezables"></a><span data-ttu-id="2deb9-132">Verwenden von frei wählbaren Elementen</span><span class="sxs-lookup"><span data-stu-id="2deb9-132">Using Freezables</span></span>

<span data-ttu-id="2deb9-133">Die Verwendung eines nicht fixierten, nicht fixierbaren Objekts ähnelt der Verwendung eines beliebigen anderen Objekt Typs.</span><span class="sxs-lookup"><span data-stu-id="2deb9-133">Using an unfrozen freezable is like using any other type of object.</span></span> <span data-ttu-id="2deb9-134">Im folgenden Beispiel wird die Farbe einer <xref:System.Windows.Media.SolidColorBrush> von Gelb in rot geändert, nachdem Sie verwendet wurde, um den Hintergrund einer Schaltfläche zu zeichnen.</span><span class="sxs-lookup"><span data-stu-id="2deb9-134">In the following example, the color of a <xref:System.Windows.Media.SolidColorBrush> is changed from yellow to red after it's used to paint the background of a button.</span></span> <span data-ttu-id="2deb9-135">Das Grafiksystem arbeitet im Hintergrund, um die Schaltfläche automatisch von Gelb in rot zu ändern, wenn der Bildschirm das nächste Mal aktualisiert wird.</span><span class="sxs-lookup"><span data-stu-id="2deb9-135">The graphics system works behind the scenes to automatically change the button from yellow to red the next time the screen is refreshed.</span></span>

[!code-csharp[freezablesample_procedural#UnFrozenExampleShort](~/samples/snippets/csharp/VS_Snippets_Wpf/freezablesample_procedural/CSharp/freezablesample.cs#unfrozenexampleshort)]
[!code-vb[freezablesample_procedural#UnFrozenExampleShort](~/samples/snippets/visualbasic/VS_Snippets_Wpf/freezablesample_procedural/visualbasic/freezablesample.vb#unfrozenexampleshort)]

### <a name="freezing-a-freezable"></a><span data-ttu-id="2deb9-136">Einfrieren eines frei wählbaren</span><span class="sxs-lookup"><span data-stu-id="2deb9-136">Freezing a Freezable</span></span>

<span data-ttu-id="2deb9-137">Um einen <xref:System.Windows.Freezable> nicht änderbar zu machen, nennen Sie dessen <xref:System.Windows.Freezable.Freeze%2A>-Methode.</span><span class="sxs-lookup"><span data-stu-id="2deb9-137">To make a <xref:System.Windows.Freezable> unmodifiable, you call its <xref:System.Windows.Freezable.Freeze%2A> method.</span></span> <span data-ttu-id="2deb9-138">Wenn Sie ein Objekt fixieren, das frei wählbare Objekte enthält, werden diese Objekte ebenfalls eingefroren.</span><span class="sxs-lookup"><span data-stu-id="2deb9-138">When you freeze an object that contains freezable objects, those objects are frozen as well.</span></span> <span data-ttu-id="2deb9-139">Wenn Sie z. b. eine <xref:System.Windows.Media.PathGeometry>fixieren, werden die darin enthaltenen Abbildungen und Segmente ebenfalls eingefroren.</span><span class="sxs-lookup"><span data-stu-id="2deb9-139">For example, if you freeze a <xref:System.Windows.Media.PathGeometry>, the figures and segments it contains would be frozen too.</span></span>

<span data-ttu-id="2deb9-140">Ein frei wählbares **kann nicht** eingefroren werden, wenn Folgendes zutrifft:</span><span class="sxs-lookup"><span data-stu-id="2deb9-140">A Freezable **can't** be frozen if any of the following are true:</span></span>

- <span data-ttu-id="2deb9-141">Sie verfügt über animierte oder Daten gebundene Eigenschaften.</span><span class="sxs-lookup"><span data-stu-id="2deb9-141">It has animated or data bound properties.</span></span>

- <span data-ttu-id="2deb9-142">Sie verfügt über Eigenschaften, die von einer dynamischen Ressource festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="2deb9-142">It has properties set by a dynamic resource.</span></span> <span data-ttu-id="2deb9-143">(Weitere Informationen zu dynamischen Ressourcen finden Sie in den [XAML-Ressourcen](../../../desktop-wpf/fundamentals/xaml-resources-define.md) .)</span><span class="sxs-lookup"><span data-stu-id="2deb9-143">(See the [XAML Resources](../../../desktop-wpf/fundamentals/xaml-resources-define.md) for more information about dynamic resources.)</span></span>

- <span data-ttu-id="2deb9-144">Sie enthält <xref:System.Windows.Freezable> untergeordneten Objekten, die nicht eingefroren werden können.</span><span class="sxs-lookup"><span data-stu-id="2deb9-144">It contains <xref:System.Windows.Freezable> sub-objects that can't be frozen.</span></span>

<span data-ttu-id="2deb9-145">Wenn diese Bedingungen falsch sind und Sie die <xref:System.Windows.Freezable>nicht ändern möchten, sollten Sie diese fixieren, um die zuvor beschriebenen Leistungsvorteile zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="2deb9-145">If these conditions are false, and you don't intend to modify the <xref:System.Windows.Freezable>, then you should freeze it to gain the performance benefits described earlier.</span></span>

<span data-ttu-id="2deb9-146">Nachdem Sie die <xref:System.Windows.Freezable.Freeze%2A>-Methode eines frei wählbaren aufgerufen haben, kann Sie nicht mehr geändert werden.</span><span class="sxs-lookup"><span data-stu-id="2deb9-146">Once you call a freezable's <xref:System.Windows.Freezable.Freeze%2A> method, it can no longer be modified.</span></span> <span data-ttu-id="2deb9-147">Der Versuch, ein fixierte Objekt zu ändern, bewirkt, dass eine <xref:System.InvalidOperationException> ausgelöst wird.</span><span class="sxs-lookup"><span data-stu-id="2deb9-147">Attempting to modify a frozen object causes an <xref:System.InvalidOperationException> to be thrown.</span></span> <span data-ttu-id="2deb9-148">Der folgende Code löst eine Ausnahme aus, da versucht wird, den Pinsel zu ändern, nachdem er eingefroren wurde.</span><span class="sxs-lookup"><span data-stu-id="2deb9-148">The following code throws an exception, because we attempt to modify the brush after it's been frozen.</span></span>

[!code-csharp[freezablesample_procedural#ExceptionExample](~/samples/snippets/csharp/VS_Snippets_Wpf/freezablesample_procedural/CSharp/freezablesample.cs#exceptionexample)]
[!code-vb[freezablesample_procedural#ExceptionExample](~/samples/snippets/visualbasic/VS_Snippets_Wpf/freezablesample_procedural/visualbasic/freezablesample.vb#exceptionexample)]

<span data-ttu-id="2deb9-149">Um zu vermeiden, dass diese Ausnahme ausgelöst wird, können Sie die <xref:System.Windows.Freezable.IsFrozen%2A>-Methode verwenden, um zu bestimmen, ob ein <xref:System.Windows.Freezable> eingefroren ist.</span><span class="sxs-lookup"><span data-stu-id="2deb9-149">To avoid throwing this exception, you can use the <xref:System.Windows.Freezable.IsFrozen%2A> method to determine whether a <xref:System.Windows.Freezable> is frozen.</span></span>

[!code-csharp[freezablesample_procedural#CheckIsFrozenExample](~/samples/snippets/csharp/VS_Snippets_Wpf/freezablesample_procedural/CSharp/freezablesample.cs#checkisfrozenexample)]
[!code-vb[freezablesample_procedural#CheckIsFrozenExample](~/samples/snippets/visualbasic/VS_Snippets_Wpf/freezablesample_procedural/visualbasic/freezablesample.vb#checkisfrozenexample)]

<span data-ttu-id="2deb9-150">Im vorangehenden Codebeispiel wurde mit der <xref:System.Windows.Freezable.Clone%2A>-Methode eine änderbare Kopie von einem fixierten-Objekt erstellt.</span><span class="sxs-lookup"><span data-stu-id="2deb9-150">In the preceding code example, a modifiable copy was made of a frozen object using the <xref:System.Windows.Freezable.Clone%2A> method.</span></span> <span data-ttu-id="2deb9-151">Im nächsten Abschnitt wird das Klonen ausführlicher erläutert.</span><span class="sxs-lookup"><span data-stu-id="2deb9-151">The next section discusses cloning in more detail.</span></span>

> [!NOTE]
> <span data-ttu-id="2deb9-152">Da eine fixierte freisetzbare nicht animiert werden kann, erstellt das Animationssystem automatisch änderbare Klone von fixierten <xref:System.Windows.Freezable> Objekten, wenn Sie versuchen, Sie mit einem <xref:System.Windows.Media.Animation.Storyboard>zu animieren.</span><span class="sxs-lookup"><span data-stu-id="2deb9-152">Because a frozen freezable cannot be animated, the animation system will automatically create modifiable clones of frozen <xref:System.Windows.Freezable> objects when you try to animate them with a <xref:System.Windows.Media.Animation.Storyboard>.</span></span> <span data-ttu-id="2deb9-153">Um den durch das Klonen verursachten Leistungs Aufwand zu vermeiden, lassen Sie ein Objekt nicht fixiert, wenn Sie es animieren möchten.</span><span class="sxs-lookup"><span data-stu-id="2deb9-153">To eliminate the performance overhead caused by cloning, leave an object unfrozen if you intend to animate it.</span></span> <span data-ttu-id="2deb9-154">Weitere Informationen zur Animation mit Storyboards finden Sie in der [Übersicht über Storyboards](../graphics-multimedia/storyboards-overview.md).</span><span class="sxs-lookup"><span data-stu-id="2deb9-154">For more information about animating with storyboards, see the [Storyboards Overview](../graphics-multimedia/storyboards-overview.md).</span></span>

### <a name="freezing-from-markup"></a><span data-ttu-id="2deb9-155">Einfrieren von Markup</span><span class="sxs-lookup"><span data-stu-id="2deb9-155">Freezing from Markup</span></span>

<span data-ttu-id="2deb9-156">Um ein im Markup deklariertes <xref:System.Windows.Freezable> Objekt zu fixieren, verwenden Sie das `PresentationOptions:Freeze`-Attribut.</span><span class="sxs-lookup"><span data-stu-id="2deb9-156">To freeze a <xref:System.Windows.Freezable> object declared in markup, you use the `PresentationOptions:Freeze` attribute.</span></span> <span data-ttu-id="2deb9-157">Im folgenden Beispiel wird ein <xref:System.Windows.Media.SolidColorBrush> als Seiten Ressource deklariert und fixiert.</span><span class="sxs-lookup"><span data-stu-id="2deb9-157">In the following example, a <xref:System.Windows.Media.SolidColorBrush> is declared as a page resource and frozen.</span></span> <span data-ttu-id="2deb9-158">Sie wird dann verwendet, um den Hintergrund einer Schaltfläche festzulegen.</span><span class="sxs-lookup"><span data-stu-id="2deb9-158">It is then used to set the background of a button.</span></span>

[!code-xaml[FreezableSample#FreezeFromMarkupWholePage](~/samples/snippets/csharp/VS_Snippets_Wpf/FreezableSample/CS/FreezeFromMarkupExample.xaml#freezefrommarkupwholepage)]

<span data-ttu-id="2deb9-159">Um das `Freeze`-Attribut zu verwenden, müssen Sie den Präsentations Optionen-Namespace zuordnen: `http://schemas.microsoft.com/winfx/2006/xaml/presentation/options`.</span><span class="sxs-lookup"><span data-stu-id="2deb9-159">To use the `Freeze` attribute, you must map to the presentation options namespace: `http://schemas.microsoft.com/winfx/2006/xaml/presentation/options`.</span></span> <span data-ttu-id="2deb9-160">`PresentationOptions` ist das empfohlene Präfix für die Zuordnung dieses Namespace:</span><span class="sxs-lookup"><span data-stu-id="2deb9-160">`PresentationOptions` is the recommended prefix for mapping this namespace:</span></span>

```xaml
xmlns:PresentationOptions="http://schemas.microsoft.com/winfx/2006/xaml/presentation/options"
```

<span data-ttu-id="2deb9-161">Da nicht alle XAML-Reader dieses Attribut erkennen, empfiehlt es sich, das [MC: Ignorable-Attribut](mc-ignorable-attribute.md) zu verwenden, um das `Presentation:Freeze` Attribut als Ignorable zu markieren:</span><span class="sxs-lookup"><span data-stu-id="2deb9-161">Because not all XAML readers recognize this attribute, it's recommended that you use the [mc:Ignorable Attribute](mc-ignorable-attribute.md) to mark the `Presentation:Freeze` attribute as ignorable:</span></span>

```xaml
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="PresentationOptions"
```

<span data-ttu-id="2deb9-162">Weitere Informationen finden Sie auf der Seite " [MC: Ignorable Attribute](mc-ignorable-attribute.md) ".</span><span class="sxs-lookup"><span data-stu-id="2deb9-162">For more information, see the [mc:Ignorable Attribute](mc-ignorable-attribute.md) page.</span></span>

### <a name="unfreezing-a-freezable"></a><span data-ttu-id="2deb9-163">"Einfrieren" eines frei wählbaren</span><span class="sxs-lookup"><span data-stu-id="2deb9-163">"Unfreezing" a Freezable</span></span>

<span data-ttu-id="2deb9-164">Nachdem Sie eingefroren ist, kann ein <xref:System.Windows.Freezable> nie geändert oder nicht eingefroren werden. Sie können jedoch einen nicht fixierten Klon mithilfe der <xref:System.Windows.Freezable.Clone%2A>-oder <xref:System.Windows.Freezable.CloneCurrentValue%2A>-Methode erstellen.</span><span class="sxs-lookup"><span data-stu-id="2deb9-164">Once frozen, a <xref:System.Windows.Freezable> can never be modified or unfrozen; however, you can create an unfrozen clone using the <xref:System.Windows.Freezable.Clone%2A> or <xref:System.Windows.Freezable.CloneCurrentValue%2A> method.</span></span>

<span data-ttu-id="2deb9-165">Im folgenden Beispiel wird der Hintergrund der Schaltfläche mit einem Pinsel festgelegt, und der Pinsel wird dann fixiert.</span><span class="sxs-lookup"><span data-stu-id="2deb9-165">In the following example, the button's background is set with a brush and that brush is then frozen.</span></span> <span data-ttu-id="2deb9-166">Eine nicht fixierte Kopie wird aus dem Pinsel mithilfe der <xref:System.Windows.Freezable.Clone%2A>-Methode erstellt.</span><span class="sxs-lookup"><span data-stu-id="2deb9-166">An unfrozen copy is made of the brush using the <xref:System.Windows.Freezable.Clone%2A> method.</span></span> <span data-ttu-id="2deb9-167">Der Klon wird geändert und verwendet, um den Hintergrund der Schaltfläche von Gelb in rot zu ändern.</span><span class="sxs-lookup"><span data-stu-id="2deb9-167">The clone is modified and used to change the button's background from yellow to red.</span></span>

[!code-csharp[freezablesample_procedural#CloneExample](~/samples/snippets/csharp/VS_Snippets_Wpf/freezablesample_procedural/CSharp/freezablesample.cs#cloneexample)]
[!code-vb[freezablesample_procedural#CloneExample](~/samples/snippets/visualbasic/VS_Snippets_Wpf/freezablesample_procedural/visualbasic/freezablesample.vb#cloneexample)]

> [!NOTE]
> <span data-ttu-id="2deb9-168">Unabhängig davon, welche Klon Methode Sie verwenden, werden Animationen nie in den neuen <xref:System.Windows.Freezable>kopiert.</span><span class="sxs-lookup"><span data-stu-id="2deb9-168">Regardless of which clone method you use, animations are never copied to the new <xref:System.Windows.Freezable>.</span></span>

<span data-ttu-id="2deb9-169">Die Methoden <xref:System.Windows.Freezable.Clone%2A> und <xref:System.Windows.Freezable.CloneCurrentValue%2A> ergeben Tiefe Kopien der frei wählbaren.</span><span class="sxs-lookup"><span data-stu-id="2deb9-169">The <xref:System.Windows.Freezable.Clone%2A> and <xref:System.Windows.Freezable.CloneCurrentValue%2A> methods produce deep copies of the freezable.</span></span> <span data-ttu-id="2deb9-170">Wenn das freisetzbare Objekt andere fixierte, freisetzbare Objekte enthält, werden diese auch geklont und als änderbar festgelegt.</span><span class="sxs-lookup"><span data-stu-id="2deb9-170">If the freezable contains other frozen freezable objects, they are also cloned and made modifiable.</span></span> <span data-ttu-id="2deb9-171">Wenn Sie z. b. eine fixierte <xref:System.Windows.Media.PathGeometry> Klonen, damit Sie geändert werden kann, werden die darin enthaltenen Abbildungen und Segmente ebenfalls kopiert und als änderbar festgelegt.</span><span class="sxs-lookup"><span data-stu-id="2deb9-171">For example, if you clone a frozen <xref:System.Windows.Media.PathGeometry> to make it modifiable, the figures and segments it contains are also copied and made modifiable.</span></span>

<a name="createyourownfreezableclass"></a>

## <a name="creating-your-own-freezable-class"></a><span data-ttu-id="2deb9-172">Erstellen einer eigenen, frei wählbaren Klasse</span><span class="sxs-lookup"><span data-stu-id="2deb9-172">Creating Your Own Freezable Class</span></span>

<span data-ttu-id="2deb9-173">Eine Klasse, die von <xref:System.Windows.Freezable> abgeleitet wird, erhält die folgenden Funktionen.</span><span class="sxs-lookup"><span data-stu-id="2deb9-173">A class that derives from <xref:System.Windows.Freezable> gains the following features.</span></span>

- <span data-ttu-id="2deb9-174">Sonderzustände: schreibgeschützt (fixiert) und beschreibbar.</span><span class="sxs-lookup"><span data-stu-id="2deb9-174">Special states: a read-only (frozen) and a writable state.</span></span>

- <span data-ttu-id="2deb9-175">Thread Sicherheit: eine fixierte <xref:System.Windows.Freezable> kann über mehrere Threads hinweg gemeinsam genutzt werden.</span><span class="sxs-lookup"><span data-stu-id="2deb9-175">Thread safety: a frozen <xref:System.Windows.Freezable> can be shared across threads.</span></span>

- <span data-ttu-id="2deb9-176">Ausführliche Änderungs Benachrichtigung: im Gegensatz zu anderen <xref:System.Windows.DependencyObject>s bieten frei wählbare Objekte Änderungs Benachrichtigungen, wenn sich untergeordnete Eigenschaftswerte ändern.</span><span class="sxs-lookup"><span data-stu-id="2deb9-176">Detailed change notification: Unlike other <xref:System.Windows.DependencyObject>s, Freezable objects provide change notifications when sub-property values change.</span></span>

- <span data-ttu-id="2deb9-177">Einfaches Klonen: die Klasse, die frei wählbar ist, hat bereits mehrere Methoden implementiert, die Tiefe Klone ergeben.</span><span class="sxs-lookup"><span data-stu-id="2deb9-177">Easy cloning: the Freezable class has already implemented several methods that produce deep clones.</span></span>

<span data-ttu-id="2deb9-178">Ein <xref:System.Windows.Freezable> ist ein Typ von <xref:System.Windows.DependencyObject>und verwendet daher das Abhängigkeits Eigenschaften System.</span><span class="sxs-lookup"><span data-stu-id="2deb9-178">A <xref:System.Windows.Freezable> is a type of <xref:System.Windows.DependencyObject>, and therefore uses the dependency property system.</span></span> <span data-ttu-id="2deb9-179">Die Klasseneigenschaften müssen keine Abhängigkeits Eigenschaften sein, aber die Verwendung von Abhängigkeits Eigenschaften verringert die Menge an Code, den Sie schreiben müssen, da die <xref:System.Windows.Freezable> Klasse mit Abhängigkeits Eigenschaften entworfen wurde.</span><span class="sxs-lookup"><span data-stu-id="2deb9-179">Your class properties don't have to be dependency properties, but using dependency properties will reduce the amount of code you have to write, because the <xref:System.Windows.Freezable> class was designed with dependency properties in mind.</span></span> <span data-ttu-id="2deb9-180">Weitere Informationen zum Abhängigkeits Eigenschafts System finden Sie unter [Übersicht über Abhängigkeits Eigenschaften](dependency-properties-overview.md).</span><span class="sxs-lookup"><span data-stu-id="2deb9-180">For more information about the dependency property system, see the [Dependency Properties Overview](dependency-properties-overview.md).</span></span>

<span data-ttu-id="2deb9-181">Jede <xref:System.Windows.Freezable> Unterklasse muss die <xref:System.Windows.Freezable.CreateInstanceCore%2A>-Methode überschreiben.</span><span class="sxs-lookup"><span data-stu-id="2deb9-181">Every <xref:System.Windows.Freezable> subclass must override the <xref:System.Windows.Freezable.CreateInstanceCore%2A> method.</span></span> <span data-ttu-id="2deb9-182">Wenn Ihre Klasse Abhängigkeits Eigenschaften für alle Ihre Daten verwendet, sind Sie fertig.</span><span class="sxs-lookup"><span data-stu-id="2deb9-182">If your class uses dependency properties for all its data, you're finished.</span></span>

<span data-ttu-id="2deb9-183">Wenn Ihre Klasse Datenelemente für nicht-Abhängigkeits Eigenschaften enthält, müssen Sie auch die folgenden Methoden überschreiben:</span><span class="sxs-lookup"><span data-stu-id="2deb9-183">If your class contains non-dependency property data members, you must also override the following methods:</span></span>

- <xref:System.Windows.Freezable.CloneCore%2A>

- <xref:System.Windows.Freezable.CloneCurrentValueCore%2A>

- <xref:System.Windows.Freezable.GetAsFrozenCore%2A>

- <xref:System.Windows.Freezable.GetCurrentValueAsFrozenCore%2A>

- <xref:System.Windows.Freezable.FreezeCore%2A>

<span data-ttu-id="2deb9-184">Außerdem müssen Sie die folgenden Regeln für den Zugriff auf und das Schreiben von Datenmembern beachten, die keine Abhängigkeits Eigenschaften sind:</span><span class="sxs-lookup"><span data-stu-id="2deb9-184">You must also observe the following rules for accessing and writing to data members that are not dependency properties:</span></span>

- <span data-ttu-id="2deb9-185">Zum Anfang einer API, die nicht-Abhängigkeits eigenschaftendatenmember liest, wird die <xref:System.Windows.Freezable.ReadPreamble%2A>-Methode aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="2deb9-185">At the beginning of any API that reads non-dependency property data members, call the <xref:System.Windows.Freezable.ReadPreamble%2A> method.</span></span>

- <span data-ttu-id="2deb9-186">Zum Anfang einer API, die nicht-Abhängigkeits eigenschaftendatenmember schreibt, wird die <xref:System.Windows.Freezable.WritePreamble%2A>-Methode aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="2deb9-186">At the beginning of any API that writes non-dependency property data members, call the <xref:System.Windows.Freezable.WritePreamble%2A> method.</span></span> <span data-ttu-id="2deb9-187">(Nachdem Sie <xref:System.Windows.Freezable.WritePreamble%2A> in einer API aufgerufen haben, müssen Sie keinen zusätzlichen Aufruf an <xref:System.Windows.Freezable.ReadPreamble%2A> tätigen, wenn Sie auch nicht-Abhängigkeits eigenschaftendatenmember lesen.)</span><span class="sxs-lookup"><span data-stu-id="2deb9-187">(Once you've called <xref:System.Windows.Freezable.WritePreamble%2A> in an API, you don't need to make an additional call to <xref:System.Windows.Freezable.ReadPreamble%2A> if you also read non-dependency property data members.)</span></span>

- <span data-ttu-id="2deb9-188">Ruft die <xref:System.Windows.Freezable.WritePostscript%2A>-Methode auf, bevor Methoden beendet werden, die in Datenelemente ohne Abhängigkeits Eigenschaften schreiben.</span><span class="sxs-lookup"><span data-stu-id="2deb9-188">Call the <xref:System.Windows.Freezable.WritePostscript%2A> method before exiting methods that write to non-dependency property data members.</span></span>

<span data-ttu-id="2deb9-189">Wenn die Klasse nicht-Abhängigkeits Eigenschafts Datenmember enthält, die <xref:System.Windows.DependencyObject>-Objekten sind, müssen Sie auch die <xref:System.Windows.Freezable.OnFreezablePropertyChanged%2A>-Methode jedes Mal, wenn Sie einen ihrer Werte ändern, auch dann aufzurufen, wenn Sie den-Member auf `null`festlegen.</span><span class="sxs-lookup"><span data-stu-id="2deb9-189">If your class contains non-dependency-property data members that are <xref:System.Windows.DependencyObject> objects, you must also call the <xref:System.Windows.Freezable.OnFreezablePropertyChanged%2A> method each time you change one of their values, even if you're setting the member to `null`.</span></span>

> [!NOTE]
> <span data-ttu-id="2deb9-190">Es ist sehr wichtig, dass Sie jede <xref:System.Windows.Freezable> Methode, die Sie überschreiben, mit einem-Befehl der Basis Implementierung beginnen.</span><span class="sxs-lookup"><span data-stu-id="2deb9-190">It's very important that you begin each <xref:System.Windows.Freezable> method you override with a call to the base implementation.</span></span>

<span data-ttu-id="2deb9-191">Ein Beispiel für eine benutzerdefinierte <xref:System.Windows.Freezable>-Klasse finden Sie im Beispiel für eine [Benutzerdefinierte Animation](https://github.com/Microsoft/WPF-Samples/tree/master/Animation/CustomAnimation).</span><span class="sxs-lookup"><span data-stu-id="2deb9-191">For an example of a custom <xref:System.Windows.Freezable> class, see the [Custom Animation Sample](https://github.com/Microsoft/WPF-Samples/tree/master/Animation/CustomAnimation).</span></span>

## <a name="see-also"></a><span data-ttu-id="2deb9-192">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="2deb9-192">See also</span></span>

- <xref:System.Windows.Freezable>
- [<span data-ttu-id="2deb9-193">Benutzerdefiniertes Animationsbeispiel</span><span class="sxs-lookup"><span data-stu-id="2deb9-193">Custom Animation Sample</span></span>](https://github.com/Microsoft/WPF-Samples/tree/master/Animation/CustomAnimation)
- [<span data-ttu-id="2deb9-194">Übersicht über Abhängigkeitseigenschaften</span><span class="sxs-lookup"><span data-stu-id="2deb9-194">Dependency Properties Overview</span></span>](dependency-properties-overview.md)
- [<span data-ttu-id="2deb9-195">Benutzerdefinierte Abhängigkeitseigenschaften</span><span class="sxs-lookup"><span data-stu-id="2deb9-195">Custom Dependency Properties</span></span>](custom-dependency-properties.md)
