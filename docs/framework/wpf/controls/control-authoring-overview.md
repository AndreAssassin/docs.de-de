---
title: Übersicht über das Erstellen von Steuerelementen
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- controls [WPF], authoring overview
- authoring overview for controls [WPF]
ms.assetid: 3d864748-cff0-4e63-9b23-d8e5a635b28f
ms.openlocfilehash: fe7704b9366bf46f0c9965f78ce441000ead6334
ms.sourcegitcommit: 944ddc52b7f2632f30c668815f92b378efd38eea
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 11/03/2019
ms.locfileid: "73460782"
---
# <a name="control-authoring-overview"></a><span data-ttu-id="b27c9-102">Übersicht über das Erstellen von Steuerelementen</span><span class="sxs-lookup"><span data-stu-id="b27c9-102">Control Authoring Overview</span></span>

<span data-ttu-id="b27c9-103">Dank der Erweiterbarkeit des [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]-Steuerelementmodells ist das Erstellen neuer Steuerelemente nur selten erforderlich.</span><span class="sxs-lookup"><span data-stu-id="b27c9-103">The extensibility of the [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] control model greatly reduces the need to create a new control.</span></span> <span data-ttu-id="b27c9-104">In bestimmten Fällen lässt sich das Erstellen benutzerdefinierter Steuerelemente dennoch nicht vermeiden.</span><span class="sxs-lookup"><span data-stu-id="b27c9-104">However, in certain cases you may still need to create a custom control.</span></span> <span data-ttu-id="b27c9-105">In diesem Thema werden die Funktionen, dank deren Sie auf das Erstellen neuer Steuerelementen in den meisten Fällen verzichten können, sowie verschiedene Modelle zum Erstellen von Steuerelementen in [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] behandelt.</span><span class="sxs-lookup"><span data-stu-id="b27c9-105">This topic discusses the features that minimize your need to create a custom control and the different control authoring models in [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)].</span></span> <span data-ttu-id="b27c9-106">Außerdem wird in diesem Thema auch das Erstellen eines neuen Steuerelements veranschaulicht.</span><span class="sxs-lookup"><span data-stu-id="b27c9-106">This topic also demonstrates how to create a new control.</span></span>

<a name="when_to_write_a_new_control"></a>

## <a name="alternatives-to-writing-a-new-control"></a><span data-ttu-id="b27c9-107">Alternativen zum Erstellen eines neuen Steuerelements</span><span class="sxs-lookup"><span data-stu-id="b27c9-107">Alternatives to Writing a New Control</span></span>

<span data-ttu-id="b27c9-108">In der Vergangenheit waren Sie bei der Anpassung eines vorhandenen Steuerelements auf die Bearbeitung seiner Standardeigenschaften beschränkt. Sie konnten z.B. die Hintergrundfarbe, die Rahmenbreite sowie die Schriftgröße ändern.</span><span class="sxs-lookup"><span data-stu-id="b27c9-108">Historically, if you wanted to get a customized experience from an existing control, you were limited to changing the standard properties of the control, such as background color, border width, and font size.</span></span> <span data-ttu-id="b27c9-109">Falls Sie die Darstellung oder das Verhalten eines Steuerelements über diese vordefinierten Parameter hinaus erweitern wollten, waren Sie auf das Erstellen eines neuen Steuerelements angewiesen. Die übliche Vorgehensweise war die Vererbung von einem vorhandenen Steuerelement samt der Überschreibung der für das Zeichnen des Steuerelements zuständigen Methode.</span><span class="sxs-lookup"><span data-stu-id="b27c9-109">If you wished to extend the appearance or behavior of a control beyond these predefined parameters, you would need to create a new control, usually by inheriting from an existing control and overriding the method responsible for drawing the control.</span></span>  <span data-ttu-id="b27c9-110">Diese Option steht Ihnen zwar weiterhin zur Verfügung, mit dem reichen Inhaltsmodel von [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] sowie seinen Stilen, Vorlagen und Triggern können Sie jedoch die vorhandenen Steuerelemente auf eine vielfältige Art und Weise anzupassen.</span><span class="sxs-lookup"><span data-stu-id="b27c9-110">Although that is still an option, [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] enables to you customize existing controls by using its rich content model, styles, templates, and triggers.</span></span> <span data-ttu-id="b27c9-111">In der folgenden Liste finden Sie Beispiele für die Verwendung dieser Funktionen zum Erstellen einer benutzerdefinierten und konsistenten Umgebung, ohne ein neues Steuerelement erstellen zu müssen.</span><span class="sxs-lookup"><span data-stu-id="b27c9-111">The following list gives examples of how these features can be used to create custom and consistent experiences without having to create a new control.</span></span>

- <span data-ttu-id="b27c9-112">**Multimediainhalte.**</span><span class="sxs-lookup"><span data-stu-id="b27c9-112">**Rich Content.**</span></span> <span data-ttu-id="b27c9-113">Viele [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]-Standardsteuerelemente unterstützen Multimediainhalte.</span><span class="sxs-lookup"><span data-stu-id="b27c9-113">Many of the standard [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] controls support rich content.</span></span> <span data-ttu-id="b27c9-114">Beispielsweise ist die Content-Eigenschaft eines <xref:System.Windows.Controls.Button> vom Typ <xref:System.Object>, sodass in einem <xref:System.Windows.Controls.Button>theoretisch alles angezeigt werden kann.</span><span class="sxs-lookup"><span data-stu-id="b27c9-114">For example, the content property of a <xref:System.Windows.Controls.Button> is of type <xref:System.Object>, so theoretically anything can be displayed on a <xref:System.Windows.Controls.Button>.</span></span>  <span data-ttu-id="b27c9-115">Wenn eine Schaltfläche ein Bild und Text anzeigen soll, können Sie einem <xref:System.Windows.Controls.StackPanel> ein Bild und eine <xref:System.Windows.Controls.TextBlock> hinzufügen und die <xref:System.Windows.Controls.StackPanel> der <xref:System.Windows.Controls.ContentControl.Content%2A>-Eigenschaft zuweisen.</span><span class="sxs-lookup"><span data-stu-id="b27c9-115">To have a button display an image and text, you can add an image and a <xref:System.Windows.Controls.TextBlock> to a <xref:System.Windows.Controls.StackPanel> and assign the <xref:System.Windows.Controls.StackPanel> to the <xref:System.Windows.Controls.ContentControl.Content%2A> property.</span></span> <span data-ttu-id="b27c9-116">Da die Steuerelemente visuelle [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]-Elemente sowie beliebige Daten anzeigen können, ist es zwecks der Unterstützung einer komplexen Visualisierung selten notwendig, neue Steuerelemente zu erstellen oder vorhandene Steuerelemente zu ändern.</span><span class="sxs-lookup"><span data-stu-id="b27c9-116">Because the controls can display [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] visual elements and arbitrary data, there is less need to create a new control or to modify an existing control to support a complex visualization.</span></span> <span data-ttu-id="b27c9-117">Weitere Informationen zum Inhalts Modell für <xref:System.Windows.Controls.Button> und andere Inhalts Modelle in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]finden Sie unter [WPF-Inhalts Modell](wpf-content-model.md).</span><span class="sxs-lookup"><span data-stu-id="b27c9-117">For more information about the content model for <xref:System.Windows.Controls.Button> and other content models in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], see [WPF Content Model](wpf-content-model.md).</span></span>

- <span data-ttu-id="b27c9-118">**Stile.**</span><span class="sxs-lookup"><span data-stu-id="b27c9-118">**Styles.**</span></span> <span data-ttu-id="b27c9-119">Ein <xref:System.Windows.Style> ist eine Auflistung von Werten, die Eigenschaften für ein Steuerelement darstellen.</span><span class="sxs-lookup"><span data-stu-id="b27c9-119">A <xref:System.Windows.Style> is a collection of values that represent properties for a control.</span></span> <span data-ttu-id="b27c9-120">Mit Stilen können Sie eine wiederverwendbare Darstellung der erwünschten Gestaltung und des erwünschten Verhaltens der Steuerelemente erstellen, ohne ein neues Steuerelement erstellen zu müssen.</span><span class="sxs-lookup"><span data-stu-id="b27c9-120">By using styles, you can create a reusable representation of a desired control appearance and behavior without writing a new control.</span></span> <span data-ttu-id="b27c9-121">Angenommen, Sie möchten, dass alle <xref:System.Windows.Controls.TextBlock> Steuerelemente eine rote, Arial Schriftart mit einem Schrift Grad von 14 haben.</span><span class="sxs-lookup"><span data-stu-id="b27c9-121">For example, assume that you want all of your <xref:System.Windows.Controls.TextBlock> controls to have red, Arial font with a font size of 14.</span></span> <span data-ttu-id="b27c9-122">Sie können einen Stil als eine Ressource anlegen und die jeweiligen Eigenschaften entsprechend festlegen.</span><span class="sxs-lookup"><span data-stu-id="b27c9-122">You can create a style as a resource and set the appropriate properties accordingly.</span></span> <span data-ttu-id="b27c9-123">Anschließend wird jede <xref:System.Windows.Controls.TextBlock>, die Sie der Anwendung hinzufügen, dieselbe Darstellung aufweisen.</span><span class="sxs-lookup"><span data-stu-id="b27c9-123">Then every <xref:System.Windows.Controls.TextBlock> that you add to your application will have the same appearance.</span></span>

- <span data-ttu-id="b27c9-124">**Datenvorlagen.**</span><span class="sxs-lookup"><span data-stu-id="b27c9-124">**Data Templates.**</span></span> <span data-ttu-id="b27c9-125">Mit einem <xref:System.Windows.DataTemplate> können Sie anpassen, wie Daten in einem Steuerelement angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="b27c9-125">A <xref:System.Windows.DataTemplate> enables you to customize how data is displayed on a control.</span></span> <span data-ttu-id="b27c9-126">Beispielsweise kann ein <xref:System.Windows.DataTemplate> verwendet werden, um anzugeben, wie Daten in einem <xref:System.Windows.Controls.ListBox>angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="b27c9-126">For example, a <xref:System.Windows.DataTemplate> can be used to specify how data is displayed in a <xref:System.Windows.Controls.ListBox>.</span></span>  <span data-ttu-id="b27c9-127">Weitere Beispiele finden Sie unter [Übersicht über Datenvorlagen](../data/data-templating-overview.md).</span><span class="sxs-lookup"><span data-stu-id="b27c9-127">For an example of this, see [Data Templating Overview](../data/data-templating-overview.md).</span></span>  <span data-ttu-id="b27c9-128">Zusätzlich zur Anpassung der Darstellung von Daten kann eine <xref:System.Windows.DataTemplate> Benutzeroberflächen Elemente enthalten, die Ihnen ein hohes Maß an Flexibilität in benutzerdefinierten Benutzeroberflächen bietet.</span><span class="sxs-lookup"><span data-stu-id="b27c9-128">In addition to customizing the appearance of data, a <xref:System.Windows.DataTemplate> can include UI elements, which gives you a lot of flexibility in custom UIs.</span></span>  <span data-ttu-id="b27c9-129">Beispielsweise können Sie mithilfe einer <xref:System.Windows.DataTemplate>eine <xref:System.Windows.Controls.ComboBox> erstellen, in der jedes Element ein Kontrollkästchen enthält.</span><span class="sxs-lookup"><span data-stu-id="b27c9-129">For example, by using a <xref:System.Windows.DataTemplate>, you can create a <xref:System.Windows.Controls.ComboBox> in which each item contains a check box.</span></span>

- <span data-ttu-id="b27c9-130">**Steuerelementvorlagen.**</span><span class="sxs-lookup"><span data-stu-id="b27c9-130">**Control Templates.**</span></span> <span data-ttu-id="b27c9-131">Viele Steuerelemente in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] eine <xref:System.Windows.Controls.ControlTemplate> verwenden, um die Struktur und die Darstellung des Steuer Elements zu definieren, die die Darstellung eines-Steuer Elements von der Funktionalität des-Steuer Elements trennt.</span><span class="sxs-lookup"><span data-stu-id="b27c9-131">Many controls in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] use a <xref:System.Windows.Controls.ControlTemplate> to define the control's structure and appearance, which separates the appearance of a control from the functionality of the control.</span></span> <span data-ttu-id="b27c9-132">Sie können die Darstellung eines Steuer Elements drastisch ändern, indem Sie dessen <xref:System.Windows.Controls.ControlTemplate>neu definieren.</span><span class="sxs-lookup"><span data-stu-id="b27c9-132">You can drastically change the appearance of a control by redefining its <xref:System.Windows.Controls.ControlTemplate>.</span></span>  <span data-ttu-id="b27c9-133">Nehmen wir z.B. an, dass Sie ein Steuerelement wie eine Ampel aussehen lassen möchten.</span><span class="sxs-lookup"><span data-stu-id="b27c9-133">For example, suppose you want a control that looks like a stoplight.</span></span> <span data-ttu-id="b27c9-134">Dieses Steuerelement hat eine einfache Benutzeroberfläche und Funktionalität.</span><span class="sxs-lookup"><span data-stu-id="b27c9-134">This control has a simple user interface and functionality.</span></span>  <span data-ttu-id="b27c9-135">Das Steuerelement besteht aus drei Kreisen, von denen jeweils nur ein einziger leuchten kann.</span><span class="sxs-lookup"><span data-stu-id="b27c9-135">The control is three circles, only one of which can be lit up at a time.</span></span> <span data-ttu-id="b27c9-136">Nach einiger Reflektion können Sie feststellen, dass eine <xref:System.Windows.Controls.RadioButton> nur jeweils die Funktionalität der einzelnen Elemente bietet, aber die Standarddarstellung des <xref:System.Windows.Controls.RadioButton> sieht nicht so aus, wie die Beleuchtung in einem stoplight.</span><span class="sxs-lookup"><span data-stu-id="b27c9-136">After some reflection, you might realize that a <xref:System.Windows.Controls.RadioButton> offers the functionality of only one being selected at a time, but the default appearance of the <xref:System.Windows.Controls.RadioButton> looks nothing like the lights on a stoplight.</span></span>  <span data-ttu-id="b27c9-137">Da die <xref:System.Windows.Controls.RadioButton> eine Steuerelement Vorlage zum Definieren Ihrer Darstellung verwendet, ist es einfach, die <xref:System.Windows.Controls.ControlTemplate> so zu definieren, dass Sie den Anforderungen des Steuer Elements entspricht, und mithilfe von Options Feldern das stoplight zu machen.</span><span class="sxs-lookup"><span data-stu-id="b27c9-137">Because the <xref:System.Windows.Controls.RadioButton> uses a control template to define its appearance, it is easy to redefine the <xref:System.Windows.Controls.ControlTemplate> to fit the requirements of the control, and use radio buttons to make your stoplight.</span></span>

  > [!NOTE]
  > <span data-ttu-id="b27c9-138">Obwohl eine <xref:System.Windows.Controls.RadioButton> einen <xref:System.Windows.DataTemplate>verwenden kann, ist in diesem Beispiel ein <xref:System.Windows.DataTemplate> nicht ausreichend.</span><span class="sxs-lookup"><span data-stu-id="b27c9-138">Although a <xref:System.Windows.Controls.RadioButton> can use a <xref:System.Windows.DataTemplate>, a <xref:System.Windows.DataTemplate> is not sufficient in this example.</span></span>  <span data-ttu-id="b27c9-139">Der <xref:System.Windows.DataTemplate> der die Darstellung des Inhalts eines Steuer Elements definiert.</span><span class="sxs-lookup"><span data-stu-id="b27c9-139">The <xref:System.Windows.DataTemplate> defines the appearance of the content of a control.</span></span> <span data-ttu-id="b27c9-140">Im Fall einer <xref:System.Windows.Controls.RadioButton>wird der Inhalt auf der rechten Seite des Kreises angezeigt, der angibt, ob die <xref:System.Windows.Controls.RadioButton> ausgewählt ist.</span><span class="sxs-lookup"><span data-stu-id="b27c9-140">In the case of a <xref:System.Windows.Controls.RadioButton>, the content is whatever appears to the right of the circle that indicates whether the <xref:System.Windows.Controls.RadioButton> is selected.</span></span>  <span data-ttu-id="b27c9-141">Im Beispiel mit der Ampel brauchen Sie lediglich das Optionsfeld als einen Kreis darzustellen, das „aufleuchten“ kann.</span><span class="sxs-lookup"><span data-stu-id="b27c9-141">In the example of the stoplight, the radio button needs just be a circle that can "light up."</span></span> <span data-ttu-id="b27c9-142">Da sich die Darstellungs Anforderung für das Ampel von der Standarddarstellung der <xref:System.Windows.Controls.RadioButton>unterscheidet, ist es erforderlich, die <xref:System.Windows.Controls.ControlTemplate>neu zu definieren.</span><span class="sxs-lookup"><span data-stu-id="b27c9-142">Because the appearance requirement for the stoplight is so different than the default appearance of the <xref:System.Windows.Controls.RadioButton>, it is necessary to redefine the <xref:System.Windows.Controls.ControlTemplate>.</span></span>  <span data-ttu-id="b27c9-143">Im Allgemeinen wird eine <xref:System.Windows.DataTemplate> zum Definieren des Inhalts (oder der Daten) eines Steuer Elements verwendet, und ein <xref:System.Windows.Controls.ControlTemplate> wird verwendet, um zu definieren, wie ein Steuerelement strukturiert ist.</span><span class="sxs-lookup"><span data-stu-id="b27c9-143">In general a <xref:System.Windows.DataTemplate> is used for defining the content (or data) of a control, and a <xref:System.Windows.Controls.ControlTemplate> is used for defining how a control is structured.</span></span>

- <span data-ttu-id="b27c9-144">**Trigger.**</span><span class="sxs-lookup"><span data-stu-id="b27c9-144">**Triggers.**</span></span> <span data-ttu-id="b27c9-145">Mit einem <xref:System.Windows.Trigger> können Sie die Darstellung und das Verhalten eines Steuer Elements dynamisch ändern, ohne ein neues Steuerelement erstellen zu müssen.</span><span class="sxs-lookup"><span data-stu-id="b27c9-145">A <xref:System.Windows.Trigger> allows you to dynamically change the appearance and behavior of a control without creating a new control.</span></span> <span data-ttu-id="b27c9-146">Angenommen, Sie verfügen über mehrere <xref:System.Windows.Controls.ListBox>-Steuerelemente in Ihrer Anwendung und möchten, dass die Elemente in den einzelnen <xref:System.Windows.Controls.ListBox> Fett und rot sind, wenn Sie ausgewählt werden.</span><span class="sxs-lookup"><span data-stu-id="b27c9-146">For example, suppose you have multiple <xref:System.Windows.Controls.ListBox> controls in your application and want the items in each <xref:System.Windows.Controls.ListBox> to be bold and red when they are selected.</span></span> <span data-ttu-id="b27c9-147">Der erste Instinkt besteht darin, eine Klasse zu erstellen, die von <xref:System.Windows.Controls.ListBox> erbt, und die <xref:System.Windows.Controls.Primitives.Selector.OnSelectionChanged%2A>-Methode außer Kraft zu setzen, um die Darstellung des ausgewählten Elements zu ändern. ein besserer Ansatz ist jedoch das Hinzufügen eines Auslösers zu einem Stil eines <xref:System.Windows.Controls.ListBoxItem>, der das Aussehen des ausgewählten Elements ändert. .</span><span class="sxs-lookup"><span data-stu-id="b27c9-147">Your first instinct might be to create a class that inherits from <xref:System.Windows.Controls.ListBox> and override the <xref:System.Windows.Controls.Primitives.Selector.OnSelectionChanged%2A> method to change the appearance of the selected item, but a better approach is to add a trigger to a style of a <xref:System.Windows.Controls.ListBoxItem> that changes the appearance of the selected item.</span></span> <span data-ttu-id="b27c9-148">Mit Triggern können Sie Eigenschaftswerte bearbeiten oder basierend auf den Eigenschaftswerten Aktionen ausführen.</span><span class="sxs-lookup"><span data-stu-id="b27c9-148">A trigger enables you to change property values or take actions based on the value of a property.</span></span> <span data-ttu-id="b27c9-149">Mit einem <xref:System.Windows.EventTrigger> können Sie bei Auftreten eines Ereignisses Aktionen ausführen.</span><span class="sxs-lookup"><span data-stu-id="b27c9-149">An <xref:System.Windows.EventTrigger> enables you to take actions when an event occurs.</span></span>

<span data-ttu-id="b27c9-150">Weitere Informationen zu Stilen, Vorlagen und Triggern finden Sie unter [Erstellen von Formaten und Vorlagen](styling-and-templating.md).</span><span class="sxs-lookup"><span data-stu-id="b27c9-150">For more information about styles, templates, and triggers, see [Styling and Templating](styling-and-templating.md).</span></span>

<span data-ttu-id="b27c9-151">Im Allgemeinen gilt: wenn das benötigte Steuerelement die Funktionalität eines vorhandenen Steuerelements nachmacht, aber anders aussehen soll, lohnt es sich zuerst zu überlegen, ob Sie mit einem der in diesem Abschnitt beschriebenen Verfahren die vorhandene Darstellung des Steuerelements ändern können.</span><span class="sxs-lookup"><span data-stu-id="b27c9-151">In general, if your control mirrors the functionality of an existing control, but you want the control to look different, you should first consider whether you can use any of the methods discussed in this section to change the existing control's appearance.</span></span>

<a name="models_for_control_authoring"></a>

## <a name="models-for-control-authoring"></a><span data-ttu-id="b27c9-152">Modelle für das Erstellen von Steuerelementen</span><span class="sxs-lookup"><span data-stu-id="b27c9-152">Models for Control Authoring</span></span>

<span data-ttu-id="b27c9-153">Dank dem umfangreichen Inhaltsmodell sowie Stilen, Vorlagen und Triggern können Sie in den meisten Fällen auf das Erstellen neuer Steuerelemente verzichten.</span><span class="sxs-lookup"><span data-stu-id="b27c9-153">The rich content model, styles, templates, and triggers minimize the need for you to create a new control.</span></span> <span data-ttu-id="b27c9-154">Falls Sie jedoch ein neues Steuerelement erstellen müssen, ist es wichtig Modelle für das Erstellen von Steuerelementen in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] zu verstehen.</span><span class="sxs-lookup"><span data-stu-id="b27c9-154">However, if you do need to create a new control, it is important to understand the different control authoring models in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span></span> [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] <span data-ttu-id="b27c9-155">bietet drei allgemeine Modelle zum Erstellen der Steuerelemente, die jeweils verschiedene Funktionen und Flexibilitätsgrade bieten.</span><span class="sxs-lookup"><span data-stu-id="b27c9-155">provides three general models for creating a control, each of which provides a different set of features and level of flexibility.</span></span> <span data-ttu-id="b27c9-156">Die Basisklassen für die drei Modelle sind <xref:System.Windows.Controls.UserControl>, <xref:System.Windows.Controls.Control>und <xref:System.Windows.FrameworkElement>.</span><span class="sxs-lookup"><span data-stu-id="b27c9-156">The base classes for the three models are <xref:System.Windows.Controls.UserControl>, <xref:System.Windows.Controls.Control>, and <xref:System.Windows.FrameworkElement>.</span></span>

### <a name="deriving-from-usercontrol"></a><span data-ttu-id="b27c9-157">Ableiten von UserControl</span><span class="sxs-lookup"><span data-stu-id="b27c9-157">Deriving from UserControl</span></span>

<span data-ttu-id="b27c9-158">Die einfachste Möglichkeit zum Erstellen eines Steuer Elements in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] ist die Ableitung von <xref:System.Windows.Controls.UserControl>.</span><span class="sxs-lookup"><span data-stu-id="b27c9-158">The simplest way to create a control in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] is to derive from <xref:System.Windows.Controls.UserControl>.</span></span> <span data-ttu-id="b27c9-159">Wenn Sie ein Steuerelement erstellen, das von <xref:System.Windows.Controls.UserControl>erbt, fügen Sie dem <xref:System.Windows.Controls.UserControl>vorhandene Komponenten hinzu, benennen Sie die Komponenten, und verweisen Sie in [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)]auf Ereignishandler.</span><span class="sxs-lookup"><span data-stu-id="b27c9-159">When you build a control that inherits from <xref:System.Windows.Controls.UserControl>, you add existing components to the <xref:System.Windows.Controls.UserControl>, name the components, and reference event handlers in [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)].</span></span> <span data-ttu-id="b27c9-160">Anschließend können Sie auf die benannten Elemente verweisen und die Ereignishandler im Code definieren.</span><span class="sxs-lookup"><span data-stu-id="b27c9-160">You can then reference the named elements and define the event handlers in code.</span></span> <span data-ttu-id="b27c9-161">Dieses Entwicklungsmodell ähnelt sehr dem Modell für die Anwendungsentwicklung in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="b27c9-161">This development model is very similar to the model used for application development in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span></span>

<span data-ttu-id="b27c9-162">Wenn eine <xref:System.Windows.Controls.UserControl> ordnungsgemäß erstellt wurde, können Sie die Vorteile von umfangreichen Inhalten, Stilen und Triggern nutzen.</span><span class="sxs-lookup"><span data-stu-id="b27c9-162">If built correctly, a <xref:System.Windows.Controls.UserControl> can take advantage of the benefits of rich content, styles, and triggers.</span></span> <span data-ttu-id="b27c9-163">Wenn Ihr Steuerelement jedoch von <xref:System.Windows.Controls.UserControl>erbt, können Personen, die Ihr Steuerelement verwenden, keine <xref:System.Windows.DataTemplate> oder <xref:System.Windows.Controls.ControlTemplate> verwenden, um die Darstellung anzupassen.</span><span class="sxs-lookup"><span data-stu-id="b27c9-163">However, if your control inherits from <xref:System.Windows.Controls.UserControl>, people who use your control will not be able to use a <xref:System.Windows.DataTemplate> or <xref:System.Windows.Controls.ControlTemplate> to customize its appearance.</span></span>  <span data-ttu-id="b27c9-164">Zum Erstellen eines benutzerdefinierten Steuer Elements, das Vorlagen unterstützt, muss eine Ableitung von der <xref:System.Windows.Controls.Control>-Klasse oder einer ihrer abgeleiteten Klassen (außer <xref:System.Windows.Controls.UserControl>) durchzuführen sein.</span><span class="sxs-lookup"><span data-stu-id="b27c9-164">It is necessary to derive from the <xref:System.Windows.Controls.Control> class or one of its derived classes (other than <xref:System.Windows.Controls.UserControl>) to create a custom control that supports templates.</span></span>

#### <a name="benefits-of-deriving-from-usercontrol"></a><span data-ttu-id="b27c9-165">Vorteile des Ableitens von UserControl</span><span class="sxs-lookup"><span data-stu-id="b27c9-165">Benefits of Deriving from UserControl</span></span>

<span data-ttu-id="b27c9-166">Nehmen Sie die Ableitung von <xref:System.Windows.Controls.UserControl> in Erwägung, wenn Folgendes zutrifft:</span><span class="sxs-lookup"><span data-stu-id="b27c9-166">Consider deriving from <xref:System.Windows.Controls.UserControl> if all of the following apply:</span></span>

- <span data-ttu-id="b27c9-167">Sie möchten das Steuerelement auf eine ähnliche Art und Weise erstellen, wie Sie Ihre Anwendung erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="b27c9-167">You want to build your control similarly to how you build an application.</span></span>

- <span data-ttu-id="b27c9-168">Ihr Steuerelement besteht ausschließlich aus vorhandenen Komponenten.</span><span class="sxs-lookup"><span data-stu-id="b27c9-168">Your control consists only of existing components.</span></span>

- <span data-ttu-id="b27c9-169">Es muss keine komplexe Anpassung unterstützt werden.</span><span class="sxs-lookup"><span data-stu-id="b27c9-169">You don't need to support complex customization.</span></span>

### <a name="deriving-from-control"></a><span data-ttu-id="b27c9-170">Ableiten von Control</span><span class="sxs-lookup"><span data-stu-id="b27c9-170">Deriving from Control</span></span>

<span data-ttu-id="b27c9-171">Die Ableitung von der <xref:System.Windows.Controls.Control> Klasse ist das Modell, das von den meisten vorhandenen [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] Steuerelementen verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="b27c9-171">Deriving from the <xref:System.Windows.Controls.Control> class is the model used by most of the existing [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] controls.</span></span> <span data-ttu-id="b27c9-172">Wenn Sie ein Steuerelement erstellen, das von der <xref:System.Windows.Controls.Control>-Klasse erbt, definieren Sie seine Darstellung mithilfe von Vorlagen.</span><span class="sxs-lookup"><span data-stu-id="b27c9-172">When you create a control that inherits from the <xref:System.Windows.Controls.Control> class, you define its appearance by using templates.</span></span> <span data-ttu-id="b27c9-173">Dadurch trennen Sie die Funktionslogik von der visuellen Darstellung.</span><span class="sxs-lookup"><span data-stu-id="b27c9-173">By doing so, you separate the operational logic from the visual representation.</span></span> <span data-ttu-id="b27c9-174">Sie können auch sicherstellen, dass die Benutzeroberfläche und die Logik entkoppelt werden, indem Sie anstelle von Ereignissen Befehle und Bindungen verwenden und Verweise auf Elemente in der <xref:System.Windows.Controls.ControlTemplate> vermeiden, wenn dies möglich ist.</span><span class="sxs-lookup"><span data-stu-id="b27c9-174">You can also ensure the decoupling of the UI and logic by using commands and bindings instead of events and avoiding referencing elements in the <xref:System.Windows.Controls.ControlTemplate> whenever possible.</span></span>  <span data-ttu-id="b27c9-175">Wenn die Benutzeroberfläche und die Logik des Steuer Elements ordnungsgemäß entkoppelt sind, kann ein Benutzer des Steuer Elements die <xref:System.Windows.Controls.ControlTemplate> des Steuer Elements neu definieren, um seine Darstellung anzupassen.</span><span class="sxs-lookup"><span data-stu-id="b27c9-175">If the UI and logic of your control are properly decoupled, a user of your control can redefine the control's <xref:System.Windows.Controls.ControlTemplate> to customize its appearance.</span></span> <span data-ttu-id="b27c9-176">Obwohl das Entwickeln eines benutzerdefinierten <xref:System.Windows.Controls.Control> nicht so einfach ist wie das Entwickeln eines <xref:System.Windows.Controls.UserControl>, bietet ein benutzerdefiniertes <xref:System.Windows.Controls.Control> die größte Flexibilität.</span><span class="sxs-lookup"><span data-stu-id="b27c9-176">Although building a custom <xref:System.Windows.Controls.Control> is not as simple as building a <xref:System.Windows.Controls.UserControl>, a custom <xref:System.Windows.Controls.Control> provides the most flexibility.</span></span>

#### <a name="benefits-of-deriving-from-control"></a><span data-ttu-id="b27c9-177">Vorteile des Ableitens von Control</span><span class="sxs-lookup"><span data-stu-id="b27c9-177">Benefits of Deriving from Control</span></span>

<span data-ttu-id="b27c9-178">Wenn eine der folgenden Bedingungen zutrifft, sollten Sie ggf. von <xref:System.Windows.Controls.Control> ableiten, anstatt die <xref:System.Windows.Controls.UserControl>-Klasse zu verwenden:</span><span class="sxs-lookup"><span data-stu-id="b27c9-178">Consider deriving from <xref:System.Windows.Controls.Control> instead of using the <xref:System.Windows.Controls.UserControl> class if any of the following apply:</span></span>

- <span data-ttu-id="b27c9-179">Sie möchten, dass die Darstellung des Steuer Elements über die <xref:System.Windows.Controls.ControlTemplate>anpassbar ist.</span><span class="sxs-lookup"><span data-stu-id="b27c9-179">You want the appearance of your control to be customizable via the <xref:System.Windows.Controls.ControlTemplate>.</span></span>

- <span data-ttu-id="b27c9-180">Das Steuerelement soll verschiedene Designs unterstützen.</span><span class="sxs-lookup"><span data-stu-id="b27c9-180">You want your control to support different themes.</span></span>

### <a name="deriving-from-frameworkelement"></a><span data-ttu-id="b27c9-181">Ableitung von FrameworkElement</span><span class="sxs-lookup"><span data-stu-id="b27c9-181">Deriving from FrameworkElement</span></span>

<span data-ttu-id="b27c9-182">Steuerelemente, die von <xref:System.Windows.Controls.UserControl> oder <xref:System.Windows.Controls.Control> abgeleitet werden, basieren auf dem Verfassen vorhandener Elemente.</span><span class="sxs-lookup"><span data-stu-id="b27c9-182">Controls that derive from <xref:System.Windows.Controls.UserControl> or <xref:System.Windows.Controls.Control> rely upon composing existing elements.</span></span> <span data-ttu-id="b27c9-183">In vielen Szenarios ist dies eine akzeptable Lösung, da jedes Objekt, das von <xref:System.Windows.FrameworkElement> erbt, sich in einem <xref:System.Windows.Controls.ControlTemplate>befinden kann.</span><span class="sxs-lookup"><span data-stu-id="b27c9-183">For many scenarios, this is an acceptable solution, because any object that inherits from <xref:System.Windows.FrameworkElement> can be in a <xref:System.Windows.Controls.ControlTemplate>.</span></span> <span data-ttu-id="b27c9-184">Es gibt jedoch Situationen, in denen die Darstellung eines Steuerelements mehr als die Funktionalität einer einfachen Elementzusammensetzung erfordert.</span><span class="sxs-lookup"><span data-stu-id="b27c9-184">However, there are times when a control's appearance requires more than the functionality of simple element composition.</span></span> <span data-ttu-id="b27c9-185">In diesen Szenarien ist die Basis einer Komponente auf <xref:System.Windows.FrameworkElement> die richtige Wahl.</span><span class="sxs-lookup"><span data-stu-id="b27c9-185">For these scenarios, basing a component on <xref:System.Windows.FrameworkElement> is the right choice.</span></span>

<span data-ttu-id="b27c9-186">Es gibt zwei Standardmethoden zum Entwickeln von <xref:System.Windows.FrameworkElement>basierten Komponenten: direktes Rendering und benutzerdefinierte Element Komposition.</span><span class="sxs-lookup"><span data-stu-id="b27c9-186">There are two standard methods for building <xref:System.Windows.FrameworkElement>-based components: direct rendering and custom element composition.</span></span> <span data-ttu-id="b27c9-187">Das direkte Rendering umfasst das Überschreiben der <xref:System.Windows.UIElement.OnRender%2A> Methode <xref:System.Windows.FrameworkElement> und das Bereitstellen von <xref:System.Windows.Media.DrawingContext> Vorgängen, die die visuellen Komponenten explizit definieren.</span><span class="sxs-lookup"><span data-stu-id="b27c9-187">Direct rendering involves overriding the <xref:System.Windows.UIElement.OnRender%2A> method of <xref:System.Windows.FrameworkElement> and providing <xref:System.Windows.Media.DrawingContext> operations that explicitly define the component visuals.</span></span> <span data-ttu-id="b27c9-188">Dies ist die Methode, die von <xref:System.Windows.Controls.Image> und <xref:System.Windows.Controls.Border>verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="b27c9-188">This is the method used by <xref:System.Windows.Controls.Image> and <xref:System.Windows.Controls.Border>.</span></span> <span data-ttu-id="b27c9-189">Die benutzerdefinierte Element Komposition umfasst die Verwendung von Objekten vom Typ <xref:System.Windows.Media.Visual>, um die Darstellung der Komponente zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="b27c9-189">Custom element composition involves using objects of type <xref:System.Windows.Media.Visual> to compose the appearance of your component.</span></span> <span data-ttu-id="b27c9-190">Beispiele finden Sie unter [Verwenden von DrawingVisual-Objekten](../graphics-multimedia/using-drawingvisual-objects.md).</span><span class="sxs-lookup"><span data-stu-id="b27c9-190">For an example, see [Using DrawingVisual Objects](../graphics-multimedia/using-drawingvisual-objects.md).</span></span> <span data-ttu-id="b27c9-191"><xref:System.Windows.Controls.Primitives.Track> ist ein Beispiel für ein Steuerelement in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], das die benutzerdefinierte Element Komposition verwendet.</span><span class="sxs-lookup"><span data-stu-id="b27c9-191"><xref:System.Windows.Controls.Primitives.Track> is an example of a control in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] that uses custom element composition.</span></span> <span data-ttu-id="b27c9-192">Sie können auch direktes Rendering und benutzerdefinierte Elementzusammensetzung innerhalb eines Steuerelements kombinieren.</span><span class="sxs-lookup"><span data-stu-id="b27c9-192">It is also possible to mix direct rendering and custom element composition in the same control.</span></span>

#### <a name="benefits-of-deriving-from-frameworkelement"></a><span data-ttu-id="b27c9-193">Vorteile der Ableitung von FrameworkElement</span><span class="sxs-lookup"><span data-stu-id="b27c9-193">Benefits of Deriving from FrameworkElement</span></span>

<span data-ttu-id="b27c9-194">Wenn eine der folgenden Bedingungen zutrifft, empfiehlt es sich, von <xref:System.Windows.FrameworkElement> abzuleiten:</span><span class="sxs-lookup"><span data-stu-id="b27c9-194">Consider deriving from <xref:System.Windows.FrameworkElement> if any of the following apply:</span></span>

- <span data-ttu-id="b27c9-195">Sie brauchen eine genaue Steuerung der Darstellung Ihres Steuerelements, die darüber hinausgeht, was mit einer einfachen Elementzusammensetzung möglich ist.</span><span class="sxs-lookup"><span data-stu-id="b27c9-195">You want to have precise control over the appearance of your control beyond what is provided by simple element composition.</span></span>

- <span data-ttu-id="b27c9-196">Sie möchten die Darstellung Ihres Steuerelements definieren, indem Sie Ihre eigene Renderinglogik definieren.</span><span class="sxs-lookup"><span data-stu-id="b27c9-196">You want to define the appearance of your control by defining your own render logic.</span></span>

- <span data-ttu-id="b27c9-197">Sie möchten vorhandene Elemente auf neuartige Weise zusammenstellen, die über die Möglichkeiten hinausgehen, die mit <xref:System.Windows.Controls.UserControl> und <xref:System.Windows.Controls.Control>möglich sind.</span><span class="sxs-lookup"><span data-stu-id="b27c9-197">You want to compose existing elements in novel ways that go beyond what is possible with <xref:System.Windows.Controls.UserControl> and <xref:System.Windows.Controls.Control>.</span></span>

<a name="control_authoring_basics"></a>

## <a name="control-authoring-basics"></a><span data-ttu-id="b27c9-198">Grundlagen des Erstellens von Steuerelementen</span><span class="sxs-lookup"><span data-stu-id="b27c9-198">Control Authoring Basics</span></span>

<span data-ttu-id="b27c9-199">Wie bereits erläutert, ist eine der leistungsstärksten Funktionen von [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] die Möglichkeit, über die Festlegung grundlegender Eigenschaften eines Steuerelements zur Bearbeitung seiner Darstellung und seines Verhaltens hinausgehen zu können, ohne ein benutzerdefiniertes Steuerelement erstellen zu müssen.</span><span class="sxs-lookup"><span data-stu-id="b27c9-199">As discussed earlier, one of the most powerful features of [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] is the ability to go beyond setting basic properties of a control to change its appearance and behavior, yet still not needing to create a custom control.</span></span> <span data-ttu-id="b27c9-200">Die Funktionen für Stil, Datenbindung und Trigger werden durch das [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]-Eigenschaftensystem und das [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]-Ereignissystem ermöglicht.</span><span class="sxs-lookup"><span data-stu-id="b27c9-200">The styling, data binding, and trigger features are made possible by the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] property system and the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] event system.</span></span> <span data-ttu-id="b27c9-201">In den folgenden Abschnitten werden einige Verfahren beschrieben, die Sie unabhängig von dem zum Erstellen des benutzerdefinierten Steuerelements verwendeten Modell befolgen sollten, um Benutzern Ihres benutzerdefinierten Steuerelements das Zugreifen auf diese Funktionen auf die gleiche Art und Weise zu ermöglichen, wie es bei einem in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] enthaltenen Steuerelement möglich wäre.</span><span class="sxs-lookup"><span data-stu-id="b27c9-201">The following sections describe some practices that you should follow, regardless of the model you use to create the custom control, so that users of your custom control can use these features just as they would for a control that is included with [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span></span>

### <a name="use-dependency-properties"></a><span data-ttu-id="b27c9-202">Verwenden von Abhängigkeitseigenschaften</span><span class="sxs-lookup"><span data-stu-id="b27c9-202">Use Dependency Properties</span></span>

<span data-ttu-id="b27c9-203">Falls es sich bei einer Eigenschaft um eine Abhängigkeitseigenschaft handelt, können Sie folgendermaßen vorgehen:</span><span class="sxs-lookup"><span data-stu-id="b27c9-203">When a property is a dependency property, it is possible to do the following:</span></span>

- <span data-ttu-id="b27c9-204">Die Eigenschaft in einem Stil festlegen.</span><span class="sxs-lookup"><span data-stu-id="b27c9-204">Set the property in a style.</span></span>

- <span data-ttu-id="b27c9-205">Die Eigenschaft an eine Datenquelle binden.</span><span class="sxs-lookup"><span data-stu-id="b27c9-205">Bind the property to a data source.</span></span>

- <span data-ttu-id="b27c9-206">Eine dynamische Ressource als den Wert der Eigenschaft verwenden.</span><span class="sxs-lookup"><span data-stu-id="b27c9-206">Use a dynamic resource as the property's value.</span></span>

- <span data-ttu-id="b27c9-207">Die Eigenschaft animieren.</span><span class="sxs-lookup"><span data-stu-id="b27c9-207">Animate the property.</span></span>

<span data-ttu-id="b27c9-208">Falls Sie möchten, dass eine Eigenschaft Ihres Steuerelements eine dieser Funktionen unterstützt, sollten Sie die Eigenschaft als eine Abhängigkeitseigenschaft implementieren.</span><span class="sxs-lookup"><span data-stu-id="b27c9-208">If you want a property of your control to support any of this functionality, you should implement it as a dependency property.</span></span> <span data-ttu-id="b27c9-209">Im folgenden Beispiel wird eine Abhängigkeitseigenschaft mit dem Namen `Value` wie folgt definiert:</span><span class="sxs-lookup"><span data-stu-id="b27c9-209">The following example defines a dependency property named `Value` by doing the following:</span></span>

- <span data-ttu-id="b27c9-210">Definieren Sie einen <xref:System.Windows.DependencyProperty> Bezeichner mit dem Namen `ValueProperty` als `public` `static` `readonly` Feld.</span><span class="sxs-lookup"><span data-stu-id="b27c9-210">Define a <xref:System.Windows.DependencyProperty> identifier named `ValueProperty` as a `public` `static` `readonly` field.</span></span>

- <span data-ttu-id="b27c9-211">Registrieren Sie den Eigenschaftsnamen beim Eigenschaften System, indem Sie <xref:System.Windows.DependencyProperty.Register%2A?displayProperty=nameWithType>aufrufen, um Folgendes anzugeben:</span><span class="sxs-lookup"><span data-stu-id="b27c9-211">Register the property name with the property system, by calling <xref:System.Windows.DependencyProperty.Register%2A?displayProperty=nameWithType>, to specify the following:</span></span>

  - <span data-ttu-id="b27c9-212">Den Namen der Eigenschaft.</span><span class="sxs-lookup"><span data-stu-id="b27c9-212">The name of the property.</span></span>

  - <span data-ttu-id="b27c9-213">Den Typ der Eigenschaft.</span><span class="sxs-lookup"><span data-stu-id="b27c9-213">The type of the property.</span></span>

  - <span data-ttu-id="b27c9-214">Den Typ, der die Eigenschaft besitzt.</span><span class="sxs-lookup"><span data-stu-id="b27c9-214">The type that owns the property.</span></span>

  - <span data-ttu-id="b27c9-215">Die Metadaten für die Eigenschaft.</span><span class="sxs-lookup"><span data-stu-id="b27c9-215">The metadata for the property.</span></span> <span data-ttu-id="b27c9-216">Die Metadaten enthalten den Standardwert der Eigenschaft, eine <xref:System.Windows.CoerceValueCallback> und eine <xref:System.Windows.PropertyChangedCallback>.</span><span class="sxs-lookup"><span data-stu-id="b27c9-216">The metadata contains the property's default value, a <xref:System.Windows.CoerceValueCallback> and a <xref:System.Windows.PropertyChangedCallback>.</span></span>

- <span data-ttu-id="b27c9-217">Definieren Sie eine CLR-Wrapper Eigenschaft mit dem Namen `Value`, bei der es sich um den Namen handelt, der zum Registrieren der Abhängigkeits Eigenschaft verwendet wird, indem Sie die `get`-und `set` Accessoren der Eigenschaft implementieren.</span><span class="sxs-lookup"><span data-stu-id="b27c9-217">Define a CLR wrapper property named `Value`, which is the same name that is used to register the dependency property, by implementing the property's `get` and `set` accessors.</span></span> <span data-ttu-id="b27c9-218">Beachten Sie, dass die `get`-und `set` Accessoren nur <xref:System.Windows.DependencyObject.GetValue%2A> und <xref:System.Windows.DependencyObject.SetValue%2A> aufzurufen.</span><span class="sxs-lookup"><span data-stu-id="b27c9-218">Note that the `get` and `set` accessors only call <xref:System.Windows.DependencyObject.GetValue%2A> and <xref:System.Windows.DependencyObject.SetValue%2A> respectively.</span></span> <span data-ttu-id="b27c9-219">Es wird empfohlen, dass die Accessoren von Abhängigkeits Eigenschaften keine zusätzliche Logik enthalten, da Clients und [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] die Accessoren umgehen und <xref:System.Windows.DependencyObject.GetValue%2A> und <xref:System.Windows.DependencyObject.SetValue%2A> direkt anrufen können.</span><span class="sxs-lookup"><span data-stu-id="b27c9-219">It is recommended that the accessors of dependency properties not contain additional logic because clients and [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] can bypass the accessors and call <xref:System.Windows.DependencyObject.GetValue%2A> and <xref:System.Windows.DependencyObject.SetValue%2A> directly.</span></span> <span data-ttu-id="b27c9-220">Falls eine Eigenschaft z.B. an eine Datenquelle gebunden ist, wird die `set`-Zugriffmethode der Eigenschaft nicht aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="b27c9-220">For example, when a property is bound to a data source, the property's `set` accessor is not called.</span></span>  <span data-ttu-id="b27c9-221">Anstatt zusätzliche Logik zu den Get-und Set-Accessoren hinzuzufügen, verwenden Sie die <xref:System.Windows.ValidateValueCallback>-, <xref:System.Windows.CoerceValueCallback>-und <xref:System.Windows.PropertyChangedCallback> Delegaten, um auf den Wert zu reagieren oder zu überprüfen, wenn er sich ändert.</span><span class="sxs-lookup"><span data-stu-id="b27c9-221">Instead of adding additional logic to the get and set accessors, use the <xref:System.Windows.ValidateValueCallback>, <xref:System.Windows.CoerceValueCallback>, and <xref:System.Windows.PropertyChangedCallback> delegates to respond to or check the value when it changes.</span></span>  <span data-ttu-id="b27c9-222">Weitere Informationen zu diesen Rückrufen finden Sie unter [Rückrufe und Validierung von Abhängigkeitseigenschaften](../advanced/dependency-property-callbacks-and-validation.md).</span><span class="sxs-lookup"><span data-stu-id="b27c9-222">For more information on these callbacks, see [Dependency Property Callbacks and Validation](../advanced/dependency-property-callbacks-and-validation.md).</span></span>

- <span data-ttu-id="b27c9-223">Definieren Sie eine Methode für die <xref:System.Windows.CoerceValueCallback> mit dem Namen `CoerceValue`.</span><span class="sxs-lookup"><span data-stu-id="b27c9-223">Define a method for the <xref:System.Windows.CoerceValueCallback> named `CoerceValue`.</span></span> <span data-ttu-id="b27c9-224">`CoerceValue` stellt sicher, dass `Value` größer oder gleich `MinValue` und kleiner oder gleich `MaxValue` ist.</span><span class="sxs-lookup"><span data-stu-id="b27c9-224">`CoerceValue` ensures that `Value` is greater or equal to `MinValue` and less than or equal to `MaxValue`.</span></span>

- <span data-ttu-id="b27c9-225">Definieren Sie eine Methode für die <xref:System.Windows.PropertyChangedCallback>mit dem Namen `OnValueChanged`.</span><span class="sxs-lookup"><span data-stu-id="b27c9-225">Define a method for the <xref:System.Windows.PropertyChangedCallback>, named `OnValueChanged`.</span></span> <span data-ttu-id="b27c9-226">`OnValueChanged` erstellt ein <xref:System.Windows.RoutedPropertyChangedEventArgs%601>-Objekt und bereitet die Erhöhung des `ValueChanged`-Routing Ereignisses vor.</span><span class="sxs-lookup"><span data-stu-id="b27c9-226">`OnValueChanged` creates a <xref:System.Windows.RoutedPropertyChangedEventArgs%601> object and prepares to raise the `ValueChanged` routed event.</span></span> <span data-ttu-id="b27c9-227">Routingereignisse werden im nächsten Abschnitt erläutert.</span><span class="sxs-lookup"><span data-stu-id="b27c9-227">Routed events are discussed in the next section.</span></span>

[!code-csharp[UserControlNumericUpDown#DependencyProperty](~/samples/snippets/csharp/VS_Snippets_Wpf/UserControlNumericUpDown/CSharp/NumericUpDown.xaml.cs#dependencyproperty)]
[!code-vb[UserControlNumericUpDown#DependencyProperty](~/samples/snippets/visualbasic/VS_Snippets_Wpf/UserControlNumericUpDown/visualbasic/numericupdown.xaml.vb#dependencyproperty)]

<span data-ttu-id="b27c9-228">Weitere Informationen finden Sie unter [Benutzerdefinierte Abhängigkeitseigenschaften](../advanced/custom-dependency-properties.md).</span><span class="sxs-lookup"><span data-stu-id="b27c9-228">For more information, see [Custom Dependency Properties](../advanced/custom-dependency-properties.md).</span></span>

### <a name="use-routed-events"></a><span data-ttu-id="b27c9-229">Verwenden von Routingereignissen</span><span class="sxs-lookup"><span data-stu-id="b27c9-229">Use Routed Events</span></span>

<span data-ttu-id="b27c9-230">Ebenso wie Abhängigkeits Eigenschaften das Konzept von CLR-Eigenschaften mit zusätzlicher Funktionalität erweitern, erweitern Routing Ereignisse das Konzept von CLR-Standard Ereignissen.</span><span class="sxs-lookup"><span data-stu-id="b27c9-230">Just as dependency properties extend the notion of CLR properties with additional functionality, routed events extend the notion of standard CLR events.</span></span> <span data-ttu-id="b27c9-231">Beim Erstellen eines neuen [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]-Steuerelements empfiehlt es sich, Ihr Ereignis als ein Routingereignis zu implementieren, da Routingereignisse folgendes Verhalten unterstützen:</span><span class="sxs-lookup"><span data-stu-id="b27c9-231">When you create a new [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] control, it is also good practice to implement your event as a routed event because a routed event supports the following behavior:</span></span>

- <span data-ttu-id="b27c9-232">Ereignisse für mehrere Steuerelemente können über ein übergeordnetes Steuerelement behandelt werden.</span><span class="sxs-lookup"><span data-stu-id="b27c9-232">Events can be handled on a parent of multiple controls.</span></span> <span data-ttu-id="b27c9-233">Falls es sich bei dem Ereignis um ein Bubbling-Ereignis handelt, kann ein einzelnes übergeordnetes Element in der Elementstruktur das Ereignis abonnieren.</span><span class="sxs-lookup"><span data-stu-id="b27c9-233">If an event is a bubbling event, a single parent in the element tree can subscribe to the event.</span></span> <span data-ttu-id="b27c9-234">Anschließend können Anwendungsentwickler mit einem Handler auf das Ereignis mehrerer Steuerelemente reagieren.</span><span class="sxs-lookup"><span data-stu-id="b27c9-234">Then application authors can use one handler to respond to the event of multiple controls.</span></span> <span data-ttu-id="b27c9-235">Wenn das Steuerelement z. b. ein Teil jedes Elements in einer <xref:System.Windows.Controls.ListBox> ist (da es in einem <xref:System.Windows.DataTemplate>enthalten ist), kann der Anwendungsentwickler den Ereignishandler für das-Ereignis des Steuer Elements auf dem <xref:System.Windows.Controls.ListBox>definieren.</span><span class="sxs-lookup"><span data-stu-id="b27c9-235">For example, if your control is a part of each item in a <xref:System.Windows.Controls.ListBox> (because it is included in a <xref:System.Windows.DataTemplate>), the application developer can define the event handler for your control's event on the <xref:System.Windows.Controls.ListBox>.</span></span> <span data-ttu-id="b27c9-236">Beim Auftreten des Ereignisses bei einem der Steuerelemente wird der Ereignishandler aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="b27c9-236">Whenever the event occurs on any of the controls, the event handler is called.</span></span>

- <span data-ttu-id="b27c9-237">Routing Ereignisse können in einer <xref:System.Windows.EventSetter>verwendet werden, die es Anwendungsentwicklern ermöglicht, den Handler eines Ereignisses innerhalb eines Stils anzugeben.</span><span class="sxs-lookup"><span data-stu-id="b27c9-237">Routed events can be used in an <xref:System.Windows.EventSetter>, which enables application developers to specify the handler of an event within a style.</span></span>

- <span data-ttu-id="b27c9-238">Routing Ereignisse können in einem <xref:System.Windows.EventTrigger>verwendet werden, das zum Animieren von Eigenschaften mithilfe von [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]nützlich ist.</span><span class="sxs-lookup"><span data-stu-id="b27c9-238">Routed events can be used in an <xref:System.Windows.EventTrigger>, which is useful for animating properties by using [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].</span></span> <span data-ttu-id="b27c9-239">Weitere Informationen finden Sie unter [Übersicht über Animation](../graphics-multimedia/animation-overview.md).</span><span class="sxs-lookup"><span data-stu-id="b27c9-239">For more information, see [Animation Overview](../graphics-multimedia/animation-overview.md).</span></span>

<span data-ttu-id="b27c9-240">Im folgenden Beispiel wird ein Routingereignis wie folgt definiert:</span><span class="sxs-lookup"><span data-stu-id="b27c9-240">The following example defines a routed event by doing the following:</span></span>

- <span data-ttu-id="b27c9-241">Definieren Sie einen <xref:System.Windows.RoutedEvent> Bezeichner mit dem Namen `ValueChangedEvent` als `public` `static` `readonly` Feld.</span><span class="sxs-lookup"><span data-stu-id="b27c9-241">Define a <xref:System.Windows.RoutedEvent> identifier named `ValueChangedEvent` as a `public` `static` `readonly` field.</span></span>

- <span data-ttu-id="b27c9-242">Registrieren Sie das-Routing Ereignis, indem Sie die <xref:System.Windows.EventManager.RegisterRoutedEvent%2A?displayProperty=nameWithType>-Methode aufrufen.</span><span class="sxs-lookup"><span data-stu-id="b27c9-242">Register the routed event by calling the <xref:System.Windows.EventManager.RegisterRoutedEvent%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="b27c9-243">Das Beispiel gibt die folgenden Informationen an, wenn <xref:System.Windows.EventManager.RegisterRoutedEvent%2A>aufgerufen wird:</span><span class="sxs-lookup"><span data-stu-id="b27c9-243">The example specifies the following information when it calls <xref:System.Windows.EventManager.RegisterRoutedEvent%2A>:</span></span>

  - <span data-ttu-id="b27c9-244">Der Name des Ereignisses lautet `ValueChanged`.</span><span class="sxs-lookup"><span data-stu-id="b27c9-244">The name of the event is `ValueChanged`.</span></span>

  - <span data-ttu-id="b27c9-245">Die Routing Strategie ist <xref:System.Windows.RoutingStrategy.Bubble>. Dies bedeutet, dass ein Ereignishandler für die Quelle (das Objekt, das das Ereignis auslöst) zuerst aufgerufen wird. Anschließend werden Ereignishandler für die übergeordneten Elemente der Quelle nacheinander aufgerufen, beginnend mit dem Ereignishandler am nächstgelegenen übergeordnetes Element.</span><span class="sxs-lookup"><span data-stu-id="b27c9-245">The routing strategy is <xref:System.Windows.RoutingStrategy.Bubble>, which means that an event handler on the source (the object that raises the event) is called first, and then event handlers on the source's parent elements are called in succession, starting with the event handler on the closest parent element.</span></span>

  - <span data-ttu-id="b27c9-246">Der Typ des Ereignis Handlers ist <xref:System.Windows.RoutedPropertyChangedEventHandler%601>, der mit einem <xref:System.Decimal>-Typ erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="b27c9-246">The type of the event handler is <xref:System.Windows.RoutedPropertyChangedEventHandler%601>, constructed with a <xref:System.Decimal> type.</span></span>

  - <span data-ttu-id="b27c9-247">`NumericUpDown` ist der besitzende Typ des Ereignisses.</span><span class="sxs-lookup"><span data-stu-id="b27c9-247">The owning type of the event is `NumericUpDown`.</span></span>

- <span data-ttu-id="b27c9-248">Ein öffentliches Ereignis mit dem Namen `ValueChanged`, das die Zugriffsmethoden-Deklarationen umfasst, wird deklariert.</span><span class="sxs-lookup"><span data-stu-id="b27c9-248">Declare a public event named `ValueChanged` and includes event-accessor declarations.</span></span> <span data-ttu-id="b27c9-249">Im Beispiel wird <xref:System.Windows.UIElement.AddHandler%2A> in der `add` Accessor-Deklaration aufgerufen und in der `remove` Accessor-Deklaration <xref:System.Windows.UIElement.RemoveHandler%2A>, um die [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]-Ereignis Dienste zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="b27c9-249">The example calls <xref:System.Windows.UIElement.AddHandler%2A> in the `add` accessor declaration and <xref:System.Windows.UIElement.RemoveHandler%2A> in the `remove` accessor declaration to use the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] event services.</span></span>

- <span data-ttu-id="b27c9-250">Eine geschützte virtuelle Methode mit dem Namen `OnValueChanged`, die das`ValueChanged`-Ereignis auslöst, wird erstellt.</span><span class="sxs-lookup"><span data-stu-id="b27c9-250">Create a protected, virtual method named `OnValueChanged` that raises the `ValueChanged` event.</span></span>

[!code-csharp[UserControlNumericUpDown#RoutedEvent](~/samples/snippets/csharp/VS_Snippets_Wpf/UserControlNumericUpDown/CSharp/NumericUpDown.xaml.cs#routedevent)]
[!code-vb[UserControlNumericUpDown#RoutedEvent](~/samples/snippets/visualbasic/VS_Snippets_Wpf/UserControlNumericUpDown/visualbasic/numericupdown.xaml.vb#routedevent)]

<span data-ttu-id="b27c9-251">Weitere Informationen finden Sie unter [ Übersicht über Routingereignisse ](../advanced/routed-events-overview.md) und [Vorgehensweise: Erstellen eines benutzerdefinierten Routingereignisses](../advanced/how-to-create-a-custom-routed-event.md).</span><span class="sxs-lookup"><span data-stu-id="b27c9-251">For more information, see [Routed Events Overview](../advanced/routed-events-overview.md) and [Create a Custom Routed Event](../advanced/how-to-create-a-custom-routed-event.md).</span></span>

### <a name="use-binding"></a><span data-ttu-id="b27c9-252">Verwendung von Bindungen</span><span class="sxs-lookup"><span data-stu-id="b27c9-252">Use Binding</span></span>

<span data-ttu-id="b27c9-253">Erwägen Sie Datenbindungen, um die Benutzeroberfläche Ihres Steuerelements von der Logik zu entkoppeln.</span><span class="sxs-lookup"><span data-stu-id="b27c9-253">To decouple the UI of your control from its logic, consider using data binding.</span></span> <span data-ttu-id="b27c9-254">Dies ist besonders wichtig, wenn Sie die Darstellung des Steuer Elements mithilfe eines <xref:System.Windows.Controls.ControlTemplate>definieren.</span><span class="sxs-lookup"><span data-stu-id="b27c9-254">This is particularly important if you define the appearance of your control by using a <xref:System.Windows.Controls.ControlTemplate>.</span></span> <span data-ttu-id="b27c9-255">Bei der Verwendung einer Datenbindung können Sie u.U. auf die Verweise auf bestimmte Teile der Benutzeroberfläche aus dem Code verzichten.</span><span class="sxs-lookup"><span data-stu-id="b27c9-255">When you use data binding, you might be able to eliminate the need to reference specific parts of the UI from the code.</span></span> <span data-ttu-id="b27c9-256">Es empfiehlt sich, Verweise auf Elemente in der <xref:System.Windows.Controls.ControlTemplate> zu vermeiden, denn wenn der Code auf Elemente verweist, die sich im <xref:System.Windows.Controls.ControlTemplate> befinden und die <xref:System.Windows.Controls.ControlTemplate> geändert wird, muss das Element, auf das verwiesen wird, in den neuen <xref:System.Windows.Controls.ControlTemplate>eingeschlossen werden.</span><span class="sxs-lookup"><span data-stu-id="b27c9-256">It's a good idea to avoid referencing elements that are in the <xref:System.Windows.Controls.ControlTemplate> because when the code references elements that are in the <xref:System.Windows.Controls.ControlTemplate> and the <xref:System.Windows.Controls.ControlTemplate> is changed, the referenced element needs to be included in the new <xref:System.Windows.Controls.ControlTemplate>.</span></span>

<span data-ttu-id="b27c9-257">Im folgenden Beispiel wird die <xref:System.Windows.Controls.TextBlock> des `NumericUpDown` Steuer Elements aktualisiert, ein Name zugewiesen und im Code anhand des Namens auf das Textfeld verwiesen.</span><span class="sxs-lookup"><span data-stu-id="b27c9-257">The following example updates the <xref:System.Windows.Controls.TextBlock> of the `NumericUpDown` control, assigning a name to it and referencing the textbox by name in code.</span></span>

[!code-xaml[UserControlNumericUpDownSimple#UIRefMarkup](~/samples/snippets/csharp/VS_Snippets_Wpf/UserControlNumericUpDownSimple/CSharp/NumericUpDown.xaml#uirefmarkup)]

[!code-csharp[UserControlNumericUpDownSimple#UIRefCode](~/samples/snippets/csharp/VS_Snippets_Wpf/UserControlNumericUpDownSimple/CSharp/NumericUpDown.xaml.cs#uirefcode)]
[!code-vb[UserControlNumericUpDownSimple#UIRefCode](~/samples/snippets/visualbasic/VS_Snippets_Wpf/UserControlNumericUpDownSimple/VisualBasic/NumericUpDown.xaml.vb#uirefcode)]

<span data-ttu-id="b27c9-258">Im folgenden Beispiel wird eine Bindung für den selben Zweck verwendet.</span><span class="sxs-lookup"><span data-stu-id="b27c9-258">The following example uses binding to accomplish the same thing.</span></span>

[!code-xaml[UserControlNumericUpDown#Binding](~/samples/snippets/csharp/VS_Snippets_Wpf/UserControlNumericUpDown/CSharp/NumericUpDown.xaml#binding)]

<span data-ttu-id="b27c9-259">Weitere Informationen zu Datenbindungen finden Sie unter [Übersicht über Datenbindung](../../../desktop-wpf/data/data-binding-overview.md).</span><span class="sxs-lookup"><span data-stu-id="b27c9-259">For more information about data binding, see [Data Binding Overview](../../../desktop-wpf/data/data-binding-overview.md).</span></span>

### <a name="design-for-designers"></a><span data-ttu-id="b27c9-260">Darstellung für Designer</span><span class="sxs-lookup"><span data-stu-id="b27c9-260">Design for Designers</span></span>

<span data-ttu-id="b27c9-261">Um Support für benutzerdefinierte WPF-Steuerelemente in [!INCLUDE[wpfdesigner_current_long](../../../../includes/wpfdesigner-current-long-md.md)] zu erhalten (z.B. bezüglich der Eigenschaftenbearbeitung mit dem Eigenschaftenfenster), befolgen Sie die folgenden Richtlinien.</span><span class="sxs-lookup"><span data-stu-id="b27c9-261">To receive support for custom WPF controls in the [!INCLUDE[wpfdesigner_current_long](../../../../includes/wpfdesigner-current-long-md.md)] (for example, property editing with the Properties window), follow these guidelines.</span></span>  <span data-ttu-id="b27c9-262">Weitere Informationen zum entwickeln für die [!INCLUDE[wpfdesigner_current_short](../../../../includes/wpfdesigner-current-short-md.md)]finden Sie unter [Entwerfen von XAML in Visual Studio](/visualstudio/xaml-tools/designing-xaml-in-visual-studio).</span><span class="sxs-lookup"><span data-stu-id="b27c9-262">For more information on developing for the [!INCLUDE[wpfdesigner_current_short](../../../../includes/wpfdesigner-current-short-md.md)], see [Design XAML in Visual Studio](/visualstudio/xaml-tools/designing-xaml-in-visual-studio).</span></span>

#### <a name="dependency-properties"></a><span data-ttu-id="b27c9-263">Abhängigkeitseigenschaften</span><span class="sxs-lookup"><span data-stu-id="b27c9-263">Dependency Properties</span></span>

<span data-ttu-id="b27c9-264">Stellen Sie sicher, dass Sie CLR-`get` und `set` Accessoren implementieren, wie zuvor in "Verwenden von Abhängigkeits Eigenschaften" beschrieben.</span><span class="sxs-lookup"><span data-stu-id="b27c9-264">Be sure to implement CLR `get` and `set` accessors as described earlier, in "Use Dependency Properties."</span></span> <span data-ttu-id="b27c9-265">Designer können Wrapper zur Prüfung des Vorhandenseins einer Abhängigkeitseigenschaft verwenden. Diese müssen, genauso wie [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] und Clients des Steuerelements, beim Abrufen oder Festlegen der Eigenschaft jedoch keine Zugriffsmethoden aufrufen.</span><span class="sxs-lookup"><span data-stu-id="b27c9-265">Designers may use the wrapper to detect the presence of a dependency property, but they, like [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] and clients of the control, are not required to call the accessors when getting or setting the property.</span></span>

#### <a name="attached-properties"></a><span data-ttu-id="b27c9-266">Angefügte Eigenschaften</span><span class="sxs-lookup"><span data-stu-id="b27c9-266">Attached Properties</span></span>

<span data-ttu-id="b27c9-267">Angefügte Eigenschaften für benutzerdefinierte Steuerelemente sind unter Einhaltung der folgenden Richtlinien zu implementieren:</span><span class="sxs-lookup"><span data-stu-id="b27c9-267">You should implement attached properties on custom controls using the following guidelines:</span></span>

- <span data-ttu-id="b27c9-268">Sie haben eine `public` `static` `readonly` <xref:System.Windows.DependencyProperty> der Form *propertyName*`Property`, die mithilfe der <xref:System.Windows.DependencyProperty.RegisterAttached%2A>-Methode erstellt wurde.</span><span class="sxs-lookup"><span data-stu-id="b27c9-268">Have a `public` `static` `readonly` <xref:System.Windows.DependencyProperty> of the form *PropertyName*`Property` that was creating using the <xref:System.Windows.DependencyProperty.RegisterAttached%2A> method.</span></span> <span data-ttu-id="b27c9-269">Der an <xref:System.Windows.DependencyProperty.RegisterAttached%2A> übergebenen Eigenschaftsname muss mit *propertyName*identisch sein.</span><span class="sxs-lookup"><span data-stu-id="b27c9-269">The property name that is passed to <xref:System.Windows.DependencyProperty.RegisterAttached%2A> must match *PropertyName*.</span></span>

- <span data-ttu-id="b27c9-270">Implementieren Sie die `public` `static` CLR-Methoden mit den Namen `Set` *PropertyName* und `Get` *PropertyName*.</span><span class="sxs-lookup"><span data-stu-id="b27c9-270">Implement a pair of `public` `static` CLR methods named `Set`*PropertyName* and `Get`*PropertyName*.</span></span> <span data-ttu-id="b27c9-271">Beide Methoden sollten eine von <xref:System.Windows.DependencyProperty> abgeleitete Klasse als erstes Argument akzeptieren.</span><span class="sxs-lookup"><span data-stu-id="b27c9-271">Both methods should accept a class derived from <xref:System.Windows.DependencyProperty> as their first argument.</span></span> <span data-ttu-id="b27c9-272">Die `Set`*PropertyName*-Methode akzeptiert auch ein Argument, dessen Typ mit dem registrierten Datentyp der Eigenschaft übereinstimmt.</span><span class="sxs-lookup"><span data-stu-id="b27c9-272">The `Set`*PropertyName* method also accepts an argument whose type matches the registered data type for the property.</span></span> <span data-ttu-id="b27c9-273">Die `Get`*PropertyName*-Methode sollte einen Wert zurückgeben, der den gleichen Typ aufweist.</span><span class="sxs-lookup"><span data-stu-id="b27c9-273">The `Get`*PropertyName* method should return a value of the same type.</span></span> <span data-ttu-id="b27c9-274">Falls die `Set`*PropertyName*-Methode fehlt, wird die Eigenschaft als schreibgeschützt gekennzeichnet.</span><span class="sxs-lookup"><span data-stu-id="b27c9-274">If the `Set`*PropertyName* method is missing, the property is marked read-only.</span></span>

- <span data-ttu-id="b27c9-275">`Set` *propertyName* und `Get`*propertyName* müssen direkt an die <xref:System.Windows.DependencyObject.GetValue%2A>-Methode und die <xref:System.Windows.DependencyObject.SetValue%2A>-Methode für das Ziel Abhängigkeits Objekt weitergeleitet werden.</span><span class="sxs-lookup"><span data-stu-id="b27c9-275">`Set` *PropertyName* and `Get`*PropertyName* must route directly to the <xref:System.Windows.DependencyObject.GetValue%2A> and <xref:System.Windows.DependencyObject.SetValue%2A> methods on the target dependency object, respectively.</span></span> <span data-ttu-id="b27c9-276">Designer können auf die angefügte Eigenschaft entweder über einen Aufruf des Wrappers für die Methode zugreifen, oder indem sie das Zielabhängigkeitsobjekt direkt aufrufen.</span><span class="sxs-lookup"><span data-stu-id="b27c9-276">Designers may access the attached property by calling through the method wrapper or making a direct call to the target dependency object.</span></span>

<span data-ttu-id="b27c9-277">Weitere Informationen zu angefügten Eigenschaften finden Sie in der [Übersicht über angefügte Eigenschaften](../advanced/attached-properties-overview.md).</span><span class="sxs-lookup"><span data-stu-id="b27c9-277">For more information on attached properties, see [Attached Properties Overview](../advanced/attached-properties-overview.md).</span></span>

### <a name="define-and-use-shared-resources"></a><span data-ttu-id="b27c9-278">Definieren und Verwenden von freigegebenen Ressourcen</span><span class="sxs-lookup"><span data-stu-id="b27c9-278">Define and Use Shared Resources</span></span>

<span data-ttu-id="b27c9-279">Sie können Ihr Steuerelement entweder in die Assembly Ihrer Anwendung, oder in eine separate Assembly einbinden, die in mehreren Anwendungen verwendet werden kann.</span><span class="sxs-lookup"><span data-stu-id="b27c9-279">You can include your control in the same assembly as your application, or you can package your control in a separate assembly that can be used in multiple applications.</span></span> <span data-ttu-id="b27c9-280">Der Großteil der in diesem Thema erläuterten Informationen gilt unabhängig von der von Ihnen verwendeten Methode.</span><span class="sxs-lookup"><span data-stu-id="b27c9-280">For the most part, the information discussed in this topic applies regardless of the method you use.</span></span>  <span data-ttu-id="b27c9-281">Ein wesentlicher Unterschied ist dennoch zu beachten.</span><span class="sxs-lookup"><span data-stu-id="b27c9-281">There is one difference worth noting, however.</span></span>  <span data-ttu-id="b27c9-282">Falls Sie ein Steuerelement in die Assembly einer Anwendung einbinden, können Sie der App.xaml-Datei globale Ressourcen hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="b27c9-282">When you put a control in the same assembly as an application, you are free to add global resources to the App.xaml file.</span></span> <span data-ttu-id="b27c9-283">Eine Assembly, die nur Steuerelemente enthält, verfügt jedoch nicht über ein <xref:System.Windows.Application> Objekt, sodass eine APP. XAML-Datei nicht verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="b27c9-283">But an assembly that contains only controls does not have an <xref:System.Windows.Application> object associated with it, so an App.xaml file is not available.</span></span>

<span data-ttu-id="b27c9-284">Wenn eine Anwendung nach einer Ressource sucht,wird auf drei Ebenen in der folgenden Reihenfolge gesucht:</span><span class="sxs-lookup"><span data-stu-id="b27c9-284">When an application looks for a resource, it looks at three levels in the following order:</span></span>

1. <span data-ttu-id="b27c9-285">Die Elementebene.</span><span class="sxs-lookup"><span data-stu-id="b27c9-285">The element level.</span></span>

   <span data-ttu-id="b27c9-286">Das System beginnt mit dem Element, das auf die Ressource verweist, und sucht anschließend die Ressourcen des logischen übergeordneten Elements durch. Dieser Schritt wir wiederholt, bis das Stammelement erreicht ist.</span><span class="sxs-lookup"><span data-stu-id="b27c9-286">The system starts with the element that references the resource and then searches resources of the logical parent and so forth until the root element is reached.</span></span>

2. <span data-ttu-id="b27c9-287">Die Anwendungsebene.</span><span class="sxs-lookup"><span data-stu-id="b27c9-287">The application level.</span></span>

   <span data-ttu-id="b27c9-288">Vom <xref:System.Windows.Application> Objekt definierte Ressourcen.</span><span class="sxs-lookup"><span data-stu-id="b27c9-288">Resources defined by the <xref:System.Windows.Application> object.</span></span>

3. <span data-ttu-id="b27c9-289">Die Designebene.</span><span class="sxs-lookup"><span data-stu-id="b27c9-289">The theme level.</span></span>

   <span data-ttu-id="b27c9-290">Ressourcenverzeichnisse werden auf der Designebene in einem Themes-Unterordner gespeichert.</span><span class="sxs-lookup"><span data-stu-id="b27c9-290">Theme-level dictionaries are stored in a subfolder named Themes.</span></span>  <span data-ttu-id="b27c9-291">Die Dateien im Themes-Ordner entsprechen den Designs.</span><span class="sxs-lookup"><span data-stu-id="b27c9-291">The files in the Themes folder correspond to themes.</span></span>  <span data-ttu-id="b27c9-292">Dort könnten Sie beispielsweise Aero.NormalColor.xaml, Luna.NormalColor.xaml, Royale.NormalColor.xaml, etc. finden.</span><span class="sxs-lookup"><span data-stu-id="b27c9-292">For example, you might have Aero.NormalColor.xaml, Luna.NormalColor.xaml, Royale.NormalColor.xaml, and so on.</span></span>  <span data-ttu-id="b27c9-293">Möglicherweise ist auch eine Datei mit dem Namen generic.xaml enthalten.</span><span class="sxs-lookup"><span data-stu-id="b27c9-293">You can also have a file named generic.xaml.</span></span>  <span data-ttu-id="b27c9-294">Bei einer Suche nach einer Ressource auf der Designebene wird zunächst in der designspezifischen Datei und dann in der Datei generic.xaml gesucht.</span><span class="sxs-lookup"><span data-stu-id="b27c9-294">When the system looks for a resource at the themes level, it first looks for it in the theme-specific file and then looks for it in generic.xaml.</span></span>

<span data-ttu-id="b27c9-295">Falls Ihr Steuerelement in einer anderen Assembly als die Anwendung liegt, müssen Sie Ihre globale Ressourcen auf die Elementen- oder Designebene umspeichern.</span><span class="sxs-lookup"><span data-stu-id="b27c9-295">When your control is in an assembly that is separate from the application, you must put your global resources at the element level or at the theme level.</span></span> <span data-ttu-id="b27c9-296">Beide Methoden haben ihre Vorteile.</span><span class="sxs-lookup"><span data-stu-id="b27c9-296">Both methods have their advantages.</span></span>

#### <a name="defining-resources-at-the-element-level"></a><span data-ttu-id="b27c9-297">Definieren von Ressourcen auf der Elementebene</span><span class="sxs-lookup"><span data-stu-id="b27c9-297">Defining Resources at the Element Level</span></span>

<span data-ttu-id="b27c9-298">Sie können freigegebene Ressourcen auf der Elementebene definieren, indem Sie ein benutzerdefiniertes Ressourcenverzeichnis erstellen und es mit dem Ressourcenverzeichnis Ihres Steuerelements zusammenführen.</span><span class="sxs-lookup"><span data-stu-id="b27c9-298">You can define shared resources at the element level by creating a custom resource dictionary and merging it with your control’s resource dictionary.</span></span>  <span data-ttu-id="b27c9-299">Falls Sie sich für diese Methode entscheiden, können Sie die Ressourcendatei beliebig benennen und sie im Ordner speichern, wo Ihre Steuerelemente liegen.</span><span class="sxs-lookup"><span data-stu-id="b27c9-299">When you use this method, you can name your resource file anything you want, and it can be in the same folder as your controls.</span></span> <span data-ttu-id="b27c9-300">Für Ressourcen auf der Elementebene können ebenso einfache Zeichenfolgen als Schlüssel verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="b27c9-300">Resources at the element level can also use simple strings as keys.</span></span> <span data-ttu-id="b27c9-301">Im folgenden Beispiel wird eine <xref:System.Windows.Media.LinearGradientBrush> Ressourcen Datei mit dem Namen Dictionary1. XAML erstellt.</span><span class="sxs-lookup"><span data-stu-id="b27c9-301">The following example creates a <xref:System.Windows.Media.LinearGradientBrush> resource file named Dictionary1.xaml.</span></span>

[!code-xaml[SharedResources#1](~/samples/snippets/csharp/VS_Snippets_Wpf/SharedResources/CS/Dictionary1.xaml#1)]

<span data-ttu-id="b27c9-302">Nachdem Sie das Ressourcenverzeichnis definiert haben, müssen Sie es mit dem Ressourcenverzeichnis des Steuerelements zusammenführen.</span><span class="sxs-lookup"><span data-stu-id="b27c9-302">Once you have defined your dictionary, you need to merge it with your control's resource dictionary.</span></span>  <span data-ttu-id="b27c9-303">Hierzu können Sie [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] oder Code verwenden.</span><span class="sxs-lookup"><span data-stu-id="b27c9-303">You can do this by using [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] or code.</span></span>

<span data-ttu-id="b27c9-304">Im folgenden Beispiel wird ein Ressourcenverzeichnis mit [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] zusammengeführt.</span><span class="sxs-lookup"><span data-stu-id="b27c9-304">The following example merges a resource dictionary by using [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].</span></span>

[!code-xaml[SharedResources#2](~/samples/snippets/csharp/VS_Snippets_Wpf/SharedResources/CS/ShapeResizer.xaml#2)]

<span data-ttu-id="b27c9-305">Der Nachteil dieses Ansatzes besteht darin, dass jedes Mal, wenn Sie darauf verweisen, ein <xref:System.Windows.ResourceDictionary> Objekt erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="b27c9-305">The disadvantage to this approach is that a <xref:System.Windows.ResourceDictionary> object is created each time you reference it.</span></span>  <span data-ttu-id="b27c9-306">Wenn Sie z. b. über 10 benutzerdefinierte Steuerelemente in der Bibliothek verfügen und die freigegebenen Ressourcen Wörterbücher für jedes Steuerelement mithilfe von XAML zusammenführen, erstellen Sie 10 identische <xref:System.Windows.ResourceDictionary> Objekte.</span><span class="sxs-lookup"><span data-stu-id="b27c9-306">For example, if you have 10 custom controls in your library and merge the shared resource dictionaries for each control by using XAML, you create 10 identical <xref:System.Windows.ResourceDictionary> objects.</span></span>  <span data-ttu-id="b27c9-307">Dies können Sie vermeiden, indem Sie eine statische Klasse erstellen, die die Ressourcen im Code zusammenführt und die resultierenden <xref:System.Windows.ResourceDictionary>zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="b27c9-307">You can avoid this by creating a static class that merges the resources in code and returns the resulting <xref:System.Windows.ResourceDictionary>.</span></span>

<span data-ttu-id="b27c9-308">Im folgenden Beispiel wird eine-Klasse erstellt, die eine freigegebene <xref:System.Windows.ResourceDictionary>zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="b27c9-308">The following example creates a class that returns a shared <xref:System.Windows.ResourceDictionary>.</span></span>

[!code-csharp[SharedResources#3](~/samples/snippets/csharp/VS_Snippets_Wpf/SharedResources/CS/SharedDictionaryManager.cs#3)]

<span data-ttu-id="b27c9-309">Im folgenden Beispiel wird die freigegebene Ressource mit den Ressourcen eines benutzerdefinierten Steuerelements im Konstruktor des Steuerelements zusammengeführt, bevor sie `InitializeComponent` aufruft.</span><span class="sxs-lookup"><span data-stu-id="b27c9-309">The following example merges the shared resource with the resources of a custom control in the control's constructor before it calls `InitializeComponent`.</span></span>  <span data-ttu-id="b27c9-310">Da der `SharedDictionaryManager.SharedDictionary` eine statische Eigenschaft ist, wird die <xref:System.Windows.ResourceDictionary> nur einmal erstellt.</span><span class="sxs-lookup"><span data-stu-id="b27c9-310">Because the `SharedDictionaryManager.SharedDictionary` is a static property, the <xref:System.Windows.ResourceDictionary> is created only once.</span></span> <span data-ttu-id="b27c9-311">Da das Ressourcenverzeichnis vor dem Aufruf von `InitializeComponent` zusammengeführt worden ist, kann das Steuerelement auf die Ressourcen in seiner [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]-Datei zugreifen.</span><span class="sxs-lookup"><span data-stu-id="b27c9-311">Because the resource dictionary was merged before `InitializeComponent` was called, the resources are available to the control in its [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] file.</span></span>

[!code-csharp[SharedResources#4](~/samples/snippets/csharp/VS_Snippets_Wpf/SharedResources/CS/ShapeResizer.xaml.cs#4)]

#### <a name="defining-resources-at-the-theme-level"></a><span data-ttu-id="b27c9-312">Definieren von Ressourcen auf der Designebene</span><span class="sxs-lookup"><span data-stu-id="b27c9-312">Defining Resources at the Theme Level</span></span>

<span data-ttu-id="b27c9-313">Mit [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] können Sie Ressourcen für verschiedene Windows-Designs erstellen.</span><span class="sxs-lookup"><span data-stu-id="b27c9-313">[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] enables you to create resources for different Windows themes.</span></span>  <span data-ttu-id="b27c9-314">Als Autor des Steuerelements können Sie eine Ressource für ein bestimmtes Design definieren, um die Darstellung Ihres Steuerelements an das jeweils verwendete Design anzupassen.</span><span class="sxs-lookup"><span data-stu-id="b27c9-314">As a control author, you can define a resource for a specific theme to change your control's appearance depending on what theme is in use.</span></span> <span data-ttu-id="b27c9-315">Beispielsweise unterscheidet sich die Darstellung eines <xref:System.Windows.Controls.Button> im klassischen Windows-Design (das Standarddesign für Windows 2000) von einem <xref:System.Windows.Controls.Button> im Windows-Luna-Design (Standarddesign für Windows XP), da der <xref:System.Windows.Controls.Button> für jedes Design eine andere <xref:System.Windows.Controls.ControlTemplate> verwendet.</span><span class="sxs-lookup"><span data-stu-id="b27c9-315">For example, the appearance of a <xref:System.Windows.Controls.Button> in the Windows Classic theme (the default theme for Windows 2000) differs from a <xref:System.Windows.Controls.Button> in the Windows Luna theme (the default theme for Windows XP) because the <xref:System.Windows.Controls.Button> uses a different <xref:System.Windows.Controls.ControlTemplate> for each theme.</span></span>

<span data-ttu-id="b27c9-316">Designspezifische Ressourcen werden in einem Ressourcenverzeichnis mit dem entsprechenden Dateinamen gespeichert.</span><span class="sxs-lookup"><span data-stu-id="b27c9-316">Resources that are specific to a theme are kept in a resource dictionary with a specific file name.</span></span> <span data-ttu-id="b27c9-317">Diese Dateien müssen sich im `Themes`-Verzeichnis befinden, einem Unterordner des Ordners, in dem sich das Steuerelement befindet.</span><span class="sxs-lookup"><span data-stu-id="b27c9-317">These files must be in a folder named `Themes` that is a subfolder of the folder that contains the control.</span></span> <span data-ttu-id="b27c9-318">In der folgenden Tabelle sind die Ressourcenverzeichnisdateien sowie die den einzelnen Dateien zugeordneten Designs aufgelistet:</span><span class="sxs-lookup"><span data-stu-id="b27c9-318">The following table lists the resource dictionary files and the theme that is associated with each file:</span></span>

|<span data-ttu-id="b27c9-319">Name der Ressourcenverzeichnisdatei</span><span class="sxs-lookup"><span data-stu-id="b27c9-319">Resource dictionary file name</span></span>|<span data-ttu-id="b27c9-320">Windows-Design</span><span class="sxs-lookup"><span data-stu-id="b27c9-320">Windows theme</span></span>|
|-----------------------------------|-------------------|
|`Classic.xaml`|<span data-ttu-id="b27c9-321">Klassische Windows 9x/2000-Darstellung unter Windows XP</span><span class="sxs-lookup"><span data-stu-id="b27c9-321">Classic Windows 9x/2000 look on Windows XP</span></span>|
|`Luna.NormalColor.xaml`|<span data-ttu-id="b27c9-322">Blaues Standard-Design unter Windows XP</span><span class="sxs-lookup"><span data-stu-id="b27c9-322">Default blue theme on Windows XP</span></span>|
|`Luna.Homestead.xaml`|<span data-ttu-id="b27c9-323">Olivgrünes Design unter Windows XP</span><span class="sxs-lookup"><span data-stu-id="b27c9-323">Olive theme on Windows XP</span></span>|
|`Luna.Metallic.xaml`|<span data-ttu-id="b27c9-324">Silbernes Design unter Windows XP</span><span class="sxs-lookup"><span data-stu-id="b27c9-324">Silver theme on Windows XP</span></span>|
|`Royale.NormalColor.xaml`|<span data-ttu-id="b27c9-325">Standarddesign von Windows XP Media Center Edition</span><span class="sxs-lookup"><span data-stu-id="b27c9-325">Default theme on Windows XP Media Center Edition</span></span>|
|`Aero.NormalColor.xaml`|<span data-ttu-id="b27c9-326">Standarddesign unter Windows Vista</span><span class="sxs-lookup"><span data-stu-id="b27c9-326">Default theme on Windows Vista</span></span>|

<span data-ttu-id="b27c9-327">Sie müssen nicht für jedes Design eine Ressource definieren.</span><span class="sxs-lookup"><span data-stu-id="b27c9-327">You do not need to define a resource for every theme.</span></span> <span data-ttu-id="b27c9-328">Wenn eine Ressource nicht für ein bestimmtes Design definiert ist, durchsucht das Steuerelement `Classic.xaml` nach der Ressource.</span><span class="sxs-lookup"><span data-stu-id="b27c9-328">If a resource is not defined for a specific theme, then the control checks `Classic.xaml` for the resource.</span></span> <span data-ttu-id="b27c9-329">Falls die Ressource weder in der Datei, die dem aktuellen Design entspricht, noch in `Classic.xaml` definiert ist, verwendet das Steuerelement die generische Ressource, die sich im Ressourcenverzeichnis mit dem Namen `generic.xaml` befindet.</span><span class="sxs-lookup"><span data-stu-id="b27c9-329">If the resource is not defined in the file that corresponds to the current theme or in `Classic.xaml`, the control uses the generic resource, which is in a resource dictionary file named `generic.xaml`.</span></span>  <span data-ttu-id="b27c9-330">Die `generic.xaml`-Datei befindet sich im gleichen Ordner mit den designspezifischen Ressourcenverzeichnisdateien.</span><span class="sxs-lookup"><span data-stu-id="b27c9-330">The `generic.xaml` file is located in the same folder as the theme-specific resource dictionary files.</span></span> <span data-ttu-id="b27c9-331">Obwohl `generic.xaml` keinem bestimmten Windows-Design entspricht, ist es dennoch ein Ressourcenverzeichnis auf der Designebene.</span><span class="sxs-lookup"><span data-stu-id="b27c9-331">Although `generic.xaml` does not correspond to a specific Windows theme, it is still a theme-level dictionary.</span></span>

<span data-ttu-id="b27c9-332">Das [C#](https://github.com/dotnet/samples/tree/master/snippets/csharp/VS_Snippets_Wpf/CustomControlNumericUpDown/CSharp) benutzerdefinierte Steuerelement oder [Visual Basic](https://github.com/dotnet/samples/tree/master/snippets/visualbasic/VS_Snippets_Wpf/CustomControlNumericUpDown/visualbasic) NumericUpDown-Steuerelement mit Design-und Benutzeroberflächenautomatisierungs-Unterstützung enthält zwei Ressourcen Wörterbücher für das `NumericUpDown`-Steuerelement: eines in Generic. XAML und das andere in Luna. NormalColor. XAML.</span><span class="sxs-lookup"><span data-stu-id="b27c9-332">The [C#](https://github.com/dotnet/samples/tree/master/snippets/csharp/VS_Snippets_Wpf/CustomControlNumericUpDown/CSharp) or [Visual Basic](https://github.com/dotnet/samples/tree/master/snippets/visualbasic/VS_Snippets_Wpf/CustomControlNumericUpDown/visualbasic) NumericUpDown custom control with theme and UI automation support sample contains two resource dictionaries for the `NumericUpDown` control: one is in generic.xaml, and the other is in Luna.NormalColor.xaml.</span></span> 

<span data-ttu-id="b27c9-333">Wenn Sie eine <xref:System.Windows.Controls.ControlTemplate> in eine der Design spezifischen Ressourcenverzeichnis Dateien einfügen, müssen Sie für das Steuerelement einen statischen Konstruktor erstellen und die <xref:System.Windows.DependencyProperty.OverrideMetadata%28System.Type%2CSystem.Windows.PropertyMetadata%29>-Methode auf dem <xref:System.Windows.FrameworkElement.DefaultStyleKey%2A>aufzurufen, wie im folgenden Beispiel gezeigt.</span><span class="sxs-lookup"><span data-stu-id="b27c9-333">When you put a <xref:System.Windows.Controls.ControlTemplate> in any of the theme-specific resource dictionary files, you must create a static constructor for your control and call the <xref:System.Windows.DependencyProperty.OverrideMetadata%28System.Type%2CSystem.Windows.PropertyMetadata%29> method on the <xref:System.Windows.FrameworkElement.DefaultStyleKey%2A>, as shown in the following example.</span></span>

[!code-csharp[CustomControlNumericUpDownOneProject#StaticConstructor](~/samples/snippets/csharp/VS_Snippets_Wpf/CustomControlNumericUpDownOneProject/CSharp/NumericUpDown.cs#staticconstructor)]
[!code-vb[CustomControlNumericUpDownOneProject#StaticConstructor](~/samples/snippets/visualbasic/VS_Snippets_Wpf/CustomControlNumericUpDownOneProject/visualbasic/numericupdown.vb#staticconstructor)]

##### <a name="defining-and-referencing-keys-for-theme-resources"></a><span data-ttu-id="b27c9-334">Definieren und Angeben von Schlüsseln für Designressourcen</span><span class="sxs-lookup"><span data-stu-id="b27c9-334">Defining and Referencing Keys for Theme Resources</span></span>

<span data-ttu-id="b27c9-335">Wenn Sie eine Ressource auf der Elementebene definieren, können Sie ihr als Schlüssel eine Zeichenfolge zuweisen und über diese Zeichenfolge auf sie zugreifen.</span><span class="sxs-lookup"><span data-stu-id="b27c9-335">When you define a resource at the element level, you can assign a string as its key and access the resource via the string.</span></span> <span data-ttu-id="b27c9-336">Wenn Sie eine Ressource auf der Design Ebene definieren, müssen Sie eine <xref:System.Windows.ComponentResourceKey> als Schlüssel verwenden.</span><span class="sxs-lookup"><span data-stu-id="b27c9-336">When you define a resource at the theme level, you must use a <xref:System.Windows.ComponentResourceKey> as the key.</span></span>  <span data-ttu-id="b27c9-337">Im folgenden Beispiel wird eine Ressource in generic.xaml definiert.</span><span class="sxs-lookup"><span data-stu-id="b27c9-337">The following example defines a resource in generic.xaml.</span></span>

[!code-xaml[ThemeResourcesControlLibrary#5](~/samples/snippets/csharp/VS_Snippets_Wpf/ThemeResourcesControlLibrary/CS/Themes/generic.xaml#5)]

<span data-ttu-id="b27c9-338">Im folgenden Beispiel wird auf die Ressource verwiesen, indem der <xref:System.Windows.ComponentResourceKey> als Schlüssel angegeben wird.</span><span class="sxs-lookup"><span data-stu-id="b27c9-338">The following example references the resource by specifying the <xref:System.Windows.ComponentResourceKey> as the key.</span></span>

[!code-xaml[ThemeResourcesControlLibrary#6](~/samples/snippets/csharp/VS_Snippets_Wpf/ThemeResourcesControlLibrary/CS/NumericUpDown.xaml#6)]

##### <a name="specifying-the-location-of-theme-resources"></a><span data-ttu-id="b27c9-339">Angeben des Speicherorts von Designressourcen</span><span class="sxs-lookup"><span data-stu-id="b27c9-339">Specifying the Location of Theme Resources</span></span>

<span data-ttu-id="b27c9-340">Um die Ressourcen für ein Steuerelement zu finden, muss die Hostinganwendung über die Information verfügen, dass die Assembly Ressourcen enthält, die steuerelementenspezifisch sind.</span><span class="sxs-lookup"><span data-stu-id="b27c9-340">To find the resources for a control, the hosting application needs to know that the assembly contains control-specific resources.</span></span> <span data-ttu-id="b27c9-341">Dies erreichen Sie, indem Sie die <xref:System.Windows.ThemeInfoAttribute> der Assembly hinzufügen, die das Steuerelement enthält.</span><span class="sxs-lookup"><span data-stu-id="b27c9-341">You can accomplish that by adding the <xref:System.Windows.ThemeInfoAttribute> to the assembly that contains the control.</span></span> <span data-ttu-id="b27c9-342">Der <xref:System.Windows.ThemeInfoAttribute> verfügt über eine <xref:System.Windows.ThemeInfoAttribute.GenericDictionaryLocation%2A>-Eigenschaft, die den Speicherort generischer Ressourcen und eine <xref:System.Windows.ThemeInfoAttribute.ThemeDictionaryLocation%2A> Eigenschaft angibt, die den Speicherort der Design spezifischen Ressourcen angibt.</span><span class="sxs-lookup"><span data-stu-id="b27c9-342">The <xref:System.Windows.ThemeInfoAttribute> has a <xref:System.Windows.ThemeInfoAttribute.GenericDictionaryLocation%2A> property that specifies the location of generic resources, and a <xref:System.Windows.ThemeInfoAttribute.ThemeDictionaryLocation%2A> property that specifies the location of the theme-specific resources.</span></span>

<span data-ttu-id="b27c9-343">Im folgenden Beispiel werden die Eigenschaften <xref:System.Windows.ThemeInfoAttribute.GenericDictionaryLocation%2A> und <xref:System.Windows.ThemeInfoAttribute.ThemeDictionaryLocation%2A> auf <xref:System.Windows.ResourceDictionaryLocation.SourceAssembly>festgelegt, um anzugeben, dass sich die generischen und Design spezifischen Ressourcen in derselben Assembly wie das Steuerelement befinden.</span><span class="sxs-lookup"><span data-stu-id="b27c9-343">The following example sets the <xref:System.Windows.ThemeInfoAttribute.GenericDictionaryLocation%2A> and <xref:System.Windows.ThemeInfoAttribute.ThemeDictionaryLocation%2A> properties to <xref:System.Windows.ResourceDictionaryLocation.SourceAssembly>, to specify that the generic and theme-specific resources are in the same assembly as the control.</span></span>

[!code-csharp[CustomControlNumericUpDown#ThemesSection](~/samples/snippets/csharp/VS_Snippets_Wpf/CustomControlNumericUpDown/CSharp/CustomControlLibrary/Properties/AssemblyInfo.cs#themessection)]
[!code-vb[CustomControlNumericUpDown#ThemesSection](~/samples/snippets/visualbasic/VS_Snippets_Wpf/CustomControlNumericUpDown/visualbasic/customcontrollibrary/my project/assemblyinfo.vb#themessection)]

## <a name="see-also"></a><span data-ttu-id="b27c9-344">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="b27c9-344">See also</span></span>

- [<span data-ttu-id="b27c9-345">Entwerfen von XAML-Code in Visual Studio</span><span class="sxs-lookup"><span data-stu-id="b27c9-345">Design XAML in Visual Studio</span></span>](/visualstudio/xaml-tools/designing-xaml-in-visual-studio)
- [<span data-ttu-id="b27c9-346">Paket-URI in WPF</span><span class="sxs-lookup"><span data-stu-id="b27c9-346">Pack URIs in WPF</span></span>](../app-development/pack-uris-in-wpf.md)
- [<span data-ttu-id="b27c9-347">Anpassung von Steuerelementen</span><span class="sxs-lookup"><span data-stu-id="b27c9-347">Control Customization</span></span>](control-customization.md)
