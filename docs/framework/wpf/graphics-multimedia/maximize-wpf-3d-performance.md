---
title: Maximieren der 3D-Leistung von WPF
ms.date: 03/30/2017
helpviewer_keywords:
- 3-D graphics [WPF]
ms.assetid: 4bcf949d-d92f-4d8d-8a9b-1e4c61b25bf6
ms.openlocfilehash: e1a90406423e36dd10b8b108e076fe73f99947f0
ms.sourcegitcommit: 77e33b682db39955e331b8e8eda4ef1925a24e78
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/29/2019
ms.locfileid: "70133848"
---
# <a name="maximize-wpf-3d-performance"></a>Maximieren der 3D-Leistung von WPF
Wenn Sie die verwenden [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] , um 3D-Steuerelemente zu erstellen und 3D-Szenen in Ihre Anwendungen einzubeziehen, ist es wichtig, die Leistungsoptimierung zu berücksichtigen. Dieses Thema enthält eine Liste der 3D-Klassen und-Eigenschaften, die Auswirkungen auf die Leistung für Ihre Anwendung haben, sowie Empfehlungen zur Optimierung der Leistung bei der Verwendung.  
  
 In [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] diesem Thema wird davon ausgegangen, dass 3D-Features besser verstanden wurden. Die Vorschläge in diesem Dokument gelten für "Rendering Tier 2" – ungefähr definiert als Hardware, die Pixel-Shader-Version 2,0 und Vertex-Shader-Version 2,0 unterstützt. Weitere Informationen finden Sie unter [renderingstufen für Grafiken](../advanced/graphics-rendering-tiers.md).  
  
## <a name="performance-impact-high"></a>Leistungs Beeinträchtigung: Hoch  
  
|Eigenschaft|Empfehlung|  
|-|-|  
|<xref:System.Windows.Media.Brush>|Pinsel Geschwindigkeit (am schnellsten zum langsamsten):<br /><br /> <xref:System.Windows.Media.SolidColorBrush><br /><br /> <xref:System.Windows.Media.LinearGradientBrush><br /><br /> <xref:System.Windows.Media.ImageBrush><br /><br /> <xref:System.Windows.Media.DrawingBrush>auten<br /><br /> <xref:System.Windows.Media.VisualBrush>auten<br /><br /> <xref:System.Windows.Media.RadialGradientBrush><br /><br /> <xref:System.Windows.Media.DrawingBrush>nicht zwischengespeichert<br /><br /> <xref:System.Windows.Media.VisualBrush>nicht zwischengespeichert|  
|<xref:System.Windows.UIElement.ClipToBoundsProperty>|Legen `Viewport3D.ClipToBounds` Sie diese Einstellung auf false fest, wenn Sie [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] den Inhalt eines <xref:System.Windows.Controls.Viewport3D> nicht explizit auf das Viewport3D's-Rechteck ausschneiden müssen. [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]das Clipping mit Antialiasing kann sehr langsam sein `ClipToBounds` und ist <xref:System.Windows.Controls.Viewport3D>standardmäßig aktiviert (langsam).|  
|<xref:System.Windows.UIElement.IsHitTestVisible%2A>|Legen `Viewport3D.IsHitTestVisible` Sie diese Einstellung auf "false" [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] fest, <xref:System.Windows.Controls.Viewport3D> wenn der Inhalt eines beim Ausführen von Maus Treffer Tests nicht berücksichtigt werden muss.  Treffer Tests für 3D-Inhalte erfolgen in Software und können mit großen Netzen langsam sein. <xref:System.Windows.UIElement.IsHitTestVisible%2A>ist standardmäßig <xref:System.Windows.Controls.Viewport3D>aktiviert (langsam).|  
|<xref:System.Windows.Media.Media3D.GeometryModel3D>|Erstellen Sie unterschiedliche Modelle nur dann, wenn Sie unterschiedliche Materialien oder Transformationen benötigen.  Versuchen Sie andernfalls, viele <xref:System.Windows.Media.Media3D.GeometryModel3D> Instanzen mit denselben Materialien und Transformationen in ein paar größere <xref:System.Windows.Media.Media3D.GeometryModel3D> -und- <xref:System.Windows.Media.Media3D.MeshGeometry3D> Instanzen zusammenzufassen.|  
|<xref:System.Windows.Media.Media3D.MeshGeometry3D>|Mesh-Animation – das Ändern einzelner Scheitel Punkte eines Netzes pro Frame – ist in [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]nicht immer effizient.  Um die Auswirkungen von Änderungs Benachrichtigungen auf die Leistung zu minimieren, wenn jeder Scheitelpunkt geändert wird, trennen Sie das Mesh von der visuellen Struktur, bevor Sie die pro-vertexänderung durchführen.  Nachdem das Mesh geändert wurde, fügen Sie es erneut an den visuellen Baum an.  Versuchen Sie außerdem, die Größe der Netzen zu minimieren, die auf diese Weise animiert werden.|  
|3D-Antialiasing|Um die renderinggeschwindigkeit zu erhöhen, deaktivieren <xref:System.Windows.Controls.Viewport3D> Sie multisamplinggrad für ein <xref:System.Windows.Media.RenderOptions.EdgeMode%2A> , `Aliased`indem Sie die angefügte-Eigenschaft auf  Standardmäßig ist 3D-Antialiasing unter Windows mit vier Stichproben pro Pixel aktiviert.|  
|Text|Livetext in einer 3D-Szene (Live, da er sich <xref:System.Windows.Media.DrawingBrush> in <xref:System.Windows.Media.VisualBrush>einem oder befindet) kann langsam sein. Versuchen Sie stattdessen, Bilder des Texts (via <xref:System.Windows.Media.Imaging.RenderTargetBitmap>) zu verwenden, es sei denn, der Text wird geändert.|  
|<xref:System.Windows.Media.TileBrush>|Wenn Sie ein <xref:System.Windows.Media.VisualBrush> oder ein <xref:System.Windows.Media.DrawingBrush> in einer 3D-Szene verwenden müssen, da der Inhalt des Pinsels nicht statisch ist, versuchen Sie, den Pinsel zwischenzuspeichern (legen Sie die angefügte-Eigenschaft <xref:System.Windows.Media.RenderOptions.CachingHint%2A> auf `Cache`fest).  Legen Sie die Schwellenwerte für den minimal-und Höchstwert für die <xref:System.Windows.Media.RenderOptions.CacheInvalidationThresholdMinimum%2A> Skalierung (mit den angefügten Eigenschaften und <xref:System.Windows.Media.RenderOptions.CacheInvalidationThresholdMaximum%2A>) so fest, dass die zwischengespeicherten Pinsel nicht zu häufig erneut generiert werden, und behalten Sie gleichzeitig die gewünschte Qualität.  Standardmäßig <xref:System.Windows.Media.DrawingBrush> werden und <xref:System.Windows.Media.VisualBrush> nicht zwischengespeichert. das bedeutet, dass jedes Mal, wenn etwas mit dem Pinsel gezeichnet werden muss, der gesamte Inhalt des Pinsels erneut auf eine zwischen Oberfläche gerendert werden muss.|  
|<xref:System.Windows.Media.Effects.BitmapEffect>|<xref:System.Windows.Media.Effects.BitmapEffect>erzwingt, dass alle betroffenen Inhalte ohne Hardwarebeschleunigung gerendert werden.  Verwenden <xref:System.Windows.Media.Effects.BitmapEffect>Sie nicht, um eine optimale Leistung zu erzielen.|  
  
## <a name="performance-impact-medium"></a>Leistungs Beeinträchtigung: Mittel  
  
|Eigenschaft|Empfehlung|  
|-|-|  
|<xref:System.Windows.Media.Media3D.MeshGeometry3D>|Wenn ein Mesh so definiert ist, dass es Dreiecke mit freigegebenen Scheitel Punkten verwendet und diese Scheitel Punkte dieselbe Position, normale und Texturkoordinaten aufweisen, definieren Sie jeden freigegebenen Scheitelpunkt nur einmal, <xref:System.Windows.Media.Media3D.MeshGeometry3D.TriangleIndices%2A>und definieren Sie dann die Dreiecke mit dem Index.|  
|<xref:System.Windows.Media.ImageBrush>|Versuchen Sie, die Textur Größen zu minimieren, wenn Sie die Größe explizit steuern (bei Verwendung <xref:System.Windows.Media.Imaging.RenderTargetBitmap> von und/ <xref:System.Windows.Media.ImageBrush>oder).  Beachten Sie, dass mit niedrigerer Auflösung die Qualität der visuellen Qualität beeinträchtigt werden kann, um das richtige Gleichgewicht zwischen Qualität und Leistung zu finden.|  
|Deckkraft|Verwenden Sie beim Rendern von durchlässigen 3D-Inhalten (z. b. Reflektionen) die Deckkraft <xref:System.Windows.Media.Brush.Opacity%2A> Eigenschaften <xref:System.Windows.Media.Media3D.DiffuseMaterial.Color%2A>für Pinsel oder Material (über oder <xref:System.Windows.Controls.Viewport3D> ), `Viewport3D.Opacity` anstatt eine separate Durchlässigkeit zu erstellen, indem Sie auf einen Wert kleiner als 1 festlegen.|  
|<xref:System.Windows.Controls.Viewport3D>|Minimieren Sie die <xref:System.Windows.Controls.Viewport3D> Anzahl der Objekte, die in einer Szene verwendet werden.  Fügen Sie viele 3D-Modelle im gleichen Viewport3D ein, anstatt separate Viewport3D-Instanzen für jedes Modell zu erstellen.|  
|<xref:System.Windows.Freezable>|In der Regel ist es vorteilhaft <xref:System.Windows.Media.Media3D.MeshGeometry3D>, <xref:System.Windows.Media.Media3D.GeometryModel3D>,, Pinsel und Materialien wiederzuverwenden.  Alle sind multiparametrierbar, da Sie von `Freezable`abgeleitet sind.|  
|<xref:System.Windows.Freezable>|Ruft die <xref:System.Windows.Freezable.Freeze%2A> -Methode für frei wählbare Elemente auf, wenn deren Eigenschaften in der Anwendung unverändert bleiben.  Durch das Einfrieren können Arbeits Sätze verringert und die Geschwindigkeit erhöht werden.|  
|<xref:System.Windows.Media.Brush>|Verwenden <xref:System.Windows.Media.ImageBrush> Sie anstelle <xref:System.Windows.Media.VisualBrush> von <xref:System.Windows.Media.DrawingBrush> oder, wenn sich der Inhalt des Pinsels nicht ändert.  2D-Inhalte können in eine <xref:System.Windows.Controls.Image> über <xref:System.Windows.Media.Imaging.RenderTargetBitmap> konvertiert <xref:System.Windows.Media.ImageBrush>und dann in verwendet werden.|  
|<xref:System.Windows.Media.Media3D.GeometryModel3D.BackMaterial%2A>|Verwenden <xref:System.Windows.Media.Media3D.GeometryModel3D.BackMaterial%2A> Sie nicht, es sei denn, Sie müssen tatsächlich die hintergesichter Ihres <xref:System.Windows.Media.Media3D.GeometryModel3D>anzeigen.|  
|<xref:System.Windows.Media.Media3D.Light>|Leichte Geschwindigkeit (am schnellsten zum langsamsten):<br /><br /> <xref:System.Windows.Media.Media3D.AmbientLight><br /><br /> <xref:System.Windows.Media.Media3D.DirectionalLight><br /><br /> <xref:System.Windows.Media.Media3D.PointLight><br /><br /> <xref:System.Windows.Media.Media3D.SpotLight>|  
|<xref:System.Windows.Media.Media3D.MeshGeometry3D>|Versuchen Sie, die gittergrößen unter diesen Grenzwerten beizubehalten:<br /><br /> <xref:System.Windows.Media.Media3D.MeshGeometry3D.Positions%2A>: 20.001 <xref:System.Windows.Media.Media3D.Point3D> Instanzen<br /><br /> <xref:System.Windows.Media.Media3D.MeshGeometry3D.TriangleIndices%2A>: 60.003 <xref:System.Int32> Instanzen|  
|<xref:System.Windows.Media.Media3D.Material>|Material Geschwindigkeit (am schnellsten zum langsamsten):<br /><br /> <xref:System.Windows.Media.Media3D.EmissiveMaterial><br /><br /> <xref:System.Windows.Media.Media3D.DiffuseMaterial><br /><br /> <xref:System.Windows.Media.Media3D.SpecularMaterial>|  
|<xref:System.Windows.Media.Brush>|[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]3D deaktiviert nicht alle unsichtbaren Pinsel (schwarze Ambient-Pinsel, Clear-Pinsel usw.) auf konsistente Weise.  Sie sollten diese in Ihrer Szene weglassen.|  
|<xref:System.Windows.Media.Media3D.MaterialGroup>|Jede <xref:System.Windows.Media.Media3D.Material> in einer <xref:System.Windows.Media.Media3D.MaterialGroup> bewirkt einen weiteren Renderingdurchlauf, sodass auch viele Materialien, auch einfache Materialien, die Füll Anforderungen Ihrer GPU erheblich erhöhen können.  Minimieren Sie die Anzahl der Materialien <xref:System.Windows.Media.Media3D.MaterialGroup>in Ihrem.|  
  
## <a name="performance-impact-low"></a>Leistungs Beeinträchtigung: Niedrig  
  
|Eigenschaft|Empfehlung|  
|-|-|  
|<xref:System.Windows.Media.Media3D.Transform3DGroup>|Wenn Sie keine Animation oder Datenbindung benötigen, anstatt eine Transformations Gruppe mit mehreren Transformationen zu verwenden, verwenden Sie eine <xref:System.Windows.Media.Media3D.MatrixTransform3D>einzelne, und legen Sie Sie auf das Produkt aller Transformationen fest, die andernfalls unabhängig voneinander in der Transformations Gruppe vorhanden wären.|  
|<xref:System.Windows.Media.Media3D.Light>|Minimieren Sie die Anzahl der Lichter in Ihrer Szene. Zu viele Beleuchtung in einer Szene erzwingen [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] das zurückkehren zum Software Rendering.  Die Grenzwerte liegen ungefähr <xref:System.Windows.Media.Media3D.DirectionalLight> 110 Objekten, <xref:System.Windows.Media.Media3D.PointLight> 70 Objekten oder 40 <xref:System.Windows.Media.Media3D.SpotLight> Objekten.|  
|<xref:System.Windows.Media.Media3D.ModelVisual3D>|Trennen Sie das Verschieben von Objekten von statischen Objekten, indem <xref:System.Windows.Media.Media3D.ModelVisual3D> Sie Sie in separaten Instanzen platzieren.  ModelVisual3D ist "schwerer" als <xref:System.Windows.Media.Media3D.GeometryModel3D> , da transformierte Grenzen zwischengespeichert werden.  GeometryModel3D ist als Modell optimiert. ModelVisual3D ist als Szene Knoten optimiert.  Verwenden Sie ModelVisual3D, um freigegebene Instanzen von GeometryModel3D in die Szene einzufügen.|  
|<xref:System.Windows.Media.Media3D.Light>|Minimieren Sie die Häufigkeit, mit der Sie die Anzahl der Lichter in der Szene ändern.  Jede Änderung der Licht Anzahl erzwingt die Neugenerierung und Neukompilierung eines Shaders, es sei denn, diese Konfiguration war zuvor vorhanden (und der Shader wurde deshalb zwischengespeichert).|  
|Hell|Schwarze Ampeln sind nicht sichtbar, aber Sie werden der Rendering-Zeit hinzugefügt. Sie sollten Sie weglassen.|  
|<xref:System.Windows.Media.Media3D.MeshGeometry3D>|Um die Konstruktionszeit von großen Auflistungen [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]in zu minimieren, z <xref:System.Windows.Media.Media3D.MeshGeometry3D.Normals%2A>. b. <xref:System.Windows.Media.Media3D.MeshGeometry3D.TriangleIndices%2A>MeshGeometry3D's <xref:System.Windows.Media.Media3D.MeshGeometry3D.Positions%2A>,, <xref:System.Windows.Media.Media3D.MeshGeometry3D.TextureCoordinates%2A>und, stellen Sie die Auflistungen vor der Wert Population vorab in der Größe. Übergeben Sie, wenn möglich, die von den Auflistungs-Konstruktoren vorab aufgefüllten Datenstrukturen wie Arrays oder Listen.|  
  
## <a name="see-also"></a>Siehe auch

- [Übersicht über 3D-Grafiken](3-d-graphics-overview.md)
