---
title: Maximieren der 3D-Leistung von WPF
ms.date: 03/30/2017
helpviewer_keywords:
- 3-D graphics [WPF]
ms.assetid: 4bcf949d-d92f-4d8d-8a9b-1e4c61b25bf6
ms.openlocfilehash: 8629748c37aae8e35bb928c5a8d5a9caa7046942
ms.sourcegitcommit: 0be8a279af6d8a43e03141e349d3efd5d35f8767
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 04/18/2019
ms.locfileid: "59147523"
---
# <a name="maximize-wpf-3d-performance"></a>Maximieren der 3D-Leistung von WPF
Wie Sie die [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] 3D-Steuerelemente erstellen und 3D-Szenen in Ihren Anwendungen einschließen möchten, es ist wichtig, die zur Optimierung der Leistung sollten. Dieses Thema enthält eine Liste von 3D Klassen und Eigenschaften, die Auswirkungen auf die Leistung für Ihre Anwendung zusammen mit Empfehlungen zur Optimierung von Leistung, wenn Sie diese verwenden.  
  
 Dieses Thema setzt voraus, umfassende Kenntnisse des [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] 3D-Funktionen. Die Vorschläge in diesem Dokument gelten "Renderingebene 2", etwa als Hardware, die Version des Pixelshaders 2.0 und Vertex-Shader, Version 2.0 unterstützt definiert. Weitere Informationen finden Sie unter [Renderingebenen](../advanced/graphics-rendering-tiers.md).  
  
## <a name="performance-impact-high"></a>Auswirkungen auf die Leistung: Hoch  
  
|Eigenschaft|Empfehlung|  
|-|-|  
|<xref:System.Windows.Media.Brush>|Pinsel-Geschwindigkeit (am schnellsten langsamsten):<br /><br /> <xref:System.Windows.Media.SolidColorBrush><br /><br /> <xref:System.Windows.Media.LinearGradientBrush><br /><br /> <xref:System.Windows.Media.ImageBrush><br /><br /> <xref:System.Windows.Media.DrawingBrush> (zwischengespeichert)<br /><br /> <xref:System.Windows.Media.VisualBrush> (zwischengespeichert)<br /><br /> <xref:System.Windows.Media.RadialGradientBrush><br /><br /> <xref:System.Windows.Media.DrawingBrush> (nicht zwischengespeichert)<br /><br /> <xref:System.Windows.Media.VisualBrush> (nicht zwischengespeichert)|  
|<xref:System.Windows.UIElement.ClipToBoundsProperty>|Legen Sie `Viewport3D.ClipToBounds` auf "false", wenn Sie nicht benötigen, damit [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] den Inhalt von einer <xref:System.Windows.Controls.Viewport3D> der Viewport3D Rechteck. [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] geglättet Clipping kann sehr langsam sein, und `ClipToBounds` ist (langsam) standardmäßig aktiviert, auf <xref:System.Windows.Controls.Viewport3D>.|  
|<xref:System.Windows.UIElement.IsHitTestVisible%2A>|Legen Sie `Viewport3D.IsHitTestVisible` auf "false", wenn Sie nicht benötigen [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] berücksichtigen Sie den Inhalt des eine <xref:System.Windows.Controls.Viewport3D> beim Ausführen der Maus Treffertests.  Treffertests für 3D-Inhalte erfolgt in der Software und kann bei großen Netzen langsam sein. <xref:System.Windows.UIElement.IsHitTestVisible%2A> (langsam) standardmäßig aktiviert in <xref:System.Windows.Controls.Viewport3D>.|  
|<xref:System.Windows.Media.Media3D.GeometryModel3D>|Erstellen Sie verschiedene Modelle, nur, wenn sie andere Materialien oder Transformationen erfordern.  Andernfalls versuchen, die viele coalesce <xref:System.Windows.Media.Media3D.GeometryModel3D> Instanzen mit dem gleichen Materialien und Transformationen zu einigen größeren <xref:System.Windows.Media.Media3D.GeometryModel3D> und <xref:System.Windows.Media.Media3D.MeshGeometry3D> Instanzen.|  
|<xref:System.Windows.Media.Media3D.MeshGeometry3D>|Mesh-Animation – ändern die einzelnen Scheitelpunkte eines Netzes auf einer pro-Frame-Basis, ist nicht immer effizient [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)].  Trennen Sie das Netz aus der visuellen Struktur vor dem Ausführen von pro-Vertex-Änderung, zum Minimieren der Auswirkungen auf die Leistung von Benachrichtigungen über datenbankänderungen bei jedem Scheitelpunkt geändert wird.  Sobald das Netz geändert wurde, erneut an der visuellen Struktur an.  Versuchen Sie außerdem, um die Größe der Gitter zu minimieren, die auf diese Weise animiert werden soll.|  
|3D Antialiasing|Um Renderingvorgänge zu beschleunigen erhöhen möchten, deaktivieren Sie das Multisampling auf eine <xref:System.Windows.Controls.Viewport3D> durch Festlegen der angefügten Eigenschaft <xref:System.Windows.Media.RenderOptions.EdgeMode%2A> zu `Aliased`.  3D Antialiasing wird standardmäßig auf deaktiviert [!INCLUDE[TLA#tla_winxp](../../../../includes/tlasharptla-winxp-md.md)] "und" enabled auf [!INCLUDE[TLA#tla_longhorn](../../../../includes/tlasharptla-longhorn-md.md)] mit 4 Stichproben, die pro Pixel.|  
|Text|Live von Text in einer 3D-Szene (live befindet sich im eine <xref:System.Windows.Media.DrawingBrush> oder <xref:System.Windows.Media.VisualBrush>) kann langsam sein. Versuchen Sie es stattdessen Bilder des Texts zu verwenden (über <xref:System.Windows.Media.Imaging.RenderTargetBitmap>), wenn der Text ändert.|  
|<xref:System.Windows.Media.TileBrush>|Bei Verwendung von muss ein <xref:System.Windows.Media.VisualBrush> oder <xref:System.Windows.Media.DrawingBrush> in einer 3D-Szene, da der Inhalt des Pinsels nicht statisch ist, wiederholen Sie den Pinsel zwischenzuspeichern (Festlegen der angefügten Eigenschaft <xref:System.Windows.Media.RenderOptions.CachingHint%2A> zu `Cache`).  Legen Sie die minimale und maximale Skala invalidierung Schwellenwerte fest (mit den angefügten Eigenschaften <xref:System.Windows.Media.RenderOptions.CacheInvalidationThresholdMinimum%2A> und <xref:System.Windows.Media.RenderOptions.CacheInvalidationThresholdMaximum%2A>), damit die zwischengespeicherten Pinsel zu häufig neu generiert werden gleichzeitig das gewünschte Maß an Qualität.  In der Standardeinstellung <xref:System.Windows.Media.DrawingBrush> und <xref:System.Windows.Media.VisualBrush> werden nicht zwischengespeichert, was bedeutet, dass jedes Mal, wenn etwas mit dem Pinsel gezeichnet wurde, erneut gerendert werden, der gesamte Inhalt des Pinsels zuerst eine temporäre Oberfläche erneut gerendert werden muss.|  
|<xref:System.Windows.Media.Effects.BitmapEffect>|<xref:System.Windows.Media.Effects.BitmapEffect> Erzwingt, dass alle betroffenen Inhalte ohne Hardwarebeschleunigung gerendert werden soll.  Verwenden Sie für eine optimale Leistung nicht <xref:System.Windows.Media.Effects.BitmapEffect>.|  
  
## <a name="performance-impact-medium"></a>Auswirkungen auf die Leistung: Mittel  
  
|Eigenschaft|Empfehlung|  
|-|-|  
|<xref:System.Windows.Media.Media3D.MeshGeometry3D>|Bei einem Mesh als der angrenzende Dreiecke mit freigegebenen Vertices definiert ist, und diese Schnittpunkte die gleiche Position, Normal und Texturkoordinaten haben, jeden freigegebenen Vertex nur einmal definieren, und klicken Sie dann Ihre Dreiecke zu definieren, über einen Index mit <xref:System.Windows.Media.Media3D.MeshGeometry3D.TriangleIndices%2A>.|  
|<xref:System.Windows.Media.ImageBrush>|Versuchen, Textur Größen zu minimieren, wenn Sie explizite Kontrolle über die Größe haben (bei Verwendung einer <xref:System.Windows.Media.Imaging.RenderTargetBitmap> und/oder eine <xref:System.Windows.Media.ImageBrush>).  Beachten Sie, dass vom niedrigere Auflösung Texturen können visuelle Qualität verringern, also versuchen, das richtige Gleichgewicht zwischen Qualität und Leistung zu finden.|  
|Deckkraft|Beim lichtdurchlässiger (z. B. Reflektionen) rendering von 3D-Inhalten, verwenden Sie die Deckkraft-Eigenschaften für Pinsel oder Materialien (über <xref:System.Windows.Media.Brush.Opacity%2A> oder <xref:System.Windows.Media.Media3D.DiffuseMaterial.Color%2A>) statt einer separates lichtdurchlässiger <xref:System.Windows.Controls.Viewport3D> durch Festlegen von `Viewport3D.Opacity` auf einen Wert kleiner als 1.|  
|<xref:System.Windows.Controls.Viewport3D>|Minimieren Sie die Anzahl der <xref:System.Windows.Controls.Viewport3D> Objekte Sie verwenden in einer Szene.  Fügen Sie viele-3D-Modelle in separaten Viewport3D-Instanzen für jedes Modell erstellen, anstatt die gleichen Viewport3D an.|  
|<xref:System.Windows.Freezable>|In der Regel ist es vorteilhaft, wiederverwenden <xref:System.Windows.Media.Media3D.MeshGeometry3D>, <xref:System.Windows.Media.Media3D.GeometryModel3D>, Pinseln und Materialien.  Alle sind mehrere übergeordnete Objekte haben, da sie abgeleitet sind `Freezable`.|  
|<xref:System.Windows.Freezable>|Rufen Sie die <xref:System.Windows.Freezable.Freeze%2A> Methode für Freezable-Objekte, wenn deren Eigenschaften bleiben unverändert in Ihrer Anwendung.  Das Fixieren kann Workingset verkleinern und zu beschleunigen.|  
|<xref:System.Windows.Media.Brush>|Verwendung <xref:System.Windows.Media.ImageBrush> anstelle von <xref:System.Windows.Media.VisualBrush> oder <xref:System.Windows.Media.DrawingBrush> Wenn der Inhalt des Pinsels wird nicht geändert.  2D-Inhalt konvertiert werden kann, um eine <xref:System.Windows.Controls.Image> über <xref:System.Windows.Media.Imaging.RenderTargetBitmap> und klicken Sie dann in verwendet eine <xref:System.Windows.Media.ImageBrush>.|  
|<xref:System.Windows.Media.Media3D.GeometryModel3D.BackMaterial%2A>|Verwenden Sie keine <xref:System.Windows.Media.Media3D.GeometryModel3D.BackMaterial%2A> es sei denn, Sie die Rückseiten von finden Sie unter müssen Ihrem <xref:System.Windows.Media.Media3D.GeometryModel3D>.|  
|<xref:System.Windows.Media.Media3D.Light>|Lichtgeschwindigkeit (absteigend):<br /><br /> <xref:System.Windows.Media.Media3D.AmbientLight><br /><br /> <xref:System.Windows.Media.Media3D.DirectionalLight><br /><br /> <xref:System.Windows.Media.Media3D.PointLight><br /><br /> <xref:System.Windows.Media.Media3D.SpotLight>|  
|<xref:System.Windows.Media.Media3D.MeshGeometry3D>|Versuchen Sie es unterhalb der diese Grenzwerte zu:<br /><br /> <xref:System.Windows.Media.Media3D.MeshGeometry3D.Positions%2A>: 20.001 <xref:System.Windows.Media.Media3D.Point3D> Instanzen<br /><br /> <xref:System.Windows.Media.Media3D.MeshGeometry3D.TriangleIndices%2A>: 60,003 <xref:System.Int32> Instanzen|  
|<xref:System.Windows.Media.Media3D.Material>|Material Geschwindigkeit (am schnellsten langsamsten):<br /><br /> <xref:System.Windows.Media.Media3D.EmissiveMaterial><br /><br /> <xref:System.Windows.Media.Media3D.DiffuseMaterial><br /><br /> <xref:System.Windows.Media.Media3D.SpecularMaterial>|  
|<xref:System.Windows.Media.Brush>|[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] 3D deaktivieren nicht sichtbare Pinsel (schwarze Ambiente-Pinsel, klare Pinsel, usw.) auf konsistente Weise.  Erwägen Sie, das aus der Szene auslassen.|  
|<xref:System.Windows.Media.Media3D.MaterialGroup>|Jede <xref:System.Windows.Media.Media3D.Material> in einem <xref:System.Windows.Media.Media3D.MaterialGroup> bewirkt, dass eine andere Renderingdurchlauf, so viele Materialien, einschließlich der selbst einfache Materialien, die Fill-Anforderungen an Ihre GPU erheblich steigern.  Minimieren Sie die Anzahl der Materialien in Ihre <xref:System.Windows.Media.Media3D.MaterialGroup>.|  
  
## <a name="performance-impact-low"></a>Auswirkungen auf die Leistung: Niedrig  
  
|Eigenschaft|Empfehlung|  
|-|-|  
|<xref:System.Windows.Media.Media3D.Transform3DGroup>|Wenn ist nicht erforderlich, Animation oder Datenbindung, anstelle einer Transform-Gruppenstatus enthält mehrere Transformationen, verwenden Sie einen einzelnen <xref:System.Windows.Media.Media3D.MatrixTransform3D>, das Festlegen auf das Produkt aller Transformationen zu sein, die andernfalls unabhängig voneinander in der Gruppe "Transformation" vorhanden wäre.|  
|<xref:System.Windows.Media.Media3D.Light>|Minimieren Sie die Anzahl der Beleuchtung in der Szene. Zu viele Lichter in einer Szene erzwingt [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] auf Softwarerendering zurückzugreifen.  Die Grenzwerte sind ungefähr 110 <xref:System.Windows.Media.Media3D.DirectionalLight> Objekte 70 <xref:System.Windows.Media.Media3D.PointLight> Objekte oder 40 <xref:System.Windows.Media.Media3D.SpotLight> Objekte.|  
|<xref:System.Windows.Media.Media3D.ModelVisual3D>|Trennen Sie die Objekte in separaten standortserveraktualisierung von statischen Objekten verschieben <xref:System.Windows.Media.Media3D.ModelVisual3D> Instanzen.  ModelVisual3D ist "programmausführung" <xref:System.Windows.Media.Media3D.GeometryModel3D> da transformierte Grenzen zwischenspeichert.  GeometryModel3D wurde optimiert, um ein Modell sein. ModelVisual3D ist optimiert, um einen szeneknoten sein.  Verwenden von ModelVisual3D shared GeometryModel3D-Instanzen in der Szene zu versetzen.|  
|<xref:System.Windows.Media.Media3D.Light>|Minimieren Sie die Anzahl der Male, die Sie ändern, dass die Anzahl der Beleuchtung in der Szene.  Jede Änderung der erzwingt einen Shader erneute Generierung und die Neukompilierung, es sei denn, diese Konfiguration hat zuvor vorhanden war (und somit des Shaders zwischengespeicherte Instanzobjekt).|  
|Hell|Schwarze Lichter nicht sichtbar, aber sie werden hinzugefügt, um Zeit zu rendern.; sollten Sie darauf verzichten können.|  
|<xref:System.Windows.Media.Media3D.MeshGeometry3D>|Minimieren Sie die Erstellungszeit der großen Auflistungen im [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)], z. B. ein MeshGeometry3D <xref:System.Windows.Media.Media3D.MeshGeometry3D.Positions%2A>, <xref:System.Windows.Media.Media3D.MeshGeometry3D.Normals%2A>, <xref:System.Windows.Media.Media3D.MeshGeometry3D.TextureCoordinates%2A>, und <xref:System.Windows.Media.Media3D.MeshGeometry3D.TriangleIndices%2A>, vorab Größe die Sammlungen vor der Auffüllung des Feldwerts. Wenn möglich, übergeben Sie die Sammlungen Konstruktoren Voraufgefüllte Datenstrukturen wie Arrays oder Listen.|  
  
## <a name="see-also"></a>Siehe auch

- [Übersicht über 3D-Grafiken](3-d-graphics-overview.md)
