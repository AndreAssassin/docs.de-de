---
title: Maximieren der 3D-Leistung
ms.date: 03/30/2017
helpviewer_keywords:
- 3-D graphics [WPF]
ms.assetid: 4bcf949d-d92f-4d8d-8a9b-1e4c61b25bf6
ms.openlocfilehash: 414a4677a1e05cd69c382e35194328d6ce1bddf9
ms.sourcegitcommit: de17a7a0a37042f0d4406f5ae5393531caeb25ba
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/24/2020
ms.locfileid: "76744596"
---
# <a name="maximize-wpf-3d-performance"></a>Maximieren der 3D-Leistung von WPF
Wenn Sie die [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] verwenden, um 3D-Steuerelemente zu erstellen und 3D-Szenen in Ihre Anwendungen einzubeziehen, ist es wichtig, die Leistungsoptimierung zu berücksichtigen. Dieses Thema enthält eine Liste der 3D-Klassen und-Eigenschaften, die Auswirkungen auf die Leistung für Ihre Anwendung haben, sowie Empfehlungen zur Optimierung der Leistung bei der Verwendung.  
  
 In diesem Thema wird vorausgesetzt, dass Sie über [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] 3D-Funktionen verfügen. Die Vorschläge in diesem Dokument gelten für "Rendering Tier 2" – ungefähr definiert als Hardware, die Pixel-Shader-Version 2,0 und Vertex-Shader-Version 2,0 unterstützt. Weitere Informationen finden Sie unter [renderingstufen für Grafiken](../advanced/graphics-rendering-tiers.md).  
  
## <a name="performance-impact-high"></a>Leistungs Beeinträchtigung: hoch  
  
|Die Eigenschaften-|Empfehlung|  
|-|-|  
|<xref:System.Windows.Media.Brush>|Pinsel Geschwindigkeit (am schnellsten zum langsamsten):<br /><br /> <xref:System.Windows.Media.SolidColorBrush><br /><br /> <xref:System.Windows.Media.LinearGradientBrush><br /><br /> <xref:System.Windows.Media.ImageBrush><br /><br /> <xref:System.Windows.Media.DrawingBrush> (zwischengespeichert)<br /><br /> <xref:System.Windows.Media.VisualBrush> (zwischengespeichert)<br /><br /> <xref:System.Windows.Media.RadialGradientBrush><br /><br /> <xref:System.Windows.Media.DrawingBrush> (nicht zwischengespeichert)<br /><br /> <xref:System.Windows.Media.VisualBrush> (nicht zwischengespeichert)|  
|<xref:System.Windows.UIElement.ClipToBoundsProperty>|Legen Sie `Viewport3D.ClipToBounds` auf false fest, wenn der Inhalt einer <xref:System.Windows.Controls.Viewport3D> [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] nicht explizit auf das Viewport3D's-Rechteck zugeschnitten werden muss. [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] Antialiasing-Clipping kann sehr langsam sein, und `ClipToBounds` ist standardmäßig auf <xref:System.Windows.Controls.Viewport3D>aktiviert (langsam).|  
|<xref:System.Windows.UIElement.IsHitTestVisible%2A>|Legen Sie `Viewport3D.IsHitTestVisible` auf false fest, wenn Sie nicht [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] den Inhalt eines <xref:System.Windows.Controls.Viewport3D> beim Ausführen von Maus Treffer Tests in Erwägung gezogen werden müssen.  Treffer Tests für 3D-Inhalte erfolgen in Software und können mit großen Netzen langsam sein. <xref:System.Windows.UIElement.IsHitTestVisible%2A> ist auf <xref:System.Windows.Controls.Viewport3D>standardmäßig aktiviert (langsam).|  
|<xref:System.Windows.Media.Media3D.GeometryModel3D>|Erstellen Sie unterschiedliche Modelle nur dann, wenn Sie unterschiedliche Materialien oder Transformationen benötigen.  Versuchen Sie andernfalls, viele <xref:System.Windows.Media.Media3D.GeometryModel3D> Instanzen mit denselben Materialien und Transformationen in ein paar größere <xref:System.Windows.Media.Media3D.GeometryModel3D> und <xref:System.Windows.Media.Media3D.MeshGeometry3D> Instanzen zusammenzufassen.|  
|<xref:System.Windows.Media.Media3D.MeshGeometry3D>|Mesh-Animation – das Ändern einzelner Scheitel Punkte eines Netzes pro Frame – ist in [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]nicht immer effizient.  Um die Auswirkungen von Änderungs Benachrichtigungen auf die Leistung zu minimieren, wenn jeder Scheitelpunkt geändert wird, trennen Sie das Mesh von der visuellen Struktur, bevor Sie die pro-vertexänderung durchführen.  Nachdem das Mesh geändert wurde, fügen Sie es erneut an den visuellen Baum an.  Versuchen Sie außerdem, die Größe der Netzen zu minimieren, die auf diese Weise animiert werden.|  
|3D-Antialiasing|Um die renderinggeschwindigkeit zu erhöhen, deaktivieren Sie das multisamplinggrad für eine <xref:System.Windows.Controls.Viewport3D>, indem Sie die angefügte Eigenschaft <xref:System.Windows.Media.RenderOptions.EdgeMode%2A> auf `Aliased`festlegen  Standardmäßig ist 3D-Antialiasing unter Windows mit vier Stichproben pro Pixel aktiviert.|  
|Text|Livetext in einer 3D-Szene (Live, da er sich in einem <xref:System.Windows.Media.DrawingBrush> oder <xref:System.Windows.Media.VisualBrush>befindet) kann langsam sein. Versuchen Sie stattdessen, Bilder des Texts (über <xref:System.Windows.Media.Imaging.RenderTargetBitmap>) zu verwenden, es sei denn, der Text wird geändert.|  
|<xref:System.Windows.Media.TileBrush>|Wenn Sie eine <xref:System.Windows.Media.VisualBrush> oder eine <xref:System.Windows.Media.DrawingBrush> in einer 3D-Szene verwenden müssen, da der Inhalt des Pinsels nicht statisch ist, versuchen Sie, den Pinsel zwischenzuspeichern (Festlegen der angefügten-Eigenschaft <xref:System.Windows.Media.RenderOptions.CachingHint%2A> auf `Cache`).  Legen Sie die Schwellenwerte für die Mindest-und Höchstwerte für die Skalierung fest (mit den angefügten Eigenschaften <xref:System.Windows.Media.RenderOptions.CacheInvalidationThresholdMinimum%2A> und <xref:System.Windows.Media.RenderOptions.CacheInvalidationThresholdMaximum%2A>), damit die zwischengespeicherten Pinsel nicht zu häufig erneut generiert werden und gleichzeitig die gewünschte Qualität beibehalten wird.  <xref:System.Windows.Media.DrawingBrush> und <xref:System.Windows.Media.VisualBrush> werden standardmäßig nicht zwischengespeichert. das bedeutet, dass jedes Mal, wenn etwas mit dem Pinsel gezeichnet werden muss, ein erneutes Rendern des gesamten Inhalts des Pinsels erfolgen muss.|  
|<xref:System.Windows.Media.Effects.BitmapEffect>|<xref:System.Windows.Media.Effects.BitmapEffect> erzwingt, dass alle betroffenen Inhalte ohne Hardwarebeschleunigung gerendert werden.  Verwenden Sie <xref:System.Windows.Media.Effects.BitmapEffect>nicht, um eine optimale Leistung zu erzielen.|  
  
## <a name="performance-impact-medium"></a>Leistungs Beeinträchtigung: Mittel  
  
|Die Eigenschaften-|Empfehlung|  
|-|-|  
|<xref:System.Windows.Media.Media3D.MeshGeometry3D>|Wenn ein Mesh so definiert ist, dass Dreiecke mit freigegebenen Scheitel Punkten verwendet werden und diese Scheitel Punkte dieselbe Position, normale und Texturkoordinaten aufweisen, definieren Sie jeden freigegebenen Scheitelpunkt nur einmal, und definieren Sie dann die Dreiecke nach Index mit <xref:System.Windows.Media.Media3D.MeshGeometry3D.TriangleIndices%2A>.|  
|<xref:System.Windows.Media.ImageBrush>|Versuchen Sie, die Textur Größen zu minimieren, wenn Sie die Größe explizit steuern (bei Verwendung einer <xref:System.Windows.Media.Imaging.RenderTargetBitmap> und/oder einer <xref:System.Windows.Media.ImageBrush>).  Beachten Sie, dass mit niedrigerer Auflösung die Qualität der visuellen Qualität beeinträchtigt werden kann, um das richtige Gleichgewicht zwischen Qualität und Leistung zu finden.|  
|Deckkraft|Wenn Sie den 3D-Inhalt (z. b. Reflektionen) rendern, verwenden Sie die Deckkraft Eigenschaften für Pinsel oder Material (über <xref:System.Windows.Media.Brush.Opacity%2A> oder <xref:System.Windows.Media.Media3D.DiffuseMaterial.Color%2A>), anstatt eine separate Durchlässigkeits <xref:System.Windows.Controls.Viewport3D> zu erstellen, indem Sie `Viewport3D.Opacity` auf einen Wert kleiner als 1 festlegen.|  
|<xref:System.Windows.Controls.Viewport3D>|Minimieren Sie die Anzahl der <xref:System.Windows.Controls.Viewport3D> Objekte, die Sie in einer Szene verwenden.  Fügen Sie viele 3D-Modelle im gleichen Viewport3D ein, anstatt separate Viewport3D-Instanzen für jedes Modell zu erstellen.|  
|<xref:System.Windows.Freezable>|In der Regel ist es vorteilhaft, <xref:System.Windows.Media.Media3D.MeshGeometry3D>, <xref:System.Windows.Media.Media3D.GeometryModel3D>, Pinsel und Materialien wiederzuverwenden.  Alle sind multiparametrierbar, da Sie von `Freezable`abgeleitet sind.|  
|<xref:System.Windows.Freezable>|Ruft die <xref:System.Windows.Freezable.Freeze%2A>-Methode für frei wählbare Elemente auf, wenn deren Eigenschaften in der Anwendung unverändert bleiben.  Durch das Einfrieren können Arbeits Sätze verringert und die Geschwindigkeit erhöht werden.|  
|<xref:System.Windows.Media.Brush>|Verwenden Sie <xref:System.Windows.Media.ImageBrush> anstelle von <xref:System.Windows.Media.VisualBrush> oder <xref:System.Windows.Media.DrawingBrush>, wenn der Inhalt des Pinsels nicht geändert wird.  2D-Inhalte können über <xref:System.Windows.Media.Imaging.RenderTargetBitmap> in eine <xref:System.Windows.Controls.Image> konvertiert und dann in einem <xref:System.Windows.Media.ImageBrush>verwendet werden.|  
|<xref:System.Windows.Media.Media3D.GeometryModel3D.BackMaterial%2A>|Verwenden Sie <xref:System.Windows.Media.Media3D.GeometryModel3D.BackMaterial%2A> nur, wenn Sie tatsächlich die hintergesichter ihrer <xref:System.Windows.Media.Media3D.GeometryModel3D>sehen müssen.|  
|<xref:System.Windows.Media.Media3D.Light>|Leichte Geschwindigkeit (am schnellsten zum langsamsten):<br /><br /> <xref:System.Windows.Media.Media3D.AmbientLight><br /><br /> <xref:System.Windows.Media.Media3D.DirectionalLight><br /><br /> <xref:System.Windows.Media.Media3D.PointLight><br /><br /> <xref:System.Windows.Media.Media3D.SpotLight>|  
|<xref:System.Windows.Media.Media3D.MeshGeometry3D>|Versuchen Sie, die gittergrößen unter diesen Grenzwerten beizubehalten:<br /><br /> <xref:System.Windows.Media.Media3D.MeshGeometry3D.Positions%2A>: 20.001 <xref:System.Windows.Media.Media3D.Point3D> Instanzen<br /><br /> <xref:System.Windows.Media.Media3D.MeshGeometry3D.TriangleIndices%2A>: 60.003 <xref:System.Int32> Instanzen|  
|<xref:System.Windows.Media.Media3D.Material>|Material Geschwindigkeit (am schnellsten zum langsamsten):<br /><br /> <xref:System.Windows.Media.Media3D.EmissiveMaterial><br /><br /> <xref:System.Windows.Media.Media3D.DiffuseMaterial><br /><br /> <xref:System.Windows.Media.Media3D.SpecularMaterial>|  
|<xref:System.Windows.Media.Brush>|[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] 3D deaktiviert nicht unsichtbare Pinsel (schwarze Ambient-Pinsel, Clear-Pinsel usw.) auf konsistente Weise.  Sie sollten diese in Ihrer Szene weglassen.|  
|<xref:System.Windows.Media.Media3D.MaterialGroup>|Jede <xref:System.Windows.Media.Media3D.Material> in einem <xref:System.Windows.Media.Media3D.MaterialGroup> bewirkt einen anderen Renderingdurchlauf, sodass auch viele Materialien, auch einfache Materialien, die Füll Anforderungen Ihrer GPU drastisch erhöhen können.  Minimieren Sie die Anzahl der Materialien in ihrer <xref:System.Windows.Media.Media3D.MaterialGroup>.|  
  
## <a name="performance-impact-low"></a>Leistungs Beeinträchtigung: gering  
  
|Die Eigenschaften-|Empfehlung|  
|-|-|  
|<xref:System.Windows.Media.Media3D.Transform3DGroup>|Wenn Sie keine Animation oder Datenbindung benötigen, anstatt eine Transformations Gruppe mit mehreren Transformationen zu verwenden, verwenden Sie eine einzelne <xref:System.Windows.Media.Media3D.MatrixTransform3D>, und legen Sie diese so fest, dass Sie das Produkt aller Transformationen ist, die andernfalls unabhängig voneinander in der Transformations Gruppe vorhanden wären.|  
|<xref:System.Windows.Media.Media3D.Light>|Minimieren Sie die Anzahl der Lichter in Ihrer Szene. Zu viele Lichter in einer Szene erzwingen [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)], dass Sie auf das Software Rendering zurückgreifen.  Die Grenzwerte liegen ungefähr 110 <xref:System.Windows.Media.Media3D.DirectionalLight> Objekten, 70 <xref:System.Windows.Media.Media3D.PointLight> Objekten oder 40 <xref:System.Windows.Media.Media3D.SpotLight> Objekten.|  
|<xref:System.Windows.Media.Media3D.ModelVisual3D>|Trennen Sie das Verschieben von Objekten von statischen Objekten, indem Sie Sie in separaten <xref:System.Windows.Media.Media3D.ModelVisual3D> Instanzen platzieren.  ModelVisual3D ist "schwerer" als <xref:System.Windows.Media.Media3D.GeometryModel3D>, da transformierte Grenzen zwischengespeichert werden.  GeometryModel3D ist als Modell optimiert. ModelVisual3D ist als Szene Knoten optimiert.  Verwenden Sie ModelVisual3D, um freigegebene Instanzen von GeometryModel3D in die Szene einzufügen.|  
|<xref:System.Windows.Media.Media3D.Light>|Minimieren Sie die Häufigkeit, mit der Sie die Anzahl der Lichter in der Szene ändern.  Jede Änderung der Licht Anzahl erzwingt die Neugenerierung und Neukompilierung eines Shaders, es sei denn, diese Konfiguration war zuvor vorhanden (und der Shader wurde deshalb zwischengespeichert).|  
|Light|Schwarze Ampeln sind nicht sichtbar, aber Sie werden der Rendering-Zeit hinzugefügt. Sie sollten Sie weglassen.|  
|<xref:System.Windows.Media.Media3D.MeshGeometry3D>|Um die Konstruktionszeit von großen Auflistungen in [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]zu minimieren, wie z. b. eine MeshGeometry3D's <xref:System.Windows.Media.Media3D.MeshGeometry3D.Positions%2A>, <xref:System.Windows.Media.Media3D.MeshGeometry3D.Normals%2A>, <xref:System.Windows.Media.Media3D.MeshGeometry3D.TextureCoordinates%2A>und <xref:System.Windows.Media.Media3D.MeshGeometry3D.TriangleIndices%2A>, stellen Sie die Auflistungen vorab vor der Wert Population vor. Übergeben Sie, wenn möglich, die von den Auflistungs-Konstruktoren vorab aufgefüllten Datenstrukturen wie Arrays oder Listen.|  
  
## <a name="see-also"></a>Siehe auch

- [Übersicht über 3D-Grafiken](3-d-graphics-overview.md)
