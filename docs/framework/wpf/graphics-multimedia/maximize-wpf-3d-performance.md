---
title: Maximierung der 3D-Leistung
ms.date: 03/30/2017
helpviewer_keywords:
- 3D graphics [WPF]
ms.assetid: 4bcf949d-d92f-4d8d-8a9b-1e4c61b25bf6
ms.openlocfilehash: 3825ea8e57c6863e2ee654072efda623db21c2a8
ms.sourcegitcommit: 267d092663aba36b6b2ea853034470aea493bfae
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 03/21/2020
ms.locfileid: "80111997"
---
# <a name="maximize-wpf-3d-performance"></a>Maximieren der 3D-Leistung von WPF
Wenn Sie [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] die verwenden, um 3D-Steuerelemente zu erstellen und 3D-Szenen in Ihre Anwendungen einzuschließen, ist es wichtig, die Leistungsoptimierung zu berücksichtigen. Dieses Thema enthält eine Liste von 3D-Klassen und -Eigenschaften, die Auswirkungen auf die Leistung ihrer Anwendung haben, sowie Empfehlungen zur Optimierung der Leistung bei der Verwendung.  
  
 In diesem Thema wird [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] ein erweitertes Verständnis von 3D-Features vorausgesetzt. Die Vorschläge in diesem Dokument gelten für "Rendering-Stufe 2" – grob definiert als Hardware, die Pixelshader-Version 2.0 und Vertex-Shader-Version 2.0 unterstützt. Weitere Informationen finden Sie unter [Grafik-Rendering-Stufen](../advanced/graphics-rendering-tiers.md).  
  
## <a name="performance-impact-high"></a>Performance-Auswirkungen: Hoch  
  
|Eigenschaft|Empfehlung|  
|-|-|  
|<xref:System.Windows.Media.Brush>|Bürstengeschwindigkeit (am schnellsten bis langsamsten):<br /><br /> <xref:System.Windows.Media.SolidColorBrush><br /><br /> <xref:System.Windows.Media.LinearGradientBrush><br /><br /> <xref:System.Windows.Media.ImageBrush><br /><br /> <xref:System.Windows.Media.DrawingBrush>(zwischengespeichert)<br /><br /> <xref:System.Windows.Media.VisualBrush>(zwischengespeichert)<br /><br /> <xref:System.Windows.Media.RadialGradientBrush><br /><br /> <xref:System.Windows.Media.DrawingBrush>(uncached)<br /><br /> <xref:System.Windows.Media.VisualBrush>(uncached)|  
|<xref:System.Windows.UIElement.ClipToBoundsProperty>|Wird `Viewport3D.ClipToBounds` auf false festgelegt, wenn [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] Sie den Inhalt <xref:System.Windows.Controls.Viewport3D> eines nicht explizit auf das Rechteck des Viewport3D szuschneiden müssen. [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]Antialiased Clipping kann sehr `ClipToBounds` langsam sein und ist <xref:System.Windows.Controls.Viewport3D>standardmäßig aktiviert (langsam) auf .|  
|<xref:System.Windows.UIElement.IsHitTestVisible%2A>|Wird `Viewport3D.IsHitTestVisible` auf false festgelegt, [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] wenn Sie den <xref:System.Windows.Controls.Viewport3D> Inhalt eines beim Ausführen von Maustreffertests nicht berücksichtigen müssen.  Das Testen von 3D-Inhalten erfolgt in softwaresoftware und kann mit großen Netzen langsam sein. <xref:System.Windows.UIElement.IsHitTestVisible%2A>ist standardmäßig aktiviert (langsam) auf <xref:System.Windows.Controls.Viewport3D>.|  
|<xref:System.Windows.Media.Media3D.GeometryModel3D>|Erstellen Sie verschiedene Modelle nur, wenn sie unterschiedliche Materialien oder Transformationen erfordern.  Andernfalls versuchen Sie, viele <xref:System.Windows.Media.Media3D.GeometryModel3D> Instanzen mit den gleichen Materialien <xref:System.Windows.Media.Media3D.GeometryModel3D> und <xref:System.Windows.Media.Media3D.MeshGeometry3D> Transformationen in ein paar größere und Instanzen zusammenzuführen.|  
|<xref:System.Windows.Media.Media3D.MeshGeometry3D>|Netzanimation – Das Ändern der einzelnen Scheitelpunkte eines Netzes pro [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]Frame – ist in nicht immer effizient.  Um die Auswirkungen von Änderungsbenachrichtigungen auf die Leistung zu minimieren, wenn jeder Scheitelpunkt geändert wird, trennen Sie das Netz von der visuellen Struktur, bevor Sie eine Änderung pro Scheitelpunkt durchführen.  Nachdem das Netz geändert wurde, fügen Sie es erneut an den visuellen Baum an.  Versuchen Sie außerdem, die Größe der Netze zu minimieren, die auf diese Weise animiert werden.|  
|3D Antialiasing|Um die Rendergeschwindigkeit zu erhöhen, deaktivieren Sie Multisampling auf einem, <xref:System.Windows.Controls.Viewport3D> indem Sie die angefügte Eigenschaft <xref:System.Windows.Media.RenderOptions.EdgeMode%2A> auf `Aliased`festlegen.  Standardmäßig ist 3D-Antialiasing unter Windows mit 4 Samples pro Pixel aktiviert.|  
|Text|Live-Text in einer 3D-Szene (live, weil er sich in einem <xref:System.Windows.Media.DrawingBrush> oder <xref:System.Windows.Media.VisualBrush>befindet) kann langsam sein. Versuchen Sie stattdessen, Bilder des <xref:System.Windows.Media.Imaging.RenderTargetBitmap>Textes (über ) zu verwenden, es sei denn, der Text ändert sich.|  
|<xref:System.Windows.Media.TileBrush>|Wenn Sie eine <xref:System.Windows.Media.VisualBrush> oder <xref:System.Windows.Media.DrawingBrush> eine in einer 3D-Szene verwenden müssen, da der Inhalt des <xref:System.Windows.Media.RenderOptions.CachingHint%2A> Pinsels nicht statisch ist, versuchen Sie, den Pinsel zwischenzuspeichern (die angefügte Eigenschaft auf festzulegen). `Cache`  Legen Sie die Minimal- und Maximalskalierungsschwellenwerte (mit den angefügten Eigenschaften <xref:System.Windows.Media.RenderOptions.CacheInvalidationThresholdMinimum%2A> und <xref:System.Windows.Media.RenderOptions.CacheInvalidationThresholdMaximum%2A>) fest, damit die zwischengespeicherten Pinsel nicht zu häufig regeneriert werden, während das gewünschte Qualitätsniveau beibehalten wird.  Standardmäßig <xref:System.Windows.Media.DrawingBrush> und <xref:System.Windows.Media.VisualBrush> werden nicht zwischengespeichert, was bedeutet, dass jedes Mal, wenn etwas mit dem Pinsel gemalt werden muss, der gesamte Inhalt des Pinsels zuerst auf eine Zwischenfläche regeriert werden muss.|  
|<xref:System.Windows.Media.Effects.BitmapEffect>|<xref:System.Windows.Media.Effects.BitmapEffect>erzwingt, dass alle betroffenen Inhalte ohne Hardwarebeschleunigung gerendert werden.  Verwenden Sie <xref:System.Windows.Media.Effects.BitmapEffect>für eine optimale Leistung nicht .|  
  
## <a name="performance-impact-medium"></a>Leistungsauswirkungen: Mittel  
  
|Eigenschaft|Empfehlung|  
|-|-|  
|<xref:System.Windows.Media.Media3D.MeshGeometry3D>|Wenn ein Netz als angrenzende Dreiecke mit gemeinsamen Scheitelpunkten definiert ist und diese Scheitelpunkte die gleichen Positions-, Normal- und <xref:System.Windows.Media.Media3D.MeshGeometry3D.TriangleIndices%2A>Texturkoordinaten aufweisen, definieren Sie jeden freigegebenen Scheitelpunkt nur einmal, und definieren Sie dann Ihre Dreiecke durch Index mit .|  
|<xref:System.Windows.Media.ImageBrush>|Versuchen Sie, die Texturgrößen zu minimieren, wenn Sie explizite Kontrolle über die Größe haben (wenn Sie eine <xref:System.Windows.Media.Imaging.RenderTargetBitmap> und/oder eine <xref:System.Windows.Media.ImageBrush>verwenden).  Beachten Sie, dass Texturen mit niedrigerer Auflösung die visuelle Qualität verringern können, also versuchen Sie, das richtige Gleichgewicht zwischen Qualität und Leistung zu finden.|  
|Deckkraft|Verwenden Sie beim Rendern von transluzentem 3D-Inhalt (z. B. Reflexionen) die Deckkrafteigenschaften von Pinseln oder Materialien (via <xref:System.Windows.Media.Brush.Opacity%2A> <xref:System.Windows.Media.Media3D.DiffuseMaterial.Color%2A>oder ), anstatt einen separaten transluzenten <xref:System.Windows.Controls.Viewport3D> Wert zu erstellen, indem Sie einen Wert kleiner als 1 festlegen. `Viewport3D.Opacity`|  
|<xref:System.Windows.Controls.Viewport3D>|Minimieren Sie <xref:System.Windows.Controls.Viewport3D> die Anzahl der Objekte, die Sie in einer Szene verwenden.  Legen Sie viele 3D-Modelle in dieselbe Viewport3D-Datei, anstatt separate Viewport3D-Instanzen für jedes Modell zu erstellen.|  
|<xref:System.Windows.Freezable>|In der Regel ist <xref:System.Windows.Media.Media3D.MeshGeometry3D>es <xref:System.Windows.Media.Media3D.GeometryModel3D>vorteilhaft, Wiederverwendung , , Pinsel und Materialien.  Alle sind multiparentierbar, da `Freezable`sie von abgeleitet sind.|  
|<xref:System.Windows.Freezable>|Rufen <xref:System.Windows.Freezable.Freeze%2A> Sie die Methode für Freezables auf, wenn ihre Eigenschaften in Ihrer Anwendung unverändert bleiben.  Das Einfrieren kann die Arbeitseinstellung verringern und die Geschwindigkeit erhöhen.|  
|<xref:System.Windows.Media.Brush>|Verwenden <xref:System.Windows.Media.ImageBrush> Sie <xref:System.Windows.Media.VisualBrush> <xref:System.Windows.Media.DrawingBrush> anstelle oder wenn sich der Inhalt des Pinsels nicht ändert.  2D-Inhalte können in <xref:System.Windows.Controls.Image> <xref:System.Windows.Media.Imaging.RenderTargetBitmap> eine via konvertiert <xref:System.Windows.Media.ImageBrush>und dann in einem verwendet werden.|  
|<xref:System.Windows.Media.Media3D.GeometryModel3D.BackMaterial%2A>|Verwenden Sie <xref:System.Windows.Media.Media3D.GeometryModel3D.BackMaterial%2A> nicht, es sei denn, Sie <xref:System.Windows.Media.Media3D.GeometryModel3D>müssen tatsächlich die Rückseiten Ihrer sehen.|  
|<xref:System.Windows.Media.Media3D.Light>|Lichtgeschwindigkeit (am schnellsten bis langsamsten):<br /><br /> <xref:System.Windows.Media.Media3D.AmbientLight><br /><br /> <xref:System.Windows.Media.Media3D.DirectionalLight><br /><br /> <xref:System.Windows.Media.Media3D.PointLight><br /><br /> <xref:System.Windows.Media.Media3D.SpotLight>|  
|<xref:System.Windows.Media.Media3D.MeshGeometry3D>|Versuchen Sie, die Netzgrößen unter diesen Grenzwerten zu halten:<br /><br /> <xref:System.Windows.Media.Media3D.MeshGeometry3D.Positions%2A>: 20.001 <xref:System.Windows.Media.Media3D.Point3D> Instanzen<br /><br /> <xref:System.Windows.Media.Media3D.MeshGeometry3D.TriangleIndices%2A>: 60.003 <xref:System.Int32> Instanzen|  
|<xref:System.Windows.Media.Media3D.Material>|Materialgeschwindigkeit (am schnellsten bis langsamsten):<br /><br /> <xref:System.Windows.Media.Media3D.EmissiveMaterial><br /><br /> <xref:System.Windows.Media.Media3D.DiffuseMaterial><br /><br /> <xref:System.Windows.Media.Media3D.SpecularMaterial>|  
|<xref:System.Windows.Media.Brush>|[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]3D verzichtet nicht konsequent auf unsichtbare Bürsten (schwarze Umgebungsbürsten, klare Bürsten usw.).  Erwägen Sie, diese aus Ihrer Szene wegzulassen.|  
|<xref:System.Windows.Media.Media3D.MaterialGroup>|Jeder <xref:System.Windows.Media.Media3D.Material> in <xref:System.Windows.Media.Media3D.MaterialGroup> einem verursacht einen anderen Rendering-Pass, so dass viele Materialien, auch einfache Materialien, kann dramatisch erhöhen die Füllanforderungen an Ihre GPU.  Minimieren Sie die Anzahl <xref:System.Windows.Media.Media3D.MaterialGroup>der Materialien in Ihrem .|  
  
## <a name="performance-impact-low"></a>Leistungsauswirkungen: Gering  
  
|Eigenschaft|Empfehlung|  
|-|-|  
|<xref:System.Windows.Media.Media3D.Transform3DGroup>|Wenn Sie keine Animation oder Datenbindung benötigen, verwenden Sie anstelle einer Transformationsgruppe, die mehrere Transformationen enthält, eine einzelne <xref:System.Windows.Media.Media3D.MatrixTransform3D>, und legen Sie fest, dass sie das Produkt aller Transformationen ist, die andernfalls unabhängig voneinander in der Transformationsgruppe vorhanden wären.|  
|<xref:System.Windows.Media.Media3D.Light>|Minimieren Sie die Anzahl der Lichter in Ihrer Szene. Zu viele Lichter in [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] einer Szene werden zwingen, auf Software-Rendering zurückfallen.  Die Grenzwerte sind etwa <xref:System.Windows.Media.Media3D.DirectionalLight> 110 <xref:System.Windows.Media.Media3D.PointLight> Objekte, 70 Objekte oder 40 <xref:System.Windows.Media.Media3D.SpotLight> Objekte.|  
|<xref:System.Windows.Media.Media3D.ModelVisual3D>|Trennen Sie bewegte Objekte von statischen Objekten, indem Sie sie in separaten <xref:System.Windows.Media.Media3D.ModelVisual3D> Instanzen setzen.  ModelVisual3D ist "schwerer" <xref:System.Windows.Media.Media3D.GeometryModel3D> als dadurch, dass transformierte Grenzen zwischengespeichert werden.  GeometryModel3D ist als Modell optimiert. ModelVisual3D ist als Szenenknoten optimiert.  Verwenden Sie ModelVisual3D, um freigegebene Instanzen von GeometryModel3D in die Szene zu setzen.|  
|<xref:System.Windows.Media.Media3D.Light>|Minimieren Sie, wie oft Sie die Anzahl der Lichter in der Szene ändern.  Jede Änderung der Lichtanzahl erzwingt eine Shaderregeneration und Neukompilierung, es sei denn, diese Konfiguration existierte zuvor (und hatte daher ihren Shader zwischengespeichert).|  
|Leicht|Schwarzlichter sind nicht sichtbar, aber sie erhöhen die Renderzeit. sie wegzulassen.|  
|<xref:System.Windows.Media.Media3D.MeshGeometry3D>|Um die Konstruktionszeit großer [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]Sammlungen in zu minimieren, <xref:System.Windows.Media.Media3D.MeshGeometry3D.Positions%2A>z. B. in MeshGeometry3Ds , <xref:System.Windows.Media.Media3D.MeshGeometry3D.Normals%2A>, <xref:System.Windows.Media.Media3D.MeshGeometry3D.TextureCoordinates%2A>und <xref:System.Windows.Media.Media3D.MeshGeometry3D.TriangleIndices%2A>, wird die Größe der Auflistungen vor der Wertauffüllung voreingestellt. Übergeben Sie nach Möglichkeit die Konstruktoren der Auflistungen vorab ausgefüllte Datenstrukturen wie Arrays oder Listen.|  
  
## <a name="see-also"></a>Weitere Informationen

- [3D-Grafikübersicht](3-d-graphics-overview.md)
