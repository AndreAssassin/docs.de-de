---
title: „WSTrustChannelFactory“ und „WSTrustChannel“
ms.date: 03/30/2017
ms.assetid: 96cec467-e963-4132-b18b-7d0b3a2e979f
author: BrucePerlerMS
ms.openlocfilehash: e00f3ae25a50c2fb3f34f4c04d02cde574b3da17
ms.sourcegitcommit: 289e06e904b72f34ac717dbcc5074239b977e707
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 09/17/2019
ms.locfileid: "71044912"
---
# <a name="wstrustchannelfactory-and-wstrustchannel"></a><span data-ttu-id="66ae4-102">„WSTrustChannelFactory“ und „WSTrustChannel“</span><span class="sxs-lookup"><span data-stu-id="66ae4-102">WSTrustChannelFactory and WSTrustChannel</span></span>
<span data-ttu-id="66ae4-103">Wenn Sie mit Windows Communication Foundation (WCF) bereits vertraut sind, wissen Sie, dass ein WCF-Client bereits verbundfähig ist.</span><span class="sxs-lookup"><span data-stu-id="66ae4-103">If you are already familiar with Windows Communication Foundation (WCF), you know that a WCF client is already federation aware.</span></span> <span data-ttu-id="66ae4-104">Wird ein WCF-Client mit <xref:System.ServiceModel.WSFederationHttpBinding> oder einer ähnlichen benutzerdefinierten Bindung konfiguriert, können Sie die Verbundauthentifizierung für einen Dienst aktivieren.</span><span class="sxs-lookup"><span data-stu-id="66ae4-104">By configuring a WCF client with a <xref:System.ServiceModel.WSFederationHttpBinding> or similar custom binding, you can enable federated authentication to a service.</span></span>

 <span data-ttu-id="66ae4-105">WCF erhält das vom Sicherheitstokendienst (STS) im Hintergrund ausgegebene Token, und es wird dazu verwendet den Dienst zu authentifizieren.</span><span class="sxs-lookup"><span data-stu-id="66ae4-105">WCF obtains the token that is issued by the security token service (STS) behind the scenes and uses this token to authenticate to the service.</span></span> <span data-ttu-id="66ae4-106">Die Haupteinschränkung bei dieser Vorgehensweise besteht darin, dass keine Sichtbarkeit in die Kommunikation des Clients mit dem Server besteht.</span><span class="sxs-lookup"><span data-stu-id="66ae4-106">The main limitation to this approach is that there is no visibility into the client’s communications with the server.</span></span> <span data-ttu-id="66ae4-107">WCF generiert das Anforderungssicherheitstoken (RST) zum Sicherheitstokendienst auf Grundlage des Parameters des ausgestellten Tokens für die Bindung automatisch.</span><span class="sxs-lookup"><span data-stu-id="66ae4-107">WCF automatically generates the request security token (RST) to the STS based on the issued token parameters on the binding.</span></span> <span data-ttu-id="66ae4-108">Das bedeutet, dass der Client die RST-Parameter pro Anforderung nicht unterscheiden kann, die Antwort des Anforderungssicherheitstokens (RSTR) nicht untersuchen kann, um Informationen wie etwa Anzeigenansprüche abzurufen, oder das Token nicht für die zukünftige Verwendung zwischenspeichern kann.</span><span class="sxs-lookup"><span data-stu-id="66ae4-108">This means that the client cannot vary the RST parameters per request, inspect the request security token response (RSTR) to get information such as display claims, or cache the token for future use.</span></span>

 <span data-ttu-id="66ae4-109">Derzeit ist der WCF-Client für grundlegende Verbundszenarien geeignet.</span><span class="sxs-lookup"><span data-stu-id="66ae4-109">Currently, the WCF client is suitable for basic federation scenarios.</span></span> <span data-ttu-id="66ae4-110">Allerdings erfordert eine der wichtigsten Szenarien, die von Windows Foundation (WIF) unterstützt wird, Kontrolle über das Anforderungssicherheitstoken auf einer Ebene, die WCF nicht problemlos zulässt.</span><span class="sxs-lookup"><span data-stu-id="66ae4-110">However, one of the major scenarios that Windows Identity Foundation (WIF) supports requires control over the RST at a level that WCF does not easily allow.</span></span> <span data-ttu-id="66ae4-111">Daher werden bei WIF Funktionen hinzugefügt, mit denen Sie die Kommunikation mit dem Sicherheitstokendienst besser steuern können.</span><span class="sxs-lookup"><span data-stu-id="66ae4-111">Therefore, WIF adds features that give you more control over communication with the STS.</span></span>

 <span data-ttu-id="66ae4-112">WIF unterstützt die folgenden Verbundszenarien:</span><span class="sxs-lookup"><span data-stu-id="66ae4-112">WIF supports the following federation scenarios:</span></span>

- <span data-ttu-id="66ae4-113">Verwenden eines WCF-Clients ohne WIF-Abhängigkeiten zu einem Verbunddienst zu authentifizieren</span><span class="sxs-lookup"><span data-stu-id="66ae4-113">Using a WCF client without any WIF dependencies to authenticate to a federated service</span></span>

- <span data-ttu-id="66ae4-114">Aktivieren von WIF auf einem WCF-Client, um ein ActAs- oder ein OnBehalfOf-Element in das Anforderungssicherheitstoken im Sicherheitstokendienst einzufügen</span><span class="sxs-lookup"><span data-stu-id="66ae4-114">Enabling WIF on a WCF client to insert an ActAs or OnBehalfOf element into the RST to the STS</span></span>

- <span data-ttu-id="66ae4-115">Verwenden nur von WIF, um ein Token vom Sicherheitstokendienst abzurufen und es dann einem WCF-Client zu ermöglichen, sich mit diesem Token zu authentifizieren.</span><span class="sxs-lookup"><span data-stu-id="66ae4-115">Using WIF alone to obtain a token from the STS and then enable a WCF client to authenticate with this token.</span></span> <span data-ttu-id="66ae4-116">Weitere Informationen finden Sie unter dem Beispiel [ClaimsAwareWebService](https://go.microsoft.com/fwlink/?LinkID=248406).</span><span class="sxs-lookup"><span data-stu-id="66ae4-116">For more information, see [ClaimsAwareWebService](https://go.microsoft.com/fwlink/?LinkID=248406) sample.</span></span>

 <span data-ttu-id="66ae4-117">Das erste Szenario ist selbsterklärend: Vorhandene WCF-Clients funktionieren weiterhin mit WIF-vertrauenden Seiten und StSS.</span><span class="sxs-lookup"><span data-stu-id="66ae4-117">The first scenario is self-explanatory: Existing WCF clients will continue to work with WIF relying parties and STSs.</span></span> <span data-ttu-id="66ae4-118">In diesem Thema werden die verbleibenden beiden Szenarien besprochen.</span><span class="sxs-lookup"><span data-stu-id="66ae4-118">This topic discusses the remaining two scenarios.</span></span>

## <a name="enhancing-an-existing-wcf-client-with-actas--onbehalfof"></a><span data-ttu-id="66ae4-119">Optimieren eines vorhandenen WCF-Clients mit ActAs/OnBehalfOf</span><span class="sxs-lookup"><span data-stu-id="66ae4-119">Enhancing an Existing WCF Client with ActAs / OnBehalfOf</span></span>
<span data-ttu-id="66ae4-120">In einem typischen Identitätsdelegierungsszenario ruft ein Client einen Dienst der mittleren Ebene auf, der dann einen Back-End-Dienst aufruft.</span><span class="sxs-lookup"><span data-stu-id="66ae4-120">In a typical identity delegation scenario, a client calls a middle-tier service, which then calls a back-end service.</span></span> <span data-ttu-id="66ae4-121">Der Dienst der mittleren Ebene dient als oder im Namen vom Client.</span><span class="sxs-lookup"><span data-stu-id="66ae4-121">The middle-tier service acts as, or acts on behalf of, the client.</span></span>

> [!TIP]
> <span data-ttu-id="66ae4-122">Worin besteht der Unterschied zwischen "ActAs" und "OnBehalfOf"?</span><span class="sxs-lookup"><span data-stu-id="66ae4-122">What is the difference between ActAs and OnBehalfOf?</span></span>
>
> <span data-ttu-id="66ae4-123">Aus dem WS-Trust-Protokoll:</span><span class="sxs-lookup"><span data-stu-id="66ae4-123">From the WS-Trust protocol standpoint:</span></span>
>
> 1. <span data-ttu-id="66ae4-124">Ein ActAs-RST-Element gibt an, dass der Anforderer ein Token wünscht, das Ansprüche zu zwei verschiedenen Entitäten enthält: den Anforderer und eine externe Entität, die vom Token im ActAs-Element dargestellt wird.</span><span class="sxs-lookup"><span data-stu-id="66ae4-124">An ActAs RST element indicates that the requestor wants a token that contains claims about two distinct entities: the requestor, and an external entity represented by the token in the ActAs element.</span></span>
> 2. <span data-ttu-id="66ae4-125">Ein OnBehalfOf-RST-Element gibt an, dass der Anforderer ein Token wünscht, das nur Ansprüche zu einer Entität enthält: die externe Entität, die vom Token im OnBehalfOf-Element dargestellt wird.</span><span class="sxs-lookup"><span data-stu-id="66ae4-125">An OnBehalfOf RST element indicates that the requestor wants a token that contains claims only about one entity: the external entity represented by the token in the OnBehalfOf element.</span></span>
>
> <span data-ttu-id="66ae4-126">Die ActAs-Funktion wird üblicherweise in Szenarien verwendet, die zusammengesetzte Delegierung erfordern, wobei der Endempfänger des ausgestellten Tokens die gesamte Delegierungskette überprüfen und nicht nur den Client, sondern alle Zwischenstufen, finden kann.</span><span class="sxs-lookup"><span data-stu-id="66ae4-126">The ActAs feature is typically used in scenarios that require composite delegation, where the final recipient of the issued token can inspect the entire delegation chain and see not just the client, but all intermediaries.</span></span> <span data-ttu-id="66ae4-127">Dadurch kann die Zugriffssteuerung, Überwachung und andere verwandte Aktivitäten auf Grundlage der gesamten Identitätsdelegierungskette ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="66ae4-127">This lets it perform access control, auditing and other related activities based on the entire identity delegation chain.</span></span> <span data-ttu-id="66ae4-128">Die ActAs-Funktion wird üblicherweise in Systemen mit mehreren Ebenen verwendet, um Informationen über Identitäten zu authentifizieren und zwischen den Ebenen zu übergeben, ohne diese Informationen an die Anwendung/Geschäftslogikebene übergeben zu müssen.</span><span class="sxs-lookup"><span data-stu-id="66ae4-128">The ActAs feature is commonly used in multi-tiered systems to authenticate and pass information about identities between the tiers without having to pass this information at the application/business logic layer.</span></span>
>
> <span data-ttu-id="66ae4-129">Die OnBehalfOf-Funktion wird in Szenarien verwendet, in denen nur die Identität des ursprünglichen Clients wichtig ist und effektiv der Identitätsidentitätswechselfunktion gleicht, die in Windows verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="66ae4-129">The OnBehalfOf feature is used in scenarios where only the identity of the original client is important and is effectively the same as the identity impersonation feature available in Windows.</span></span> <span data-ttu-id="66ae4-130">Wenn OnBehalfOf verwendet wird, kann der Endempfänger des ausgestellten Tokens nur Ansprüche zum ursprünglichen Client sehen, und die Informationen zu Zwischenstufen werden nicht beibehalten.</span><span class="sxs-lookup"><span data-stu-id="66ae4-130">When OnBehalfOf is used, the final recipient of the issued token can only see claims about the original client, and the information about intermediaries is not preserved.</span></span> <span data-ttu-id="66ae4-131">Ein gängiges Muster, bei dem die OnBehalfOf-Funktion verwendet wird, ist das Proxymuster, in dem vom Client nicht direkt auf den Sicherheitstokendienst zugegriffen werden kann, sondern stattdessen durch ein Proxygateway kommuniziert wird.</span><span class="sxs-lookup"><span data-stu-id="66ae4-131">One common pattern where the OnBehalfOf feature is used is the proxy pattern where the client cannot access the STS directly but instead communicates through a proxy gateway.</span></span> <span data-ttu-id="66ae4-132">Das Proxygateway authentifiziert den Aufrufer und gibt Informationen zum Aufrufen an das OnBehalfOf-Element der RST-Meldung weiter, die dann zur Verarbeitung an den tatsächlichen Sicherheitstokendienst gesendet wird.</span><span class="sxs-lookup"><span data-stu-id="66ae4-132">The proxy gateway authenticates the caller and puts information about the caller into the OnBehalfOf element of the RST message that it then sends to the real STS for processing.</span></span> <span data-ttu-id="66ae4-133">Das daraus resultierende Token enthält nur Ansprüche zum Client des Proxys. Dadurch wird das Proxy für den Empfänger des ausgestellten Tokens vollständig transparent. Beachten Sie, dass WIF \<wsse:SecurityTokenReference> oder \<wsa:EndpointReferences> als untergeordnetes Element von \<wst:OnBehalfOf> nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="66ae4-133">The resulting token contains only claims related to the client of the proxy, making the proxy completely transparent to the receiver of the issued token.Note that WIF does not support \<wsse:SecurityTokenReference> or \<wsa:EndpointReferences> as a child of \<wst:OnBehalfOf>.</span></span> <span data-ttu-id="66ae4-134">Die WS-Trust-Spezifikation ermöglicht drei Methoden zur Identifizierung des ursprünglichen Anforderers (im Namen dessen der Proxy agiert).</span><span class="sxs-lookup"><span data-stu-id="66ae4-134">The WS-Trust specification allows for three ways to identify the original requestor (on behalf of whom the proxy is acting).</span></span> <span data-ttu-id="66ae4-135">Diese lauten wie folgt:</span><span class="sxs-lookup"><span data-stu-id="66ae4-135">These are:</span></span>
>
> - <span data-ttu-id="66ae4-136">Sicherheitstokenverweis</span><span class="sxs-lookup"><span data-stu-id="66ae4-136">Security token reference.</span></span> <span data-ttu-id="66ae4-137">Ein Verweis auf einen Token, entweder in der Meldung oder möglicherweise außerhalb des Bereichs abgerufen.</span><span class="sxs-lookup"><span data-stu-id="66ae4-137">A reference to a token, either in the message, or possibly retrieved out of band).</span></span>
> - <span data-ttu-id="66ae4-138">Endpunktverweis</span><span class="sxs-lookup"><span data-stu-id="66ae4-138">Endpoint reference.</span></span> <span data-ttu-id="66ae4-139">Wird als Schlüssel verwendet, um Daten zu suchen, wieder außerhalb des Bereichs.</span><span class="sxs-lookup"><span data-stu-id="66ae4-139">Used as a key to look up data, again out of band.</span></span>
> - <span data-ttu-id="66ae4-140">Sicherheitstoken</span><span class="sxs-lookup"><span data-stu-id="66ae4-140">Security token.</span></span> <span data-ttu-id="66ae4-141">Identifiziert den ursprünglichen Anforderer direkt.</span><span class="sxs-lookup"><span data-stu-id="66ae4-141">Identifies the original requestor directly.</span></span>
>
> <span data-ttu-id="66ae4-142">Von WIF werden nur Sicherheitstoken, entweder verschlüsselt oder unverschlüsselt, als direktes untergeordnetes Element von \<wst:OnBehalfOf> unterstützt.</span><span class="sxs-lookup"><span data-stu-id="66ae4-142">WIF supports only security tokens, either encrypted or unencrypted, as a direct child element of \<wst:OnBehalfOf>.</span></span>

 <span data-ttu-id="66ae4-143">Diese Informationen werden in einem WS-Trust-Aussteller mithilfe der ActAs- und OnBehalfOf-Tokenelemente im Anforderungssicherheitstoken übergeben.</span><span class="sxs-lookup"><span data-stu-id="66ae4-143">This information is conveyed to a WS-Trust issuer using the ActAs and OnBehalfOf token elements in the RST.</span></span>

 <span data-ttu-id="66ae4-144">WCF macht einen Erweiterungspunkt für die Bindung verfügbar, die das Hinzufügen von beliebigen XML-Elementen zum Anforderungssicherheitstoken ermöglicht.</span><span class="sxs-lookup"><span data-stu-id="66ae4-144">WCF exposes an extensibility point on the binding that allows arbitrary XML elements to be added to the RST.</span></span> <span data-ttu-id="66ae4-145">Da der Erweiterungspunkt allerdings an die Bindung gebunden ist, muss der Client in Szenarien, in denen die RST-Inhalte pro Aufruf variieren müssen, neu erstellt werden. Das verringert die Leistung.</span><span class="sxs-lookup"><span data-stu-id="66ae4-145">However, because the extensibility point is tied to the binding, scenarios that require the RST contents to vary per call must re-create the client for every call, which decreases performance.</span></span> <span data-ttu-id="66ae4-146">WIF verwendet bei der `ChannelFactory`-Klasse Erweiterungsmethoden, damit Entwickler jedes Token anfügen können, das außerhalb des Bereichs an das Anforderungssicherheitstoken abgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="66ae4-146">WIF uses extension methods on the `ChannelFactory` class to allow developers to attach any token that is obtained out of band to the RST.</span></span> <span data-ttu-id="66ae4-147">Im folgenden Codebeispiel wird verdeutlicht, wie ein Token, das den Client darstellt (z. B. ein X.509, Benutzername oder ein SAML-Token), akzeptiert und an das Anforderungssicherheitstoken, der zum Aussteller gesendet wird, angefügt wird.</span><span class="sxs-lookup"><span data-stu-id="66ae4-147">The following code example shows how to take a token that represents the client (such as an X.509, username, or Security Assertion Markup Language (SAML) token) and attach it to the RST that is sent to the issuer.</span></span>

```csharp
IHelloService serviceChannel = channelFactory.CreateChannelActingAs<IHelloService>(clientSamlToken);
serviceChannel.Hello("Hi!");
```

 <span data-ttu-id="66ae4-148">WIF bietet folgende Vorteile:</span><span class="sxs-lookup"><span data-stu-id="66ae4-148">WIF provides the following benefits:</span></span>

- <span data-ttu-id="66ae4-149">Das Anforderungssicherheitstoken kann pro Kanal geändert werden. Daher muss die Kanalfactory von den Diensten der mittleren Ebene nicht für jeden Client neu erstellt werden. Das verbessert die Leistung.</span><span class="sxs-lookup"><span data-stu-id="66ae4-149">The RST can be modified per channel; therefore, middle-tier services do not have to re-create the channel factory for each client, which improves performance.</span></span>

- <span data-ttu-id="66ae4-150">Das funktioniert mit vorhandenen WCF-Clients, was einen einfachen Upgradepfad für vorhandene WCF-Dienste der mittleren Ebene ermöglicht, mit denen Identitätsdelegierungssemantik aktiviert werden soll.</span><span class="sxs-lookup"><span data-stu-id="66ae4-150">This works with existing WCF clients, which makes an easy upgrade path possible for existing WCF middle-tier services that want to enable identity delegation semantics.</span></span>

 <span data-ttu-id="66ae4-151">Es gibt allerdings noch keine Sichtbarkeit in die Kommunikation des Clients mit dem Sicherheitstokendienst.</span><span class="sxs-lookup"><span data-stu-id="66ae4-151">However, there is still no visibility into the client’s communication with the STS.</span></span> <span data-ttu-id="66ae4-152">Das wird im dritten Szenario überprüft.</span><span class="sxs-lookup"><span data-stu-id="66ae4-152">We’ll examine this in the third scenario.</span></span>

## <a name="communicating-directly-with-an-issuer-and-using-the-issued-token-to-authenticate"></a><span data-ttu-id="66ae4-153">Direktes Kommunizieren mit einem Aussteller und Verwenden des ausgestellten Tokens zum Authentifizieren</span><span class="sxs-lookup"><span data-stu-id="66ae4-153">Communicating Directly with an Issuer and Using the Issued Token to Authenticate</span></span>
<span data-ttu-id="66ae4-154">Für einige erweiterte Szenarien reicht das Erweitern eines WCF-Client nicht aus.</span><span class="sxs-lookup"><span data-stu-id="66ae4-154">For some advanced scenarios, enhancing a WCF client is not enough.</span></span> <span data-ttu-id="66ae4-155">Entwickler, die nur WCF verwenden, nutzen in der Regel Message In/Message Out-Verträge und behandeln clientseitige Analyse der Ausstellerantwort manuell.</span><span class="sxs-lookup"><span data-stu-id="66ae4-155">Developers who use only WCF typically use Message In / Message Out contracts and handle client-side parsing of the issuer response manually.</span></span>

<span data-ttu-id="66ae4-156">Bei WIF werden die Klassen <xref:System.ServiceModel.Security.WSTrustChannelFactory> und <xref:System.ServiceModel.Security.WSTrustChannel> eingeführt, um eine direkte Kommunikation zwischen Client und einem WS-Trust-Aussteller zu ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="66ae4-156">WIF introduces the <xref:System.ServiceModel.Security.WSTrustChannelFactory> and <xref:System.ServiceModel.Security.WSTrustChannel> classes to let the client communicate directly with a WS-Trust issuer.</span></span> <span data-ttu-id="66ae4-157">Die Klassen <xref:System.ServiceModel.Security.WSTrustChannelFactory> und <xref:System.ServiceModel.Security.WSTrustChannel> ermöglichen den Ablauf stark typisierter RST- und RSTR-Objekte zwischen Client und Aussteller, wie im folgenden Codebeispiel verdeutlicht.</span><span class="sxs-lookup"><span data-stu-id="66ae4-157">The <xref:System.ServiceModel.Security.WSTrustChannelFactory> and <xref:System.ServiceModel.Security.WSTrustChannel> classes enable strongly typed RST and RSTR objects to flow between the client and issuer, as shown in the following code example.</span></span>

```csharp
WSTrustChannelFactory trustChannelFactory = new WSTrustChannelFactory(stsBinding, stsAddress);
WSTrustChannel channel = (WSTrustChannel) trustChannelFactory.CreateChannel();
RequestSecurityToken rst = new RequestSecurityToken(RequestTypes.Issue);
rst.AppliesTo = new EndpointAddress(serviceAddress);
RequestSecurityTokenResponse rstr = null;
SecurityToken token = channel.Issue(rst, out rstr);
```

<span data-ttu-id="66ae4-158">Beachten Sie, dass der `out`-Parameter auf der <xref:System.ServiceModel.Security.WSTrustChannel.Issue%2A>-Methode den Zugriff auf die Antwort des Anforderungssicherheitstokens für clientseitige Überprüfung zulässt.</span><span class="sxs-lookup"><span data-stu-id="66ae4-158">Note that the `out` parameter on the <xref:System.ServiceModel.Security.WSTrustChannel.Issue%2A> method allows access to the RSTR for client-side inspection.</span></span>

<span data-ttu-id="66ae4-159">Bisher haben Sie nur gesehen, wie Sie ein Token abrufen können.</span><span class="sxs-lookup"><span data-stu-id="66ae4-159">So far, you’ve only seen how to obtain a token.</span></span> <span data-ttu-id="66ae4-160">Das Token, das vom <xref:System.ServiceModel.Security.WSTrustChannel>-Objekt zurückgegeben wird, ist ein `GenericXmlSecurityToken`-Element, in dem alle Informationen enthalten sind, die für die Authentifizierung bei einer Seite erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="66ae4-160">The token that is returned from the <xref:System.ServiceModel.Security.WSTrustChannel> object is a `GenericXmlSecurityToken` that contains all of the information that is necessary for authentication to a relying party.</span></span> <span data-ttu-id="66ae4-161">Im folgenden Codebeispiel wird die Verwendung dieses Tokens veranschaulicht.</span><span class="sxs-lookup"><span data-stu-id="66ae4-161">The following code example shows how to use this token.</span></span>

```csharp
IHelloService serviceChannel = channelFactory.CreateChannelWithIssuedToken<IHelloService>( token );
serviceChannel.Hello("Hi!");
```

<span data-ttu-id="66ae4-162">Die <xref:System.ServiceModel.ChannelFactory%601.CreateChannelWithIssuedToken%2A>-Erweiterungsmethode auf dem `ChannelFactory`-Objekt gibt bei WIF an, dass Sie ein Token außerhalb des Bereichs abgerufen wurde, und dass der normale WCF-Aufruf zum Aussteller beendet und stattdessen das Token verwendet werden sollte, das zum Authentifizieren der vertrauenden Seite abgerufen wurde.</span><span class="sxs-lookup"><span data-stu-id="66ae4-162">The <xref:System.ServiceModel.ChannelFactory%601.CreateChannelWithIssuedToken%2A> extension method on the `ChannelFactory` object indicates to WIF that you have obtained a token out of band, and that it should stop the normal WCF call to the issuer and instead use the token that you obtained to authenticate to the relying party.</span></span> <span data-ttu-id="66ae4-163">Dies hat folgende Vorteile:</span><span class="sxs-lookup"><span data-stu-id="66ae4-163">This has the following benefits:</span></span>

- <span data-ttu-id="66ae4-164">Sie erhalten die vollständige Kontrolle über den Tokenausstellungsprozess.</span><span class="sxs-lookup"><span data-stu-id="66ae4-164">It gives you complete control over the token issuance process.</span></span>

- <span data-ttu-id="66ae4-165">Es werden ActAs/OnBehalfOf-Szenarien unterstützt, indem diese Eigenschaften für das ausgehende Anforderungssicherheitstoken direkt festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="66ae4-165">It supports ActAs / OnBehalfOf scenarios by directly setting these properties on the outgoing RST.</span></span>

- <span data-ttu-id="66ae4-166">Dynamische clientseitige Entscheidungen über die Vertrauenswürdigkeit werden basierend auf dem Inhalt der Antwort des Anforderungssicherheitstokens ermöglicht.</span><span class="sxs-lookup"><span data-stu-id="66ae4-166">It enables dynamic client-side trust decisions to be made based on the contents of the RSTR.</span></span>

- <span data-ttu-id="66ae4-167">Das von der <xref:System.ServiceModel.Security.WSTrustChannel.Issue%2A>-Methode zurückgegebene Token kann zwischengespeichert und wiederverwendet werden.</span><span class="sxs-lookup"><span data-stu-id="66ae4-167">It lets you cache and reuse the token that is returned from the <xref:System.ServiceModel.Security.WSTrustChannel.Issue%2A> method.</span></span>

- <span data-ttu-id="66ae4-168"><xref:System.ServiceModel.Security.WSTrustChannelFactory> und <xref:System.ServiceModel.Security.WSTrustChannel> ermöglichen die Steuerung von Kanalzwischenspeicherung, Fehlern und Wiederherstellungssemantiken entsprechend WCF-Best Practices.</span><span class="sxs-lookup"><span data-stu-id="66ae4-168"><xref:System.ServiceModel.Security.WSTrustChannelFactory> and <xref:System.ServiceModel.Security.WSTrustChannel> allow for control of channel caching, fault, and recovery semantics according to WCF best practices.</span></span>

## <a name="see-also"></a><span data-ttu-id="66ae4-169">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="66ae4-169">See also</span></span>

- [<span data-ttu-id="66ae4-170">WIF-Features</span><span class="sxs-lookup"><span data-stu-id="66ae4-170">WIF Features</span></span>](wif-features.md)
