---
title: Vertrauensebenen für Sicherheit beim Zugriff auf Ressourcen
ms.date: 03/30/2017
ms.assetid: fb5be924-317d-4d69-b33a-3d18ecfb9d6e
ms.openlocfilehash: 8e7d632c361ea73cb65668e43506d9e1128d31ca
ms.sourcegitcommit: 9b552addadfb57fab0b9e7852ed4f1f1b8a42f8e
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 04/23/2019
ms.locfileid: "61793600"
---
# <a name="security-trust-levels-in-accessing-resources"></a><span data-ttu-id="724fb-102">Vertrauensebenen für Sicherheit beim Zugriff auf Ressourcen</span><span class="sxs-lookup"><span data-stu-id="724fb-102">Security Trust Levels in Accessing Resources</span></span>
<span data-ttu-id="724fb-103">In diesem Thema wird erläutert, wie der Zugriff auf die Typen von Ressourcen eingeschränkt wird, die <xref:System.Transactions> verfügbar macht.</span><span class="sxs-lookup"><span data-stu-id="724fb-103">This topic discusses how access is restricted on the types of resources that <xref:System.Transactions> exposes.</span></span>  
  
 <span data-ttu-id="724fb-104">Es gibt drei Hauptvertrauensebenen für <xref:System.Transactions>.</span><span class="sxs-lookup"><span data-stu-id="724fb-104">There are three main levels of trust for <xref:System.Transactions>.</span></span> <span data-ttu-id="724fb-105">Die Vertrauensebenen werden basierend auf den Ressourcentypen definiert, die <xref:System.Transactions> verfügbar macht, und auf der Grundlage der Vertrauensebene, die für den Zugriff auf diese Ressourcen erforderlich sein soll.</span><span class="sxs-lookup"><span data-stu-id="724fb-105">The trust levels are defined based on the types of resources that <xref:System.Transactions> exposes, and the level of trust that should be required to access those resources.</span></span> <span data-ttu-id="724fb-106">Die Ressourcen, auf die <xref:System.Transactions> Zugriff gewährt, sind Systemspeicher, freigegebene prozessübergreifende Ressourcen und systemweite Ressourcen.</span><span class="sxs-lookup"><span data-stu-id="724fb-106">The resources that <xref:System.Transactions> provides access to are system memory, shared process wide resources, and system wide resources.</span></span> <span data-ttu-id="724fb-107">Die Ebenen sind:</span><span class="sxs-lookup"><span data-stu-id="724fb-107">The levels are:</span></span>  
  
- <span data-ttu-id="724fb-108">**AllowPartiallyTrustedCallers** (APTCA) für Anwendungen, die Transaktionen innerhalb einer einzelnen Anwendungsdomäne verwenden.</span><span class="sxs-lookup"><span data-stu-id="724fb-108">**AllowPartiallyTrustedCallers** (APTCA) for applications using transactions within a single application domain.</span></span>  
  
- <span data-ttu-id="724fb-109">**DistributedTransactionPermission** (DTP) für Anwendungen, die verteilte Transaktionen verwenden.</span><span class="sxs-lookup"><span data-stu-id="724fb-109">**DistributedTransactionPermission** (DTP) for applications using distributed transactions.</span></span>  
  
- <span data-ttu-id="724fb-110">Volle Vertrauenswürdigkeit für dauerhafte Ressourcen, Konfigurationsverwaltungsanwendungen und Legacy-Interop-Anwendungen</span><span class="sxs-lookup"><span data-stu-id="724fb-110">Full trust for durable resources, configuration management applications, and legacy interop applications.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="724fb-111">Sie sollten keine Eintragungsschnittstelle mit Identitätswechselkontexten aufrufen.</span><span class="sxs-lookup"><span data-stu-id="724fb-111">You should not call any of the enlistment interfaces with impersonated contexts.</span></span>  
  
## <a name="trust-levels"></a><span data-ttu-id="724fb-112">Vertrauensebenen</span><span class="sxs-lookup"><span data-stu-id="724fb-112">Trust Levels</span></span>  
  
### <a name="aptca-partial-trust"></a><span data-ttu-id="724fb-113">APTCA (teilweise vertrauenswürdig)</span><span class="sxs-lookup"><span data-stu-id="724fb-113">APTCA (Partial Trust)</span></span>  
 <span data-ttu-id="724fb-114">Die <xref:System.Transactions> Assembly kann von teilweise vertrauenswürdigem Code aufgerufen werden, da er mit gekennzeichnet wurde die **AllowPartiallyTrustedCallers** -Attribut (APTCA).</span><span class="sxs-lookup"><span data-stu-id="724fb-114">The <xref:System.Transactions> assembly can be called by partially trusted code because it has been marked with the **AllowPartiallyTrustedCallers** attribute (APTCA).</span></span> <span data-ttu-id="724fb-115">Dieses Attribut entfernt im Wesentlichen die implizite <xref:System.Security.Permissions.SecurityAction.LinkDemand> für die **FullTrust** , Berechtigungssatz ist andernfalls automatisch auf jede öffentlich zugängliche Methode jeden platziert.</span><span class="sxs-lookup"><span data-stu-id="724fb-115">This attribute essentially removes the implicit <xref:System.Security.Permissions.SecurityAction.LinkDemand> for the **FullTrust** permission set that is otherwise automatically placed on each publicly accessible method in each type.</span></span> <span data-ttu-id="724fb-116">Für einige Typen und Member sind allerdings weiterhin stärkere Berechtigungen erforderlich.</span><span class="sxs-lookup"><span data-stu-id="724fb-116">However, some types and members still require stronger permissions.</span></span>  
  
 <span data-ttu-id="724fb-117">Das APTCA-Attribut ermöglicht es Anwendungen, Transaktionen in teilweiser Vertrauenswürdigkeit innerhalb einer einzelnen Anwendungsdomäne zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="724fb-117">The APTCA attribute enables applications to use transactions in partial trust within a single application domain.</span></span> <span data-ttu-id="724fb-118">Dadurch ist die Verwendung nicht eskalierter Transaktionen und flüchtiger Eintragungen möglich, die zur Fehlerbehandlung verwendet werden können.</span><span class="sxs-lookup"><span data-stu-id="724fb-118">This enables non-escalated transactions and volatile enlistments that can be used for error handling.</span></span> <span data-ttu-id="724fb-119">Ein Beispiel dafür sind eine Transaktions-Hashtabelle und eine Anwendung, die sie verwendet.</span><span class="sxs-lookup"><span data-stu-id="724fb-119">One example of this is a transacted hash table and an application that uses it.</span></span> <span data-ttu-id="724fb-120">Daten können mit einer einzigen Transaktion der Hashtabelle hinzugefügt oder aus ihr entfernt werden.</span><span class="sxs-lookup"><span data-stu-id="724fb-120">Data can be added to and removed from the hash table under a single transaction.</span></span> <span data-ttu-id="724fb-121">Wird später ein Rollback für diese Transaktion ausgeführt, können alle Änderungen, die im Rahmen dieser Transaktion an der Hashtabelle vorgenommen wurden, wieder rückgängig gemacht werden.</span><span class="sxs-lookup"><span data-stu-id="724fb-121">If the transaction is later rolled back, all of the changes made to the hash table under that transaction can be undone.</span></span>  
  
### <a name="distributedtransactionpermission-dtp"></a><span data-ttu-id="724fb-122">DistributedTransactionPermission (DTP)</span><span class="sxs-lookup"><span data-stu-id="724fb-122">DistributedTransactionPermission (DTP)</span></span>  
 <span data-ttu-id="724fb-123">Wenn eine <xref:System.Transactions>-Transaktion zur Verwaltung durch MSDTC eskaliert wird, fordert <xref:System.Transactions> die <xref:System.Transactions.DistributedTransactionPermission> (DTP) auf, die verteilte Transaktion zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="724fb-123">When a <xref:System.Transactions> transaction is escalated to be managed by MSDTC, <xref:System.Transactions> demands the <xref:System.Transactions.DistributedTransactionPermission> (DTP) to create the distributed transaction.</span></span> <span data-ttu-id="724fb-124">Das bedeutet, dass dem Code, der für die Eskalation der Transaktion verantwortlich ist (beispielsweise durch Serialisierung oder zusätzliche dauerhafte Eintragungen), DTP erteilt werden muss.</span><span class="sxs-lookup"><span data-stu-id="724fb-124">This means that the code that causes the transaction to be escalated (such as through serialization or additional durable enlistments) would need to be granted DTP.</span></span> <span data-ttu-id="724fb-125">Der Code, der ursprünglich die <xref:System.Transactions>-Transaktion erstellt hat, muss diese Berechtigung nicht unbedingt besitzen.</span><span class="sxs-lookup"><span data-stu-id="724fb-125">The code that originally created the <xref:System.Transactions> transaction does not necessarily need to possess this permission.</span></span>  
  
### <a name="fulltrust-link-demands"></a><span data-ttu-id="724fb-126">FullTrust-Linkaufrufe</span><span class="sxs-lookup"><span data-stu-id="724fb-126">FullTrust Link Demands</span></span>  
 <span data-ttu-id="724fb-127">Diese Berechtigungsstufe ist dazu gedacht, die Anwendungen zu beschränken, die in dauerhafte Ressourcen schreiben.</span><span class="sxs-lookup"><span data-stu-id="724fb-127">This permission level is intended to restrict applications that are writing to durable resources.</span></span> <span data-ttu-id="724fb-128">Bei einem Fehler muss die Anwendung in der Lage sein, die Verbindung zum Transaktions-Manager wiederherzustellen, um das Endergebnis der Transaktion in Erfahrung zu bringen und dauerhafte Daten aktualisieren zu können.</span><span class="sxs-lookup"><span data-stu-id="724fb-128">Upon failure, the application needs to be able to recover with the transaction manager to determine the final outcome of the transaction, so that it can update permanent data.</span></span> <span data-ttu-id="724fb-129">Dieser Anwendungstyp wird als dauerhafter Quellen-Manager bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="724fb-129">This type of application is known as a durable source manager.</span></span> <span data-ttu-id="724fb-130">Ein klassisches Beispiel für diesen Anwendungstyp ist SQL.</span><span class="sxs-lookup"><span data-stu-id="724fb-130">A classic example of this type of application is SQL.</span></span>  
  
 <span data-ttu-id="724fb-131">Um die Wiederherstellung zu ermöglichen, ist dieser Anwendungstyp in der Lage, Systemressourcen permanent zu belegen.</span><span class="sxs-lookup"><span data-stu-id="724fb-131">To enable recovery, this type of application has the ability to permanently consume system resources.</span></span> <span data-ttu-id="724fb-132">Das liegt daran, dass sich der wiederherstellungsfähige Transaktions-Manager Transaktionen, für die ein Commit ausgeführt wurde, so lange merken muss, bis er bestätigen kann, dass alle Ressourcen-Manager, die an der Transaktion teilnehmen, Kenntnis über das Ergebnis erhalten haben.</span><span class="sxs-lookup"><span data-stu-id="724fb-132">This is because the recoverable transaction manager must remember transactions that have committed until it can confirm that all durable resource managers that are participating in the transaction have received the outcome.</span></span> <span data-ttu-id="724fb-133">Daher benötigt dieser Anwendungstyp volle Vertrauenswürdigkeit und sollte erst nach Erteilung dieser Vertrauensebene ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="724fb-133">Therefore, this type of application requires full trust and should not be run unless that level of trust has been granted.</span></span>  
  
 <span data-ttu-id="724fb-134">Weitere Informationen zu permanenten Eintragungen und Wiederherstellung finden Sie unter den [eintragen von Ressourcen als Teilnehmer an einer Transaktion](../../../../docs/framework/data/transactions/enlisting-resources-as-participants-in-a-transaction.md) und [Performing Recovery](../../../../docs/framework/data/transactions/performing-recovery.md) Themen.</span><span class="sxs-lookup"><span data-stu-id="724fb-134">For more information on durable enlistments and recovery, see the [Enlisting Resources as Participants in a Transaction](../../../../docs/framework/data/transactions/enlisting-resources-as-participants-in-a-transaction.md) and [Performing Recovery](../../../../docs/framework/data/transactions/performing-recovery.md) topics.</span></span>  
  
 <span data-ttu-id="724fb-135">Anwendungen, die Legacy-Interop-Aufgaben mit COM+ ausführen, benötigen ebenfalls die volle Vertrauenswürdigkeit.</span><span class="sxs-lookup"><span data-stu-id="724fb-135">Applications that perform legacy interop work with COM+ are also required to have full trust.</span></span>  
  
 <span data-ttu-id="724fb-136">Im folgenden finden eine Liste von Typen und Member nicht durch aufgerufen werden teilweise vertrauenswürdigen Code, da mit der sie ergänzt wurden die **FullTrust** deklarativen Sicherheitsattribut:</span><span class="sxs-lookup"><span data-stu-id="724fb-136">The following is a list of types and members that are not callable by partially trusted code because they are decorated with the **FullTrust** declarative security attribute:</span></span>  
  
 `PermissionSetAttribute(SecurityAction.LinkDemand, Name := "FullTrust")`  
  
- <xref:System.Transactions.Transaction.EnlistDurable%2A?displayProperty=nameWithType>  
  
- <xref:System.Transactions.Transaction.EnlistPromotableSinglePhase%2A>  
  
- <xref:System.Transactions.TransactionInterop>  
  
- <xref:System.Transactions.TransactionManager.DistributedTransactionStarted>  
  
- <xref:System.Transactions.HostCurrentTransactionCallback>  
  
- <xref:System.Transactions.TransactionManager.Reenlist%2A>  
  
- <xref:System.Transactions.TransactionManager.RecoveryComplete%2A>  
  
- <xref:System.Transactions.TransactionScope.%23ctor%28System.Transactions.TransactionScopeOption%2CSystem.Transactions.TransactionOptions%2CSystem.Transactions.EnterpriseServicesInteropOption%29>  
  
 <span data-ttu-id="724fb-137">Nur der direkte Aufrufer besitzt erforderlich ist der **FullTrust** Berechtigungssatz, der oben genannten Typen oder Methoden verwenden.</span><span class="sxs-lookup"><span data-stu-id="724fb-137">Only the immediate caller is required to possess the **FullTrust** permission set to use the above types or methods.</span></span>
