---
title: Aktualisieren des Datendiensts (WCF Data Services)
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- WCF Data Services, changing data
- WCF Data Services, client library
ms.assetid: 00d993be-ffed-4dea-baf7-6eea982cdb54
ms.openlocfilehash: 42980aa4691d8ecb9868336ecb270c9ad937b5a3
ms.sourcegitcommit: 680a741667cf6859de71586a0caf6be14f4f7793
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 04/12/2019
ms.locfileid: "59517108"
---
# <a name="updating-the-data-service-wcf-data-services"></a><span data-ttu-id="31b2c-102">Aktualisieren des Datendiensts (WCF Data Services)</span><span class="sxs-lookup"><span data-stu-id="31b2c-102">Updating the Data Service (WCF Data Services)</span></span>
<span data-ttu-id="31b2c-103">Bei Verwendung der [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] -Clientbibliothek ein [!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)] feed, übersetzt die Bibliothek die Einträge in den Feed in Instanzen von clientdatendienstklassen.</span><span class="sxs-lookup"><span data-stu-id="31b2c-103">When you use the [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client library to consume an [!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)] feed, the library translates the entries in the feed into instances of client data service classes.</span></span> <span data-ttu-id="31b2c-104">Diese Datendienstklassen werden mithilfe des <xref:System.Data.Services.Client.DataServiceContext> verfolgt, zu dem die <xref:System.Data.Services.Client.DataServiceQuery%601> gehört.</span><span class="sxs-lookup"><span data-stu-id="31b2c-104">These data service classes are tracked by using the <xref:System.Data.Services.Client.DataServiceContext> to which the <xref:System.Data.Services.Client.DataServiceQuery%601> belongs.</span></span> <span data-ttu-id="31b2c-105">Der Client verfolgt Änderungen an Entitäten nach, die mit Methoden des <xref:System.Data.Services.Client.DataServiceContext> gemeldet werden.</span><span class="sxs-lookup"><span data-stu-id="31b2c-105">The client tracks changes to entities that you report by using methods on <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="31b2c-106">Mithilfe dieser Methoden kann der Client hinzugefügte und gelöschte Entitäten sowie Änderungen an den Eigenschaftswerten oder an Beziehungen zwischen Entitätsinstanzen verfolgen.</span><span class="sxs-lookup"><span data-stu-id="31b2c-106">These methods enable the client to track added and deleted entities and also changes that you make to property values or to relationships between entity instances.</span></span> <span data-ttu-id="31b2c-107">Wenn Sie die <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A>-Methode aufrufen, werden diese nachverfolgten Änderungen als REST-basierte Vorgänge an den Datendienst zurückgesendet.</span><span class="sxs-lookup"><span data-stu-id="31b2c-107">Those tracked changes are sent back to the data service as REST-based operations when you call the <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> method.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="31b2c-108">Wenn Sie mithilfe einer Instanz von <xref:System.Data.Services.Client.DataServiceCollection%601> Daten an Steuerelemente binden, werden die an Daten im gebundenen Steuerelement vorgenommenen Änderungen automatisch dem <xref:System.Data.Services.Client.DataServiceContext> gemeldet.</span><span class="sxs-lookup"><span data-stu-id="31b2c-108">When you use an instance of <xref:System.Data.Services.Client.DataServiceCollection%601> to bind data to controls, changes made to data in the bound control are automatically reported to the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="31b2c-109">Weitere Informationen finden Sie unter [Binden von Daten an Steuerelemente](../../../../docs/framework/data/wcf/binding-data-to-controls-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="31b2c-109">For more information, see [Binding Data to Controls](../../../../docs/framework/data/wcf/binding-data-to-controls-wcf-data-services.md).</span></span>  
  
## <a name="adding-modifying-and-changing-entities"></a><span data-ttu-id="31b2c-110">Hinzufügen und Ändern von Entitäten</span><span class="sxs-lookup"><span data-stu-id="31b2c-110">Adding, Modifying, and Changing Entities</span></span>  
 <span data-ttu-id="31b2c-111">Bei Verwendung der **Hinzufügen eines Dienstverweises** Dialogfeld in Visual Studio zum Hinzufügen eines Verweises auf ein [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] die resultierenden Clientdaten-Dienstklassen jeder feed, verfügen über eine statische *erstellen* Methode, die ein Parameter für jede Entitätseigenschaft für die NULL-Werte zulässt.</span><span class="sxs-lookup"><span data-stu-id="31b2c-111">When you use the **Add Service Reference** dialog in Visual Studio to add a reference to an [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] feed, the resulting client data service classes each have a static *Create* method that takes one parameter for each non-nullable entity property.</span></span> <span data-ttu-id="31b2c-112">Sie können mithilfe dieser Methode Instanzen von Entitätstypklassen wie im folgenden Beispiel erstellen:</span><span class="sxs-lookup"><span data-stu-id="31b2c-112">You can use this method to create instances of entity type classes, as in the following example:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#CreateNewProduct](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#createnewproduct)]
 [!code-vb[Astoria Northwind Client#CreateNewProduct](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#createnewproduct)]  
  
 <span data-ttu-id="31b2c-113">Rufen Sie zum Hinzufügen einer Entitätsinstanz die entsprechende *AddTo* Methode für die <xref:System.Data.Services.Client.DataServiceContext> generierten Klasse die **Hinzufügen eines Dienstverweises** (Dialogfeld), wie im folgenden Beispiel:</span><span class="sxs-lookup"><span data-stu-id="31b2c-113">To add an entity instance, call the appropriate *AddTo* method on the <xref:System.Data.Services.Client.DataServiceContext> class generated by the **Add Service Reference** dialog box, as in the following example:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#AddProductSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#addproductspecific)]
 [!code-vb[Astoria Northwind Client#AddProductSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#addproductspecific)]  
  
 <span data-ttu-id="31b2c-114">Diese fügt das Objekt zum Kontext und in die richtige Entitätenmenge hinzu.</span><span class="sxs-lookup"><span data-stu-id="31b2c-114">This adds the object to the context and into the correct entity set.</span></span> <span data-ttu-id="31b2c-115">Sie können auch <xref:System.Data.Services.Client.DataServiceContext.AddObject%2A> aufrufen, Sie müssen jedoch stattdessen den Entitätenmengennamen angeben.</span><span class="sxs-lookup"><span data-stu-id="31b2c-115">You can also call <xref:System.Data.Services.Client.DataServiceContext.AddObject%2A>, but you must instead supply the entity set name.</span></span> <span data-ttu-id="31b2c-116">Wenn die hinzugefügte Entität über eine oder mehrere Beziehungen zu anderen Entitäten verfügt, können Sie entweder die <xref:System.Data.Services.Client.DataServiceContext.AddRelatedObject%2A>-Methode verwenden, oder Sie verwenden eine der vorherigen Methoden und definieren die Links auch explizit.</span><span class="sxs-lookup"><span data-stu-id="31b2c-116">If the added entity has one or more relationships to other entities, you can either use the <xref:System.Data.Services.Client.DataServiceContext.AddRelatedObject%2A> method or use one of the previous methods and also explicitly define those links.</span></span> <span data-ttu-id="31b2c-117">Diese Vorgänge werden weiter unten in diesem Thema erläutert.</span><span class="sxs-lookup"><span data-stu-id="31b2c-117">These operations are discussed later in this topic.</span></span>  
  
 <span data-ttu-id="31b2c-118">Zum Ändern einer vorhandenen Instanz einer Entität führen Sie zunächst eine Abfrage für die entsprechende Entität durch und nehmen die gewünschten Änderungen an den zugehörigen Eigenschaften vor. Rufen Sie anschließend die <xref:System.Data.Services.Client.DataServiceContext.UpdateObject%2A>-Methode für den <xref:System.Data.Services.Client.DataServiceContext> auf, um der Clientbibliothek mitzuteilen, dass eine Aktualisierung für dieses Objekt gesendet werden muss, wie im folgenden Beispiel dargestellt:</span><span class="sxs-lookup"><span data-stu-id="31b2c-118">To modify an existing entity instance, first query for that entity, make the desired changes to its properties, and then call the <xref:System.Data.Services.Client.DataServiceContext.UpdateObject%2A> method on the <xref:System.Data.Services.Client.DataServiceContext> to indicate to the client library that it needs to send an update for that object, as shown in the following example:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#ModifyCustomerSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#modifycustomerspecific)]
 [!code-vb[Astoria Northwind Client#ModifyCustomerSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#modifycustomerspecific)]  
  
 <span data-ttu-id="31b2c-119">Zum Löschen einer Entitätsinstanz rufen Sie wie im folgenden Beispiel dargestellt die <xref:System.Data.Services.Client.DataServiceContext.DeleteObject%2A>-Methode für den <xref:System.Data.Services.Client.DataServiceContext> auf:</span><span class="sxs-lookup"><span data-stu-id="31b2c-119">To delete an entity instance, call the <xref:System.Data.Services.Client.DataServiceContext.DeleteObject%2A> method on the <xref:System.Data.Services.Client.DataServiceContext>, as shown in the following example:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#DeleteProductSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#deleteproductspecific)]
 [!code-vb[Astoria Northwind Client#DeleteProductSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#deleteproductspecific)]  
  
 <span data-ttu-id="31b2c-120">Weitere Informationen finden Sie unter [Vorgehensweise: Hinzufügen, ändern und Löschen von Entitäten](../../../../docs/framework/data/wcf/how-to-add-modify-and-delete-entities-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="31b2c-120">For more information, see [How to: Add, Modify, and Delete Entities](../../../../docs/framework/data/wcf/how-to-add-modify-and-delete-entities-wcf-data-services.md).</span></span>  
  
## <a name="attaching-entities"></a><span data-ttu-id="31b2c-121">Anfügen von Entitäten</span><span class="sxs-lookup"><span data-stu-id="31b2c-121">Attaching Entities</span></span>  
 <span data-ttu-id="31b2c-122">Mithilfe der Clientbibliothek können Sie an einer Entität vorgenommene Aktualisierungen speichern, ohne zuerst eine Abfrage zum Laden der Entität in den <xref:System.Data.Services.Client.DataServiceContext> auszuführen.</span><span class="sxs-lookup"><span data-stu-id="31b2c-122">The client library enables you to save updates that you made to an entity without first executing a query to load the entity into the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="31b2c-123">Verwenden Sie die <xref:System.Data.Services.Client.DataServiceContext.AttachTo%2A>-Methode, um ein vorhandenes Objekt an eine bestimmte Entitätenmenge im <xref:System.Data.Services.Client.DataServiceContext> anzufügen.</span><span class="sxs-lookup"><span data-stu-id="31b2c-123">Use the <xref:System.Data.Services.Client.DataServiceContext.AttachTo%2A> method to attach an existing object to a specific entity set in the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="31b2c-124">Sie können dann das Objekt ändern und die Änderungen am Datendienst speichern.</span><span class="sxs-lookup"><span data-stu-id="31b2c-124">You can then modify the object and save the changes to the data service.</span></span> <span data-ttu-id="31b2c-125">Im folgenden Beispiel wird ein geändertes Kundenobjekt an den Kontext angefügt, und dann wird <xref:System.Data.Services.Client.DataServiceContext.UpdateObject%2A> aufgerufen, um das angefügte Objekt als <xref:System.Data.Services.Client.EntityStates.Modified> zu markieren, bevor <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> aufgerufen wird:</span><span class="sxs-lookup"><span data-stu-id="31b2c-125">In the following example, a customer object that has been changed is attached to the context and then <xref:System.Data.Services.Client.DataServiceContext.UpdateObject%2A> is called to mark the attached object as <xref:System.Data.Services.Client.EntityStates.Modified> before <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> is called:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#AttachObjectSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#attachobjectspecific)]
 [!code-vb[Astoria Northwind Client#AttachObjectSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#attachobjectspecific)]  
  
 <span data-ttu-id="31b2c-126">Folgendes gilt beim Anfügen von Objekten:</span><span class="sxs-lookup"><span data-stu-id="31b2c-126">The following considerations apply when attaching objects:</span></span>  
  
-   <span data-ttu-id="31b2c-127">Ein Objekt wird im <xref:System.Data.Services.Client.EntityStates.Unchanged>-Zustand angefügt.</span><span class="sxs-lookup"><span data-stu-id="31b2c-127">An object is attached in the <xref:System.Data.Services.Client.EntityStates.Unchanged> state.</span></span>  
  
-   <span data-ttu-id="31b2c-128">Wenn ein Objekt angefügt wird, werden Objekte, die sich auf das angefügte Objekt beziehen, nicht auch angefügt.</span><span class="sxs-lookup"><span data-stu-id="31b2c-128">When an object is attached, objects that are related to the attached object are not also attached.</span></span>  
  
-   <span data-ttu-id="31b2c-129">Ein Objekt kann nicht angefügt werden, wenn die Entität bereits vom Kontext verfolgt wird.</span><span class="sxs-lookup"><span data-stu-id="31b2c-129">An object cannot be attached if the entity is already being tracked by the context.</span></span>  
  
-   <span data-ttu-id="31b2c-130">Die <xref:System.Data.Services.Client.DataServiceContext.AttachTo%28System.String%2CSystem.Object%2CSystem.String%29>-Methodenüberladung, die einen `etag`-Parameter annimmt, wird verwendet, wenn Sie ein zusammen mit einem eTag-Wert empfangenes Entitätsobjekt anfügen.</span><span class="sxs-lookup"><span data-stu-id="31b2c-130">The <xref:System.Data.Services.Client.DataServiceContext.AttachTo%28System.String%2CSystem.Object%2CSystem.String%29> method overload that takes an `etag` parameter is used when you attach an entity object that was received along with an eTag value.</span></span> <span data-ttu-id="31b2c-131">Dieser eTag-Wert wird dann zur Überprüfung auf Parallelität verwendet, wenn Änderungen am angefügten Objekt gespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="31b2c-131">This eTag value is then used to check for concurrency when changes to the attached object are saved.</span></span>  
  
 <span data-ttu-id="31b2c-132">Weitere Informationen finden Sie unter [Vorgehensweise: Anfügen einer vorhandenen Entität an DataServiceContext](../../../../docs/framework/data/wcf/attach-an-existing-entity-to-dc-wcf-data.md).</span><span class="sxs-lookup"><span data-stu-id="31b2c-132">For more information, see [How to: Attach an Existing Entity to the DataServiceContext](../../../../docs/framework/data/wcf/attach-an-existing-entity-to-dc-wcf-data.md).</span></span>  
  
## <a name="creating-and-modifying-relationship-links"></a><span data-ttu-id="31b2c-133">Erstellen und Ändern von Beziehungslinks</span><span class="sxs-lookup"><span data-stu-id="31b2c-133">Creating and Modifying Relationship Links</span></span>  
 <span data-ttu-id="31b2c-134">Wenn Sie eine neue Entität hinzufügen, indem Sie entweder die <xref:System.Data.Services.Client.DataServiceContext.AddObject%2A> -Methode oder der entsprechenden *AddTo* -Methode der der <xref:System.Data.Services.Client.DataServiceContext> Klasse, die die **Hinzufügen eines Dienstverweises** Dialogfeld generiert wird, werden Beziehungen zwischen der neuen Entität und verknüpften Entitäten nicht automatisch definiert.</span><span class="sxs-lookup"><span data-stu-id="31b2c-134">When you add a new entity by using either the <xref:System.Data.Services.Client.DataServiceContext.AddObject%2A> method or the appropriate *AddTo* method of the <xref:System.Data.Services.Client.DataServiceContext> class that the **Add Service Reference** dialog generates, any relationships between the new entity and related entities are not automatically defined.</span></span>  
  
 <span data-ttu-id="31b2c-135">Sie können Beziehungen zwischen Entitätsinstanzen erstellen und ändern und die Clientbibliothek diese Änderungen im Datendienst widerspiegeln lassen.</span><span class="sxs-lookup"><span data-stu-id="31b2c-135">You can create and change relationships between entity instances and have the client library reflect those changes in the data service.</span></span> <span data-ttu-id="31b2c-136">Beziehungen zwischen Entitäten werden im Modell als Zuordnungen definiert, und das <xref:System.Data.Services.Client.DataServiceContext>-Objekt verfolgt jede Beziehung als Linkobjekt im Kontext.</span><span class="sxs-lookup"><span data-stu-id="31b2c-136">Relationships between entities are defined as associations in the model, and the <xref:System.Data.Services.Client.DataServiceContext> tracks each relationship as a link object in the context.</span></span> [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] <span data-ttu-id="31b2c-137">Stellt die folgenden Methoden auf die <xref:System.Data.Services.Client.DataServiceContext> Klasse zu erstellen, ändern und Löschen dieser Links:</span><span class="sxs-lookup"><span data-stu-id="31b2c-137">provides the following methods on the <xref:System.Data.Services.Client.DataServiceContext> class to create, modify, and delete these links:</span></span>  
  
|<span data-ttu-id="31b2c-138">Methode</span><span class="sxs-lookup"><span data-stu-id="31b2c-138">Method</span></span>|<span data-ttu-id="31b2c-139">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="31b2c-139">Description</span></span>|  
|------------|-----------------|  
|<xref:System.Data.Services.Client.DataServiceContext.AddRelatedObject%2A>|<span data-ttu-id="31b2c-140">Erstellt einen neuen Link zwischen zwei verknüpften Entitätsobjekten.</span><span class="sxs-lookup"><span data-stu-id="31b2c-140">Creates a new link between two related entity objects.</span></span> <span data-ttu-id="31b2c-141">Das Aufrufen dieser Methode entspricht dem Aufrufen von <xref:System.Data.Services.Client.DataServiceContext.AddObject%2A> und <xref:System.Data.Services.Client.DataServiceContext.AddLink%2A>, um das neue Objekt zu erstellen und die Beziehung zu einem vorhandenen Objekt zu definieren.</span><span class="sxs-lookup"><span data-stu-id="31b2c-141">Calling this method is equivalent to calling <xref:System.Data.Services.Client.DataServiceContext.AddObject%2A> and <xref:System.Data.Services.Client.DataServiceContext.AddLink%2A> to both create the new object and define the relationship to an existing object.</span></span>|  
|<xref:System.Data.Services.Client.DataServiceContext.AddLink%2A>|<span data-ttu-id="31b2c-142">Erstellt einen neuen Link zwischen zwei verknüpften Entitätsobjekten.</span><span class="sxs-lookup"><span data-stu-id="31b2c-142">Creates a new link between two related entity objects.</span></span>|  
|<xref:System.Data.Services.Client.DataServiceContext.SetLink%2A>|<span data-ttu-id="31b2c-143">Aktualisiert einen vorhandenen Link zwischen zwei verknüpften Entitätsobjekten.</span><span class="sxs-lookup"><span data-stu-id="31b2c-143">Updates an existing link between two related entity objects.</span></span> <span data-ttu-id="31b2c-144"><xref:System.Data.Services.Client.DataServiceContext.SetLink%2A> wird auch verwendet, um Links mit einer Kardinalität von 0 bzw. 1:1 (`0..1:1`) und 1:1 (`1:1`) zu löschen.</span><span class="sxs-lookup"><span data-stu-id="31b2c-144"><xref:System.Data.Services.Client.DataServiceContext.SetLink%2A> is also used to delete links with a cardinality of zero-or-one-to-one (`0..1:1`) and one-to-one (`1:1`).</span></span> <span data-ttu-id="31b2c-145">Sie können dazu das verknüpfte Objekte auf `null` festlegen.</span><span class="sxs-lookup"><span data-stu-id="31b2c-145">You can do this by setting the related object to `null`.</span></span>|  
|<xref:System.Data.Services.Client.DataServiceContext.DeleteLink%2A>|<span data-ttu-id="31b2c-146">Markiert einen Link, den der Kontext für den Löschvorgang nachverfolgt, wenn die <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A>-Methode aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="31b2c-146">Marks a link that the context is tracking for deletion when the <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> method is called.</span></span> <span data-ttu-id="31b2c-147">Verwenden Sie diese Methode, wenn Sie ein verknüpftes Objekt löschen oder durch das Löschen des Links zu einem vorhandenen Objekt und dem nachfolgenden Hinzufügen eines Links zum neuen verknüpften Objekt eine Beziehung ändern.</span><span class="sxs-lookup"><span data-stu-id="31b2c-147">Use this method when you delete a related object or change a relationship by first deleting the link to an existing object and then adding a link to the new related object.</span></span>|  
|<xref:System.Data.Services.Client.DataServiceContext.AttachLink%2A>|<span data-ttu-id="31b2c-148">Benachrichtigt den Kontext über einen vorhandenen Link zwischen zwei Entitätsobjekten.</span><span class="sxs-lookup"><span data-stu-id="31b2c-148">Notifies the context of an existing link between two entity objects.</span></span> <span data-ttu-id="31b2c-149">Der Kontext geht davon aus, dass diese Beziehung bereits im Datendienst vorhanden ist, und versucht nicht, den Link zu erstellen, wenn Sie die <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A>-Methode aufrufen.</span><span class="sxs-lookup"><span data-stu-id="31b2c-149">The context assumes that this relationship already exists in the data service and does not try to create the link when you call the <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> method.</span></span> <span data-ttu-id="31b2c-150">Verwenden Sie diese Methode, wenn Sie Objekte an einen Kontext anfügen und außerdem den Link zwischen beiden anfügen müssen.</span><span class="sxs-lookup"><span data-stu-id="31b2c-150">Use this method when you attach objects to a context and need to also attach the link between the two.</span></span> <span data-ttu-id="31b2c-151">Wenn Sie eine neue Beziehung definieren, sollten Sie stattdessen <xref:System.Data.Services.Client.DataServiceContext.AddLink%2A> verwenden.</span><span class="sxs-lookup"><span data-stu-id="31b2c-151">If you are defining a new relationship, you should instead use <xref:System.Data.Services.Client.DataServiceContext.AddLink%2A>.</span></span>|  
|<xref:System.Data.Services.Client.DataServiceContext.DetachLink%2A>|<span data-ttu-id="31b2c-152">Beendet die Nachverfolgung des angegebenen Links im Kontext.</span><span class="sxs-lookup"><span data-stu-id="31b2c-152">Stops tracking the specified link in the context.</span></span> <span data-ttu-id="31b2c-153">Diese Methode wird verwendet, um 1:n-Beziehungen (`*:*`) zu löschen.</span><span class="sxs-lookup"><span data-stu-id="31b2c-153">This method is used to delete one-to-many (`*:*`) relationships.</span></span> <span data-ttu-id="31b2c-154">Für Beziehungslinks mit einer Multiplizität von 1 müssen Sie stattdessen <xref:System.Data.Services.Client.DataServiceContext.SetLink%2A> verwenden.</span><span class="sxs-lookup"><span data-stu-id="31b2c-154">For relationship links with a cardinality of one, you must instead use <xref:System.Data.Services.Client.DataServiceContext.SetLink%2A>.</span></span>|  
  
 <span data-ttu-id="31b2c-155">Im folgenden Beispiel wird gezeigt, wie die <xref:System.Data.Services.Client.DataServiceContext.AddRelatedObject%2A>-Methode verwendet wird, um ein neues `Order_Detail` hinzuzufügen, das sich auf eine vorhandene `Orders`-Entität bezieht.</span><span class="sxs-lookup"><span data-stu-id="31b2c-155">The following example shows how to use the <xref:System.Data.Services.Client.DataServiceContext.AddRelatedObject%2A> method to add a new `Order_Detail` that is related to an existing `Orders` entity.</span></span> <span data-ttu-id="31b2c-156">Da das neue `Order_Details`-Objekt jetzt vom <xref:System.Data.Services.Client.DataServiceContext> nachverfolgt wird, wird die Beziehung des hinzugefügten `Order_Details`-Objekts zur vorhandenen `Products`-Entität definiert, indem die <xref:System.Data.Services.Client.DataServiceContext.AddLink%2A>-Methode aufgerufen werden:</span><span class="sxs-lookup"><span data-stu-id="31b2c-156">Because the new `Order_Details` object is now tracked by the <xref:System.Data.Services.Client.DataServiceContext>, the relationship of the added `Order_Details` object to the existing `Products` entity is defined by calling the <xref:System.Data.Services.Client.DataServiceContext.AddLink%2A> method:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#AddOrderDetailToOrderSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#addorderdetailtoorderspecific)]
 [!code-vb[Astoria Northwind Client#AddOrderDetailToOrderSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#addorderdetailtoorderspecific)]  
  
 <span data-ttu-id="31b2c-157">Während die <xref:System.Data.Services.Client.DataServiceContext.AddLink%2A>-Methode Links definiert, die im Datendienst erstellt werden müssen, müssen Sie auch die Navigationseigenschaften für die Objekte selbst festlegen, damit sich diese Links in den im Kontext enthaltenen Objekten widerspiegeln.</span><span class="sxs-lookup"><span data-stu-id="31b2c-157">While the <xref:System.Data.Services.Client.DataServiceContext.AddLink%2A> method defines links that must be created in the data service, to have these links reflected in the objects that are in the context, you must also set the navigation properties on the objects themselves.</span></span> <span data-ttu-id="31b2c-158">Im vorherigen Beispiel sollten Sie die Navigationseigenschaften wie folgt festlegen:</span><span class="sxs-lookup"><span data-stu-id="31b2c-158">In the previous example, you should set the navigation properties as follows:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#SetNavProps](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#setnavprops)]
 [!code-vb[Astoria Northwind Client#SetNavProps](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#setnavprops)]  
  
 <span data-ttu-id="31b2c-159">Weitere Informationen finden Sie unter [Vorgehensweise: Definieren von Entitätsbeziehungen](../../../../docs/framework/data/wcf/how-to-define-entity-relationships-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="31b2c-159">For more information, see [How to: Define Entity Relationships](../../../../docs/framework/data/wcf/how-to-define-entity-relationships-wcf-data-services.md).</span></span>  
  
## <a name="saving-changes"></a><span data-ttu-id="31b2c-160">Speichern von Änderungen</span><span class="sxs-lookup"><span data-stu-id="31b2c-160">Saving Changes</span></span>  
 <span data-ttu-id="31b2c-161">Änderungen werden in der <xref:System.Data.Services.Client.DataServiceContext>-Instanz nachverfolgt, jedoch nicht unmittelbar an den Server gesendet.</span><span class="sxs-lookup"><span data-stu-id="31b2c-161">Changes are tracked in the <xref:System.Data.Services.Client.DataServiceContext> instance but not sent to the server immediately.</span></span> <span data-ttu-id="31b2c-162">Wenn Sie die erforderlichen Änderungen für eine bestimmte Aktivität vorgenommen haben, rufen Sie <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> auf, um alle Änderungen an den Datendienst zu übergeben.</span><span class="sxs-lookup"><span data-stu-id="31b2c-162">After you are finished with the required changes for a specified activity, call <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> to submit all the changes to the data service.</span></span> <span data-ttu-id="31b2c-163">Weitere Informationen finden Sie unter [Verwalten des Datendienstkontextes](../../../../docs/framework/data/wcf/managing-the-data-service-context-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="31b2c-163">For more information, see [Managing the Data Service Context](../../../../docs/framework/data/wcf/managing-the-data-service-context-wcf-data-services.md).</span></span> <span data-ttu-id="31b2c-164">Sie können Änderungen mit der <xref:System.Data.Services.Client.DataServiceContext.BeginSaveChanges%2A>-Methode und der <xref:System.Data.Services.Client.DataServiceContext.EndSaveChanges%2A>-Methode auch asynchron speichern.</span><span class="sxs-lookup"><span data-stu-id="31b2c-164">You can also save changes asynchronously by using the <xref:System.Data.Services.Client.DataServiceContext.BeginSaveChanges%2A> and <xref:System.Data.Services.Client.DataServiceContext.EndSaveChanges%2A> methods.</span></span> <span data-ttu-id="31b2c-165">Weitere Informationen finden Sie unter [asynchrone Vorgänge](../../../../docs/framework/data/wcf/asynchronous-operations-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="31b2c-165">For more information, see [Asynchronous Operations](../../../../docs/framework/data/wcf/asynchronous-operations-wcf-data-services.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="31b2c-166">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="31b2c-166">See also</span></span>

- [<span data-ttu-id="31b2c-167">WCF Data Services-Clientbibliothek</span><span class="sxs-lookup"><span data-stu-id="31b2c-167">WCF Data Services Client Library</span></span>](../../../../docs/framework/data/wcf/wcf-data-services-client-library.md)
- [<span data-ttu-id="31b2c-168">Abfragen des Datendiensts</span><span class="sxs-lookup"><span data-stu-id="31b2c-168">Querying the Data Service</span></span>](../../../../docs/framework/data/wcf/querying-the-data-service-wcf-data-services.md)
- [<span data-ttu-id="31b2c-169">Asynchrone Vorgänge</span><span class="sxs-lookup"><span data-stu-id="31b2c-169">Asynchronous Operations</span></span>](../../../../docs/framework/data/wcf/asynchronous-operations-wcf-data-services.md)
- [<span data-ttu-id="31b2c-170">Batchvorgänge</span><span class="sxs-lookup"><span data-stu-id="31b2c-170">Batching Operations</span></span>](../../../../docs/framework/data/wcf/batching-operations-wcf-data-services.md)
- [<span data-ttu-id="31b2c-171">Objektmaterialisierung</span><span class="sxs-lookup"><span data-stu-id="31b2c-171">Object Materialization</span></span>](../../../../docs/framework/data/wcf/object-materialization-wcf-data-services.md)
- [<span data-ttu-id="31b2c-172">Verwalten des Datendienstkontexts</span><span class="sxs-lookup"><span data-stu-id="31b2c-172">Managing the Data Service Context</span></span>](../../../../docs/framework/data/wcf/managing-the-data-service-context-wcf-data-services.md)
