---
title: Laden von verzögerten Inhalten (WCF Data Services)
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- WCF Data Services, client library
- WCF Data Services, deferred content
- WCF Data Services, loading data
ms.assetid: 32f9b588-c832-44c4-a7e0-fcce635df59a
ms.openlocfilehash: db0127712ab0cb4586b364abf899bcf4765632d7
ms.sourcegitcommit: 2701302a99cafbe0d86d53d540eb0fa7e9b46b36
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 04/28/2019
ms.locfileid: "64645600"
---
# <a name="loading-deferred-content-wcf-data-services"></a><span data-ttu-id="8efe7-102">Laden von verzögerten Inhalten (WCF Data Services)</span><span class="sxs-lookup"><span data-stu-id="8efe7-102">Loading Deferred Content (WCF Data Services)</span></span>
<span data-ttu-id="8efe7-103">Standardmäßig schränkt [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] die Datenmenge ein, die eine Abfrage zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="8efe7-103">By default, [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] limits the amount of data that a query returns.</span></span> <span data-ttu-id="8efe7-104">Sie können jedoch explizit weitere Daten aus dem Datendienst laden, einschließlich verknüpfter Entitäten, ausgelagerter Antwortdaten und binärer Datenströme, wenn sie benötigt werden.</span><span class="sxs-lookup"><span data-stu-id="8efe7-104">However, you can explicitly load additional data, including related entities, paged response data, and binary data streams, from the data service when it is needed.</span></span> <span data-ttu-id="8efe7-105">In diesem Thema wird beschrieben, wie dieser verzögerte Inhalt in die Anwendung geladen wird.</span><span class="sxs-lookup"><span data-stu-id="8efe7-105">This topic describes how to load such deferred content into your application.</span></span>  
  
## <a name="related-entities"></a><span data-ttu-id="8efe7-106">Verknüpfte Entitäten</span><span class="sxs-lookup"><span data-stu-id="8efe7-106">Related Entities</span></span>  
 <span data-ttu-id="8efe7-107">Beim Ausführen einer Abfrage werden nur Entitäten in der behandelten Entitätenmenge zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="8efe7-107">When you execute a query, only entities in the addressed entity set are returned.</span></span> <span data-ttu-id="8efe7-108">Wenn beispielsweise eine Abfrage des Northwind-Datendiensts `Customers`-Entitäten zurückgibt, werden die verknüpften `Orders`-Entitäten standardmäßig nicht zurückgegeben, obwohl eine Beziehung zwischen `Customers` und `Orders` besteht.</span><span class="sxs-lookup"><span data-stu-id="8efe7-108">For example, when a query against the Northwind data service returns `Customers` entities, by default the related `Orders` entities are not returned, even though there is a relationship between `Customers` and `Orders`.</span></span> <span data-ttu-id="8efe7-109">Außerdem müssen Sie, wenn Paging im Datendienst aktiviert ist, explizit nachfolgende Datenseiten aus dem Dienst laden.</span><span class="sxs-lookup"><span data-stu-id="8efe7-109">Also, when paging is enabled in the data service, you must explicitly load subsequent data pages from the service.</span></span> <span data-ttu-id="8efe7-110">Es gibt zwei Möglichkeiten zum Laden verknüpfter Entitäten:</span><span class="sxs-lookup"><span data-stu-id="8efe7-110">There are two ways to load related entities:</span></span>  
  
- <span data-ttu-id="8efe7-111">**Eager Loading**: Sie können die `$expand` -Abfrageoption verwenden, um die anfordern, dass die Abfrage Entitäten zurückgibt, die durch eine Zuordnung für die Entität verknüpft sind, die die angeforderte Abfrage festlegen.</span><span class="sxs-lookup"><span data-stu-id="8efe7-111">**Eager loading**: You can use the `$expand` query option to request that the query return entities that are related by an association to the entity set that the query requested.</span></span> <span data-ttu-id="8efe7-112">Verwenden Sie die <xref:System.Data.Services.Client.DataServiceQuery%601.Expand%2A>-Methode für die <xref:System.Data.Services.Client.DataServiceQuery%601>, um der Abfrage, die an den Datendienst gesendet werden soll, die `$expand`-Option hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="8efe7-112">Use the <xref:System.Data.Services.Client.DataServiceQuery%601.Expand%2A> method on the <xref:System.Data.Services.Client.DataServiceQuery%601> to add the `$expand` option to the query that is sent to the data service.</span></span> <span data-ttu-id="8efe7-113">Sie können mehrere verknüpfte Entitätenmengen anfordern, indem Sie sie wie im folgenden Beispiel durch ein Komma trennen.</span><span class="sxs-lookup"><span data-stu-id="8efe7-113">You can request multiple related entity sets by separating them by a comma, as in the following example.</span></span> <span data-ttu-id="8efe7-114">Alle von der Abfrage angeforderten Entitäten werden in einer einzelnen Antwort zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="8efe7-114">All entities requested by the query are returned in a single response.</span></span> <span data-ttu-id="8efe7-115">Im folgenden Beispiel werden `Order_Details` und `Customers` zusammen mit der `Orders`-Entitätenmenge zurückgegeben:</span><span class="sxs-lookup"><span data-stu-id="8efe7-115">The following example returns `Order_Details` and `Customers` together with the `Orders` entity set:</span></span>  
  
     [!code-csharp[Astoria Northwind Client#ExpandOrderDetailsSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#expandorderdetailsspecific)]
     [!code-vb[Astoria Northwind Client#ExpandOrderDetailsSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#expandorderdetailsspecific)]  
  
     [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] <span data-ttu-id="8efe7-116">beschränkt die Anzahl von Entitätenmengen, die mit der `$expand`-Abfrageoption in einer einzelnen Abfrage enthalten sein können, auf 12.</span><span class="sxs-lookup"><span data-stu-id="8efe7-116">limits to 12 the number of entity sets that can be included in a single query by using the `$expand` query option.</span></span>  
  
- <span data-ttu-id="8efe7-117">**Explizites Laden**: Rufen Sie die <xref:System.Data.Services.Client.DataServiceContext.LoadProperty%2A> Methode für die <xref:System.Data.Services.Client.DataServiceContext> Instanz, um verknüpfte Entitäten explizit zu laden.</span><span class="sxs-lookup"><span data-stu-id="8efe7-117">**Explicit loading**: You can call the <xref:System.Data.Services.Client.DataServiceContext.LoadProperty%2A> method on the <xref:System.Data.Services.Client.DataServiceContext> instance to explicitly load related entities.</span></span> <span data-ttu-id="8efe7-118">Jeder Aufruf der <xref:System.Data.Services.Client.DataServiceContext.LoadProperty%2A>-Methode erstellt eine separate Anforderung an den Datendienst.</span><span class="sxs-lookup"><span data-stu-id="8efe7-118">Each call to the <xref:System.Data.Services.Client.DataServiceContext.LoadProperty%2A> method creates a separate request to the data service.</span></span> <span data-ttu-id="8efe7-119">Im folgenden Beispiel werden `Order_Details` für eine `Orders`-Entität explizit geladen:</span><span class="sxs-lookup"><span data-stu-id="8efe7-119">The following example explicitly loads `Order_Details` for an `Orders` entity:</span></span>  
  
     [!code-csharp[Astoria Northwind Client#LoadRelatedOrderDetailsSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#loadrelatedorderdetailsspecific)]
     [!code-vb[Astoria Northwind Client#LoadRelatedOrderDetailsSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#loadrelatedorderdetailsspecific)]  
  
 <span data-ttu-id="8efe7-120">Denken Sie beim Auswählen der Option daran, dass zwischen der Anzahl der Abfragen des Datendiensts und der in einer einzelnen Antwort zurückgegebenen Datenmenge abgewogen werden sollte.</span><span class="sxs-lookup"><span data-stu-id="8efe7-120">When you consider which option to use, realize that there is a tradeoff between the number of requests to the data service and the amount of data that is returned in a single response.</span></span> <span data-ttu-id="8efe7-121">Verwenden Sie Eager Loading, wenn die Anwendung zugeordnete Objekte erfordert und Sie die hinzugefügte Latenzzeit von zusätzlichen Anforderungen zum expliziten Abrufen vermeiden möchten.</span><span class="sxs-lookup"><span data-stu-id="8efe7-121">Use eager loading when your application requires associated objects and you want to avoid the added latency of additional requests to explicitly retrieve them.</span></span> <span data-ttu-id="8efe7-122">Allerdings sollten Sie in Fällen, wenn die Anwendung die Daten nur für bestimmte verknüpfte Entitätsinstanzen benötigt, das explizite Laden dieser Entitäten durch Aufrufen der <xref:System.Data.Services.Client.DataServiceContext.LoadProperty%2A>-Methode in Betracht ziehen.</span><span class="sxs-lookup"><span data-stu-id="8efe7-122">However, if there are cases when the application only needs the data for specific related entity instances, you should consider explicitly loading those entities by calling the <xref:System.Data.Services.Client.DataServiceContext.LoadProperty%2A> method.</span></span> <span data-ttu-id="8efe7-123">Weitere Informationen finden Sie unter [Vorgehensweise: Laden von verbundenen Entitäten](../../../../docs/framework/data/wcf/how-to-load-related-entities-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="8efe7-123">For more information, see [How to: Load Related Entities](../../../../docs/framework/data/wcf/how-to-load-related-entities-wcf-data-services.md).</span></span>  
  
## <a name="paged-content"></a><span data-ttu-id="8efe7-124">Ausgelagerter Inhalt</span><span class="sxs-lookup"><span data-stu-id="8efe7-124">Paged Content</span></span>  
 <span data-ttu-id="8efe7-125">Wenn Paging im Datendienst aktiviert ist, ist die Anzahl von Einträgen im Feed, die der Datendienst zurückgibt, durch die Konfiguration des Datendiensts beschränkt.</span><span class="sxs-lookup"><span data-stu-id="8efe7-125">When paging is enabled in the data service, the number of entries in the feed that the data service returns is limited by the configuration of the data service.</span></span> <span data-ttu-id="8efe7-126">Seitenbeschränkungen können für jede Entitätenmenge separat festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="8efe7-126">Page limits can be set separately for each entity set.</span></span> <span data-ttu-id="8efe7-127">Weitere Informationen finden Sie unter [Konfigurieren des Datendiensts](../../../../docs/framework/data/wcf/configuring-the-data-service-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="8efe7-127">For more information, see [Configuring the Data Service](../../../../docs/framework/data/wcf/configuring-the-data-service-wcf-data-services.md).</span></span> <span data-ttu-id="8efe7-128">Wenn Paging aktiviert ist, enthält der abschließende Eintrag im Feed einen Link zur nächsten Seite mit Daten.</span><span class="sxs-lookup"><span data-stu-id="8efe7-128">When paging is enabled, the final entry in the feed contains a link to the next page of data.</span></span> <span data-ttu-id="8efe7-129">Dieser Link ist in einem <xref:System.Data.Services.Client.DataServiceQueryContinuation%601>-Objekt enthalten.</span><span class="sxs-lookup"><span data-stu-id="8efe7-129">This link is contained in a <xref:System.Data.Services.Client.DataServiceQueryContinuation%601> object.</span></span> <span data-ttu-id="8efe7-130">Sie erhalten den URI zur nächsten Seite mit Daten, indem Sie die <xref:System.Data.Services.Client.QueryOperationResponse%601.GetContinuation%2A>-Methode für die <xref:System.Data.Services.Client.QueryOperationResponse%601> aufrufen, die beim Ausführen der <xref:System.Data.Services.Client.DataServiceQuery%601> zurückgegeben wird.</span><span class="sxs-lookup"><span data-stu-id="8efe7-130">You obtain the URI to the next page of data by calling the <xref:System.Data.Services.Client.QueryOperationResponse%601.GetContinuation%2A> method on the <xref:System.Data.Services.Client.QueryOperationResponse%601> returned when the <xref:System.Data.Services.Client.DataServiceQuery%601> is executed.</span></span> <span data-ttu-id="8efe7-131">Das zurückgegebene <xref:System.Data.Services.Client.DataServiceQueryContinuation%601>-Objekt wird dann verwendet, um die nächste Seite mit Ergebnissen zu laden.</span><span class="sxs-lookup"><span data-stu-id="8efe7-131">The returned <xref:System.Data.Services.Client.DataServiceQueryContinuation%601> object is then used to load the next page of results.</span></span> <span data-ttu-id="8efe7-132">Sie müssen vor dem Aufrufen der <xref:System.Data.Services.Client.QueryOperationResponse%601.GetContinuation%2A>-Methode das Abfrageergebnis aufzählen.</span><span class="sxs-lookup"><span data-stu-id="8efe7-132">You must enumerate the query result before you call the <xref:System.Data.Services.Client.QueryOperationResponse%601.GetContinuation%2A> method.</span></span> <span data-ttu-id="8efe7-133">Verwenden Sie eine `do…while`-Schleife, um zuerst das Abfrageergebnis aufzuzählen und dann den nächsten `non-null`-Linkwert zu suchen.</span><span class="sxs-lookup"><span data-stu-id="8efe7-133">Consider using a `do…while` loop to first enumerate the query result and then check for a `non-null` next link value.</span></span> <span data-ttu-id="8efe7-134">Wenn die <xref:System.Data.Services.Client.QueryOperationResponse%601.GetContinuation%2A>-Methode `null` (`Nothing` in Visual Basic) zurückgibt, sind keine zusätzlichen Ergebnisseiten für die ursprüngliche Abfrage vorhanden.</span><span class="sxs-lookup"><span data-stu-id="8efe7-134">When the <xref:System.Data.Services.Client.QueryOperationResponse%601.GetContinuation%2A> method returns `null` (`Nothing` in Visual Basic), there are no additional result pages for the original query.</span></span> <span data-ttu-id="8efe7-135">Im folgenden Beispiel wird eine `do…while`-Schleife gezeigt, die ausgelagerte Kundendaten aus dem Northwind-Beispieldatendienst lädt.</span><span class="sxs-lookup"><span data-stu-id="8efe7-135">The following example shows a `do…while` loop that loads paged customer data from the Northwind sample data service.</span></span>  
  
 [!code-csharp[Astoria Northwind Client#LoadNextLink](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#loadnextlink)]
 [!code-vb[Astoria Northwind Client#LoadNextLink](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#loadnextlink)]  
  
 <span data-ttu-id="8efe7-136">Wenn eine Abfrage anfordert, dass verknüpfte Entitäten in einer einzelnen Antwort zusammen mit der angeforderten Entitätenmenge zurückgegeben werden, wirken sich Paginggrenzen möglicherweise auf geschachtelte Feeds aus, die inline in der Antwort enthalten sind.</span><span class="sxs-lookup"><span data-stu-id="8efe7-136">When a query requests that related entities are returned in a single response together with the requested entity set, paging limits may affect nested feeds that are included inline with the response.</span></span> <span data-ttu-id="8efe7-137">Wenn beispielsweise eine Paginggrenze im Northwind-Beispieldatendienst für die `Customers`-Entitätenmenge festgelegt wird, kann eine unabhängige Paginggrenze auch für die verknüpfte `Orders`-Entitätenmenge festgelegt werden, wie im folgenden Beispiel für die Datei Northwind.svc.cs, die den Northwind-Beispieldatendienst definiert.</span><span class="sxs-lookup"><span data-stu-id="8efe7-137">For example, when a paging limit is set in the Northwind sample data service for the `Customers` entity set, an independent paging limit can also be set for the related `Orders` entity set, as in the following example from the Northwind.svc.cs file that defines the Northwind sample data service.</span></span>  
  
 [!code-csharp[Astoria Northwind Service#DataServiceConfigPaging](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_service/cs/northwind.svc.cs#dataserviceconfigpaging)]
 [!code-vb[Astoria Northwind Service#DataServiceConfigPaging](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_service/vb/northwind.svc.vb#dataserviceconfigpaging)]  
  
 <span data-ttu-id="8efe7-138">In diesem Fall müssen Sie Paging sowohl für die `Customers`-Entitätenmenge der obersten Ebene als auch die geschachtelte `Orders`-Entitätenmenge implementieren.</span><span class="sxs-lookup"><span data-stu-id="8efe7-138">In this case, you must implement paging for both the top-level `Customers` and the nested `Orders` entity feeds.</span></span> <span data-ttu-id="8efe7-139">Im folgenden Beispiel wird die `while`-Schleife gezeigt, mit der Seiten von `Orders`-Entitäten geladen werden, die mit einer ausgewählten `Customers`-Entität verknüpft sind.</span><span class="sxs-lookup"><span data-stu-id="8efe7-139">The following example shows the `while` loop used to load pages of `Orders` entities related to a selected `Customers` entity.</span></span>  
  
 [!code-csharp[Astoria Northwind Client#LoadNextOrdersLink](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#loadnextorderslink)]
 [!code-vb[Astoria Northwind Client#LoadNextOrdersLink](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#loadnextorderslink)]  
  
 <span data-ttu-id="8efe7-140">Weitere Informationen finden Sie unter [Vorgehensweise: Laden von ausgelagerten Ergebnissen](../../../../docs/framework/data/wcf/how-to-load-paged-results-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="8efe7-140">For more information, see [How to: Load Paged Results](../../../../docs/framework/data/wcf/how-to-load-paged-results-wcf-data-services.md).</span></span>  
  
## <a name="binary-data-streams"></a><span data-ttu-id="8efe7-141">Binäre Datenströme</span><span class="sxs-lookup"><span data-stu-id="8efe7-141">Binary Data Streams</span></span>  
 [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] <span data-ttu-id="8efe7-142">ermöglicht es Ihnen, auf BLOB (Binary Large Object)-Daten als Datenstrom zuzugreifen.</span><span class="sxs-lookup"><span data-stu-id="8efe7-142">enables you to access binary large object (BLOB) data as a data stream.</span></span> <span data-ttu-id="8efe7-143">Streaming verzögert das Laden binärer Daten, bis sie benötigt werden, und der Client kann diese Daten effizienter verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="8efe7-143">Streaming defers the loading of binary data until it is needed, and the client can more efficiently process this data.</span></span> <span data-ttu-id="8efe7-144">Um diese Funktionalität zu nutzen, muss der Datendienst den <xref:System.Data.Services.Providers.IDataServiceStreamProvider>-Anbieter implementieren.</span><span class="sxs-lookup"><span data-stu-id="8efe7-144">In order to take advantage of this functionality, the data service must implement the <xref:System.Data.Services.Providers.IDataServiceStreamProvider> provider.</span></span> <span data-ttu-id="8efe7-145">Weitere Informationen finden Sie unter [Streaminganbieter](../../../../docs/framework/data/wcf/streaming-provider-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="8efe7-145">For more information, see [Streaming Provider](../../../../docs/framework/data/wcf/streaming-provider-wcf-data-services.md).</span></span> <span data-ttu-id="8efe7-146">Wenn Streaming aktiviert ist, werden Entitätstypen ohne die verknüpften binären Daten zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="8efe7-146">When streaming is enabled, entity types are returned without the related binary data.</span></span> <span data-ttu-id="8efe7-147">In diesem Fall müssen Sie verwenden die <xref:System.Data.Services.Client.DataServiceContext.GetReadStream%2A> Methode der <xref:System.Data.Services.Client.DataServiceContext> Klasse, um den Datenstrom für die binären Daten aus dem Dienst zuzugreifen.</span><span class="sxs-lookup"><span data-stu-id="8efe7-147">In this case, you must use the <xref:System.Data.Services.Client.DataServiceContext.GetReadStream%2A> method of the <xref:System.Data.Services.Client.DataServiceContext> class to access the data stream for the binary data from the service.</span></span> <span data-ttu-id="8efe7-148">Verwenden Sie entsprechend die <xref:System.Data.Services.Client.DataServiceContext.SetSaveStream%2A>-Methode, um binäre Daten für eine Entität als Datenstrom hinzuzufügen oder zu ändern.</span><span class="sxs-lookup"><span data-stu-id="8efe7-148">Similarly, use the <xref:System.Data.Services.Client.DataServiceContext.SetSaveStream%2A> method to add or change binary data for an entity as a stream.</span></span> <span data-ttu-id="8efe7-149">Weitere Informationen finden Sie unter [arbeiten mit Binärdaten](../../../../docs/framework/data/wcf/working-with-binary-data-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="8efe7-149">For more information, see [Working with Binary Data](../../../../docs/framework/data/wcf/working-with-binary-data-wcf-data-services.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="8efe7-150">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="8efe7-150">See also</span></span>

- [<span data-ttu-id="8efe7-151">WCF Data Services-Clientbibliothek</span><span class="sxs-lookup"><span data-stu-id="8efe7-151">WCF Data Services Client Library</span></span>](../../../../docs/framework/data/wcf/wcf-data-services-client-library.md)
- [<span data-ttu-id="8efe7-152">Abfragen des Datendiensts</span><span class="sxs-lookup"><span data-stu-id="8efe7-152">Querying the Data Service</span></span>](../../../../docs/framework/data/wcf/querying-the-data-service-wcf-data-services.md)
