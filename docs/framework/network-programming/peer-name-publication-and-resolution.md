---
title: Peernamenveröffentlichung und -auflösung
ms.date: 03/30/2017
ms.assetid: f0370e08-9fa6-4ee5-ab78-9a58a20a7da2
ms.openlocfilehash: 330117e103f7729ecf6f18ff551f65f1ba0f35da
ms.sourcegitcommit: 558d78d2a68acd4c95ef23231c8b4e4c7bac3902
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 04/09/2019
ms.locfileid: "59309094"
---
# <a name="peer-name-publication-and-resolution"></a><span data-ttu-id="3ac3b-102">Peernamenveröffentlichung und -auflösung</span><span class="sxs-lookup"><span data-stu-id="3ac3b-102">Peer Name Publication and Resolution</span></span>

## <a name="publishing-a-peer-name"></a><span data-ttu-id="3ac3b-103">Veröffentlichen eines Peernamens</span><span class="sxs-lookup"><span data-stu-id="3ac3b-103">Publishing a peer name</span></span>  

 <span data-ttu-id="3ac3b-104">Ein Peer geht folgendermaßen vor, um eine neue PNRP-ID (Peer Name Resolution Protocol) zu veröffentlichen:</span><span class="sxs-lookup"><span data-stu-id="3ac3b-104">To publish a new PNRP ID, a peer performs the following:</span></span>  
  
-   <span data-ttu-id="3ac3b-105">Er sendet PNRP-Veröffentlichungsnachrichten an seine Cachenachbarn (die Peers, die PNRP-IDs in der untersten Ebene des Caches registriert haben), um deren Caches zu starten.</span><span class="sxs-lookup"><span data-stu-id="3ac3b-105">Sends PNRP publication messages to its cache neighbors (the peers that have registered PNRP IDs in the lowest level of the cache) to seed their caches.</span></span>  
  
-   <span data-ttu-id="3ac3b-106">Er wählt zufällige Knoten in der Cloud aus, die nicht seine Nachbarn sind, und sendet ihnen PNRP-Namensauflösungsanforderungen für seine eigene P2P-ID.</span><span class="sxs-lookup"><span data-stu-id="3ac3b-106">Chooses random nodes in the cloud that are not its neighbors and sends them PNRP name resolution requests for its own P2P ID.</span></span> <span data-ttu-id="3ac3b-107">Der damit gestartete Endpunktbestimmungsprozess startet die Caches von zufälligen Knoten in der Cloud mit der PNRP-ID des Veröffentlichungspeers.</span><span class="sxs-lookup"><span data-stu-id="3ac3b-107">The resulting endpoint determination process seeds the caches of random nodes in the cloud with the PNRP ID of the publishing peer.</span></span>  
  
<span data-ttu-id="3ac3b-108">Knoten der Version 2 von PNRP veröffentlichen keine PNRP-IDs, wenn diese nur andere P2P-IDs auflösen.</span><span class="sxs-lookup"><span data-stu-id="3ac3b-108">PNRP version 2 nodes do not publish PNRP IDs if they are only resolving other P2P IDs.</span></span> <span data-ttu-id="3ac3b-109">Der Registrierungswert „HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\PeerNet\PNRP\IPV6-Global\SearchOnly=1“ (Typ „REG_DWORD“) gibt an, dass Peers PNRP nur für die Namensauflösung und niemals für die Namensveröffentlichung verwenden.</span><span class="sxs-lookup"><span data-stu-id="3ac3b-109">The HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\PeerNet\PNRP\IPV6-Global\SearchOnly=1 registry value (REG_DWORD type) specifies that peers only use PNRP for name resolution, never for name publication.</span></span> <span data-ttu-id="3ac3b-110">Dieser Registrierungswert kann auch über die Gruppenrichtlinien konfiguriert werden.</span><span class="sxs-lookup"><span data-stu-id="3ac3b-110">This registry value can also be configured through Group Policy.</span></span>  
  
## <a name="resolving-a-peer-name"></a><span data-ttu-id="3ac3b-111">Auflösen eines Peernamens</span><span class="sxs-lookup"><span data-stu-id="3ac3b-111">Resolving a peer name</span></span>

 <span data-ttu-id="3ac3b-112">Der Suchvorgang nach anderen Peers in einem PNRP-Netzwerk oder einer PNRP-Cloud besteht aus zwei Phasen:</span><span class="sxs-lookup"><span data-stu-id="3ac3b-112">Locating other peers in a PNRP network or cloud is a process comprised of two phases:</span></span>  
  
1. <span data-ttu-id="3ac3b-113">Endpunktbestimmung</span><span class="sxs-lookup"><span data-stu-id="3ac3b-113">Endpoint Determination</span></span>  
  
2. <span data-ttu-id="3ac3b-114">und PNRP-ID-Auflösung</span><span class="sxs-lookup"><span data-stu-id="3ac3b-114">PNRP ID Resolution</span></span>  
  
 <span data-ttu-id="3ac3b-115">In der Phase der Endpunktbestimmung bestimmt ein Peer, der die PNRP-ID eines Diensts auf einem anderen Computer versucht aufzulösen, die IPv6-Adresse dieses Remotepeers.</span><span class="sxs-lookup"><span data-stu-id="3ac3b-115">In the endpoint determination phase, a peer that is attempting to resolve the PNRP ID of a service on another computer determines the IPv6 address of that remote peer.</span></span>  <span data-ttu-id="3ac3b-116">Der Remotepeer ist derjenige, der die PNRP-ID des Computers oder des Diensts veröffentlicht hat oder damit verknüpft ist.</span><span class="sxs-lookup"><span data-stu-id="3ac3b-116">The remote peer is the one that published, or is associated with, the PNRP ID of the computer or service.</span></span>  
  
 <span data-ttu-id="3ac3b-117">Nachdem bestätigt wurde, dass der Remoteendpunkt in der PNRP-Cloud registriert wurde, sendet der anfordernde Peer in der Phase der PNRP-ID-Auflösung an diesen Peerendpunkt eine Anforderung für die PNRP-ID des gewünschten Diensts.</span><span class="sxs-lookup"><span data-stu-id="3ac3b-117">After confirming that the remote endpoint has been registered into the PNRP cloud, the requesting peer in the PNRP ID resolution phase sends a request to that peer endpoint for the PNRP ID of the desired service.</span></span> <span data-ttu-id="3ac3b-118">Der Endpunkt sendet eine Antwort, in der die PNRP-ID des Diensts bestätigt wird, sowie einen Kommentar und bis zu 4 KB zusätzliche Informationen, die der anfordernde Peer für die spätere Kommunikation verwenden kann.</span><span class="sxs-lookup"><span data-stu-id="3ac3b-118">The endpoint sends a reply confirming the PNRP ID of the service, a comment, and up to 4 kilobytes of additional information that the requesting peer can use for future communication.</span></span> <span data-ttu-id="3ac3b-119">Ist der gewünschte Endpunkt z.B. ein Gamingserver, kann der zusätzliche Peernamendatensatz Informationen zum Spiel, zum Level des Spiels und zur aktuellen Anzahl der Spieler enthalten.</span><span class="sxs-lookup"><span data-stu-id="3ac3b-119">For example, if the desired endpoint is a gaming server, the additional peer name record data can contain information about the game, the level of play, and the current number of players.</span></span>  
  
 <span data-ttu-id="3ac3b-120">In der Phase der Endpunktbestimmung verwendet PNRP einen iterativen Prozess für die Suche nach dem Knoten, der die PNRP-ID veröffentlicht hat. Der Knoten, der die Auflösung ausführt, ist für die Kontaktaufnahme mit den Knoten verantwortlich, die der Ziel-PNRP-ID stückchenweise näherkommen.</span><span class="sxs-lookup"><span data-stu-id="3ac3b-120">In the endpoint determination phase, PNRP uses an iterative process for locating the node that published the PNRP ID, in which the node performing the resolution is responsible for contacting nodes that are successively closer to the target PNRP ID.</span></span>  
  
 <span data-ttu-id="3ac3b-121">Zur Durchführung der Namensauflösung in PNRP überprüft der Peer die Einträge in seinem eigenen Cache nach einem Eintrag, der mit der Ziel-PNRP-ID übereinstimmt.</span><span class="sxs-lookup"><span data-stu-id="3ac3b-121">To perform name resolution in PNRP, the peer examines the entries in its own cache for an entry that matches the target PNRP ID.</span></span> <span data-ttu-id="3ac3b-122">Hat er den Eintrag gefunden, sendet der Peer eine PNRP-Anforderungsnachricht an den Peer und wartet auf eine Antwort.</span><span class="sxs-lookup"><span data-stu-id="3ac3b-122">If found, the peer sends a PNRP Request message to the peer and waits for a response.</span></span> <span data-ttu-id="3ac3b-123">Hat er keinen Eintrag für die PNRP-ID gefunden, sendet der Peer eine PNRP-Anforderungsnachricht an den Peer, dessen Eintrag der Ziel-PNRP-ID am ehesten entspricht.</span><span class="sxs-lookup"><span data-stu-id="3ac3b-123">If an entry for the PNRP ID is not found, the peer sends a PNRP Request message to the peer that corresponds to the entry that has a PNRP ID that most closely matches the target PNRP ID.</span></span> <span data-ttu-id="3ac3b-124">Der Knoten, der die PNRP-Anforderungsnachricht erhält, überprüft wiederum seinen eigenen Cache und führt die folgenden Schritte aus:</span><span class="sxs-lookup"><span data-stu-id="3ac3b-124">The node that receives the PNRP Request message examines its own cache and does the following:</span></span>  
  
-   <span data-ttu-id="3ac3b-125">Wird die PNRP-ID gefunden, antwortet der angeforderte Endpunktpeer dem anfordernden Peer direkt.</span><span class="sxs-lookup"><span data-stu-id="3ac3b-125">If the PNRP ID is found, the requested endpoint peer replies directly to the requesting peer.</span></span>  
  
-   <span data-ttu-id="3ac3b-126">Wird die PNRP-ID nicht gefunden und ist eine PNRP-ID im Cache der Ziel-PNRP-ID ähnlicher, sendet der angeforderte Peer eine Antwort an den anfordernden Peer. Diese Antwort enthält die IPv6-Adresse des Peers, dessen Eintrag stärker mit der Ziel-PNRP-ID übereinstimmt.</span><span class="sxs-lookup"><span data-stu-id="3ac3b-126">If the PNRP ID is not found and a PNRP ID in the cache is closer to the target PNRP ID, the requested peer sends a response to the requesting peer containing the IPv6 address of the peer that represents the entry with a PNRP ID that more closely matches the target PNRP ID.</span></span> <span data-ttu-id="3ac3b-127">Mithilfe der IP-Adresse aus der Antwort sendet der anfordernde Knoten eine weitere PNRP-Anforderungsnachricht an die IPv6-Adresse, die antworten und ihren Cache überprüfen soll.</span><span class="sxs-lookup"><span data-stu-id="3ac3b-127">Using the IP address in the response, the requesting node sends another PNRP Request message to the IPv6 address to respond or examine its cache.</span></span>  
  
-   <span data-ttu-id="3ac3b-128">Wird die PNRP-ID nicht gefunden und befindet sich im Cache keine PNRP-ID, die stärker mit der Ziel-PNRP-ID übereinstimmt, sendet der angeforderte Peer dem anfordernden Peer eine Antwort, in der diese Bedingung angegeben wird.</span><span class="sxs-lookup"><span data-stu-id="3ac3b-128">If the PNRP ID is not found and there is no PNRP ID in its cache that is closer to the target PNRP ID, the requested peer sends the requesting peer a response that indicates this condition.</span></span> <span data-ttu-id="3ac3b-129">Der anfordernde Peer wählt anschließend die nächstgelegene PNRP-ID aus.</span><span class="sxs-lookup"><span data-stu-id="3ac3b-129">The requesting peer then chooses the next-closest PNRP ID.</span></span>  
  
<span data-ttu-id="3ac3b-130">Der anfordernde Peer wiederholt diesen Vorgang mit aufeinanderfolgenden Iterationen, bis er den Knoten, der die PNRP-ID registriert hat, gefunden hat.</span><span class="sxs-lookup"><span data-stu-id="3ac3b-130">The requesting peer continues this process with successive iterations, eventually locating the node that registered the PNRP ID.</span></span>  
  
 <span data-ttu-id="3ac3b-131">Innerhalb des <xref:System.Net.PeerToPeer>-Namespaces besteht eine m:n-Beziehung zwischen den <xref:System.Net.PeerToPeer.PeerName>- Datensätzen, die Endpunkte enthalten, und den PNRP-Clouds oder -Meshs, in denen sie kommunizieren.</span><span class="sxs-lookup"><span data-stu-id="3ac3b-131">Within the <xref:System.Net.PeerToPeer> namespace, there is a many-to-many relationship between the <xref:System.Net.PeerToPeer.PeerName> records that contain endpoints and PNRP clouds or meshes in which they communicate.</span></span> <span data-ttu-id="3ac3b-132">Bei doppelten oder veralteten Einträgen sowie bei mehreren Knoten mit demselben Peernamen können PNRP-Knoten aktuelle Informationen mithilfe der <xref:System.Net.PeerToPeer.PeerNameResolver>-Klasse abrufen.</span><span class="sxs-lookup"><span data-stu-id="3ac3b-132">When there are duplicate or stale entries, or multiple nodes with the same peer name, PNRP nodes can obtain current information using the <xref:System.Net.PeerToPeer.PeerNameResolver> class.</span></span> <span data-ttu-id="3ac3b-133">Die <xref:System.Net.PeerToPeer.PeerNameResolver>-Methoden verwenden einen einzelnen Peernamen, um die Perspektive für die Peernamendatensätze und Clouds auf eine 1:n-Beziehung zu vereinfachen.</span><span class="sxs-lookup"><span data-stu-id="3ac3b-133">The <xref:System.Net.PeerToPeer.PeerNameResolver> methods use a single peer name to simplify the perspective to one peer-to-many peer name records and the same one peer to many clouds.</span></span> <span data-ttu-id="3ac3b-134">Diese Methode ähnelt einer Abfrage, die mit einer relationalen Tabellenverknüpfung ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="3ac3b-134">This is similar to a query performed using a relational-table join.</span></span> <span data-ttu-id="3ac3b-135">Nach erfolgreichem Abschluss gibt das Resolverobjekt eine <xref:System.Net.PeerToPeer.PeerNameRecordCollection> für den angegebenen Peernamen zurück.</span><span class="sxs-lookup"><span data-stu-id="3ac3b-135">Upon successful completion, the Resolver object returns a <xref:System.Net.PeerToPeer.PeerNameRecordCollection> for the specified peer name.</span></span>  <span data-ttu-id="3ac3b-136">Ein Peername kommt z.B. in allen Peernamendatensätzen der Sammlung nach Cloud geordnet vor.</span><span class="sxs-lookup"><span data-stu-id="3ac3b-136">For example, a peer name would occur in all the peer name records in the collection, ordered by cloud.</span></span> <span data-ttu-id="3ac3b-137">Dies sind die Instanzen des Peernamens, dessen Daten von einer PNRP-basierten Anwendung angefordert werden können.</span><span class="sxs-lookup"><span data-stu-id="3ac3b-137">These are the instances of the peer name whose supporting data may be requested by a PNRP-based application.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="3ac3b-138">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="3ac3b-138">See also</span></span>

- <xref:System.Net.PeerToPeer>
