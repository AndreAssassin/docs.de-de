---
title: Konfigurieren der Ablaufverfolgung
ms.date: 03/30/2017
helpviewer_keywords:
- tracing [WCF]
ms.assetid: 82922010-e8b3-40eb-98c4-10fc05c6d65d
ms.openlocfilehash: aca3b5c54bff9c2b4c5380c04dd0da162215b088
ms.sourcegitcommit: 79b0dd8bfc63f33a02137121dd23475887ecefda
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 04/01/2020
ms.locfileid: "80523311"
---
# <a name="configuring-tracing"></a><span data-ttu-id="e18d4-102">Konfigurieren der Ablaufverfolgung</span><span class="sxs-lookup"><span data-stu-id="e18d4-102">Configuring Tracing</span></span>
<span data-ttu-id="e18d4-103">In diesem Thema wird Folgendes beschrieben: das Aktivieren der Ablaufverfolgung, das Konfigurieren von Ablaufverfolgungsquellen zum Ausgeben von Ablaufverfolgungen, das Festlegen von Ablaufverfolgungsebenen, das Festlegen der Aktivitätsablaufverfolgung und -weitergabe zur Unterstützung der End-to-End-Ablaufverfolgungskorrelation sowie das Festlegen von Ablaufverfolgungslistenern für den Zugriff auf Ablaufverfolgungen.</span><span class="sxs-lookup"><span data-stu-id="e18d4-103">This topic describes how you can enable tracing, configure trace sources to emit traces and set trace levels, set activity tracing and propagation to support end-to-end trace correlation, and set trace listeners to access traces.</span></span>  
  
 <span data-ttu-id="e18d4-104">Empfehlungen für die Ablaufverfolgung von Einstellungen in der Produktions- oder Debugumgebung finden Sie unter [Empfohlene Einstellungen für Die Ablaufverfolgung und Nachrichtenprotokollierung](../../../../../docs/framework/wcf/diagnostics/tracing/recommended-settings-for-tracing-and-message-logging.md).</span><span class="sxs-lookup"><span data-stu-id="e18d4-104">For tracing settings recommendations in production or debugging environment, refer to [Recommended Settings for Tracing and Message Logging](../../../../../docs/framework/wcf/diagnostics/tracing/recommended-settings-for-tracing-and-message-logging.md).</span></span>  
  
> [!IMPORTANT]
> <span data-ttu-id="e18d4-105">Unter Windows 8 müssen Sie die Anwendung mit erhöhten Rechten (als Administrator) ausführen, damit die Anwendung Ablaufverfolgungsprotokolle generieren kann.</span><span class="sxs-lookup"><span data-stu-id="e18d4-105">On Windows 8 you must run your application elevated (Run as Administrator) in order for your application to generate trace logs.</span></span>  
  
## <a name="enabling-tracing"></a><span data-ttu-id="e18d4-106">Aktivieren der Ablaufverfolgung</span><span class="sxs-lookup"><span data-stu-id="e18d4-106">Enabling Tracing</span></span>  
 <span data-ttu-id="e18d4-107">Windows Communication Foundation (WCF) gibt die folgenden Daten für die Diagnoseablaufverfolgung aus:</span><span class="sxs-lookup"><span data-stu-id="e18d4-107">Windows Communication Foundation (WCF) outputs the following data for diagnostic tracing:</span></span>  
  
- <span data-ttu-id="e18d4-108">Ablaufverfolgungen für Verarbeitungsmeilensteine in allen Komponenten der Anwendungen, beispielsweise Operationsaufrufe, Codeausnahmen, Warnungen und andere wichtige Verarbeitungsereignisse.</span><span class="sxs-lookup"><span data-stu-id="e18d4-108">Traces for process milestones across all components of the applications, such as operation calls, code exceptions, warnings and other significant processing events.</span></span>  
  
- <span data-ttu-id="e18d4-109">Windows-Fehlerereignisse bei Fehlern der Ablaufverfolgungsfunktion.</span><span class="sxs-lookup"><span data-stu-id="e18d4-109">Windows error events when the tracing feature malfunctions.</span></span> <span data-ttu-id="e18d4-110">Siehe [Ereignisprotokollierung](../../../../../docs/framework/wcf/diagnostics/event-logging/index.md).</span><span class="sxs-lookup"><span data-stu-id="e18d4-110">See [Event Logging](../../../../../docs/framework/wcf/diagnostics/event-logging/index.md).</span></span>  
  
 <span data-ttu-id="e18d4-111">Die WCF-Ablaufverfolgung basiert <xref:System.Diagnostics>auf .</span><span class="sxs-lookup"><span data-stu-id="e18d4-111">WCF tracing is built on top of <xref:System.Diagnostics>.</span></span> <span data-ttu-id="e18d4-112">Definieren Sie in der Konfigurationsdatei oder im Code Ablaufverfolgungsquellen, wenn Sie die Ablaufverfolgung verwenden möchten.</span><span class="sxs-lookup"><span data-stu-id="e18d4-112">To use tracing, you should define trace sources in the configuration file or in code.</span></span> <span data-ttu-id="e18d4-113">WCF definiert eine Ablaufverfolgungsquelle für jede WCF-Assembly.</span><span class="sxs-lookup"><span data-stu-id="e18d4-113">WCF defines a trace source for each WCF assembly.</span></span> <span data-ttu-id="e18d4-114">Die `System.ServiceModel` Ablaufverfolgungsquelle ist die allgemeinste WCF-Ablaufverfolgungsquelle und zeichnet Verarbeitungsmeilensteine im WCF-Kommunikationsstapel auf, von der Eingabe/Verlassen des Transports bis zum Eingeben/Verlassen von Benutzercode.</span><span class="sxs-lookup"><span data-stu-id="e18d4-114">The `System.ServiceModel` trace source is the most general WCF trace source, and records processing milestones across the WCF communication stack, from entering/leaving transport to entering/leaving user code.</span></span> <span data-ttu-id="e18d4-115">Die `System.ServiceModel.MessageLogging`-Ablaufverfolgungsquelle zeichnet alle Nachrichten auf, die das System durchlaufen.</span><span class="sxs-lookup"><span data-stu-id="e18d4-115">The `System.ServiceModel.MessageLogging` trace source records all messages that flow through the system.</span></span>  
  
 <span data-ttu-id="e18d4-116">Die Ablaufverfolgung ist standardmäßig nicht aktiviert.</span><span class="sxs-lookup"><span data-stu-id="e18d4-116">Tracing is not enabled by default.</span></span> <span data-ttu-id="e18d4-117">Um die Ablaufverfolgung zu aktivieren, müssen Sie einen Ablaufverfolgungslistener erstellen und eine andere Ablaufverfolgungsebene als "Aus" für die ausgewählte Ablaufverfolgungsquelle in der Konfiguration festlegen. Andernfalls generiert WCF keine Spuren.</span><span class="sxs-lookup"><span data-stu-id="e18d4-117">To activate tracing, you must create a trace listener and set a trace level other than "Off" for the selected trace source in configuration; otherwise, WCF does not generate any traces.</span></span> <span data-ttu-id="e18d4-118">Wenn Sie keinen Listener angeben, ist die Ablaufverfolgung automatisch deaktiviert.</span><span class="sxs-lookup"><span data-stu-id="e18d4-118">If you do not specify a listener, tracing is automatically disabled.</span></span> <span data-ttu-id="e18d4-119">Wenn Sie einen Listener definieren, jedoch keine Ebene angeben, wird die Ebene standardmäßig auf "Off" festgelegt. Das bedeutet, dass keine Ablaufverfolgung ausgegeben wird.</span><span class="sxs-lookup"><span data-stu-id="e18d4-119">If a listener is defined, but no level is specified, the level is set to "Off" by default, which means that no trace is emitted.</span></span>  
  
 <span data-ttu-id="e18d4-120">Wenn Sie WCF-Erweiterbarkeitspunkte wie benutzerdefinierte Vorgangsaufrufer verwenden, sollten Sie eigene Ablaufverfolgungen aussenden.</span><span class="sxs-lookup"><span data-stu-id="e18d4-120">If you use WCF extensibility points such as custom operation invokers, you should emit your own traces.</span></span> <span data-ttu-id="e18d4-121">Dies liegt daran, dass WCF beim Implementieren eines Erweiterbarkeitspunkts die Standardablaufverfolgungen im Standardpfad nicht mehr ausgibt.</span><span class="sxs-lookup"><span data-stu-id="e18d4-121">This is because if you implement an extensibility point, WCF can no longer emit the standard traces in the default path.</span></span> <span data-ttu-id="e18d4-122">Wenn Sie keine Unterstützung für eine manuelle Ablaufverfolgung durch Ausgabe von Ablaufverfolgungen implementieren, werden die erwarteten Ablaufverfolgungen möglicherweise nicht angezeigt.</span><span class="sxs-lookup"><span data-stu-id="e18d4-122">If you do not implement manual tracing support by emitting traces, you may not see the traces you expect.</span></span>  
  
 <span data-ttu-id="e18d4-123">Sie können die Ablaufverfolgung konfigurieren, indem Sie die Konfigurationsdatei der Anwendung bearbeiten, entweder Web.config für im Web gehostete Anwendungen oder Appname.exe.config für selbst gehostete Anwendungen.</span><span class="sxs-lookup"><span data-stu-id="e18d4-123">You can configure tracing by editing the application’s configuration file—either Web.config for Web-hosted applications, or Appname.exe.config for self-hosted applications.</span></span> <span data-ttu-id="e18d4-124">Das folgende Beispiel zeigt eine solche Bearbeitung.</span><span class="sxs-lookup"><span data-stu-id="e18d4-124">The following is an example of such edit.</span></span> <span data-ttu-id="e18d4-125">Weitere Informationen zu diesen Einstellungen finden Sie im Abschnitt "Konfigurieren von Ablaufverfolgungslistenern zum Verwenden von Ablaufverfolgungen".</span><span class="sxs-lookup"><span data-stu-id="e18d4-125">For more information on these settings, see the "Configuring Trace Listeners to Consume Traces" section.</span></span>  
  
```xml  
<configuration>  
   <system.diagnostics>  
      <sources>  
         <source name="System.ServiceModel"
                    switchValue="Information, ActivityTracing"  
                    propagateActivity="true">  
            <listeners>  
               <add name="traceListener"
                   type="System.Diagnostics.XmlWriterTraceListener"
                   initializeData= "c:\log\Traces.svclog" />  
            </listeners>  
         </source>  
      </sources>  
   </system.diagnostics>  
</configuration>  
```  
  
> [!NOTE]
> <span data-ttu-id="e18d4-126">Um die Konfigurationsdatei eines WCF-Dienstprojekts in Visual Studio zu bearbeiten, klicken Sie mit der rechten Maustaste auf die Konfigurationsdatei der Anwendung – entweder Web.config für webgehostete Anwendungen oder Appname.exe.config für selbst gehostete Anwendungen in **Projektmappen-Explorer**.</span><span class="sxs-lookup"><span data-stu-id="e18d4-126">To edit the configuration file of a WCF service project in Visual Studio, right click the application’s configuration file—either Web.config for Web-hosted applications, or Appname.exe.config for self-hosted application in **Solution Explorer**.</span></span> <span data-ttu-id="e18d4-127">Wählen Sie dann das Kontextmenüelement **WCF-Konfiguration bearbeiten** aus.</span><span class="sxs-lookup"><span data-stu-id="e18d4-127">Then choose the **Edit WCF Configuration** context menu item.</span></span> <span data-ttu-id="e18d4-128">Dadurch wird das [Configuration Editor Tool (SvcConfigEditor.exe)](../../../../../docs/framework/wcf/configuration-editor-tool-svcconfigeditor-exe.md)gestartet, mit dem Sie Konfigurationseinstellungen für WCF-Dienste über eine grafische Benutzeroberfläche ändern können.</span><span class="sxs-lookup"><span data-stu-id="e18d4-128">This launches the [Configuration Editor Tool (SvcConfigEditor.exe)](../../../../../docs/framework/wcf/configuration-editor-tool-svcconfigeditor-exe.md), which enables you to modify configuration settings for WCF services using a graphical user interface.</span></span>  
  
## <a name="configuring-trace-sources-to-emit-traces"></a><span data-ttu-id="e18d4-129">Konfigurieren von Ablaufverfolgungsquellen zum Ausgeben von Ablaufverfolgungen</span><span class="sxs-lookup"><span data-stu-id="e18d4-129">Configuring Trace Sources to Emit Traces</span></span>  
 <span data-ttu-id="e18d4-130">WCF definiert für jede Assembly eine Ablaufverfolgungsquelle.</span><span class="sxs-lookup"><span data-stu-id="e18d4-130">WCF defines a trace source for each assembly.</span></span> <span data-ttu-id="e18d4-131">Innerhalb einer Assembly generierte Ablaufverfolgungen werden von den Listenern verwendet, die für diese Quelle definiert sind.</span><span class="sxs-lookup"><span data-stu-id="e18d4-131">Traces generated within an assembly are accessed by the listeners defined for that source.</span></span> <span data-ttu-id="e18d4-132">Folgende Ablaufverfolgungsquellen sind definiert:</span><span class="sxs-lookup"><span data-stu-id="e18d4-132">The following trace sources are defined:</span></span>  
  
- <span data-ttu-id="e18d4-133">System.ServiceModel: Protokolliert alle Phasen der WCF-Verarbeitung, wenn die Konfiguration gelesen wird, wird eine Nachricht in Transport, Sicherheitsverarbeitung, eine Nachricht im Benutzercode usw. verarbeitet.</span><span class="sxs-lookup"><span data-stu-id="e18d4-133">System.ServiceModel: Logs all stages of WCF processing, whenever configuration is read, a message is processed in transport, security processing, a message is dispatched in user code, and so on.</span></span>  
  
- <span data-ttu-id="e18d4-134">System.ServiceModel.MessageLogging: Protokolliert alle Nachrichten, die das System durchlaufen.</span><span class="sxs-lookup"><span data-stu-id="e18d4-134">System.ServiceModel.MessageLogging: Logs all messages that flow through the system.</span></span>  
  
- <span data-ttu-id="e18d4-135">System.IdentityModel.</span><span class="sxs-lookup"><span data-stu-id="e18d4-135">System.IdentityModel.</span></span>  
  
- <span data-ttu-id="e18d4-136">System.ServiceModel.Activation.</span><span class="sxs-lookup"><span data-stu-id="e18d4-136">System.ServiceModel.Activation.</span></span>  
  
- <span data-ttu-id="e18d4-137">System.IO.Log: Protokollierung für die .NET Framework-Schnittstelle im gemeinsamen Protokolldateisystem (Common Log File System, CLFS).</span><span class="sxs-lookup"><span data-stu-id="e18d4-137">System.IO.Log: Logging for the .NET Framework interface to the Common Log File System (CLFS).</span></span>  
  
- <span data-ttu-id="e18d4-138">System.Runtime.Serialization: Protokolliert das Lesen oder Schreiben von Objekten.</span><span class="sxs-lookup"><span data-stu-id="e18d4-138">System.Runtime.Serialization: Logs when objects are read or written.</span></span>  
  
- <span data-ttu-id="e18d4-139">CardSpace.</span><span class="sxs-lookup"><span data-stu-id="e18d4-139">CardSpace.</span></span>  
  
 <span data-ttu-id="e18d4-140">Das folgenden Konfigurationsbeispiel veranschaulicht, wie Sie jede Ablaufverfolgungsquelle so konfigurieren können, dass sie den gleichen (freigegebenen) Listener verwendet:</span><span class="sxs-lookup"><span data-stu-id="e18d4-140">You can configure each trace source to use the same (shared) listener, as indicated in the following configuration example.</span></span>  
  
```xml  
<configuration>  
    <system.diagnostics>  
        <sources>  
            <source name="System.ServiceModel"
                    switchValue="Information, ActivityTracing"  
                    propagateActivity="true">  
                <listeners>  
                    <add name="xml" />  
                </listeners>  
            </source>  
            <source name="CardSpace">  
                <listeners>  
                    <add name="xml" />  
                </listeners>  
            </source>  
            <source name="System.IO.Log">  
                <listeners>  
                    <add name="xml" />  
                </listeners>  
            </source>  
            <source name="System.Runtime.Serialization">  
                <listeners>  
                    <add name="xml" />  
                </listeners>  
            </source>  
            <source name="System.IdentityModel">  
                <listeners>  
                    <add name="xml" />  
                </listeners>  
            </source>  
        </sources>  
  
        <sharedListeners>  
            <add name="xml"  
                 type="System.Diagnostics.XmlWriterTraceListener"  
                 initializeData="c:\log\Traces.svclog" />  
        </sharedListeners>  
    </system.diagnostics>  
</configuration>  
```  
  
 <span data-ttu-id="e18d4-141">Sie können außerdem benutzerdefinierte Ablaufverfolgungsquellen hinzufügen, um Ablaufverfolgungsquellen im Benutzercode auszugeben (wie im folgenden Code dargestellt):</span><span class="sxs-lookup"><span data-stu-id="e18d4-141">In addition, you can add user-defined trace sources, as demonstrated by the following example, to emit user code traces.</span></span>  
  
```xml  
<system.diagnostics>  
   <sources>  
       <source name="UserTraceSource" switchValue="Warning, ActivityTracing" >  
          <listeners>  
              <add name="xml"  
                 type="System.Diagnostics.XmlWriterTraceListener"  
                 initializeData="C:\logs\UserTraces.svclog" />  
          </listeners>  
       </source>  
   </sources>  
   <trace autoflush="true" />
</system.diagnostics>  
```  
  
 <span data-ttu-id="e18d4-142">Weitere Informationen zum Erstellen benutzerdefinierter Ablaufverfolgungsquellen finden Sie unter [Erweitern der Ablaufverfolgung](../../../../../docs/framework/wcf/samples/extending-tracing.md).</span><span class="sxs-lookup"><span data-stu-id="e18d4-142">For more information about creating user-defined trace sources, see [Extending Tracing](../../../../../docs/framework/wcf/samples/extending-tracing.md).</span></span>  
  
## <a name="configuring-trace-listeners-to-consume-traces"></a><span data-ttu-id="e18d4-143">Konfigurieren von Ablaufverfolgungslistenern zur Verwendung von Ablaufverfolgungen</span><span class="sxs-lookup"><span data-stu-id="e18d4-143">Configuring Trace Listeners to Consume Traces</span></span>  
 <span data-ttu-id="e18d4-144">Zur Laufzeit führt WCF Ablaufverfolgungsdaten an die Listener, die die Daten verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="e18d4-144">At runtime, WCF feeds trace data to the listeners which process the data.</span></span> <span data-ttu-id="e18d4-145">WCF stellt mehrere vordefinierte Listener für <xref:System.Diagnostics>bereit, die sich in dem Format unterscheiden, das sie für die Ausgabe verwenden.</span><span class="sxs-lookup"><span data-stu-id="e18d4-145">WCF provides several predefined listeners for <xref:System.Diagnostics>, which differ in the format they use for output.</span></span> <span data-ttu-id="e18d4-146">Sie können auch benutzerdefinierte Listenertypen hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="e18d4-146">You can also add custom listener types.</span></span>  
  
 <span data-ttu-id="e18d4-147">Mit `add` können Sie den Namen und den Typ des Ablaufverfolgungslisteners angeben, den Sie verwenden möchten.</span><span class="sxs-lookup"><span data-stu-id="e18d4-147">You can use `add` to specify the name and type of the trace listener you want to use.</span></span> <span data-ttu-id="e18d4-148">In unserer Beispielkonfiguration haben wir den Listener `traceListener` genannt und den standardmäßigen .NET Framework-Ablaufverfolgungslistener (`System.Diagnostics.XmlWriterTraceListener`) als zu verwendenden Typ angegeben.</span><span class="sxs-lookup"><span data-stu-id="e18d4-148">In our example configuration, we named the Listener `traceListener` and added the standard .NET Framework trace listener (`System.Diagnostics.XmlWriterTraceListener`) as the type we want to use.</span></span> <span data-ttu-id="e18d4-149">Sie können jeder Quelle beliebig viele Ablaufverfolgungslistener hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="e18d4-149">You can add any number of trace listeners for each source.</span></span> <span data-ttu-id="e18d4-150">Wenn der Ablaufverfolgungslistener die Ablaufverfolgung an eine Datei ausgibt, müssen Sie den Speicherort der Ausgabedatei angeben und sie in der Konfigurationsdatei benennen.</span><span class="sxs-lookup"><span data-stu-id="e18d4-150">If the trace listener emits the trace to a file, you must specify the output file location and name in the configuration file.</span></span> <span data-ttu-id="e18d4-151">Legen Sie dazu `initializeData` auf den Namen der Datei für diesen Listener fest.</span><span class="sxs-lookup"><span data-stu-id="e18d4-151">This is done by setting `initializeData` to the name of the file for that listener.</span></span> <span data-ttu-id="e18d4-152">Wenn Sie keinen Dateinamen angeben, wird basierend auf dem verwendeten Listenertyp ein beliebiger Dateiname generiert.</span><span class="sxs-lookup"><span data-stu-id="e18d4-152">If you do not specify a file name, a random file name is generated based on the listener type used.</span></span> <span data-ttu-id="e18d4-153">Wenn <xref:System.Diagnostics.XmlWriterTraceListener> verwendet wird, wird ein Dateiname ohne Erweiterung generiert.</span><span class="sxs-lookup"><span data-stu-id="e18d4-153">If <xref:System.Diagnostics.XmlWriterTraceListener> is used, a file name with no extension is generated.</span></span> <span data-ttu-id="e18d4-154">Beim Implementieren eines benutzerdefinierten Listeners können Sie dieses Attribut auch verwenden, um andere Initialisierungsdaten als den Dateinamen zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="e18d4-154">If you implement a custom listener, you can also use this attribute to receive initialization data other than a filename.</span></span> <span data-ttu-id="e18d4-155">Sie können für dieses Attribut z. B. einen Datenbankbezeichner angeben.</span><span class="sxs-lookup"><span data-stu-id="e18d4-155">For example, you can specify a database identifier for this attribute.</span></span>  
  
 <span data-ttu-id="e18d4-156">Sie können einen benutzerdefinierten Ablaufverfolgungslistener konfigurieren, um Ablaufverfolgungen zu übertragen, z. B. an eine Remotedatenbank.</span><span class="sxs-lookup"><span data-stu-id="e18d4-156">You can configure a custom trace listener to send traces on the wire, for example, to a remote database.</span></span> <span data-ttu-id="e18d4-157">Stellen Sie beim Bereitstellen von Anwendungen eine ordnungsgemäße Zugriffsteuerung für die Protokolle auf dem Remotecomputer sicher.</span><span class="sxs-lookup"><span data-stu-id="e18d4-157">As an application deployer, you should enforce proper access control on the trace logs in the remote machine.</span></span>  
  
 <span data-ttu-id="e18d4-158">Sie können einen Ablaufverfolgungslistener auch programmgesteuert konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="e18d4-158">You can also configure a trace listener programmatically.</span></span> <span data-ttu-id="e18d4-159">Weitere Informationen finden Sie unter [Gewusst wie: Erstellen und Initialisieren von Ablaufverfolgungslistenern](../../../debug-trace-profile/how-to-create-and-initialize-trace-listeners.md) und [Erstellen eines benutzerdefinierten TraceListeners](https://docs.microsoft.com/archive/msdn-magazine/2006/april/clr-inside-out-extending-system-diagnostics).</span><span class="sxs-lookup"><span data-stu-id="e18d4-159">For more information, see [How to: Create and Initialize Trace Listeners](../../../debug-trace-profile/how-to-create-and-initialize-trace-listeners.md) and [Creating a Custom TraceListener](https://docs.microsoft.com/archive/msdn-magazine/2006/april/clr-inside-out-extending-system-diagnostics).</span></span>  
  
> [!CAUTION]
> <span data-ttu-id="e18d4-160">Da `System.Diagnostics.XmlWriterTraceListener` nicht threadsicher ist, werden Ressourcen durch die Ablaufverfolgungsquelle bei der Ausgabe von Ablaufverfolgungen möglicherweise exklusiv gesperrt.</span><span class="sxs-lookup"><span data-stu-id="e18d4-160">Because `System.Diagnostics.XmlWriterTraceListener` is not thread-safe, the trace source may lock resources exclusively when outputting traces.</span></span> <span data-ttu-id="e18d4-161">Wenn viele Threads Ablaufverfolgungen an eine Ablaufverfolgungsquelle ausgeben, die für die Verwendung dieses Listeners konfiguriert ist, treten möglicherweise Ressourcenkonflikte auf. Das kann die Leistung erheblich beeinträchtigen.</span><span class="sxs-lookup"><span data-stu-id="e18d4-161">When many threads output traces to a trace source configured to use this listener, resource contention may occur, which results in a significant performance issue.</span></span> <span data-ttu-id="e18d4-162">Implementieren Sie einen threadsicheren benutzerdefinierten Listener, um dieses Problem zu beheben.</span><span class="sxs-lookup"><span data-stu-id="e18d4-162">To resolve this problem, you should implement a custom listener that is thread-safe.</span></span>  
  
## <a name="trace-level"></a><span data-ttu-id="e18d4-163">Ablaufverfolgungsebene</span><span class="sxs-lookup"><span data-stu-id="e18d4-163">Trace Level</span></span>  
 <span data-ttu-id="e18d4-164">Die Ablaufverfolgungsebene wird von der `switchValue`-Einstellung der Ablaufverfolgungsquelle gesteuert.</span><span class="sxs-lookup"><span data-stu-id="e18d4-164">The tracing level is controlled by the `switchValue` setting of the trace source.</span></span> <span data-ttu-id="e18d4-165">Die verfügbaren Ablaufverfolgungsebenen werden in der folgenden Tabelle beschrieben.</span><span class="sxs-lookup"><span data-stu-id="e18d4-165">The available tracing levels are described in the following table.</span></span>  
  
|<span data-ttu-id="e18d4-166">Ablaufverfolgungsebene</span><span class="sxs-lookup"><span data-stu-id="e18d4-166">Trace Level</span></span>|<span data-ttu-id="e18d4-167">Art der verfolgten Ereignisse</span><span class="sxs-lookup"><span data-stu-id="e18d4-167">Nature of the Tracked Events</span></span>|<span data-ttu-id="e18d4-168">Inhalt der verfolgten Ereignisse</span><span class="sxs-lookup"><span data-stu-id="e18d4-168">Content of the Tracked Events</span></span>|<span data-ttu-id="e18d4-169">Verfolgte Ereignisse</span><span class="sxs-lookup"><span data-stu-id="e18d4-169">Tracked Events</span></span>|<span data-ttu-id="e18d4-170">Zielgruppe</span><span class="sxs-lookup"><span data-stu-id="e18d4-170">User Target</span></span>|  
|-----------------|----------------------------------|-----------------------------------|--------------------|-----------------|  
|<span data-ttu-id="e18d4-171">Aus</span><span class="sxs-lookup"><span data-stu-id="e18d4-171">Off</span></span>|<span data-ttu-id="e18d4-172">–</span><span class="sxs-lookup"><span data-stu-id="e18d4-172">N/A</span></span>|<span data-ttu-id="e18d4-173">–</span><span class="sxs-lookup"><span data-stu-id="e18d4-173">N/A</span></span>|<span data-ttu-id="e18d4-174">Keine Ablaufverfolgungen werden ausgegeben.</span><span class="sxs-lookup"><span data-stu-id="e18d4-174">No traces are emitted.</span></span>|<span data-ttu-id="e18d4-175">Nicht zutreffend</span><span class="sxs-lookup"><span data-stu-id="e18d4-175">N/A</span></span>|  
|<span data-ttu-id="e18d4-176">Kritisch</span><span class="sxs-lookup"><span data-stu-id="e18d4-176">Critical</span></span>|<span data-ttu-id="e18d4-177">"Negative" Ereignisse: Ereignisse, die auf eine unerwartete Verarbeitung oder eine Fehlerbedingung hinweisen.</span><span class="sxs-lookup"><span data-stu-id="e18d4-177">"Negative" events: events that indicate an unexpected processing or an error condition.</span></span>||<span data-ttu-id="e18d4-178">Nicht behandelte Ausnahmen (einschließlich der folgenden) werden protokolliert:</span><span class="sxs-lookup"><span data-stu-id="e18d4-178">Unhandled exceptions including the following are logged:</span></span><br /><br /> <span data-ttu-id="e18d4-179">- OutOfMemoryException</span><span class="sxs-lookup"><span data-stu-id="e18d4-179">-   OutOfMemoryException</span></span><br /><span data-ttu-id="e18d4-180">- ThreadAbortException (die CLR ruft jeden ThreadAbortExceptionHandler auf)</span><span class="sxs-lookup"><span data-stu-id="e18d4-180">-   ThreadAbortException (the CLR invokes any ThreadAbortExceptionHandler)</span></span><br /><span data-ttu-id="e18d4-181">- StackOverflowException (kann nicht abgefangen werden)</span><span class="sxs-lookup"><span data-stu-id="e18d4-181">-   StackOverflowException (cannot be caught)</span></span><br /><span data-ttu-id="e18d4-182">- ConfigurationErrorsException</span><span class="sxs-lookup"><span data-stu-id="e18d4-182">-   ConfigurationErrorsException</span></span><br /><span data-ttu-id="e18d4-183">- SEHException</span><span class="sxs-lookup"><span data-stu-id="e18d4-183">-   SEHException</span></span><br /><span data-ttu-id="e18d4-184">- Anwendungsstartfehler</span><span class="sxs-lookup"><span data-stu-id="e18d4-184">-   Application start errors</span></span><br /><span data-ttu-id="e18d4-185">- Failfast-Ereignisse</span><span class="sxs-lookup"><span data-stu-id="e18d4-185">-   Failfast events</span></span><br /><span data-ttu-id="e18d4-186">- System hängt</span><span class="sxs-lookup"><span data-stu-id="e18d4-186">-   System hangs</span></span><br /><span data-ttu-id="e18d4-187">- Giftnachrichten: Nachrichtenspuren, die dazu führen, dass die Anwendung fehlschlägt.</span><span class="sxs-lookup"><span data-stu-id="e18d4-187">-   Poison messages: message traces that cause the application to fail.</span></span>|<span data-ttu-id="e18d4-188">Administratoren</span><span class="sxs-lookup"><span data-stu-id="e18d4-188">Administrators</span></span><br /><br /> <span data-ttu-id="e18d4-189">Anwendungsentwickler</span><span class="sxs-lookup"><span data-stu-id="e18d4-189">Application developers</span></span>|  
|<span data-ttu-id="e18d4-190">Fehler</span><span class="sxs-lookup"><span data-stu-id="e18d4-190">Error</span></span>|<span data-ttu-id="e18d4-191">"Negative" Ereignisse: Ereignisse, die auf eine unerwartete Verarbeitung oder eine Fehlerbedingung hinweisen.</span><span class="sxs-lookup"><span data-stu-id="e18d4-191">"Negative" events: events that indicate an unexpected processing or an error condition.</span></span>|<span data-ttu-id="e18d4-192">Eine unerwartete Verarbeitung ist aufgetreten.</span><span class="sxs-lookup"><span data-stu-id="e18d4-192">Unexpected processing has happened.</span></span> <span data-ttu-id="e18d4-193">Die Anwendung konnte die Aufgabe nicht wie erwartet ausführen.</span><span class="sxs-lookup"><span data-stu-id="e18d4-193">The application was not able to perform a task as expected.</span></span> <span data-ttu-id="e18d4-194">Die Anwendung wird jedoch weiter ordnungsgemäß ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="e18d4-194">However, the application is still up and running.</span></span>|<span data-ttu-id="e18d4-195">Alle Ausnahmen werden protokolliert.</span><span class="sxs-lookup"><span data-stu-id="e18d4-195">All exceptions are logged.</span></span>|<span data-ttu-id="e18d4-196">Administratoren</span><span class="sxs-lookup"><span data-stu-id="e18d4-196">Administrators</span></span><br /><br /> <span data-ttu-id="e18d4-197">Anwendungsentwickler</span><span class="sxs-lookup"><span data-stu-id="e18d4-197">Application developers</span></span>|  
|<span data-ttu-id="e18d4-198">Warnung</span><span class="sxs-lookup"><span data-stu-id="e18d4-198">Warning</span></span>|<span data-ttu-id="e18d4-199">"Negative" Ereignisse: Ereignisse, die auf eine unerwartete Verarbeitung oder eine Fehlerbedingung hinweisen.</span><span class="sxs-lookup"><span data-stu-id="e18d4-199">"Negative" events: events that indicate an unexpected processing or an error condition.</span></span>|<span data-ttu-id="e18d4-200">Ein mögliches Problem ist aufgetreten oder tritt möglicherweise auf, die Anwendung funktioniert jedoch noch ordnungsgemäß.</span><span class="sxs-lookup"><span data-stu-id="e18d4-200">A possible problem has occurred or may occur, but the application still functions correctly.</span></span> <span data-ttu-id="e18d4-201">Allerdings ist nicht sicher, dass sie weiterhin ordnungsgemäß ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="e18d4-201">However, it may not continue to work properly.</span></span>|<span data-ttu-id="e18d4-202">- Die Anwendung empfängt mehr Anforderungen, als die Drosselungseinstellungen zulassen.</span><span class="sxs-lookup"><span data-stu-id="e18d4-202">-   The application is receiving more requests than its throttling settings allow.</span></span><br /><span data-ttu-id="e18d4-203">- Die empfangende Warteschlange befindet sich in der Nähe ihrer maximal konfigurierten Kapazität.</span><span class="sxs-lookup"><span data-stu-id="e18d4-203">-   The receiving queue is near its maximum configured capacity.</span></span><br /><span data-ttu-id="e18d4-204">- Timeout wurde überschritten.</span><span class="sxs-lookup"><span data-stu-id="e18d4-204">-   Timeout has exceeded.</span></span><br /><span data-ttu-id="e18d4-205">- Anmeldeinformationen werden abgelehnt.</span><span class="sxs-lookup"><span data-stu-id="e18d4-205">-   Credentials are rejected.</span></span>|<span data-ttu-id="e18d4-206">Administratoren</span><span class="sxs-lookup"><span data-stu-id="e18d4-206">Administrators</span></span><br /><br /> <span data-ttu-id="e18d4-207">Anwendungsentwickler</span><span class="sxs-lookup"><span data-stu-id="e18d4-207">Application developers</span></span>|  
|<span data-ttu-id="e18d4-208">Information</span><span class="sxs-lookup"><span data-stu-id="e18d4-208">Information</span></span>|<span data-ttu-id="e18d4-209">"Positive" Ereignisse: Ereignisse, die erfolgreiche Meilensteine markieren</span><span class="sxs-lookup"><span data-stu-id="e18d4-209">"Positive" events: events that mark successful milestones</span></span>|<span data-ttu-id="e18d4-210">Wichtige und erfolgreiche Meilensteine der Anwendungsausführung, unabhängig davon, ob die Anwendung ordnungsgemäß funktioniert.</span><span class="sxs-lookup"><span data-stu-id="e18d4-210">Important and successful milestones of application execution, regardless of whether the application is working properly or not.</span></span>|<span data-ttu-id="e18d4-211">In der Regel werden Meldungen generiert, die bei der Überwachung und Diagnose des Systemstatus, der Leistungsmessung oder Profilerstellung nützlich sind.</span><span class="sxs-lookup"><span data-stu-id="e18d4-211">In general, messages helpful for monitoring and diagnosing system status, measuring performance or profiling are generated.</span></span> <span data-ttu-id="e18d4-212">Solche Informationen können zur Kapazitätsplanung und Leistungsverwaltung genutzt werden:</span><span class="sxs-lookup"><span data-stu-id="e18d4-212">You can use such information for capacity planning and performance management:</span></span><br /><br /> <span data-ttu-id="e18d4-213">- Kanäle werden erstellt.</span><span class="sxs-lookup"><span data-stu-id="e18d4-213">-   Channels are created.</span></span><br /><span data-ttu-id="e18d4-214">- Endpunkt-Listener werden erstellt.</span><span class="sxs-lookup"><span data-stu-id="e18d4-214">-   Endpoint listeners are created.</span></span><br /><span data-ttu-id="e18d4-215">- Nachricht tritt ein/verlässt den Transport.</span><span class="sxs-lookup"><span data-stu-id="e18d4-215">-   Message enters/leaves transport.</span></span><br /><span data-ttu-id="e18d4-216">- Sicherheitstoken wird abgerufen.</span><span class="sxs-lookup"><span data-stu-id="e18d4-216">-   Security token is retrieved.</span></span><br /><span data-ttu-id="e18d4-217">- Die Konfigurationseinstellung wird gelesen.</span><span class="sxs-lookup"><span data-stu-id="e18d4-217">-   Configuration setting is read.</span></span>|<span data-ttu-id="e18d4-218">Administratoren</span><span class="sxs-lookup"><span data-stu-id="e18d4-218">Administrators</span></span><br /><br /> <span data-ttu-id="e18d4-219">Anwendungsentwickler</span><span class="sxs-lookup"><span data-stu-id="e18d4-219">Application developers</span></span><br /><br /> <span data-ttu-id="e18d4-220">Produktentwickler</span><span class="sxs-lookup"><span data-stu-id="e18d4-220">Product developers.</span></span>|  
|<span data-ttu-id="e18d4-221">Ausführlich</span><span class="sxs-lookup"><span data-stu-id="e18d4-221">Verbose</span></span>|<span data-ttu-id="e18d4-222">"Positive" Ereignisse: Ereignisse, die erfolgreiche Meilensteine markieren.</span><span class="sxs-lookup"><span data-stu-id="e18d4-222">"Positive" events: events that mark successful milestones.</span></span>|<span data-ttu-id="e18d4-223">Ereignisse auf niedriger Ebene werden für Benutzercode und Dienste ausgegeben.</span><span class="sxs-lookup"><span data-stu-id="e18d4-223">Low level events for both user code and servicing are emitted.</span></span>|<span data-ttu-id="e18d4-224">Im Allgemeinen können Sie diese Ebene zum Debuggen oder zur Anwendungsoptimierung verwenden.</span><span class="sxs-lookup"><span data-stu-id="e18d4-224">In general, you can use this level for debugging or application optimization.</span></span><br /><br /> <span data-ttu-id="e18d4-225">- Verstandener Nachrichtenkopf.</span><span class="sxs-lookup"><span data-stu-id="e18d4-225">-   Understood message header.</span></span>|<span data-ttu-id="e18d4-226">Administratoren</span><span class="sxs-lookup"><span data-stu-id="e18d4-226">Administrators</span></span><br /><br /> <span data-ttu-id="e18d4-227">Anwendungsentwickler</span><span class="sxs-lookup"><span data-stu-id="e18d4-227">Application developers</span></span><br /><br /> <span data-ttu-id="e18d4-228">Produktentwickler</span><span class="sxs-lookup"><span data-stu-id="e18d4-228">Product developers.</span></span>|  
|<span data-ttu-id="e18d4-229">ActivityTracing</span><span class="sxs-lookup"><span data-stu-id="e18d4-229">ActivityTracing</span></span>||<span data-ttu-id="e18d4-230">Ablaufereignisse zwischen Verarbeitungsaktivitäten und Komponenten.</span><span class="sxs-lookup"><span data-stu-id="e18d4-230">Flow events between processing activities and components.</span></span>|<span data-ttu-id="e18d4-231">Diese Ebene ermöglicht es Administratoren und Entwicklern, Anwendungen in einer Anwendungsdomäne zu korrelieren:</span><span class="sxs-lookup"><span data-stu-id="e18d4-231">This level allows administrators and developers to correlate applications in the same application domain:</span></span><br /><br /> <span data-ttu-id="e18d4-232">- Spuren für Aktivitätsgrenzen, wie Start/Stopp.</span><span class="sxs-lookup"><span data-stu-id="e18d4-232">-   Traces for activity boundaries, such as start/stop.</span></span><br /><span data-ttu-id="e18d4-233">- Spuren für Transfers.</span><span class="sxs-lookup"><span data-stu-id="e18d4-233">-   Traces for transfers.</span></span>|<span data-ttu-id="e18d4-234">All</span><span class="sxs-lookup"><span data-stu-id="e18d4-234">All</span></span>|  
|<span data-ttu-id="e18d4-235">All</span><span class="sxs-lookup"><span data-stu-id="e18d4-235">All</span></span>||<span data-ttu-id="e18d4-236">Die Anwendung funktioniert möglicherweise ordnungsgemäß.</span><span class="sxs-lookup"><span data-stu-id="e18d4-236">Application may function properly.</span></span> <span data-ttu-id="e18d4-237">Alle Ereignisse werden ausgegeben.</span><span class="sxs-lookup"><span data-stu-id="e18d4-237">All events are emitted.</span></span>|<span data-ttu-id="e18d4-238">Alle vorherigen Ereignisse.</span><span class="sxs-lookup"><span data-stu-id="e18d4-238">All previous events.</span></span>|<span data-ttu-id="e18d4-239">All</span><span class="sxs-lookup"><span data-stu-id="e18d4-239">All</span></span>|  
  
 <span data-ttu-id="e18d4-240">Die Ebenen von Verbose bis Critical bauen aufeinander auf, d. h. jede Ablaufverfolgungsebene umfasst alle Ebenen darüber, außer der Off-Ebene.</span><span class="sxs-lookup"><span data-stu-id="e18d4-240">The levels from Verbose to Critical are stacked on top of each other, that is, each trace level includes all levels above it except the Off level.</span></span> <span data-ttu-id="e18d4-241">Beispielsweise empfängt en Listener, der die Warning-Ebene überwacht, Critical-, Error- and Warning-Ablaufverfolgungen.</span><span class="sxs-lookup"><span data-stu-id="e18d4-241">For example, a listener listening at the Warning level receives Critical, Error, and Warning traces.</span></span> <span data-ttu-id="e18d4-242">Die All-Ebene schließt Ereignisse von Verbose- bis Critical- und ActivityTracing-Ereignissen ein.</span><span class="sxs-lookup"><span data-stu-id="e18d4-242">The All level includes events from Verbose to Critical and Activity tracing events.</span></span>  
  
> [!CAUTION]
> <span data-ttu-id="e18d4-243">Die Ebenen "Information", "Verbose" und "ActivityTracing" generieren eine Vielzahl von Ablaufverfolgungen, was sich negativ auf den Nachrichtendurchsatz auswirken kann, wenn alle verfügbaren Ressourcen des Computers belegt sind.</span><span class="sxs-lookup"><span data-stu-id="e18d4-243">The Information, Verbose, and ActivityTracing levels generate a lot of traces, which may negatively impact message throughput if you have used up all available resources on the machine.</span></span>  
  
## <a name="configuring-activity-tracing-and-propagation-for-correlation"></a><span data-ttu-id="e18d4-244">Konfigurieren der Aktivitätsablaufverfolgung und Weitergabe für die Korrelation</span><span class="sxs-lookup"><span data-stu-id="e18d4-244">Configuring Activity Tracing and Propagation for Correlation</span></span>  
 <span data-ttu-id="e18d4-245">Mit dem für das `activityTracing`-Attribut angegebenen `switchValue`-Wert wird die Aktivitätsablaufverfolgung aktiviert, die Ablaufverfolgungen für Aktivitätsgrenzen und Übertragungen innerhalb von Endpunkten ausgibt.</span><span class="sxs-lookup"><span data-stu-id="e18d4-245">The `activityTracing` value specified for the `switchValue` attribute is used to enable activity tracing, which emits traces for activity boundaries and transfers within endpoints.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="e18d4-246">Wenn Sie bestimmte Erweiterbarkeitsfeatures in WCF <xref:System.NullReferenceException> verwenden, erhalten Sie möglicherweise eine, wenn die Aktivitätsablaufverfolgung aktiviert ist.</span><span class="sxs-lookup"><span data-stu-id="e18d4-246">When you use certain extensibility features in WCF, you might get a <xref:System.NullReferenceException> when activity tracing is enabled.</span></span> <span data-ttu-id="e18d4-247">Um dieses Problem zu beheben, überprüfen Sie die Konfigurationsdatei der Anwendung und stellen sicher, dass das `switchValue`-Attribut für die Ablaufverfolgungsquelle nicht auf `activityTracing` festgelegt wurde.</span><span class="sxs-lookup"><span data-stu-id="e18d4-247">To fix this problem, check your application's configuration file and ensure that the `switchValue` attribute for your trace source is not set to `activityTracing`.</span></span>  
  
 <span data-ttu-id="e18d4-248">Das `propagateActivity`-Attribut gibt an, ob die Aktivität an andere Endpunkte weitergegeben werden soll, die an dem Nachrichtenaustausch teilnehmen.</span><span class="sxs-lookup"><span data-stu-id="e18d4-248">The `propagateActivity` attribute indicates whether the activity should be propagated to other endpoints that participate in the message exchange.</span></span> <span data-ttu-id="e18d4-249">Wenn Sie diesen Wert auf `true` festlegen, können Sie anhand von Ablaufverfolgungsdateien, die durch zwei Endpunkte generiert wurden, feststellen, wie eine Reihe von Ablaufverfolgungen an einem Endpunkt zu einer Reihe von Ablaufverfolgungen an einem anderen Endpunkt übergegangen sind.</span><span class="sxs-lookup"><span data-stu-id="e18d4-249">By setting this value to `true`, you can take trace files generated by any two endpoints and observe how a set of traces on one endpoint flowed to a set of traces on another endpoint.</span></span>  
  
 <span data-ttu-id="e18d4-250">Weitere Informationen zur Ablaufverfolgung und Weitergabe von Aktivitäten finden Sie unter [Propagierung](../../../../../docs/framework/wcf/diagnostics/tracing/propagation.md).</span><span class="sxs-lookup"><span data-stu-id="e18d4-250">For more information about activity tracing and propagation, see [Propagation](../../../../../docs/framework/wcf/diagnostics/tracing/propagation.md).</span></span>  
  
 <span data-ttu-id="e18d4-251">Beide `propagateActivity` `ActivityTracing` und boolesche Werte gelten für die System.ServiceModel TraceSource.</span><span class="sxs-lookup"><span data-stu-id="e18d4-251">Both `propagateActivity` and `ActivityTracing` Boolean values apply to the System.ServiceModel TraceSource.</span></span> <span data-ttu-id="e18d4-252">Der `ActivityTracing` Wert gilt auch für jede Ablaufverfolgungsquelle, einschließlich WCF oder benutzerdefinierter Quellen.</span><span class="sxs-lookup"><span data-stu-id="e18d4-252">The `ActivityTracing` value also applies to any trace source, including WCF or user-defined ones.</span></span>  
  
 <span data-ttu-id="e18d4-253">Das `propagateActivity`-Attribut kann nicht bei benutzerdefinierten Ablaufverfolgungsquellen verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="e18d4-253">You cannot use the `propagateActivity` attribute with user-defined trace sources.</span></span> <span data-ttu-id="e18d4-254">Stellen Sie bei der Aktivitäts-ID-Weitergabe in Benutzercode sicher, dass Sie `ActivityTracing` von ServiceModel nicht festlegen, während das `propagateActivity`-Attribute von ServiceModel noch auf `true` festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="e18d4-254">For user code activity ID propagation, make sure you do not set ServiceModel `ActivityTracing`, while still having ServiceModel `propagateActivity` attribute set to `true`.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="e18d4-255">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="e18d4-255">See also</span></span>

- [<span data-ttu-id="e18d4-256">Ablaufverfolgung</span><span class="sxs-lookup"><span data-stu-id="e18d4-256">Tracing</span></span>](../../../../../docs/framework/wcf/diagnostics/tracing/index.md)
- [<span data-ttu-id="e18d4-257">Administration und Diagnose</span><span class="sxs-lookup"><span data-stu-id="e18d4-257">Administration and Diagnostics</span></span>](../../../../../docs/framework/wcf/diagnostics/index.md)
- [<span data-ttu-id="e18d4-258">Vorgehensweise: Erstellen und Initialisieren von Ablaufverfolgungslistenern</span><span class="sxs-lookup"><span data-stu-id="e18d4-258">How to: Create and Initialize Trace Listeners</span></span>](../../../debug-trace-profile/how-to-create-and-initialize-trace-listeners.md)
- [<span data-ttu-id="e18d4-259">Erstellen eines benutzerdefinierten TraceListener</span><span class="sxs-lookup"><span data-stu-id="e18d4-259">Creating a Custom TraceListener</span></span>](https://docs.microsoft.com/archive/msdn-magazine/2006/april/clr-inside-out-extending-system-diagnostics)
