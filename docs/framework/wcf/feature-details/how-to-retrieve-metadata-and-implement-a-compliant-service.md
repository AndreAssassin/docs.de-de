---
title: 'Vorgehensweise: Abrufen von Metadaten und Implementieren eines kompatiblen Diensts'
ms.date: 03/30/2017
ms.assetid: f6f3a2b9-c8aa-4b0b-832c-ec2927bf1163
ms.openlocfilehash: 0a13d504b1c7c38ec13fee58c36913a75119271b
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 03/12/2020
ms.locfileid: "79184863"
---
# <a name="how-to-retrieve-metadata-and-implement-a-compliant-service"></a><span data-ttu-id="05a16-102">Vorgehensweise: Abrufen von Metadaten und Implementieren eines kompatiblen Diensts</span><span class="sxs-lookup"><span data-stu-id="05a16-102">How to: Retrieve Metadata and Implement a Compliant Service</span></span>
<span data-ttu-id="05a16-103">Oftmals werden Dienste nicht von derselben Person entworfen und anschließend implementiert.</span><span class="sxs-lookup"><span data-stu-id="05a16-103">Often, the same person does not design and implement services.</span></span> <span data-ttu-id="05a16-104">In Umgebungen, in denen zusammenwirkende Anwendungen wichtig sind, können Verträge in Web Services Description Language (WSDL) entworfen oder beschrieben werden, und ein Entwickler muss einen Dienst implementieren, der mit dem bereitgestellten Vertrag kompatibel ist.</span><span class="sxs-lookup"><span data-stu-id="05a16-104">In environments where interoperating applications are important, contracts can be designed or described in Web Services Description Language (WSDL) and a developer must implement a service that complies with the provided contract.</span></span> <span data-ttu-id="05a16-105">Sie können auch einen vorhandenen Dienst zu Windows Communication Foundation (WCF) migrieren, aber das Drahtformat beibehalten.</span><span class="sxs-lookup"><span data-stu-id="05a16-105">You may also want to migrate an existing service to Windows Communication Foundation (WCF) but preserve the wire format.</span></span> <span data-ttu-id="05a16-106">Außerdem werden Aufrufende von Duplexverträgen dazu aufgefordert, auch einen Rückrufvertrag zu implementieren.</span><span class="sxs-lookup"><span data-stu-id="05a16-106">In addition, duplex contracts require callers to implement a callback contract as well.</span></span>  
  
 <span data-ttu-id="05a16-107">In diesen Fällen müssen Sie das [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) (oder ein gleichwertiges Tool) verwenden, um eine Servicevertragsschnittstelle in einer verwalteten Sprache zu generieren, die Sie implementieren können, um die Anforderungen des Vertrags zu erfüllen.</span><span class="sxs-lookup"><span data-stu-id="05a16-107">In these cases, you must use the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) (or an equivalent tool) to generate a service contract interface in a managed language that you can implement to fulfill the requirements of the contract.</span></span> <span data-ttu-id="05a16-108">In der Regel wird das [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) verwendet, um einen Servicevertrag zu erwerben, der mit einer Channel Factory oder einem WCF-Clienttyp sowie mit einer Clientkonfigurationsdatei verwendet wird, die die richtige Bindung und Adresse festlegt.</span><span class="sxs-lookup"><span data-stu-id="05a16-108">Typically the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) is used to acquire a service contract that is used with a channel factory or a WCF client type as well as with a client configuration file that sets up the correct binding and address.</span></span> <span data-ttu-id="05a16-109">Um die generierte Konfigurationsdatei zu verwenden, müssen Sie diese in eine Dienstkonfigurationsdatei ändern.</span><span class="sxs-lookup"><span data-stu-id="05a16-109">To use the generated configuration file, you must change it into a service configuration file.</span></span> <span data-ttu-id="05a16-110">Sie müssen möglicherweise auch den Dienstvertrag ändern.</span><span class="sxs-lookup"><span data-stu-id="05a16-110">You may also need to modify the service contract.</span></span>  
  
### <a name="to-retrieve-data-and-implement-a-compliant-service"></a><span data-ttu-id="05a16-111">So rufen Sie Daten ab und implementieren einen kompatiblen Dienst:</span><span class="sxs-lookup"><span data-stu-id="05a16-111">To retrieve data and implement a compliant service</span></span>  
  
1. <span data-ttu-id="05a16-112">Verwenden Sie das [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) für Metadatendateien oder einen Metadatenendpunkt, um eine Codedatei zu generieren.</span><span class="sxs-lookup"><span data-stu-id="05a16-112">Use the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) against metadata files or a metadata endpoint to generate a code file.</span></span>  
  
2. <span data-ttu-id="05a16-113">Suchen Sie den Bereich der Ausgabecodedatei mit der wichtigen Schnittstelle (falls mehr als eine vorhanden ist), die mit dem <xref:System.ServiceModel.ServiceContractAttribute?displayProperty=nameWithType>-Attribut gekennzeichnet ist.</span><span class="sxs-lookup"><span data-stu-id="05a16-113">Search for the portion of the output code file that contains the interface of interest (in case there is more than one) that is marked with the <xref:System.ServiceModel.ServiceContractAttribute?displayProperty=nameWithType> attribute.</span></span> <span data-ttu-id="05a16-114">Das folgende Codebeispiel zeigt die beiden Schnittstellen, die vom [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md)generiert werden.</span><span class="sxs-lookup"><span data-stu-id="05a16-114">The following code example shows the two interfaces generated by [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md).</span></span> <span data-ttu-id="05a16-115">Die erste Schnittstelle (`ISampleService`) ist die Dienstvertragsschnittstelle, die zum Erstellen eines kompatiblen Diensts implementiert wird.</span><span class="sxs-lookup"><span data-stu-id="05a16-115">The first (`ISampleService`) is the service contract interface that you implement to create a compliant service.</span></span> <span data-ttu-id="05a16-116">Bei der zweiten Schnittstelle (`ISampleServiceChannel`) handelt es sich um eine Hilfsschnittstelle für die Clientverwendung, die sowohl die Dienstvertragsschnittstelle als auch <xref:System.ServiceModel.IClientChannel?displayProperty=nameWithType> erweitert und für die Verwendung in einer Clientanwendung vorgesehen ist.</span><span class="sxs-lookup"><span data-stu-id="05a16-116">The second (`ISampleServiceChannel`) is a helper interface for client use that extends both the service contract interface and <xref:System.ServiceModel.IClientChannel?displayProperty=nameWithType> and is for use in a client application.</span></span>  
  
     [!code-csharp[ClientProxyCodeSample#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/clientproxycodesample/cs/proxycode.cs#2)]  
  
3. <span data-ttu-id="05a16-117">Wird mit WSDL keine Antwortaktion für alle Vorgänge angegeben, ist bei den generierten Vorgangsverträgen die <xref:System.ServiceModel.OperationContractAttribute.ReplyAction%2A>-Eigenschaft möglicherweise auf das Platzhalterzeichen (\*) festgelegt.</span><span class="sxs-lookup"><span data-stu-id="05a16-117">If the WSDL does not specify a reply action for all of the operations, the generated operation contracts may have the <xref:System.ServiceModel.OperationContractAttribute.ReplyAction%2A> property set to the wildcard character (\*).</span></span> <span data-ttu-id="05a16-118">Entfernen Sie diese Eigenschafteneinstellung.</span><span class="sxs-lookup"><span data-stu-id="05a16-118">Remove this property setting.</span></span> <span data-ttu-id="05a16-119">Andernfalls können die Metadaten bei der Implementierung der Dienstvertragsmetadaten nicht für diese Vorgänge exportiert werden.</span><span class="sxs-lookup"><span data-stu-id="05a16-119">Otherwise, when you implement the service contract metadata, the metadata cannot be exported for those operations.</span></span>  
  
4. <span data-ttu-id="05a16-120">Implementieren Sie die Schnittstelle in einer Klasse, und hosten Sie den Dienst.</span><span class="sxs-lookup"><span data-stu-id="05a16-120">Implement the interface on a class and host the service.</span></span> <span data-ttu-id="05a16-121">Ein Beispiel finden Sie unter [Gewusst wie: Implementieren eines Servicevertrags](../../../../docs/framework/wcf/how-to-implement-a-wcf-contract.md), oder eine einfache Implementierung unten im Abschnitt Beispiel.</span><span class="sxs-lookup"><span data-stu-id="05a16-121">For an example, see [How to: Implement a Service Contract](../../../../docs/framework/wcf/how-to-implement-a-wcf-contract.md), or see a simple implementation below in the Example section.</span></span>  
  
5. <span data-ttu-id="05a16-122">Ändern Sie in der Clientkonfigurationsdatei, die das [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) generiert, den [ \<Client->-Konfigurationsabschnitt](../../../../docs/framework/configure-apps/file-schema/wcf/client.md) in einen [ \<>-Konfigurationsabschnitt.](../../../../docs/framework/configure-apps/file-schema/wcf/services.md)</span><span class="sxs-lookup"><span data-stu-id="05a16-122">In the client configuration file that the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) generates, change the [\<client>](../../../../docs/framework/configure-apps/file-schema/wcf/client.md) configuration section to a [\<services>](../../../../docs/framework/configure-apps/file-schema/wcf/services.md) configuration section.</span></span> <span data-ttu-id="05a16-123">(Ein Beispiel für eine generierte Clientanwendungs-Konfigurationsdatei finden Sie im folgenden "Beispiel"-Abschnitt.)</span><span class="sxs-lookup"><span data-stu-id="05a16-123">(For an example of a generated client application configuration file, see the following "Example" section.)</span></span>  
  
6. <span data-ttu-id="05a16-124">Erstellen [ \<](../../../../docs/framework/configure-apps/file-schema/wcf/services.md) Sie im Abschnitt Dienste `name`>Konfiguration ein Attribut im Abschnitt [ \<"Dienste>](../../../../docs/framework/configure-apps/file-schema/wcf/services.md) Konfiguration" für Ihre Dienstimplementierung.</span><span class="sxs-lookup"><span data-stu-id="05a16-124">Within the [\<services>](../../../../docs/framework/configure-apps/file-schema/wcf/services.md) configuration section, create a `name` attribute in the [\<services>](../../../../docs/framework/configure-apps/file-schema/wcf/services.md) configuration section for your service implementation.</span></span>  
  
7. <span data-ttu-id="05a16-125">Legen Sie das `name`-Dienstattribut auf den Konfigurationsnamen für die Dienstimplementierung fest.</span><span class="sxs-lookup"><span data-stu-id="05a16-125">Set the service `name` attribute to the configuration name for your service implementation.</span></span>  
  
8. <span data-ttu-id="05a16-126">Fügen Sie die Endpunktkonfigurationselemente hinzu, die den implementierten Dienstvertrag für den Dienstkonfigurationsabschnitt verwenden.</span><span class="sxs-lookup"><span data-stu-id="05a16-126">Add the endpoint configuration elements that use the implemented service contract to the service configuration section.</span></span>  
  
## <a name="example"></a><span data-ttu-id="05a16-127">Beispiel</span><span class="sxs-lookup"><span data-stu-id="05a16-127">Example</span></span>  
 <span data-ttu-id="05a16-128">Das folgende Codebeispiel zeigt den Großteil einer Codedatei, die durch Ausführen des [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) für Metadatendateien generiert wird.</span><span class="sxs-lookup"><span data-stu-id="05a16-128">The following code example shows the majority of a code file generated by running the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) against metadata files.</span></span>  
  
 <span data-ttu-id="05a16-129">Dies wird im folgenden Code veranschaulicht:</span><span class="sxs-lookup"><span data-stu-id="05a16-129">The following code shows:</span></span>  
  
- <span data-ttu-id="05a16-130">Die Dienstvertragsschnittstelle (`ISampleService`), die bei der Implementierung den Vertragsanforderungen entspricht.</span><span class="sxs-lookup"><span data-stu-id="05a16-130">The service contract interface that, when implemented, complies with the contract requirements (`ISampleService`).</span></span>  
  
- <span data-ttu-id="05a16-131">Die Hilfsschnittstelle für die Clientverwendung, die sowohl die Dienstvertragsschnittstelle als auch <xref:System.ServiceModel.IClientChannel?displayProperty=nameWithType> erweitert und für die Verwendung in einer Clientanwendung (`ISampleServiceChannel`) vorgesehen ist.</span><span class="sxs-lookup"><span data-stu-id="05a16-131">The helper interface for client use that extends both the service contract interface and <xref:System.ServiceModel.IClientChannel?displayProperty=nameWithType> and is for use in a client application (`ISampleServiceChannel`).</span></span>  
  
- <span data-ttu-id="05a16-132">Die Hilfsklasse, die <xref:System.ServiceModel.ClientBase%601?displayProperty=nameWithType> erweitert und für die Verwendung in einer Clientanwendung (`SampleServiceClient`) vorgesehen ist.</span><span class="sxs-lookup"><span data-stu-id="05a16-132">The helper class that extends <xref:System.ServiceModel.ClientBase%601?displayProperty=nameWithType> and is for use in a client application (`SampleServiceClient`).</span></span>  
  
- <span data-ttu-id="05a16-133">Die vom Dienst generierte Konfigurationsdatei.</span><span class="sxs-lookup"><span data-stu-id="05a16-133">The configuration file generated from the service.</span></span>  
  
- <span data-ttu-id="05a16-134">Eine einfache `ISampleService`-Dienstimplementierung.</span><span class="sxs-lookup"><span data-stu-id="05a16-134">A simple `ISampleService` service implementation.</span></span>  
  
- <span data-ttu-id="05a16-135">Eine Konvertierung der clientseitigen Konfigurationsdatei in eine dienstseitige Version.</span><span class="sxs-lookup"><span data-stu-id="05a16-135">A conversion of the client-side configuration file to a service-side version.</span></span>  
  
[!code-csharp[ClientProxyCodeSample#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/clientproxycodesample/cs/proxycode.cs#1)]

[!code-xml[ClientProxyCodeSample#10](../../../../samples/snippets/csharp/VS_Snippets_CFX/clientproxycodesample/cs/client.exe.config#10)]

[!code-csharp[ClientProxyCodeSample#5](../../../../samples/snippets/csharp/VS_Snippets_CFX/clientproxycodesample/cs/hostapplication.cs#5)]

[!code-xml[ClientProxyCodeSample#20](../../../../samples/snippets/csharp/VS_Snippets_CFX/clientproxycodesample/cs/hostapplication.exe.config#20)]
  
## <a name="see-also"></a><span data-ttu-id="05a16-136">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="05a16-136">See also</span></span>

- [<span data-ttu-id="05a16-137">ServiceModel Metadata Utility-Tool (Svcutil.exe)</span><span class="sxs-lookup"><span data-stu-id="05a16-137">ServiceModel Metadata Utility Tool (Svcutil.exe)</span></span>](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md)
