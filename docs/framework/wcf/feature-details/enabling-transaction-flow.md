---
title: Aktivieren des Transaktionsflusses
ms.date: 03/30/2017
helpviewer_keywords:
- transactions [WCF], enabling flow
ms.assetid: a03f5041-5049-43f4-897c-e0292d4718f7
ms.openlocfilehash: 180fc99195444057c5bbb4a1679e948f9ddf1830
ms.sourcegitcommit: 9b552addadfb57fab0b9e7852ed4f1f1b8a42f8e
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 04/23/2019
ms.locfileid: "61856661"
---
# <a name="enabling-transaction-flow"></a><span data-ttu-id="507a9-102">Aktivieren des Transaktionsflusses</span><span class="sxs-lookup"><span data-stu-id="507a9-102">Enabling Transaction Flow</span></span>
<span data-ttu-id="507a9-103">Windows Communication Foundation (WCF) bietet sehr flexible Optionen des Transaktionsflusses steuern.</span><span class="sxs-lookup"><span data-stu-id="507a9-103">Windows Communication Foundation (WCF) provides highly flexible options for controlling transaction flow.</span></span> <span data-ttu-id="507a9-104">Die Transaktionsflusseinstellungen eines Dienstes können durch eine Kombination aus Attributen und Konfigurationen ausgedrückt werden.</span><span class="sxs-lookup"><span data-stu-id="507a9-104">A service's transaction flow settings can be expressed using a combination of attributes and configuration.</span></span>  
  
## <a name="transaction-flow-settings"></a><span data-ttu-id="507a9-105">Transaktionsflusseinstellungen</span><span class="sxs-lookup"><span data-stu-id="507a9-105">Transaction Flow Settings</span></span>  
 <span data-ttu-id="507a9-106">Transaktionsflusseinstellungen werden als Ergebnis einer Schnittmenge aus den folgenden drei Werten für einen Dienstendpunkt generiert:</span><span class="sxs-lookup"><span data-stu-id="507a9-106">Transaction flow settings are generated for a service endpoint as a result of the intersection of the following three values:</span></span>  
  
- <span data-ttu-id="507a9-107">Dem <xref:System.ServiceModel.TransactionFlowAttribute>-Attribut, das für jede Methode im Dienstvertrag angegeben wird.</span><span class="sxs-lookup"><span data-stu-id="507a9-107">The <xref:System.ServiceModel.TransactionFlowAttribute> attribute specified for each method in the service contract.</span></span>  
  
- <span data-ttu-id="507a9-108">Der `TransactionFlow`-Bindungseigenschaft in der speziellen Bindung.</span><span class="sxs-lookup"><span data-stu-id="507a9-108">The `TransactionFlow` binding property in the specific binding.</span></span>  
  
- <span data-ttu-id="507a9-109">Der `TransactionFlowProtocol`-Bindungseigenschaft in der speziellen Bindung.</span><span class="sxs-lookup"><span data-stu-id="507a9-109">The `TransactionFlowProtocol` binding property in the specific binding.</span></span> <span data-ttu-id="507a9-110">Mit der `TransactionFlowProtocol`-Bindungseigenschaft können Sie eines von zwei unterschiedlichen Transaktionsprotokollen für einen Transaktionsfluss auswählen.</span><span class="sxs-lookup"><span data-stu-id="507a9-110">The `TransactionFlowProtocol` binding property enables you to choose among two different transaction protocols that you can use to flow a transaction.</span></span> <span data-ttu-id="507a9-111">Diese Protokolle werden jeweils in den folgenden Abschnitten kurz erläutert.</span><span class="sxs-lookup"><span data-stu-id="507a9-111">The following sections briefly describe each of them.</span></span>  
  
### <a name="ws-atomictransaction-protocol"></a><span data-ttu-id="507a9-112">WS-AtomicTransaction-Protokoll</span><span class="sxs-lookup"><span data-stu-id="507a9-112">WS-AtomicTransaction Protocol</span></span>  
 <span data-ttu-id="507a9-113">Das WS-AtomicTransaction-Protokoll (WS-AT) eignet sich für Szenarien, in denen die Interoperabilität mit Protokollstapeln eines Drittanbieters erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="507a9-113">The WS-AtomicTransaction (WS-AT) protocol is useful for scenarios when interoperability with third-party protocol stacks is required.</span></span>  
  
### <a name="oletransactions-protocol"></a><span data-ttu-id="507a9-114">OleTransactions-Protokoll</span><span class="sxs-lookup"><span data-stu-id="507a9-114">OleTransactions Protocol</span></span>  
 <span data-ttu-id="507a9-115">Das OleTransactions-Protokoll eignet sich für Szenarien, in denen die Interoperabilität mit Protokollstapeln eines Drittanbieters nicht erforderlich ist und der Bereitsteller des Dienstes im Voraus weiß, dass der WS-AT-Protokolldienst lokal deaktiviert ist oder die vorhandene Netzwerktopologie die Verwendung von WS-AT nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="507a9-115">The OleTransactions protocol is useful for scenarios when interoperability with third-party protocol stacks is not required, and the deployer of a service knows in advance that the WS-AT protocol service is disabled locally or the existing network topology does not favor the usage of WS-AT.</span></span>  
  
 <span data-ttu-id="507a9-116">In der folgenden Tabelle werden die unterschiedlichen Transaktionsflüsse aufgeführt, die mit den verschiedenen Kombinationen generiert verwendet werden können.</span><span class="sxs-lookup"><span data-stu-id="507a9-116">The following table shows the different types of transaction flows that can be generated using these various combinations.</span></span>  
  
|<span data-ttu-id="507a9-117">TransactionFlow</span><span class="sxs-lookup"><span data-stu-id="507a9-117">TransactionFlow</span></span><br /><br /> <span data-ttu-id="507a9-118">Bindung</span><span class="sxs-lookup"><span data-stu-id="507a9-118">binding</span></span>|<span data-ttu-id="507a9-119">TransactionFlow-Bindungseigenschaft</span><span class="sxs-lookup"><span data-stu-id="507a9-119">TransactionFlow binding property</span></span>|<span data-ttu-id="507a9-120">TransactionFlowProtocol-Bindungsprotokoll</span><span class="sxs-lookup"><span data-stu-id="507a9-120">TransactionFlowProtocol binding protocol</span></span>|<span data-ttu-id="507a9-121">Typ des Transaktionsflusses</span><span class="sxs-lookup"><span data-stu-id="507a9-121">Type of transaction flow</span></span>|  
|---------------------------------|--------------------------------------|----------------------------------------------|------------------------------|  
|<span data-ttu-id="507a9-122">Erforderlich</span><span class="sxs-lookup"><span data-stu-id="507a9-122">Mandatory</span></span>|<span data-ttu-id="507a9-123">true</span><span class="sxs-lookup"><span data-stu-id="507a9-123">true</span></span>|<span data-ttu-id="507a9-124">WS-AT</span><span class="sxs-lookup"><span data-stu-id="507a9-124">WS-AT</span></span>|<span data-ttu-id="507a9-125">Der Transaktionsfluss muss im interoperablen WS-AT-Format erfolgen.</span><span class="sxs-lookup"><span data-stu-id="507a9-125">Transaction must be flowed in the interoperable WS-AT format.</span></span>|  
|<span data-ttu-id="507a9-126">Erforderlich</span><span class="sxs-lookup"><span data-stu-id="507a9-126">Mandatory</span></span>|<span data-ttu-id="507a9-127">true</span><span class="sxs-lookup"><span data-stu-id="507a9-127">true</span></span>|<span data-ttu-id="507a9-128">OleTransactions</span><span class="sxs-lookup"><span data-stu-id="507a9-128">OleTransactions</span></span>|<span data-ttu-id="507a9-129">Transaktionsfluss muss sich in der WCF-OleTransactions-Format.</span><span class="sxs-lookup"><span data-stu-id="507a9-129">Transaction must be flowed in the WCF OleTransactions format.</span></span>|  
|<span data-ttu-id="507a9-130">Erforderlich</span><span class="sxs-lookup"><span data-stu-id="507a9-130">Mandatory</span></span>|<span data-ttu-id="507a9-131">False</span><span class="sxs-lookup"><span data-stu-id="507a9-131">false</span></span>|<span data-ttu-id="507a9-132">Nicht zutreffend</span><span class="sxs-lookup"><span data-stu-id="507a9-132">Not applicable</span></span>|<span data-ttu-id="507a9-133">Nicht zutreffend, da es sich um eine ungültige Konfiguration handelt.</span><span class="sxs-lookup"><span data-stu-id="507a9-133">Not applicable because this is an invalid configuration.</span></span>|  
|<span data-ttu-id="507a9-134">Allowed</span><span class="sxs-lookup"><span data-stu-id="507a9-134">Allowed</span></span>|<span data-ttu-id="507a9-135">true</span><span class="sxs-lookup"><span data-stu-id="507a9-135">true</span></span>|<span data-ttu-id="507a9-136">WS-AT</span><span class="sxs-lookup"><span data-stu-id="507a9-136">WS-AT</span></span>|<span data-ttu-id="507a9-137">Der Transaktionsfluss kann im interoperablen WS-AT-Format erfolgen.</span><span class="sxs-lookup"><span data-stu-id="507a9-137">Transaction may be flowed in the interoperable WS-AT format.</span></span>|  
|<span data-ttu-id="507a9-138">Allowed</span><span class="sxs-lookup"><span data-stu-id="507a9-138">Allowed</span></span>|<span data-ttu-id="507a9-139">true</span><span class="sxs-lookup"><span data-stu-id="507a9-139">true</span></span>|<span data-ttu-id="507a9-140">OleTransactions</span><span class="sxs-lookup"><span data-stu-id="507a9-140">OleTransactions</span></span>|<span data-ttu-id="507a9-141">Die Transaktionsfluss kann im WCF-OleTransactions-Format.</span><span class="sxs-lookup"><span data-stu-id="507a9-141">Transaction may be flowed in the WCF OleTransactions format.</span></span>|  
|<span data-ttu-id="507a9-142">Allowed</span><span class="sxs-lookup"><span data-stu-id="507a9-142">Allowed</span></span>|<span data-ttu-id="507a9-143">False</span><span class="sxs-lookup"><span data-stu-id="507a9-143">false</span></span>|<span data-ttu-id="507a9-144">Beliebiger Wert</span><span class="sxs-lookup"><span data-stu-id="507a9-144">Any value</span></span>|<span data-ttu-id="507a9-145">Es erfolgt kein Transaktionsfluss.</span><span class="sxs-lookup"><span data-stu-id="507a9-145">A transaction is not flowed.</span></span>|  
|<span data-ttu-id="507a9-146">NotAllowed</span><span class="sxs-lookup"><span data-stu-id="507a9-146">NotAllowed</span></span>|<span data-ttu-id="507a9-147">Beliebiger Wert</span><span class="sxs-lookup"><span data-stu-id="507a9-147">Any value</span></span>|<span data-ttu-id="507a9-148">Beliebiger Wert</span><span class="sxs-lookup"><span data-stu-id="507a9-148">Any value</span></span>|<span data-ttu-id="507a9-149">Es erfolgt kein Transaktionsfluss.</span><span class="sxs-lookup"><span data-stu-id="507a9-149">A transaction is not flowed.</span></span>|  
  
 <span data-ttu-id="507a9-150">In der folgenden Tabelle wird das Ergebnis der Nachrichtenverarbeitung zusammengefasst.</span><span class="sxs-lookup"><span data-stu-id="507a9-150">The following table summarizes the message processing result.</span></span>  
  
|<span data-ttu-id="507a9-151">Eingehende Nachricht</span><span class="sxs-lookup"><span data-stu-id="507a9-151">Incoming message</span></span>|<span data-ttu-id="507a9-152">TransactionFlow-Einstellung</span><span class="sxs-lookup"><span data-stu-id="507a9-152">TransactionFlow setting</span></span>|<span data-ttu-id="507a9-153">Transaktionsheader</span><span class="sxs-lookup"><span data-stu-id="507a9-153">Transaction header</span></span>|<span data-ttu-id="507a9-154">Ergebnis der Nachrichtenverarbeitung</span><span class="sxs-lookup"><span data-stu-id="507a9-154">Message processing result</span></span>|  
|----------------------|-----------------------------|------------------------|-------------------------------|  
|<span data-ttu-id="507a9-155">Die Transaktion stimmt mit dem erwarteten Protokollformat überein.</span><span class="sxs-lookup"><span data-stu-id="507a9-155">Transaction matches expected protocol format</span></span>|<span data-ttu-id="507a9-156">Allowed oder Mandatory</span><span class="sxs-lookup"><span data-stu-id="507a9-156">Allowed or Mandatory</span></span>|<span data-ttu-id="507a9-157">`MustUnderstand` ist gleich `true`.</span><span class="sxs-lookup"><span data-stu-id="507a9-157">`MustUnderstand` equals `true`.</span></span>|<span data-ttu-id="507a9-158">Prozess</span><span class="sxs-lookup"><span data-stu-id="507a9-158">Process</span></span>|  
|<span data-ttu-id="507a9-159">Die Transaktion stimmt nicht mit dem erwarteten Protokollformat überein.</span><span class="sxs-lookup"><span data-stu-id="507a9-159">Transaction does not match expected protocol format</span></span>|<span data-ttu-id="507a9-160">Erforderlich</span><span class="sxs-lookup"><span data-stu-id="507a9-160">Mandatory</span></span>|<span data-ttu-id="507a9-161">`MustUnderstand` ist gleich `false`.</span><span class="sxs-lookup"><span data-stu-id="507a9-161">`MustUnderstand` equals `false`.</span></span>|<span data-ttu-id="507a9-162">Abgelehnt, da eine Transaktion erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="507a9-162">Rejected because a transaction is required</span></span>|  
|<span data-ttu-id="507a9-163">Die Transaktion stimmt nicht mit dem erwarteten Protokollformat überein.</span><span class="sxs-lookup"><span data-stu-id="507a9-163">Transaction does not match expected protocol format</span></span>|<span data-ttu-id="507a9-164">Allowed</span><span class="sxs-lookup"><span data-stu-id="507a9-164">Allowed</span></span>|<span data-ttu-id="507a9-165">`MustUnderstand` ist gleich `false`.</span><span class="sxs-lookup"><span data-stu-id="507a9-165">`MustUnderstand` equals `false`.</span></span>|<span data-ttu-id="507a9-166">Abgelehnt, da der Header nicht interpretiert werden kann.</span><span class="sxs-lookup"><span data-stu-id="507a9-166">Rejected because the header is not understood</span></span>|  
|<span data-ttu-id="507a9-167">Transaktion mit einem beliebigen Protokollformat</span><span class="sxs-lookup"><span data-stu-id="507a9-167">Transaction using any protocol format</span></span>|<span data-ttu-id="507a9-168">NotAllowed</span><span class="sxs-lookup"><span data-stu-id="507a9-168">NotAllowed</span></span>|<span data-ttu-id="507a9-169">`MustUnderstand` ist gleich `false`.</span><span class="sxs-lookup"><span data-stu-id="507a9-169">`MustUnderstand` equals `false`.</span></span>|<span data-ttu-id="507a9-170">Abgelehnt, da der Header nicht interpretiert werden kann.</span><span class="sxs-lookup"><span data-stu-id="507a9-170">Rejected because the header is not understood</span></span>|  
|<span data-ttu-id="507a9-171">Keine Transaktion</span><span class="sxs-lookup"><span data-stu-id="507a9-171">No transaction</span></span>|<span data-ttu-id="507a9-172">Erforderlich</span><span class="sxs-lookup"><span data-stu-id="507a9-172">Mandatory</span></span>|<span data-ttu-id="507a9-173">Nicht zutreffend</span><span class="sxs-lookup"><span data-stu-id="507a9-173">N/A</span></span>|<span data-ttu-id="507a9-174">Abgelehnt, da eine Transaktion erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="507a9-174">Rejected because a transaction is required</span></span>|  
|<span data-ttu-id="507a9-175">Keine Transaktion</span><span class="sxs-lookup"><span data-stu-id="507a9-175">No transaction</span></span>|<span data-ttu-id="507a9-176">Allowed</span><span class="sxs-lookup"><span data-stu-id="507a9-176">Allowed</span></span>|<span data-ttu-id="507a9-177">Nicht zutreffend</span><span class="sxs-lookup"><span data-stu-id="507a9-177">N/A</span></span>|<span data-ttu-id="507a9-178">Prozess</span><span class="sxs-lookup"><span data-stu-id="507a9-178">Process</span></span>|  
|<span data-ttu-id="507a9-179">Keine Transaktion</span><span class="sxs-lookup"><span data-stu-id="507a9-179">No transaction</span></span>|<span data-ttu-id="507a9-180">NotAllowed</span><span class="sxs-lookup"><span data-stu-id="507a9-180">NotAllowed</span></span>|<span data-ttu-id="507a9-181">Nicht zutreffend</span><span class="sxs-lookup"><span data-stu-id="507a9-181">N/A</span></span>|<span data-ttu-id="507a9-182">Prozess</span><span class="sxs-lookup"><span data-stu-id="507a9-182">Process</span></span>|  
  
 <span data-ttu-id="507a9-183">Jede Methode eines Vertrags kann zwar verschiedene Transaktionsflussanforderungen aufweisen, die Einstellung des Transaktionsflussprotokolls wird jedoch auf der Bindungsebene festgelegt.</span><span class="sxs-lookup"><span data-stu-id="507a9-183">While each method on a contract can have different transaction flow requirements, the transaction flow protocol setting is scoped at the level of the binding.</span></span> <span data-ttu-id="507a9-184">Das bedeutet, dass alle Methoden, die denselben Endpunkt gemeinsam nutzen (und somit dieselbe Bindung), auch dieselbe Richtlinie verwenden, die einen Transaktionsfluss zulässt oder verlangt, sowie gegebenenfalls dasselbe Transaktionsprotokoll.</span><span class="sxs-lookup"><span data-stu-id="507a9-184">This means that all methods that share the same endpoint (and therefore the same binding) also share the same policy allowing or requiring transaction flow, as well as the same transaction protocol if applicable.</span></span>  
  
## <a name="enabling-transaction-flow-at-the-method-level"></a><span data-ttu-id="507a9-185">Aktivieren des Transaktionsflusses auf der Methodenebene</span><span class="sxs-lookup"><span data-stu-id="507a9-185">Enabling Transaction Flow at the Method Level</span></span>  
 <span data-ttu-id="507a9-186">Transaktionsflussanforderungen sind nicht immer für alle Methoden in einem Dienstvertrag identisch.</span><span class="sxs-lookup"><span data-stu-id="507a9-186">Transaction flow requirements are not always the same for all methods in a service contract.</span></span> <span data-ttu-id="507a9-187">Aus diesem Grund stellt WCF außerdem einen attributbasierten änderungsmechanismus damit jede Methode der Transaktion die transaktionsflusseinstellungen ausgedrückt werden kann.</span><span class="sxs-lookup"><span data-stu-id="507a9-187">Therefore, WCF also provides an attribute-based mechanism to allow each method's transaction flow preferences to be expressed.</span></span> <span data-ttu-id="507a9-188">Dazu wird mit <xref:System.ServiceModel.TransactionFlowAttribute> die Ebene angegeben, auf der ein Dienstvorgang einen Transaktionsheader akzeptiert.</span><span class="sxs-lookup"><span data-stu-id="507a9-188">This is achieved by the <xref:System.ServiceModel.TransactionFlowAttribute> that specifies the level in which a service operation accepts a transaction header.</span></span> <span data-ttu-id="507a9-189">Kennzeichnen Sie die Methoden des Dienstvertrags mit diesem Attribut, wenn Sie den Transaktionsfluss aktivieren möchten.</span><span class="sxs-lookup"><span data-stu-id="507a9-189">You should mark your service contract methods with this attribute if you want to enable transaction flow.</span></span> <span data-ttu-id="507a9-190">Dieses Attribut verwendet einen der Werte der <xref:System.ServiceModel.TransactionFlowOption>-Enumeration, wobei hier der Standardwert <xref:System.ServiceModel.TransactionFlowOption.NotAllowed> lautet.</span><span class="sxs-lookup"><span data-stu-id="507a9-190">This attribute takes one of the values of the <xref:System.ServiceModel.TransactionFlowOption> enumeration, in which the default value is <xref:System.ServiceModel.TransactionFlowOption.NotAllowed>.</span></span> <span data-ttu-id="507a9-191">Wenn ein anderer Wert als <xref:System.ServiceModel.TransactionFlowOption.NotAllowed> angegeben wird, darf die Methode nicht unidirektional sein.</span><span class="sxs-lookup"><span data-stu-id="507a9-191">If any value except <xref:System.ServiceModel.TransactionFlowOption.NotAllowed> is specified, the method is required to not be one-way.</span></span> <span data-ttu-id="507a9-192">Ein Entwickler kann mit diesem Attribut Transaktionsflussanforderungen auf Methodenebene oder Einschränkungen zur Entwurfszeit angeben.</span><span class="sxs-lookup"><span data-stu-id="507a9-192">A developer can use this attribute to specify method-level transaction flow requirements or constraints at design time.</span></span>  
  
## <a name="enabling-transaction-flow-at-the-endpoint-level"></a><span data-ttu-id="507a9-193">Aktivieren des Transaktionsflusses auf der Endpunktebene</span><span class="sxs-lookup"><span data-stu-id="507a9-193">Enabling Transaction Flow at the Endpoint Level</span></span>  
 <span data-ttu-id="507a9-194">Zusätzlich zum Festlegen Methodenebene-Flow die <xref:System.ServiceModel.TransactionFlowAttribute> Attribut bietet, WCF bietet eine Endpunkt-weiten Einstellung für den Transaktionsfluss damit Administratoren Transaktionsfluss auf einer höheren Ebene steuern können.</span><span class="sxs-lookup"><span data-stu-id="507a9-194">In addition to the method-level transaction flow setting  the <xref:System.ServiceModel.TransactionFlowAttribute> attribute provides, WCF provides an endpoint-wide setting for transaction flow to allow administrators to control transaction flow at a higher level.</span></span>  
  
 <span data-ttu-id="507a9-195">Sie verwenden dazu <xref:System.ServiceModel.Channels.TransactionFlowBindingElement>. Damit können Sie den eingehenden Transaktionsfluss in der Bindungseinstellung eines Endpunkts aktivieren oder deaktivieren und das gewünschte Transaktionsprotokollformat für eingehende Transaktionen angeben.</span><span class="sxs-lookup"><span data-stu-id="507a9-195">This is achieved by the <xref:System.ServiceModel.Channels.TransactionFlowBindingElement>, which enables you to enable or disable incoming transaction flow in an endpoint’s binding settings, as well as to specify the desired transaction protocol format for incoming transactions.</span></span>  
  
 <span data-ttu-id="507a9-196">Wenn der Transaktionsfluss der Bindung deaktiviert ist, jedoch einer der Vorgänge eines Dienstvertrags eine eingehende Transaktion erfordert, wird beim Starten des Dienstes eine Validierungsausnahme ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="507a9-196">If the binding has disabled transaction flow, but one of the operations on a service contract requires an incoming transaction, then a validation exception is thrown at service startup.</span></span>  
  
 <span data-ttu-id="507a9-197">Die Bindungen WCF bietet enthalten die meisten der `transactionFlow` und `transactionProtocol` Attribute, um die spezielle Bindung für die Annahme eingehender Transaktionen konfigurieren können.</span><span class="sxs-lookup"><span data-stu-id="507a9-197">Most of the standing bindings WCF provides contain the `transactionFlow` and `transactionProtocol` attributes to enable you to configure the specific binding to accept incoming transactions.</span></span> <span data-ttu-id="507a9-198">Weitere Informationen zum Festlegen der Konfigurationselemente finden Sie unter [ \<Bindung >](../../../../docs/framework/misc/binding.md).</span><span class="sxs-lookup"><span data-stu-id="507a9-198">For more information about setting the configuration elements, see [\<binding>](../../../../docs/framework/misc/binding.md).</span></span>  
  
 <span data-ttu-id="507a9-199">Ein Administrator oder Bereitsteller kann den Transaktionsfluss auf Endpunktebene verwenden, um mithilfe der Konfigurationsdatei Transaktionsflussanforderungen oder Einschränkungen zur Bereitstellungszeit zu konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="507a9-199">An administrator or deployer can use endpoint-level transaction flow to configure transaction flow requirements or constraints at deployment time using the configuration file.</span></span>  
  
## <a name="security"></a><span data-ttu-id="507a9-200">Sicherheit</span><span class="sxs-lookup"><span data-stu-id="507a9-200">Security</span></span>  
 <span data-ttu-id="507a9-201">Sichern Sie den Nachrichtenaustausch während des Transaktionsflusses zwischen Anwendungen, um die Sicherheit und Integrität des Systems zu gewährleisten.</span><span class="sxs-lookup"><span data-stu-id="507a9-201">To ensure system security and integrity, you must secure message exchanges when flowing transactions between applications.</span></span> <span data-ttu-id="507a9-202">Übertragen oder vermitteln Sie keine Transaktionsdetails an Anwendungen, die nicht zur Teilnahme an derselben Transaktion berechtigt sind.</span><span class="sxs-lookup"><span data-stu-id="507a9-202">You should not flow or disclose transaction details to any application that is not entitled to participate in the same transaction.</span></span>  
  
 <span data-ttu-id="507a9-203">Beim Generieren von WCF-Clients an unbekannte oder nicht vertrauenswürdige Webdienste durch die Verwendung von Metadatenaustausch sollten Aufrufe von Vorgängen für diese Web-Dienste nach Möglichkeit die aktuelle Transaktion unterdrücken.</span><span class="sxs-lookup"><span data-stu-id="507a9-203">When generating WCF clients to unknown or untrusted Web services through the use of metadata exchange, calls to operations on these Web services should suppress the current transaction if possible.</span></span> <span data-ttu-id="507a9-204">Im folgenden Beispiel wird die dafür erforderliche Vorgehensweise veranschaulicht.</span><span class="sxs-lookup"><span data-stu-id="507a9-204">The following example demonstrates how to do this.</span></span>  
  
```  
//client code which has an ambient transaction  
using (TransactionScope scope = new TransactionScope(TransactionScopeOption.Suppress))  
{  
    // No transaction will flow to this operation  
    untrustedProxy.Operation1(...);  
    scope.Complete();  
}  
//remainder of client code  
```  
  
 <span data-ttu-id="507a9-205">Konfigurieren Sie Dienste außerdem so, dass sie eingehende Transaktionen nur von authentifizierten und autorisierten Clients akzeptieren.</span><span class="sxs-lookup"><span data-stu-id="507a9-205">In addition, services should be configured to accept incoming transactions only from clients that they have authenticated and authorized.</span></span> <span data-ttu-id="507a9-206">Eingehende Transaktionen sollten nur von absolut vertrauenswürdigen Clients angenommen werden.</span><span class="sxs-lookup"><span data-stu-id="507a9-206">Incoming transactions should only be accepted if they come from highly trusted clients.</span></span>  
  
## <a name="policy-assertions"></a><span data-ttu-id="507a9-207">Richtlinienassertionen</span><span class="sxs-lookup"><span data-stu-id="507a9-207">Policy Assertions</span></span>  
 <span data-ttu-id="507a9-208">WCF verwendet Richtlinienassertionen, um den Transaktionsfluss zu steuern.</span><span class="sxs-lookup"><span data-stu-id="507a9-208">WCF uses policy assertions to control transaction flow.</span></span> <span data-ttu-id="507a9-209">Richtlinienassertionen befinden sich im Richtliniendokument eines Dienstes, das durch Aggregation von Verträgen, Konfigurationen und Attributen generiert wird.</span><span class="sxs-lookup"><span data-stu-id="507a9-209">Policy assertions can be found in a service’s policy document, which is generated by aggregating contracts, configuration, and attributes.</span></span> <span data-ttu-id="507a9-210">Der Client kann das Richtliniendokument des Dienstes mit einem HTTP GET- oder WS-MetadataExchange-Anforderungs-/Anwortvorgang abrufen.</span><span class="sxs-lookup"><span data-stu-id="507a9-210">The client can obtain the service’s policy document using an HTTP GET or a WS-MetadataExchange request-reply.</span></span> <span data-ttu-id="507a9-211">Anschließend kann der Client das Richtliniendokument verarbeiten und ermitteln, welche Vorgänge zu einem Dienstvertrag einen Transaktionsfluss unterstützen oder erfordern.</span><span class="sxs-lookup"><span data-stu-id="507a9-211">Clients can then process the policy document to determine which operations on a service contract may support or require transaction flow.</span></span>  
  
 <span data-ttu-id="507a9-212">Transaktionsfluss-Richtlinienassertionen beeinflussen den Transaktionsfluss durch Angabe der SOAP-Header, die ein Client an einen Dienst senden muss, um eine Transaktion darzustellen.</span><span class="sxs-lookup"><span data-stu-id="507a9-212">Transaction flow policy assertions affect transaction flow by specifying the SOAP headers that a client should send to a service to represent a transaction.</span></span> <span data-ttu-id="507a9-213">Alle Transaktionsheader müssen mit`MustUnderstand` gleich `true` gekennzeichnet sein.</span><span class="sxs-lookup"><span data-stu-id="507a9-213">All transaction headers must be marked with `MustUnderstand` equal to `true`.</span></span> <span data-ttu-id="507a9-214">Jede Nachricht mit einem anders gekennzeichneten Header wird mit einem SOAP-Fehler abgelehnt.</span><span class="sxs-lookup"><span data-stu-id="507a9-214">Any message with a header marked otherwise is rejected with a SOAP fault.</span></span>  
  
 <span data-ttu-id="507a9-215">Für einen einzelnen Vorgang kann es nur eine transaktionsbezogene Richtlinienassertion geben.</span><span class="sxs-lookup"><span data-stu-id="507a9-215">Only one transaction-related policy assertion can be present on a single operation.</span></span> <span data-ttu-id="507a9-216">Richtliniendokumente mit mehreren transaktionsassertionen für einen Vorgang sind ungültig und werden von WCF abgelehnt.</span><span class="sxs-lookup"><span data-stu-id="507a9-216">Policy documents with more than one transaction assertion on an operation are considered invalid and are rejected by WCF.</span></span> <span data-ttu-id="507a9-217">Darüber hinaus kann nur ein einziges Transaktionsprotokoll in den einzelnen Anschlusstypen vorhanden sein.</span><span class="sxs-lookup"><span data-stu-id="507a9-217">In addition, only a single transaction protocol can be present inside each port type.</span></span> <span data-ttu-id="507a9-218">Richtliniendokumente mit Vorgängen, die mehr als ein Transaktionsprotokoll innerhalb eines einzelnen Anschlusstyps verweisen werden als ungültig betrachtet, und werden abgelehnt, durch die [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md).</span><span class="sxs-lookup"><span data-stu-id="507a9-218">Policy documents with operations referencing more than one transaction protocol inside a single port type are considered invalid, and are rejected by the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md).</span></span> <span data-ttu-id="507a9-219">Richtliniendokumente mit Transaktionsassertionen zu Ausgabenachrichten oder unidirektionalen Eingabenachrichten sind ebenfalls ungültig.</span><span class="sxs-lookup"><span data-stu-id="507a9-219">Policy documents with transaction assertions present on output messages or one-way input messages are also considered invalid.</span></span>
