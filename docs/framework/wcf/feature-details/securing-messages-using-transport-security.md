---
title: Sichern von Nachrichten mit Transportsicherheit
ms.date: 03/30/2017
ms.assetid: 9029771a-097e-448a-a13a-55d2878330b8
ms.openlocfilehash: b0507590914e2e8cda7e5e599914a9e3d7b0acd0
ms.sourcegitcommit: 68653db98c5ea7744fd438710248935f70020dfb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/22/2019
ms.locfileid: "69911709"
---
# <a name="securing-messages-using-transport-security"></a><span data-ttu-id="2250b-102">Sichern von Nachrichten mit Transportsicherheit</span><span class="sxs-lookup"><span data-stu-id="2250b-102">Securing Messages Using Transport Security</span></span>
<span data-ttu-id="2250b-103">In diesem Abschnitt wird die Message Queuing (MSMQ)-Transportsicherheit näher erläutert, mit der Sie an eine Warteschlange gesendete Nachrichten sichern können.</span><span class="sxs-lookup"><span data-stu-id="2250b-103">This section discusses Message Queuing (MSMQ) transport security that you can use to secure messages sent to a queue.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="2250b-104">Bevor Sie dieses Thema lesen, empfiehlt es sich, [Sicherheitskonzepte](../../../../docs/framework/wcf/feature-details/security-concepts.md)zu lesen.</span><span class="sxs-lookup"><span data-stu-id="2250b-104">Before reading through this topic, it is recommended that you read [Security Concepts](../../../../docs/framework/wcf/feature-details/security-concepts.md).</span></span>  
  
 <span data-ttu-id="2250b-105">Die folgende Abbildung stellt ein konzeptionelles Modell der in der Warteschlange befindlichen Kommunikation mithilfe von Windows Communication Foundation (WCF) bereit.</span><span class="sxs-lookup"><span data-stu-id="2250b-105">The following illustration provides a conceptual model of queued communication using Windows Communication Foundation (WCF).</span></span> <span data-ttu-id="2250b-106">Diese Abbildung und die Terminologie dienen zum Beschreiben von Transportsicherheitskonzepten:</span><span class="sxs-lookup"><span data-stu-id="2250b-106">This illustration and terminology is used to explain transport security concepts.</span></span>  
  
 <span data-ttu-id="2250b-107">![Anwendungs Diagramm in der Warteschlange](../../../../docs/framework/wcf/feature-details/media/distributed-queue-figure.jpg "Verteilte Warteschlange: Abbildung")</span><span class="sxs-lookup"><span data-stu-id="2250b-107">![Queued Application Diagram](../../../../docs/framework/wcf/feature-details/media/distributed-queue-figure.jpg "Distributed-Queue-Figure")</span></span>  
  
 <span data-ttu-id="2250b-108">Beim Senden von Nachrichten in der Warte <xref:System.ServiceModel.NetMsmqBinding>Schlange mithilfe von WCF mit wird die WCF-Nachricht als Text der MSMQ-Nachricht angefügt.</span><span class="sxs-lookup"><span data-stu-id="2250b-108">When sending queued messages using WCF with <xref:System.ServiceModel.NetMsmqBinding>, the WCF message is attached as a body of the MSMQ message.</span></span> <span data-ttu-id="2250b-109">Mit der Transportsicherheit wird die gesamte MSMQ-Nachricht (MSMQ-Nachrichtenheader oder Nachrichteneigenschaften und der Textkörper) gesichert.</span><span class="sxs-lookup"><span data-stu-id="2250b-109">Transport security secures the entire MSMQ message (MSMQ message headers or properties and the message body).</span></span> <span data-ttu-id="2250b-110">Da es sich um den Text der MSMQ-Nachricht handelt, wird durch die Verwendung der Transportsicherheit auch die WCF-Nachricht gesichert.</span><span class="sxs-lookup"><span data-stu-id="2250b-110">Because it is the body of the MSMQ message, using transport security also secures the WCF message.</span></span>  
  
 <span data-ttu-id="2250b-111">Das Kernkonzept hinter der Transportsicherheit besteht darin, dass der Client die Sicherheitsanforderungen erfüllen muss, um die Nachricht in die Zielwarteschlange zu stellen.</span><span class="sxs-lookup"><span data-stu-id="2250b-111">The key concept behind transport security is that the client has to meet security requirements to get the message to the target queue.</span></span> <span data-ttu-id="2250b-112">Bei der Nachrichtensicherheit hingegen wird die Nachricht für die Anwendung gesichert, die die Nachricht empfängt.</span><span class="sxs-lookup"><span data-stu-id="2250b-112">This is unlike Message security, where the message is secured for the application that receives the message.</span></span>  
  
 <span data-ttu-id="2250b-113">Durch den Einsatz der Transportsicherheit mit <xref:System.ServiceModel.NetMsmqBinding> und <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding> wird bestimmt, wie MSMQ-Nachrichten bei der Übertragung von der Übertragungswarteschlange zur Zielwarteschlange gesichert werden. Sicherheit bedeutet hier:</span><span class="sxs-lookup"><span data-stu-id="2250b-113">Transport security using <xref:System.ServiceModel.NetMsmqBinding> and <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding> impacts how MSMQ messages are secured in-transit between the transmission queue and the target queue where secured implies:</span></span>  
  
- <span data-ttu-id="2250b-114">Signieren der Nachricht, um sicherzustellen, dass sie nicht verfälscht wurde.</span><span class="sxs-lookup"><span data-stu-id="2250b-114">Signing the message to ensure it is not tampered with.</span></span>  
  
- <span data-ttu-id="2250b-115">Verschlüsseln der Nachricht, um sicherzustellen, dass sie nicht angezeigt oder verfälscht werden kann.</span><span class="sxs-lookup"><span data-stu-id="2250b-115">Encrypting the message to ensure that it cannot be seen or tampered with.</span></span> <span data-ttu-id="2250b-116">Dies wird empfohlen, ist jedoch optional.</span><span class="sxs-lookup"><span data-stu-id="2250b-116">This is recommended but optional.</span></span>  
  
- <span data-ttu-id="2250b-117">Der Zielwarteschlangenmanager, der überprüft, dass der Sender der Nachricht wirklich der Absender ist.</span><span class="sxs-lookup"><span data-stu-id="2250b-117">The target queue manager that identifies the sender of the message for non-repudiation.</span></span>  
  
 <span data-ttu-id="2250b-118">In MSMQ hat die Zielwarteschlange, unabhängig von der Authentifizierung, eine Access Control List (ACL), anhand der überprüft wird, ob der Client die Berechtigung hat, die Nachricht an die Zielwarteschlange zu senden.</span><span class="sxs-lookup"><span data-stu-id="2250b-118">In MSMQ, independent of authentication, the target queue has an access control list (ACL) to check whether the client has permission to send the message to the target queue.</span></span> <span data-ttu-id="2250b-119">Die Empfängeranwendung wird ebenfalls daraufhin überprüft, ob sie die Berechtigung hat, die Nachricht aus der Zielwarteschlange zu empfangen.</span><span class="sxs-lookup"><span data-stu-id="2250b-119">The receiving application is also checked for permission to receive the message from the target queue.</span></span>  
  
## <a name="wcf-msmq-transport-security-properties"></a><span data-ttu-id="2250b-120">WCF MSMQ-Transportsicherheitseigenschaften</span><span class="sxs-lookup"><span data-stu-id="2250b-120">WCF MSMQ Transport Security Properties</span></span>  
 <span data-ttu-id="2250b-121">MSMQ verwendet bei der Authentifizierung die Windows-Sicherheit.</span><span class="sxs-lookup"><span data-stu-id="2250b-121">MSMQ uses Windows security for authentication.</span></span> <span data-ttu-id="2250b-122">Es verwendet die Windows-Sicherheits-ID (SID), um den Client zu identifizieren, und nutzt beim Authentifizieren des Clients den Active Directory-Verzeichnisdienst als Zertifizierungsstelle.</span><span class="sxs-lookup"><span data-stu-id="2250b-122">It uses the Windows security identifier (SID) to identify the client and uses Active Directory directory service as the certificate authority when authenticating the client.</span></span> <span data-ttu-id="2250b-123">Dabei muss MSMQ mit Active Directory-Integration installiert sein.</span><span class="sxs-lookup"><span data-stu-id="2250b-123">This requires MSMQ to be installed with Active Directory integration.</span></span> <span data-ttu-id="2250b-124">Da die Windows-Domänen-SID zum Identifizieren des Clients verwendet wird, ist diese Sicherheitsoption nur dann sinnvoll, wenn der Client und der Dienst Teil der gleichen Windows-Domäne sind.</span><span class="sxs-lookup"><span data-stu-id="2250b-124">Because the Windows domain SID is used to identify the client, this security option is only meaningful when both the client and service are part of the same Windows domain.</span></span>  
  
 <span data-ttu-id="2250b-125">MSMQ bietet zudem die Möglichkeit, ein Zertifikat an die Nachricht, die nicht beim Active Directory registriert ist, anzuhängen.</span><span class="sxs-lookup"><span data-stu-id="2250b-125">MSMQ also provides the ability to attach a certificate with the message that is not registered with Active Directory.</span></span> <span data-ttu-id="2250b-126">In diesem Fall wird dadurch sichergestellt, dass die Nachricht mit dem angehängten Zertifikat signiert wurde.</span><span class="sxs-lookup"><span data-stu-id="2250b-126">In this case, it ensures that the message was signed using the attached certificate.</span></span>  
  
 <span data-ttu-id="2250b-127">WCF stellt diese beiden Optionen als Teil der MSMQ-Transportsicherheit bereit und ist der Schlüssel Pivot für die Transportsicherheit.</span><span class="sxs-lookup"><span data-stu-id="2250b-127">WCF provides both these options as part of MSMQ transport security and they are the key pivot for transport security.</span></span>  
  
 <span data-ttu-id="2250b-128">Die Transportsicherheit ist standardmäßig aktiviert.</span><span class="sxs-lookup"><span data-stu-id="2250b-128">By default, transport security is turned on.</span></span>  
  
 <span data-ttu-id="2250b-129">Auf diesen Grundlagen basierend werden in den folgenden Abschnitten die Transportsicherheitseigenschaften gebündelt mit <xref:System.ServiceModel.NetMsmqBinding> und <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding> näher vorgestellt.</span><span class="sxs-lookup"><span data-stu-id="2250b-129">Given these basics, the following sections detail transport security properties bundled with <xref:System.ServiceModel.NetMsmqBinding> and <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding>.</span></span>  
  
#### <a name="msmq-authentication-mode"></a><span data-ttu-id="2250b-130">MSMQ-Authentifizierungsmodus</span><span class="sxs-lookup"><span data-stu-id="2250b-130">MSMQ Authentication Mode</span></span>  
 <span data-ttu-id="2250b-131">Der <xref:System.ServiceModel.MsmqTransportSecurity.MsmqAuthenticationMode%2A> bestimmt, ob die Windows-Domänensicherheit oder eine externe Zertifikats-basierte Sicherheit zum Sichern der Nachricht verwendet werden soll.</span><span class="sxs-lookup"><span data-stu-id="2250b-131">The <xref:System.ServiceModel.MsmqTransportSecurity.MsmqAuthenticationMode%2A> dictates whether to use the Windows domain security or an external certificate-based security to secure the message.</span></span> <span data-ttu-id="2250b-132">In beiden Authentifizierungs Modi verwendet der WCF-Transport in der Warteschlange `CertificateValidationMode` den in der Dienst Konfiguration angegebenen.</span><span class="sxs-lookup"><span data-stu-id="2250b-132">In both authentication modes, the WCF queued transport channel uses the `CertificateValidationMode` specified in the service configuration.</span></span> <span data-ttu-id="2250b-133">Der Zertifikatsvalidierungsmodus legt den zu verwendenden Mechanismus fest, um die Gültigkeit des Zertifikats zu überprüfen.</span><span class="sxs-lookup"><span data-stu-id="2250b-133">The certificate validation mode specifies the mechanism used to check the validity of the certificate.</span></span>  
  
 <span data-ttu-id="2250b-134">Wenn die Transportsicherheit aktiviert ist, ist die Standardeinstellung <xref:System.ServiceModel.MsmqAuthenticationMode.WindowsDomain>.</span><span class="sxs-lookup"><span data-stu-id="2250b-134">When transport security is turned on, the default setting is <xref:System.ServiceModel.MsmqAuthenticationMode.WindowsDomain>.</span></span>  
  
#### <a name="windows-domain-authentication-mode"></a><span data-ttu-id="2250b-135">Windows-Domänenauthentifizierungsmodus</span><span class="sxs-lookup"><span data-stu-id="2250b-135">Windows Domain Authentication Mode</span></span>  
 <span data-ttu-id="2250b-136">Um die Windows-Sicherheit verwenden zu können, ist die Active Directory-Integration erforderlich.</span><span class="sxs-lookup"><span data-stu-id="2250b-136">The choice of using Windows security requires Active Directory integration.</span></span> <span data-ttu-id="2250b-137"><xref:System.ServiceModel.MsmqAuthenticationMode.WindowsDomain> ist der standardmäßige Transportsicherheitsmodus.</span><span class="sxs-lookup"><span data-stu-id="2250b-137"><xref:System.ServiceModel.MsmqAuthenticationMode.WindowsDomain> is the default transport security mode.</span></span> <span data-ttu-id="2250b-138">Wenn dies festgelegt ist, fügt der WCF-Kanal die Windows-SID an die MSMQ-Nachricht an und verwendet das interne Zertifikat, das aus Active Directory abgerufen wurde.</span><span class="sxs-lookup"><span data-stu-id="2250b-138">When this is set, the WCF channel attaches the Windows SID to the MSMQ message and uses its internal certificate obtained from Active Directory.</span></span> <span data-ttu-id="2250b-139">MSMQ verwendet dieses interne Zertifikat, um die Nachricht zu sichern.</span><span class="sxs-lookup"><span data-stu-id="2250b-139">MSMQ uses this internal certificate to secure the message.</span></span> <span data-ttu-id="2250b-140">Der Warteschlangenmanager, der die Nachricht empfängt, verwendet Active Directory, um ein entsprechendes Zertifikat zu suchen, mit dem der Client authentifiziert werden kann. Zugleich wird dadurch überprüft, dass die SID auch der des Clients entspricht.</span><span class="sxs-lookup"><span data-stu-id="2250b-140">The receiving queue manager uses Active Directory to search and find a matching certificate to authenticate the client and checks that the SID also matches that of the client.</span></span> <span data-ttu-id="2250b-141">Dieser Authentifizierungsschritt wird ausgeführt, wenn ein Zertifikat, sei es intern erstellt worden wie im Fall des `WindowsDomain`-Authentifizierungsmodus, oder extern wie im Fall des `Certificate`-Authentifizierungsmodus, an die Nachricht angehängt wird, selbst wenn für die Zielwarteschlange nicht festgelegt wurde, dass eine Authentifizierung notwendig ist.</span><span class="sxs-lookup"><span data-stu-id="2250b-141">This authentication step is executed if a certificate, either internally generated in the case of `WindowsDomain` authentication mode or externally generated in the case of `Certificate` authentication mode, is attached to the message even if the target queue is not marked as requiring authentication.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="2250b-142">Beim Erstellen einer Warteschlange können Sie die Warteschlange als authentifizierte Warteschlange kennzeichnen, um anzugeben, dass für die Warteschlange eine Authentifizierung des Clients, der die Nachricht an die Warteschlange sendet, erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="2250b-142">When creating a queue, you can mark the queue as an authenticated queue to indicate that the queue requires authentication of the client sending messages to the queue.</span></span> <span data-ttu-id="2250b-143">Dadurch wird sichergestellt, dass keine nicht authentifizierten Nachrichten in die Warteschlange aufgenommen werden.</span><span class="sxs-lookup"><span data-stu-id="2250b-143">This ensures that no unauthenticated messages are accepted in the queue.</span></span>  
  
 <span data-ttu-id="2250b-144">Die an die Nachricht angehängte SID wird ebenfalls zum Überprüfen der Zielwarteschlange anhand der ACL verwendet, um sicherzustellen, dass der Client die Berechtigung hat, die Nachrichten an die Warteschlange zu senden.</span><span class="sxs-lookup"><span data-stu-id="2250b-144">The SID attached with the message is also used to check against the target queue's ACL to ensure that the client has the authority to send messages to the queue.</span></span>  
  
#### <a name="certificate-authentication-mode"></a><span data-ttu-id="2250b-145">Zertifikatsauthentifizierungsmodus</span><span class="sxs-lookup"><span data-stu-id="2250b-145">Certificate Authentication Mode</span></span>  
 <span data-ttu-id="2250b-146">Für den Zertifikatsauthentifizierungsmodus ist keine Active Directory-Integration erforderlich.</span><span class="sxs-lookup"><span data-stu-id="2250b-146">The choice of using certificate authentication mode does not require Active Directory integration.</span></span> <span data-ttu-id="2250b-147">In einigen Fällen, z. B. wenn MSMQ im Arbeitsgruppenmodus installiert ist (ohne Active Directory-Integration) oder wenn zum Senden von Nachrichten an die Warteschlange das SOAP Reliable Messaging Protocol (SRMP)-Übertragungsprotokoll verwendet wird, kann nur der <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate> eingesetzt werden.</span><span class="sxs-lookup"><span data-stu-id="2250b-147">In fact, in some cases, such as when MSMQ is installed in workgroup mode (without Active Directory integration) or when using the SOAP Reliable Messaging Protocol (SRMP) transfer protocol to send messages to the queue, only <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate> works.</span></span>  
  
 <span data-ttu-id="2250b-148">Beim Senden einer WCF-Nachricht <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate>mit fügt der WCF-Kanal keine Windows-SID an die MSMQ-Nachricht an.</span><span class="sxs-lookup"><span data-stu-id="2250b-148">When sending a WCF message with <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate>, the WCF channel does not attach a Windows SID to the MSMQ message.</span></span> <span data-ttu-id="2250b-149">Daher muss die Zielwarteschlangen-ACL den `Anonymous` Benutzerzugriff zum Senden an die Warteschlange zulassen.</span><span class="sxs-lookup"><span data-stu-id="2250b-149">As such, the target queue ACL must allow for `Anonymous` user access to send to the queue.</span></span> <span data-ttu-id="2250b-150">Der empfangende Warteschlangenmanager überprüft, ob die MSMQ-Nachricht mit dem Zertifikat signiert wurde, führt jedoch keine Authentifizierung durch.</span><span class="sxs-lookup"><span data-stu-id="2250b-150">The receiving queue manager checks whether the MSMQ message was signed with the certificate but does not perform any authentication.</span></span>  
  
 <span data-ttu-id="2250b-151">Das Zertifikat mit seinen Ansprüchen und Identitätsinformationen wird vom WCF- <xref:System.ServiceModel.ServiceSecurityContext> Transport Kanal in der Warteschlange aufgefüllt.</span><span class="sxs-lookup"><span data-stu-id="2250b-151">The certificate with its claims and identity information is populated in the <xref:System.ServiceModel.ServiceSecurityContext> by the WCF queued transport channel.</span></span> <span data-ttu-id="2250b-152">Der Dienst kann diese Informationen zum Durchführen der eigenen Authentifizierung des Absenders verwenden.</span><span class="sxs-lookup"><span data-stu-id="2250b-152">The service can use this information to perform its own authentication of the sender.</span></span>  
  
### <a name="msmq-protection-level"></a><span data-ttu-id="2250b-153">MSMQ-Schutzebene</span><span class="sxs-lookup"><span data-stu-id="2250b-153">MSMQ Protection Level</span></span>  
 <span data-ttu-id="2250b-154">Die Schutzebene bestimmt, wie die MSMQ-Nachricht geschützt werden soll, um sicherzustellen, dass sie nicht manipuliert wird.</span><span class="sxs-lookup"><span data-stu-id="2250b-154">The protection level dictates how to protect the MSMQ message to ensure that it is not tampered with.</span></span> <span data-ttu-id="2250b-155">Sie wird in der <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A>-Eigenschaft angegeben.</span><span class="sxs-lookup"><span data-stu-id="2250b-155">It is specified in the <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> property.</span></span> <span data-ttu-id="2250b-156">Der Standardwert ist <xref:System.Net.Security.ProtectionLevel.Sign>.</span><span class="sxs-lookup"><span data-stu-id="2250b-156">The default value is <xref:System.Net.Security.ProtectionLevel.Sign>.</span></span>  
  
#### <a name="sign-protection-level"></a><span data-ttu-id="2250b-157">Signatur-Schutzebene</span><span class="sxs-lookup"><span data-stu-id="2250b-157">Sign Protection Level</span></span>  
 <span data-ttu-id="2250b-158">Die MSMQ-Nachricht wird mit dem intern generierten Zertifikat im `WindowsDomain`-Authentifizierungsmodus bzw. mit einem extern generierten Zertifikat im `Certificate`-Authentifizierungsmodus signiert.</span><span class="sxs-lookup"><span data-stu-id="2250b-158">The MSMQ message is signed using the internally generated certificate when using `WindowsDomain` authentication mode or an externally generated certificate when using `Certificate` authentication mode.</span></span>  
  
#### <a name="sign-and-encrypt-protection-level"></a><span data-ttu-id="2250b-159">Signatur- und Verschlüsselsungsschutzebene</span><span class="sxs-lookup"><span data-stu-id="2250b-159">Sign and Encrypt Protection Level</span></span>  
 <span data-ttu-id="2250b-160">Die MSMQ-Nachricht wird mit dem intern generierten Zertifikat im `WindowsDomain`-Authentifizierungsmodus bzw. mit einem extern generierten Zertifikat im `Certificate`-Authentifizierungsmodus signiert.</span><span class="sxs-lookup"><span data-stu-id="2250b-160">The MSMQ message is signed using the internally generated certificate when using `WindowsDomain` authentication mode or externally generated certificate when using `Certificate` authentication mode.</span></span>  
  
 <span data-ttu-id="2250b-161">Zusätzlich zum Signieren der Nachricht wird die MSMQ-Nachricht mit dem öffentlichen Schlüssel des Zertifikats aus Active Directory verschlüsselt, das zum empfangenden Warteschlangenmanager gehört, der Host der Zielwarteschlange ist.</span><span class="sxs-lookup"><span data-stu-id="2250b-161">In addition to signing the message, the MSMQ message is encrypted using the public key of the certificate obtained from Active Directory that belongs to the receiving queue manager that hosts the target queue.</span></span> <span data-ttu-id="2250b-162">Der sendende Warteschlangenmanager stellt sicher, dass die MSMQ-Nachricht bei der Übertragung verschlüsselt ist.</span><span class="sxs-lookup"><span data-stu-id="2250b-162">The sending queue manager ensures that the MSMQ message is encrypted in transit.</span></span> <span data-ttu-id="2250b-163">Der empfangende Warteschlangenmanager verschlüsselt die MSMQ-Nachricht mit dem privaten Schlüssel des internen Zertifikats und speichert die Nachricht in der Warteschlange (bei Authentifizierung und Autorisierung) als Klartext.</span><span class="sxs-lookup"><span data-stu-id="2250b-163">The receiving queue manager decrypts the MSMQ message using the private key of its internal certificate and stores the message in the queue (if authenticated and authorized) in clear text.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="2250b-164">Zum Verschlüsseln der Nachricht ist ein Active Directory-Zugriff erforderlich (`UseActiveDirectory`-Eigenschaft von <xref:System.ServiceModel.NetMsmqBinding> muss auf `true` festgelegt werden), der wiederum mit <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate> und <xref:System.ServiceModel.MsmqAuthenticationMode.WindowsDomain> verwendet werden kann.</span><span class="sxs-lookup"><span data-stu-id="2250b-164">To encrypt the message, Active Directory access is required (`UseActiveDirectory` property of <xref:System.ServiceModel.NetMsmqBinding> must be set to `true`) and can be used with both <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate> and <xref:System.ServiceModel.MsmqAuthenticationMode.WindowsDomain>.</span></span>  
  
#### <a name="none-protection-level"></a><span data-ttu-id="2250b-165">Ohne Schutzebene</span><span class="sxs-lookup"><span data-stu-id="2250b-165">None Protection Level</span></span>  
 <span data-ttu-id="2250b-166">Dies wird impliziert, wenn <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> auf <xref:System.Net.Security.ProtectionLevel.None> festgelegt wurde.</span><span class="sxs-lookup"><span data-stu-id="2250b-166">This is implied when <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> is set to <xref:System.Net.Security.ProtectionLevel.None>.</span></span> <span data-ttu-id="2250b-167">Dies ist kein gültiger Wert für andere Authentifizierungsmodi.</span><span class="sxs-lookup"><span data-stu-id="2250b-167">This cannot be a valid value for any other authentication modes.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="2250b-168">Wenn die MSMQ-Nachricht signiert wurde, überprüft MSMQ, ob die Nachricht mit dem angehängten Zertifikat (intern oder extern), das vom Status der Warteschlange (authentifiziert oder nicht authentifiziert) unabhängig ist, signiert wurde.</span><span class="sxs-lookup"><span data-stu-id="2250b-168">If the MSMQ message is signed, MSMQ checks whether the message is signed with the attached certificate (internal or external) independent of the state of the queue, that is, authenticated queue or not.</span></span>  
  
### <a name="msmq-encryption-algorithm"></a><span data-ttu-id="2250b-169">MSMQ-Verschlüsselungsalgorithmus</span><span class="sxs-lookup"><span data-stu-id="2250b-169">MSMQ Encryption Algorithm</span></span>  
 <span data-ttu-id="2250b-170">Der Verschlüsselungsalgorithmus gibt den Algorithmus an, mit dem die MSMQ-Nachricht bei der Übertragung verschlüsselt werden soll.</span><span class="sxs-lookup"><span data-stu-id="2250b-170">The encryption algorithm specifies the algorithm to use to encrypt the MSMQ message on the wire.</span></span> <span data-ttu-id="2250b-171">Diese Eigenschaft wird nur verwendet, wenn <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> auf <xref:System.Net.Security.ProtectionLevel.EncryptAndSign> festgelegt wurde.</span><span class="sxs-lookup"><span data-stu-id="2250b-171">This property is used only if <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> is set to <xref:System.Net.Security.ProtectionLevel.EncryptAndSign>.</span></span>  
  
 <span data-ttu-id="2250b-172">Unterstützte Algorithmen sind:`RC4Stream` und `AES`, wobei `RC4Stream` der Standardwert ist.</span><span class="sxs-lookup"><span data-stu-id="2250b-172">The supported algorithms are `RC4Stream` and `AES` and the default is `RC4Stream`.</span></span>  
  
 <span data-ttu-id="2250b-173">Sie können den `AES`-Algorithmus nur verwenden, wenn der Sender MSMQ 4.0 installiert hat.</span><span class="sxs-lookup"><span data-stu-id="2250b-173">You can use the `AES` algorithm only if the sender has MSMQ 4.0 installed.</span></span> <span data-ttu-id="2250b-174">Darüber hinaus muss die Zielwarteschlange auf MSMQ 4.0 gehostet werden.</span><span class="sxs-lookup"><span data-stu-id="2250b-174">In addition, the target queue must also be hosted on MSMQ 4.0.</span></span>  
  
### <a name="msmq-hash-algorithm"></a><span data-ttu-id="2250b-175">MSMQ-Hashalgorithmus</span><span class="sxs-lookup"><span data-stu-id="2250b-175">MSMQ Hash Algorithm</span></span>  
 <span data-ttu-id="2250b-176">Der Hashalgorithmus bestimmt den Algorithmus, mit dem eine digitale Signatur der MSMQ-Nachricht erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="2250b-176">The hash algorithm specifies the algorithm used to create a digital signature of the MSMQ message.</span></span> <span data-ttu-id="2250b-177">Der empfangende Warteschlangenmanager verwendet den gleichen Algorithmus zum Authentifizieren der MSMQ-Nachricht.</span><span class="sxs-lookup"><span data-stu-id="2250b-177">The receiving queue manager uses this same algorithm to authenticate the MSMQ message.</span></span> <span data-ttu-id="2250b-178">Diese Eigenschaft wird nur verwendet, wenn <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> auf <xref:System.Net.Security.ProtectionLevel.Sign> oder <xref:System.Net.Security.ProtectionLevel.EncryptAndSign> festgelegt wurde.</span><span class="sxs-lookup"><span data-stu-id="2250b-178">This property is used only if <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> is set to <xref:System.Net.Security.ProtectionLevel.Sign> or <xref:System.Net.Security.ProtectionLevel.EncryptAndSign>.</span></span>  
  
 <span data-ttu-id="2250b-179">Es werden die folgenden Algorithmen unterstützt: `MD5`, `SHA1`, `SHA256` und `SHA512`.</span><span class="sxs-lookup"><span data-stu-id="2250b-179">The supported algorithms are `MD5`, `SHA1`, `SHA256`, and `SHA512`.</span></span> <span data-ttu-id="2250b-180">Die Standardeinstellung ist `SHA1`.</span><span class="sxs-lookup"><span data-stu-id="2250b-180">The default is `SHA1`.</span></span>

 <span data-ttu-id="2250b-181">Aufgrund von Konnektivitätsproblemen mit MD5/SHA1 empfiehlt Microsoft SHA256 oder eine bessere.</span><span class="sxs-lookup"><span data-stu-id="2250b-181">Due to collision problems with MD5/SHA1, Microsoft recommends SHA256 or better.</span></span>
  
## <a name="see-also"></a><span data-ttu-id="2250b-182">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="2250b-182">See also</span></span>

- [<span data-ttu-id="2250b-183">Warteschlangenübersicht</span><span class="sxs-lookup"><span data-stu-id="2250b-183">Queues Overview</span></span>](queues-overview.md)
- [<span data-ttu-id="2250b-184">Begriffe der Sicherheit</span><span class="sxs-lookup"><span data-stu-id="2250b-184">Security Concepts</span></span>](../../../../docs/framework/wcf/feature-details/security-concepts.md)
- [<span data-ttu-id="2250b-185">Sichern von Diensten und Clients</span><span class="sxs-lookup"><span data-stu-id="2250b-185">Securing Services and Clients</span></span>](../../../../docs/framework/wcf/feature-details/securing-services-and-clients.md)
