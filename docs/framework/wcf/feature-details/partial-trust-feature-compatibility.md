---
title: Funktionskompatibilität für teilweise Vertrauenswürdigkeit
ms.date: 03/30/2017
ms.assetid: a36a540b-1606-4e63-88e0-b7c59e0e6ab7
ms.openlocfilehash: b0d9b7bd8bd5f33ca344ea5674d08507ced209f5
ms.sourcegitcommit: 9b552addadfb57fab0b9e7852ed4f1f1b8a42f8e
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 04/23/2019
ms.locfileid: "62039064"
---
# <a name="partial-trust-feature-compatibility"></a><span data-ttu-id="0e086-102">Funktionskompatibilität für teilweise Vertrauenswürdigkeit</span><span class="sxs-lookup"><span data-stu-id="0e086-102">Partial Trust Feature Compatibility</span></span>
<span data-ttu-id="0e086-103">Windows Communication Foundation (WCF) unterstützt eine begrenzte Teilmenge der Funktionen auf, wenn in einer teilweise vertrauenswürdigen Umgebung ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="0e086-103">Windows Communication Foundation (WCF) supports a limited subset of functionality when running in a partially-trusted environment.</span></span> <span data-ttu-id="0e086-104">Die in einer teilweise vertrauenswürdigen Umgebung unterstützten Funktionen sind, wie im Thema [Supported Deployment Scenarios](../../../../docs/framework/wcf/feature-details/supported-deployment-scenarios.md) beschrieben, für einen speziellen Satz von Szenarios konzipiert.</span><span class="sxs-lookup"><span data-stu-id="0e086-104">The features supported in partial trust are designed around a specific set of scenarios as described in the [Supported Deployment Scenarios](../../../../docs/framework/wcf/feature-details/supported-deployment-scenarios.md) topic.</span></span>  
  
## <a name="minimum-permission-requirements"></a><span data-ttu-id="0e086-105">Minimal erforderliche Berechtigungen</span><span class="sxs-lookup"><span data-stu-id="0e086-105">Minimum Permission Requirements</span></span>  
 <span data-ttu-id="0e086-106">WCF unterstützt eine Teilmenge von Funktionen in Anwendungen, die in eines der folgenden benannten Standardberechtigungssätze ausgeführt:</span><span class="sxs-lookup"><span data-stu-id="0e086-106">WCF supports a subset of features in applications running under either of the following standard named permission sets:</span></span>  
  
- <span data-ttu-id="0e086-107">Berechtigungen für mittlere Vertrauenswürdigkeit</span><span class="sxs-lookup"><span data-stu-id="0e086-107">Medium Trust permissions</span></span>  
  
- <span data-ttu-id="0e086-108">Internetzonenberechtigungen</span><span class="sxs-lookup"><span data-stu-id="0e086-108">Internet Zone permissions</span></span>  
  
 <span data-ttu-id="0e086-109">Es wird versucht, WCF in teilweise vertrauenswürdigen Anwendungen mit strikteren Berechtigungen zu verwenden, kann zur Laufzeit zu Sicherheitsausnahmen führen.</span><span class="sxs-lookup"><span data-stu-id="0e086-109">Attempting to use WCF in partially-trusted applications with more restrictive permissions may result in security exceptions at runtime.</span></span>  
  
## <a name="contracts"></a><span data-ttu-id="0e086-110">Verträge</span><span class="sxs-lookup"><span data-stu-id="0e086-110">Contracts</span></span>  
 <span data-ttu-id="0e086-111">Beim Ausführen in teilweise vertrauenswürdigen Umgebungen unterliegen Verträge den folgenden Einschränkungen:</span><span class="sxs-lookup"><span data-stu-id="0e086-111">Contracts are subject to the following restrictions when running under partial trust:</span></span>  
  
- <span data-ttu-id="0e086-112">Die Dienstklasse, durch die die `[ServiceContract]` -Schnittstelle implementiert wird, muss `public` sein und über einen `public` -Konstruktor verfügen.</span><span class="sxs-lookup"><span data-stu-id="0e086-112">The service class that implements the `[ServiceContract]` interface must be `public` and have a `public` constructor.</span></span> <span data-ttu-id="0e086-113">Werden `[OperationContract]` -Methoden definiert, müssen diese `public`sein.</span><span class="sxs-lookup"><span data-stu-id="0e086-113">If it defines `[OperationContract]` methods, these must be `public`.</span></span> <span data-ttu-id="0e086-114">Wird stattdessen eine `[ServiceContract]` -Schnittstelle implementiert, können diese Methodenimplementierungen explizit oder `private`sein, vorausgesetzt, die `[ServiceContract]` -Schnittstelle ist `public`.</span><span class="sxs-lookup"><span data-stu-id="0e086-114">If it instead implements a `[ServiceContract]` interface, those method implementations can be explicit or `private`, provided that the `[ServiceContract]` interface is `public`.</span></span>  
  
- <span data-ttu-id="0e086-115">Bei Verwendung des `[ServiceKnownType]` -Attributs muss die angegebene Methode `public`sein.</span><span class="sxs-lookup"><span data-stu-id="0e086-115">When using the `[ServiceKnownType]` attribute, the method specified must be `public`.</span></span>  
  
- <span data-ttu-id="0e086-116">`[MessageContract]` -Klassen und ihre Member können `public`sein.</span><span class="sxs-lookup"><span data-stu-id="0e086-116">`[MessageContract]` classes and their members can be `public`.</span></span> <span data-ttu-id="0e086-117">Ist in der Anwendungsassembly die `[MessageContract]` -Klasse definiert, kann diese `internal` sein und Member vom Typ `internal` besitzen.</span><span class="sxs-lookup"><span data-stu-id="0e086-117">If the `[MessageContract]` class is defined in the application assembly it can be `internal` and have `internal` members.</span></span>  
  
## <a name="system-provided-bindings"></a><span data-ttu-id="0e086-118">Vom System bereitgestellte Bindungen</span><span class="sxs-lookup"><span data-stu-id="0e086-118">System-Provided Bindings</span></span>  
 <span data-ttu-id="0e086-119">Sowohl <xref:System.ServiceModel.BasicHttpBinding> als auch <xref:System.ServiceModel.WebHttpBinding> werden in einer teilweise vertrauenswürdigen Umgebung vollständig unterstützt.</span><span class="sxs-lookup"><span data-stu-id="0e086-119">The <xref:System.ServiceModel.BasicHttpBinding> and <xref:System.ServiceModel.WebHttpBinding> are fully supported in a partial trust environment.</span></span> <span data-ttu-id="0e086-120"><xref:System.ServiceModel.WSHttpBinding> wird nur für den Transportsicherheitsmodus unterstützt.</span><span class="sxs-lookup"><span data-stu-id="0e086-120">The <xref:System.ServiceModel.WSHttpBinding> is supported for Transport security mode only.</span></span>  
  
 <span data-ttu-id="0e086-121">Bindungen, die andere Transportoptionen als HTTP verwenden, etwa <xref:System.ServiceModel.NetTcpBinding>, <xref:System.ServiceModel.NetNamedPipeBinding>oder <xref:System.ServiceModel.NetMsmqBinding>, werden in einer teilweise vertrauenswürdigen Umgebung nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="0e086-121">Bindings that use transports other than HTTP, such as the <xref:System.ServiceModel.NetTcpBinding>, the <xref:System.ServiceModel.NetNamedPipeBinding>, or the <xref:System.ServiceModel.NetMsmqBinding>, are not supported when running in a partial trust environment.</span></span>  
  
## <a name="custom-bindings"></a><span data-ttu-id="0e086-122">Benutzerdefinierte Bindungen</span><span class="sxs-lookup"><span data-stu-id="0e086-122">Custom Bindings</span></span>  
 <span data-ttu-id="0e086-123">Benutzerdefinierte Bindungen können in einer teilweise vertrauenswürdigen Umgebung erstellt und verwendet werden. Für sie gelten jedoch die in diesem Abschnitt genannten Einschränkungen.</span><span class="sxs-lookup"><span data-stu-id="0e086-123">Custom bindings can be created and used in a partial trust environment, but must follow the restrictions specified in this section.</span></span>  
  
### <a name="transports"></a><span data-ttu-id="0e086-124">Transportprotokolle</span><span class="sxs-lookup"><span data-stu-id="0e086-124">Transports</span></span>  
 <span data-ttu-id="0e086-125">Die einzigen zulässigen Transportbindungselemente sind <xref:System.ServiceModel.Channels.HttpTransportBindingElement> und <xref:System.ServiceModel.Channels.HttpsTransportBindingElement>.</span><span class="sxs-lookup"><span data-stu-id="0e086-125">The only allowed transport binding elements are <xref:System.ServiceModel.Channels.HttpTransportBindingElement> and <xref:System.ServiceModel.Channels.HttpsTransportBindingElement>.</span></span>  
  
### <a name="encoders"></a><span data-ttu-id="0e086-126">Encoder</span><span class="sxs-lookup"><span data-stu-id="0e086-126">Encoders</span></span>  
 <span data-ttu-id="0e086-127">Folgende Encoder sind zulässig:</span><span class="sxs-lookup"><span data-stu-id="0e086-127">The following encoders are allowed:</span></span>  
  
- <span data-ttu-id="0e086-128">Der Textencoder (<xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement>).</span><span class="sxs-lookup"><span data-stu-id="0e086-128">The text encoder (<xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement>).</span></span>  
  
- <span data-ttu-id="0e086-129">Der binäre Encoder (<xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement>).</span><span class="sxs-lookup"><span data-stu-id="0e086-129">The binary encoder (<xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement>).</span></span>  
  
- <span data-ttu-id="0e086-130">Der Webnachrichtenencoder (<xref:System.ServiceModel.Channels.WebMessageEncodingBindingElement>).</span><span class="sxs-lookup"><span data-stu-id="0e086-130">The Web Message encoder (<xref:System.ServiceModel.Channels.WebMessageEncodingBindingElement>).</span></span>  
  
 <span data-ttu-id="0e086-131">MTOM (Message Transmission Optimization Mechanism)-Encoder werden nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="0e086-131">The Message Transmission Optimization Mechanism (MTOM) encoders are not supported.</span></span>  
  
### <a name="security"></a><span data-ttu-id="0e086-132">Sicherheit</span><span class="sxs-lookup"><span data-stu-id="0e086-132">Security</span></span>  
 <span data-ttu-id="0e086-133">Teilweise vertrauenswürdige Anwendungen können WCFs-Sicherheit auf Transportebene-Funktionen zum Schutz ihrer Kommunikation.</span><span class="sxs-lookup"><span data-stu-id="0e086-133">Partially-trusted applications can use WCF's transport-level security features for securing their communication.</span></span> <span data-ttu-id="0e086-134">Sicherheit auf Nachrichtenebene wird nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="0e086-134">Message-level security is not supported.</span></span> <span data-ttu-id="0e086-135">Wird eine Bindung für die Verwendung von Sicherheit auf Nachrichtenebene konfiguriert, löst dies zur Laufzeit eine Ausnahme aus.</span><span class="sxs-lookup"><span data-stu-id="0e086-135">Configuring a binding to use message-level security results in an exception at runtime.</span></span>  
  
### <a name="unsupported-bindings"></a><span data-ttu-id="0e086-136">Nicht unterstützte Bindungen</span><span class="sxs-lookup"><span data-stu-id="0e086-136">Unsupported Bindings</span></span>  
 <span data-ttu-id="0e086-137">Bindungen, die zuverlässiges Messaging, Transaktionen oder Sicherheit auf Nachrichtenebene verwenden, werden nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="0e086-137">Bindings that use reliable messaging, transactions, or message-level security are not supported.</span></span>  
  
## <a name="serialization"></a><span data-ttu-id="0e086-138">Serialisierung</span><span class="sxs-lookup"><span data-stu-id="0e086-138">Serialization</span></span>  
 <span data-ttu-id="0e086-139">Sowohl <xref:System.Runtime.Serialization.DataContractSerializer> als auch <xref:System.Xml.Serialization.XmlSerializer> werden in einer teilweise vertrauenswürdigen Umgebung unterstützt.</span><span class="sxs-lookup"><span data-stu-id="0e086-139">Both the <xref:System.Runtime.Serialization.DataContractSerializer> and the <xref:System.Xml.Serialization.XmlSerializer> are supported in a partial trust environment.</span></span> <span data-ttu-id="0e086-140">Allerdings unterliegt die Verwendung von <xref:System.Runtime.Serialization.DataContractSerializer> den folgenden Bedingungen:</span><span class="sxs-lookup"><span data-stu-id="0e086-140">However, use of the <xref:System.Runtime.Serialization.DataContractSerializer> is subject to the following conditions:</span></span>  
  
- <span data-ttu-id="0e086-141">Alle serialisierbaren `[DataContract]` -Typen müssen als `public`deklariert sein.</span><span class="sxs-lookup"><span data-stu-id="0e086-141">All serializable `[DataContract]` types must be `public`.</span></span>  
  
- <span data-ttu-id="0e086-142">Alle serialisierbaren `[DataMember]` -Felder oder -Eigenschaften in einem `[DataContract]` -Typ müssen öffentlich sein und Schreib-/Lesezugriff besitzen.</span><span class="sxs-lookup"><span data-stu-id="0e086-142">All serializable `[DataMember]` fields or properties in a `[DataContract]` type must be public and read/write.</span></span> <span data-ttu-id="0e086-143">Die Serialisierung und Deserialisierung von [Readonly](https://go.microsoft.com/fwlink/?LinkID=98854) -Feldern wird nicht unterstützt, wenn WCF in einer teilweise vertrauenswürdigen Anwendung ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="0e086-143">The serialization and deserialization of [readonly](https://go.microsoft.com/fwlink/?LinkID=98854) fields is not supported when running WCF in a partially-trusted application.</span></span>  
  
- <span data-ttu-id="0e086-144">Das `[Serializable]`/ISerializable- Programmiermodell wird in einer teilweise vertrauenswürdigen Umgebung nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="0e086-144">The `[Serializable]`/ISerializable programming model is not supported in a partial trust environment.</span></span>  
  
- <span data-ttu-id="0e086-145">Bekannte Typen müssen im Code oder in einer Konfiguration auf Computerebene (machine.config) angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="0e086-145">Known types must be specified in code or machine-level configuration (machine.config).</span></span> <span data-ttu-id="0e086-146">Bekannte Typen können aus Sicherheitsgründen nicht in einer Konfiguration auf Anwendungsebene angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="0e086-146">Known types cannot be specified in application-level configuration for security reasons.</span></span>  
  
- <span data-ttu-id="0e086-147">Typen, die <xref:System.Runtime.Serialization.IObjectReference> implementieren, lösen in einer teilweise-vertrauenswürdigen Umgebung eine Ausnahme aus.</span><span class="sxs-lookup"><span data-stu-id="0e086-147">Types that implement <xref:System.Runtime.Serialization.IObjectReference> throw an exception in a partially-trusted environment.</span></span>  
  
 <span data-ttu-id="0e086-148">Im Abschnitt zur Serialisierung finden Sie unter [Partial Trust Best Practices](../../../../docs/framework/wcf/feature-details/partial-trust-best-practices.md) weitere Informationen zur Sicherheit bei der Verwendung von <xref:System.Runtime.Serialization.DataContractSerializer> in einer teilweise vertrauenswürdigen Umgebung.</span><span class="sxs-lookup"><span data-stu-id="0e086-148">See the Serialization section in [Partial Trust Best Practices](../../../../docs/framework/wcf/feature-details/partial-trust-best-practices.md) for more information about security when using <xref:System.Runtime.Serialization.DataContractSerializer> safely in a partially-trusted application.</span></span>  
  
### <a name="collection-types"></a><span data-ttu-id="0e086-149">Auflistungstypen</span><span class="sxs-lookup"><span data-stu-id="0e086-149">Collection Types</span></span>  
 <span data-ttu-id="0e086-150">Einige Auflistungstypen implementieren sowohl <xref:System.Collections.Generic.IEnumerable%601> als auch <xref:System.Collections.IEnumerable>.</span><span class="sxs-lookup"><span data-stu-id="0e086-150">Some collection types implement both <xref:System.Collections.Generic.IEnumerable%601> and <xref:System.Collections.IEnumerable>.</span></span> <span data-ttu-id="0e086-151">Beispiele dafür sind Typen, die <xref:System.Collections.Generic.ICollection%601>implementieren.</span><span class="sxs-lookup"><span data-stu-id="0e086-151">Examples include types that implement <xref:System.Collections.Generic.ICollection%601>.</span></span> <span data-ttu-id="0e086-152">Solche Typen können eine `public` -Implementierung von `GetEnumerator()`und eine explizite Implementierung von `GetEnumerator()`enthalten.</span><span class="sxs-lookup"><span data-stu-id="0e086-152">Such types can implement a `public` implementation of `GetEnumerator()`, and an explicit implementation of `GetEnumerator()`.</span></span> <span data-ttu-id="0e086-153">In diesem Fall ruft <xref:System.Runtime.Serialization.DataContractSerializer> die `public` -Implementierung von `GetEnumerator()`auf, und nicht die explizite Implementierung von `GetEnumerator()`.</span><span class="sxs-lookup"><span data-stu-id="0e086-153">In this case, <xref:System.Runtime.Serialization.DataContractSerializer> invokes the `public` implementation of `GetEnumerator()`, and not the explicit implementation of `GetEnumerator()`.</span></span> <span data-ttu-id="0e086-154">Wenn keine der `GetEnumerator()` -Implementierungen `public` ist, sondern es sich bei allen um explizite Implementierungen handelt, ruft <xref:System.Runtime.Serialization.DataContractSerializer> `IEnumerable.GetEnumerator()`auf.</span><span class="sxs-lookup"><span data-stu-id="0e086-154">If none of the `GetEnumerator()` implementations are `public` and all are explicit implementations, then <xref:System.Runtime.Serialization.DataContractSerializer> invokes `IEnumerable.GetEnumerator()`.</span></span>  
  
 <span data-ttu-id="0e086-155">Für Sammlungstypen, wenn WCF in einer teilweise vertrauenswürdigen Umgebung ausgeführt wird, wenn keines der `GetEnumerator()` Implementierungen sind `public`, oder keine von ihnen sind explizite schnittstellenimplementierungen, und eine Sicherheitsausnahme ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="0e086-155">For collection types when WCF is running in a partial trust environment, if none of the `GetEnumerator()` implementations are `public`, or none of them are explicit interface implementations, then a security exception is thrown.</span></span>  
  
### <a name="netdatacontractserializer"></a><span data-ttu-id="0e086-156">NetDataContractSerializer</span><span class="sxs-lookup"><span data-stu-id="0e086-156">NetDataContractSerializer</span></span>  
 <span data-ttu-id="0e086-157">Viele .NET Framework-Auflistungstypen (wie <xref:System.Collections.Generic.List%601>, <xref:System.Collections.ArrayList>, <xref:System.Collections.Generic.Dictionary%602> und <xref:System.Collections.Hashtable> ) werden vom <xref:System.Runtime.Serialization.NetDataContractSerializer> in teilweise vertrauenswürdigen Umgebungen nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="0e086-157">Many .NET Framework collection types such as <xref:System.Collections.Generic.List%601>, <xref:System.Collections.ArrayList>, <xref:System.Collections.Generic.Dictionary%602> and <xref:System.Collections.Hashtable> are not supported by the <xref:System.Runtime.Serialization.NetDataContractSerializer> in partial trust.</span></span> <span data-ttu-id="0e086-158">Für diese Typen ist das `[Serializable]` -Attribut festgelegt. Wie bereits im Abschnitt zur Serialisierung erwähnt, wird dieses Attribut in teilweise vertrauenswürdigen Umgebungen nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="0e086-158">These types have the `[Serializable]` attribute set, and as stated previously in the Serialization section, this attribute is not supported in partial trust.</span></span> <span data-ttu-id="0e086-159">Der <xref:System.Runtime.Serialization.DataContractSerializer> behandelt Auflistungen auf besondere Weise, weshalb diese Einschränkung von ihm umgangen werden kann, <xref:System.Runtime.Serialization.NetDataContractSerializer> verfügt jedoch über keine Möglichkeit zum Umgehen dieser Einschränkung.</span><span class="sxs-lookup"><span data-stu-id="0e086-159">The <xref:System.Runtime.Serialization.DataContractSerializer> treats collections in a special way and is thus able to get around this restriction, but the <xref:System.Runtime.Serialization.NetDataContractSerializer> has no such mechanism to circumvent this restriction.</span></span>  
  
 <span data-ttu-id="0e086-160">Der <xref:System.DateTimeOffset> -Typ wird vom <xref:System.Runtime.Serialization.NetDataContractSerializer> in teilweiser vertrauenswürdigen Umgebungen nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="0e086-160">The <xref:System.DateTimeOffset> type is not supported by the <xref:System.Runtime.Serialization.NetDataContractSerializer> in partial trust.</span></span>  
  
 <span data-ttu-id="0e086-161">Beim Ausführen in teilweise vertrauenswürdigen Umgebungen kann mit dem <xref:System.Runtime.Serialization.NetDataContractSerializer> (unter Verwendung des <xref:System.Runtime.Serialization.SurrogateSelector> -Mechanismus) kein Ersatzzeichen verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="0e086-161">A surrogate cannot be used with the <xref:System.Runtime.Serialization.NetDataContractSerializer> (using the <xref:System.Runtime.Serialization.SurrogateSelector> mechanism) when running in partial trust.</span></span> <span data-ttu-id="0e086-162">Beachten Sie, dass diese Einschränkung für die Verwendung (und nicht für die Serialisierung) eines Ersatzzeichens gilt.</span><span class="sxs-lookup"><span data-stu-id="0e086-162">Note that this restriction applies to using a surrogate, not to serializing it.</span></span>  
  
## <a name="enabling-common-behaviors-to-run"></a><span data-ttu-id="0e086-163">Aktivieren von gemeinsamem Verhalten für die Ausführung</span><span class="sxs-lookup"><span data-stu-id="0e086-163">Enabling Common Behaviors to Run</span></span>  
 <span data-ttu-id="0e086-164">Dienst- oder Endpunktverhaltensweisen, die nicht mit dem gekennzeichnet werden die <xref:System.Security.AllowPartiallyTrustedCallersAttribute> -Attribut (APTCA), die hinzugefügt werden, die [ \<CommonBehaviors >](../../../../docs/framework/configure-apps/file-schema/wcf/commonbehaviors.md) Abschnitt einer Konfigurationsdatei werden nicht ausgeführt werden, wenn die Anwendung in einer teilweise vertrauenswürdigen ausgeführt wird Umgebung und keine Ausnahme wird ausgelöst, wenn dies der Fall.</span><span class="sxs-lookup"><span data-stu-id="0e086-164">Service or endpoint behaviors not marked with the <xref:System.Security.AllowPartiallyTrustedCallersAttribute> attribute (APTCA) that are added to the [\<commonBehaviors>](../../../../docs/framework/configure-apps/file-schema/wcf/commonbehaviors.md) section of a configuration file are not run when the application runs in a partial trust environment and no exception is thrown when this occurs.</span></span> <span data-ttu-id="0e086-165">Um die Ausführung gemeinsamer Verhalten zu erzwingen, müssen Sie einen der beiden folgenden Schritte ausführen:</span><span class="sxs-lookup"><span data-stu-id="0e086-165">To enforce the running of common behaviors, you must do one of the following options:</span></span>  
  
- <span data-ttu-id="0e086-166">Markieren Sie das gemeinsame Verhalten mit dem <xref:System.Security.AllowPartiallyTrustedCallersAttribute> -Attribut, damit es ausgeführt werden kann, wenn es als teilweise vertrauenswürdige Anwendung bereitgestellt wird.</span><span class="sxs-lookup"><span data-stu-id="0e086-166">Mark your common behavior with the <xref:System.Security.AllowPartiallyTrustedCallersAttribute> attribute so that it can run when deployed as a partial trust application.</span></span> <span data-ttu-id="0e086-167">Beachten Sie, dass auf dem Computer ein Registrierungseintrag festgelegt werden kann, um die Ausführung von mit APTCA markierten Assemblys zu verhindern.</span><span class="sxs-lookup"><span data-stu-id="0e086-167">Note that a registry entry can be set on the computer to prevent APTCA-marked assemblies from running.</span></span> <span data-ttu-id="0e086-168">sein.</span><span class="sxs-lookup"><span data-stu-id="0e086-168">.</span></span>  
  
- <span data-ttu-id="0e086-169">Wenn die Anwendung als voll vertrauenswürdige Anwendung bereitgestellt wird, stellen Sie sicher, dass die Benutzer die Sicherheitseinstellungen für den Codezugriff nicht dahingehend ändern können, dass die Anwendung in einer teilweise vertrauenswürdigen Umgebung ausgeführt werden kann.</span><span class="sxs-lookup"><span data-stu-id="0e086-169">Ensure that if the application is deployed as a fully-trusted application that users cannot modify the code-access security settings to run the application in a partial trust environment.</span></span> <span data-ttu-id="0e086-170">Wenn sie dies können, dann wird das Verhalten nicht ausgeführt, und es wird keine Ausnahme ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="0e086-170">If they can do so, the behavior does not run and no exception is thrown.</span></span> <span data-ttu-id="0e086-171">Um dies sicherzustellen, finden Sie unter den **Levelfinal** -Option [Caspol.exe (Code Access Security Policy-Tool)](../../../../docs/framework/tools/caspol-exe-code-access-security-policy-tool.md).</span><span class="sxs-lookup"><span data-stu-id="0e086-171">To ensure this, see the **levelfinal** option using [Caspol.exe (Code Access Security Policy Tool)](../../../../docs/framework/tools/caspol-exe-code-access-security-policy-tool.md).</span></span>  
  
 <span data-ttu-id="0e086-172">Ein Beispiel für ein einheitliches Verhalten, finden Sie unter [Vorgehensweise: Sperren von Endpunkten im Unternehmen](../../../../docs/framework/wcf/extending/how-to-lock-down-endpoints-in-the-enterprise.md).</span><span class="sxs-lookup"><span data-stu-id="0e086-172">For an example of a common behavior, see [How to: Lock Down Endpoints in the Enterprise](../../../../docs/framework/wcf/extending/how-to-lock-down-endpoints-in-the-enterprise.md).</span></span>  
  
## <a name="configuration"></a><span data-ttu-id="0e086-173">Konfiguration</span><span class="sxs-lookup"><span data-stu-id="0e086-173">Configuration</span></span>  
 <span data-ttu-id="0e086-174">Mit einer Ausnahme kann teilweise vertrauenswürdiger Code nur WCF Konfigurationsabschnitte in der lokalen laden `app.config` Datei.</span><span class="sxs-lookup"><span data-stu-id="0e086-174">With one exception, partially-trusted code can only load WCF configuration sections in the local `app.config` file.</span></span> <span data-ttu-id="0e086-175">Um WCF-Konfigurationsabschnitte zu laden, die WCF-Abschnitte in der Datei machine.config oder in einem Root-verweisen erfordert die Datei "Web.config" Berechtigung ConfigurationPermission(Unrestricted) erforderlich.</span><span class="sxs-lookup"><span data-stu-id="0e086-175">To load WCF configuration sections that reference WCF sections in machine.config or in a root web.config file requires ConfigurationPermission(Unrestricted).</span></span> <span data-ttu-id="0e086-176">Ohne diese Berechtigung verweist auf WCF Konfigurationsabschnitte (Verhalten, Bindungen) außerhalb der lokalen Konfigurationsdatei zu einer Ausnahme auf, wenn die Konfiguration geladen wird.</span><span class="sxs-lookup"><span data-stu-id="0e086-176">Without this permission, references to WCF configuration sections (behaviors, bindings) outside of the local configuration file results in an exception when the configuration is loaded.</span></span>  
  
 <span data-ttu-id="0e086-177">Die Ausnahme ist die Konfiguration für die Serialisierung mit bekannten Typen, wie im Serialisierungsabschnitt dieses Themas beschrieben.</span><span class="sxs-lookup"><span data-stu-id="0e086-177">The one exception is known-type configuration for serialization, as described in the Serialization section of this topic.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="0e086-178">Konfigurationserweiterungen werden nur bei der Ausführung im Modus "Voll vertrauenswürdig" unterstützt.</span><span class="sxs-lookup"><span data-stu-id="0e086-178">Configuration extensions are only supported when running under Full Trust.</span></span>  
  
## <a name="diagnostics"></a><span data-ttu-id="0e086-179">Diagnose</span><span class="sxs-lookup"><span data-stu-id="0e086-179">Diagnostics</span></span>  
  
### <a name="event-logging"></a><span data-ttu-id="0e086-180">Ereignisprotokollierung</span><span class="sxs-lookup"><span data-stu-id="0e086-180">Event Logging</span></span>  
 <span data-ttu-id="0e086-181">In teilweise vertrauenswürdigen Umgebungen wird eine eingeschränkte Ereignisprotokollierung unterstützt.</span><span class="sxs-lookup"><span data-stu-id="0e086-181">Limited event logging is supported under partial trust.</span></span> <span data-ttu-id="0e086-182">Nur Dienstaktivierungsfehler und Fehler bei der Ablaufverfolgung/Nachrichtenprotokollierung werden im Ereignisprotokoll protokolliert.</span><span class="sxs-lookup"><span data-stu-id="0e086-182">Only service activation faults and tracing/message logging failures are logged to the Event Log.</span></span> <span data-ttu-id="0e086-183">Pro Prozess können maximal fünf Ereignisse protokolliert werden. Dadurch soll vermieden werden, dass zu viele Meldungen in das Ereignisprotokoll geschrieben werden.</span><span class="sxs-lookup"><span data-stu-id="0e086-183">The maximum number of events that can be logged by a process is 5, to avoid writing excessive messages to the Event Log.</span></span>  
  
### <a name="message-logging"></a><span data-ttu-id="0e086-184">Nachrichtenprotokollierung</span><span class="sxs-lookup"><span data-stu-id="0e086-184">Message Logging</span></span>  
 <span data-ttu-id="0e086-185">Die nachrichtenprotokollierung funktioniert nicht, wenn WCF in einer teilweise vertrauenswürdigen Umgebung ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="0e086-185">Message logging does not work when WCF is run in a partial trust environment.</span></span> <span data-ttu-id="0e086-186">Wird sie in einer teilweise vertrauenswürdigen Umgebung aktiviert, schlägt zwar die Dienstaktivierung nicht fehl, jedoch wird keine Nachricht protokolliert.</span><span class="sxs-lookup"><span data-stu-id="0e086-186">If enabled under partial trust, it does not fail service activation, but no message is logged.</span></span>  
  
### <a name="tracing"></a><span data-ttu-id="0e086-187">Ablaufverfolgung</span><span class="sxs-lookup"><span data-stu-id="0e086-187">Tracing</span></span>  
 <span data-ttu-id="0e086-188">In einer teilweise vertrauenswürdigen Umgebung ist nur eine eingeschränkte Funktionalität der Ablaufverfolgung verfügbar.</span><span class="sxs-lookup"><span data-stu-id="0e086-188">Restricted tracing functionality is available when running in a partial trust environment.</span></span> <span data-ttu-id="0e086-189">In der <`listeners`>-Element in der Konfigurationsdatei, die einzigen Typen, die Sie hinzufügen können, sind <xref:System.Diagnostics.TextWriterTraceListener> und die neue <xref:System.Diagnostics.EventSchemaTraceListener>.</span><span class="sxs-lookup"><span data-stu-id="0e086-189">In the <`listeners`> element in the configuration file, the only types that you can add are <xref:System.Diagnostics.TextWriterTraceListener> and the new <xref:System.Diagnostics.EventSchemaTraceListener>.</span></span> <span data-ttu-id="0e086-190">Die Verwendung des Standardtyps <xref:System.Diagnostics.XmlWriterTraceListener> führt möglicherweise zu unvollständigen oder falschen Protokollen.</span><span class="sxs-lookup"><span data-stu-id="0e086-190">Use of the standard <xref:System.Diagnostics.XmlWriterTraceListener> may result in incomplete or incorrect logs.</span></span>  
  
 <span data-ttu-id="0e086-191">Unterstützte Ablaufverfolgungsquellen sind:</span><span class="sxs-lookup"><span data-stu-id="0e086-191">Supported trace sources are:</span></span>  
  
- <xref:System.ServiceModel>  
  
- <xref:System.Runtime.Serialization>  
  
- <span data-ttu-id="0e086-192"><xref:System.IdentityModel.Claims>, <xref:System.IdentityModel.Policy>, <xref:System.IdentityModel.Selectors>und <xref:System.IdentityModel.Tokens>.</span><span class="sxs-lookup"><span data-stu-id="0e086-192"><xref:System.IdentityModel.Claims>, <xref:System.IdentityModel.Policy>, <xref:System.IdentityModel.Selectors>, and <xref:System.IdentityModel.Tokens>.</span></span>  
  
 <span data-ttu-id="0e086-193">Folgende Ablaufverfolgungsquellen werden nicht unterstützt:</span><span class="sxs-lookup"><span data-stu-id="0e086-193">The following trace sources are not supported:</span></span>  
  
- <span data-ttu-id="0e086-194">CardSpace</span><span class="sxs-lookup"><span data-stu-id="0e086-194">CardSpace</span></span>  
  
- <xref:System.IO.Log>  

- <span data-ttu-id="0e086-195">[System.ServiceModel.Internal.TransactionBridge](https://docs.microsoft.com/previous-versions/aa346556(v=vs.110))]</span><span class="sxs-lookup"><span data-stu-id="0e086-195">[System.ServiceModel.Internal.TransactionBridge](https://docs.microsoft.com/previous-versions/aa346556(v=vs.110))]</span></span>
  
 <span data-ttu-id="0e086-196">Die folgenden Member der <xref:System.Diagnostics.TraceOptions> -Enumeration sollten nicht angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="0e086-196">The following members of the <xref:System.Diagnostics.TraceOptions> enumeration should not be specified:</span></span>  
  
- <xref:System.Diagnostics.TraceOptions.Callstack?displayProperty=nameWithType>  
  
- <xref:System.Diagnostics.TraceOptions.ProcessId?displayProperty=nameWithType>  
  
 <span data-ttu-id="0e086-197">Wenn Sie die Ablaufverfolgung in einer teilweise vertrauenswürdigen Umgebung verwenden, dann stellen Sie sicher, dass die Anwendung über ausreichende Berechtigungen verfügt, um die Ausgabe des Ablaufverfolgungslisteners speichern zu können.</span><span class="sxs-lookup"><span data-stu-id="0e086-197">When using tracing in a partial trust environment, ensure that the application has sufficient permissions to store the output of the trace listener.</span></span> <span data-ttu-id="0e086-198">Wenn Sie z.&#160;B. den <xref:System.Diagnostics.TextWriterTraceListener> verwenden, um die Ablaufverfolgungsausgabe in eine Textdatei zu schreiben, müssen Sie sicherstellen, dass die Anwendung über die notwendigen FileIOPermission-Berechtigungen verfügt, die für das Schreiben in die Ablaufverfolgungsdatei erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="0e086-198">For example, when using the <xref:System.Diagnostics.TextWriterTraceListener> to write trace output to a text file, ensure that the application has the necessary FileIOPermission required to successfully write to the trace file.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="0e086-199">Um die Ablaufverfolgungsdateien mit doppelten Fehlermeldungen überflutet wird, wird von WCF die Ablaufverfolgung der Ressource oder der Aktion nach dem ersten Sicherheitsfehler deaktiviert.</span><span class="sxs-lookup"><span data-stu-id="0e086-199">To avoid flooding the trace files with duplicate errors, WCF disables tracing of the resource or action after the first security failure.</span></span> <span data-ttu-id="0e086-200">Es gibt eine Ausnahmeablaufverfolgung für jeden fehlgeschlagenen Ressourcenzugriff, und zwar für den ersten Versuch, auf eine Ressource zuzugreifen oder eine Aktion auszuführen.</span><span class="sxs-lookup"><span data-stu-id="0e086-200">There is one exception trace for each failed resource access, the first time an attempt is made to access the resource or perform the action.</span></span>  
  
## <a name="wcf-service-host"></a><span data-ttu-id="0e086-201">WCF-Diensthost</span><span class="sxs-lookup"><span data-stu-id="0e086-201">WCF Service Host</span></span>  
 <span data-ttu-id="0e086-202">WCF-Diensthost unterstützt teilweiser Vertrauenswürdigkeit nicht.</span><span class="sxs-lookup"><span data-stu-id="0e086-202">WCF service host does not support partial trust.</span></span> <span data-ttu-id="0e086-203">Wenn Sie einen WCF-Dienst bei teilweiser Vertrauenswürdigkeit verwenden möchten, verwenden Sie nicht die WCF-Dienstbibliotheksprojekt-Vorlage in Visual Studio zur Erstellung des Diensts.</span><span class="sxs-lookup"><span data-stu-id="0e086-203">If you want to use a WCF service in partial trust, do not use the WCF Service Library Project template in Visual Studio to build your service.</span></span> <span data-ttu-id="0e086-204">Erstellen Sie stattdessen eine neue Website in Visual Studio durch Auswählen der WCF-Website Dienstvorlage, die den Dienst auf einem Webserver hosten kann auf denen WCF-teilvertrauenswürdigkeit unterstützt wird.</span><span class="sxs-lookup"><span data-stu-id="0e086-204">Instead, create a new Web site in Visual Studio by choosing the WCF service Web site template, which can host the service in a Web server on which WCF partial trust is supported.</span></span>  
  
## <a name="other-limitations"></a><span data-ttu-id="0e086-205">Weitere Einschränkungen</span><span class="sxs-lookup"><span data-stu-id="0e086-205">Other Limitations</span></span>  
 <span data-ttu-id="0e086-206">WCF ist im Allgemeinen auf die Sicherheitsaspekte, die von der hostanwendung auferlegt beschränkt.</span><span class="sxs-lookup"><span data-stu-id="0e086-206">WCF is generally limited to the security considerations imposed upon it by the hosting application.</span></span> <span data-ttu-id="0e086-207">Beispielsweise, wenn WCF in einer XAML-Browser-Anwendung (XBAP) gehostet wird, ist es gelten die XBAP-Einschränkungen, wie in beschrieben [Windows Presentation Foundation Sicherheit mit teilweiser Vertrauenswürdigkeit](https://go.microsoft.com/fwlink/?LinkId=89138).</span><span class="sxs-lookup"><span data-stu-id="0e086-207">For example, if WCF is hosted in a XAML Browser Application (XBAP), it is subject to XBAP limitations, as described in [Windows Presentation Foundation Partial Trust Security](https://go.microsoft.com/fwlink/?LinkId=89138).</span></span>  
  
 <span data-ttu-id="0e086-208">Die folgenden Zusatzfunktionen stehen nicht zur Verfügung, wenn indigo2 in einer teilweise vertrauenswürdigen Umgebung ausgeführt wird:</span><span class="sxs-lookup"><span data-stu-id="0e086-208">The following additional features are not enabled when running indigo2 in a partial trust environment:</span></span>  
  
- <span data-ttu-id="0e086-209">Windows Management Instrumentation (WMI)</span><span class="sxs-lookup"><span data-stu-id="0e086-209">Windows Management Instrumentation (WMI)</span></span>  
  
- <span data-ttu-id="0e086-210">Die Ereignisprotokollierung ist nur teilweise aktiviert (siehe Diskussion im Abschnitt **Diagnose** ).</span><span class="sxs-lookup"><span data-stu-id="0e086-210">Event logging is only partially enabled (see discussion in **Diagnostics** section).</span></span>  
  
- <span data-ttu-id="0e086-211">Leistungsindikatoren</span><span class="sxs-lookup"><span data-stu-id="0e086-211">Performance counters</span></span>  
  
 <span data-ttu-id="0e086-212">Verwenden von WCF-Funktionen, die in einer teilweise vertrauenswürdigen Umgebung nicht unterstützt werden möglicherweise zur Laufzeit Ausnahmen ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="0e086-212">Use of WCF features that are not supported in a partial trust environment may result in exceptions at runtime.</span></span>  
  
## <a name="unlisted-features"></a><span data-ttu-id="0e086-213">Nicht aufgeführte Funktionen</span><span class="sxs-lookup"><span data-stu-id="0e086-213">Unlisted Features</span></span>  
 <span data-ttu-id="0e086-214">Die beste Möglichkeit festzustellen, ob in einer teilweise vertrauenswürdigen Umgebung auf eine bestimmte Ressource zugegriffen oder eine Aktion ausgeführt werden kann, besteht darin, innerhalb eines `try` -Blocks auf die Ressource zuzugreifen oder die Aktion auszuführen, und dann einen möglichen Fehlschlag mit `catch` abzufangen.</span><span class="sxs-lookup"><span data-stu-id="0e086-214">The best way to discover that a piece of information or action is unavailable when running in a partial trust environment is to try to access the resource or do the action inside of a `try` block, and then `catch` the failure.</span></span> <span data-ttu-id="0e086-215">Um die Ablaufverfolgungsdateien mit doppelten Fehlermeldungen überflutet wird, wird von WCF die Ablaufverfolgung der Ressource oder der Aktion nach dem ersten Sicherheitsfehler deaktiviert.</span><span class="sxs-lookup"><span data-stu-id="0e086-215">To avoid flooding the trace files with duplicate errors, WCF disables tracing of the resource or action after the first security failure.</span></span> <span data-ttu-id="0e086-216">Es gibt eine Ausnahmeablaufverfolgung für jeden fehlgeschlagenen Ressourcenzugriff, und zwar für den ersten Versuch, auf eine Ressource zuzugreifen oder eine Aktion auszuführen.</span><span class="sxs-lookup"><span data-stu-id="0e086-216">There is one exception trace for each failed resource access, the first time an attempt is made to access the resource or perform the action.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="0e086-217">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="0e086-217">See also</span></span>

- <xref:System.ServiceModel.Channels.HttpTransportBindingElement>
- <xref:System.ServiceModel.Channels.HttpsTransportBindingElement>
- <xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement>
- <xref:System.ServiceModel.Channels.WebMessageEncodingBindingElement>
- [<span data-ttu-id="0e086-218">Unterstützte Bereitstellungsszenarien</span><span class="sxs-lookup"><span data-stu-id="0e086-218">Supported Deployment Scenarios</span></span>](../../../../docs/framework/wcf/feature-details/supported-deployment-scenarios.md)
- [<span data-ttu-id="0e086-219">Bewährte Methoden für teilweise Vertrauenswürdigkeit</span><span class="sxs-lookup"><span data-stu-id="0e086-219">Partial Trust Best Practices</span></span>](../../../../docs/framework/wcf/feature-details/partial-trust-best-practices.md)
