---
title: Sicherheitsverhalten in WCF
ms.date: 03/30/2017
ms.assetid: 513232c0-39fd-4409-bda6-5ebd5e0ea7b0
ms.openlocfilehash: d1bffef127fe295aa41b1287da1c7104464ae0bc
ms.sourcegitcommit: 5b6d778ebb269ee6684fb57ad69a8c28b06235b9
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 04/08/2019
ms.locfileid: "59180062"
---
# <a name="security-behaviors-in-wcf"></a><span data-ttu-id="6cf8e-102">Sicherheitsverhalten in WCF</span><span class="sxs-lookup"><span data-stu-id="6cf8e-102">Security Behaviors in WCF</span></span>
<span data-ttu-id="6cf8e-103">In Windows Communication Foundation (WCF) Verhalten zu Laufzeitverhalten auf Dienstebene bzw. auf Endpunktebene ändern.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-103">In Windows Communication Foundation (WCF), behaviors modify run-time behavior at the service level or at the endpoint level.</span></span> <span data-ttu-id="6cf8e-104">(Weitere Informationen zu Verhalten im Allgemeinen finden Sie unter [Run-Time-Dienstverhalten angeben](../../../../docs/framework/wcf/specifying-service-run-time-behavior.md).) *Sicherheitsverhalten* Ihnen die Kontrolle über Anmeldeinformationen, Authentifizierung und Autorisierung und über Überwachungsprotokolle.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-104">(For more information about behaviors in general, see [Specifying Service Run-Time Behavior](../../../../docs/framework/wcf/specifying-service-run-time-behavior.md).) *Security behaviors* allow control over credentials, authentication, authorization, and auditing logs.</span></span> <span data-ttu-id="6cf8e-105">Sie können Verhalten entweder mittels Programmierung oder mittels Konfiguration verwenden.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-105">You can use behaviors either by programming or through configuration.</span></span> <span data-ttu-id="6cf8e-106">In diesem Thema wird die Konfiguration der folgenden, auf Sicherheitsfunktionen bezogenen Verhalten erläutert:</span><span class="sxs-lookup"><span data-stu-id="6cf8e-106">This topic focuses on configuring the following behaviors related to security functions:</span></span>  
  
-   <span data-ttu-id="6cf8e-107">[\<serviceCredentials>](../../../../docs/framework/configure-apps/file-schema/wcf/servicecredentials.md).</span><span class="sxs-lookup"><span data-stu-id="6cf8e-107">[\<serviceCredentials>](../../../../docs/framework/configure-apps/file-schema/wcf/servicecredentials.md).</span></span>  
  
-   <span data-ttu-id="6cf8e-108">[\<clientCredentials>](../../../../docs/framework/configure-apps/file-schema/wcf/clientcredentials.md).</span><span class="sxs-lookup"><span data-stu-id="6cf8e-108">[\<clientCredentials>](../../../../docs/framework/configure-apps/file-schema/wcf/clientcredentials.md).</span></span>  
  
-   <span data-ttu-id="6cf8e-109">[\<serviceAuthorization>](../../../../docs/framework/configure-apps/file-schema/wcf/serviceauthorization-element.md).</span><span class="sxs-lookup"><span data-stu-id="6cf8e-109">[\<serviceAuthorization>](../../../../docs/framework/configure-apps/file-schema/wcf/serviceauthorization-element.md).</span></span>  
  
-   <span data-ttu-id="6cf8e-110">[\<serviceSecurityAudit>](../../../../docs/framework/configure-apps/file-schema/wcf/servicesecurityaudit.md).</span><span class="sxs-lookup"><span data-stu-id="6cf8e-110">[\<serviceSecurityAudit>](../../../../docs/framework/configure-apps/file-schema/wcf/servicesecurityaudit.md).</span></span>  
  
-   <span data-ttu-id="6cf8e-111">[\<ServiceMetadata >](../../../../docs/framework/configure-apps/file-schema/wcf/servicemetadata.md), außerdem können Sie einen sicheren Endpunkt festzulegen, die Clients Zugriff auf Metadaten bietet.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-111">[\<serviceMetadata>](../../../../docs/framework/configure-apps/file-schema/wcf/servicemetadata.md), which also enables you to specify a secure endpoint that clients can access for metadata.</span></span>  
  
## <a name="setting-credentials-with-behaviors"></a><span data-ttu-id="6cf8e-112">Festlegen von Anmeldeinformationen mithilfe von Verhalten</span><span class="sxs-lookup"><span data-stu-id="6cf8e-112">Setting Credentials with Behaviors</span></span>  
 <span data-ttu-id="6cf8e-113">Verwenden der [ \<ServiceCredentials >](../../../../docs/framework/configure-apps/file-schema/wcf/servicecredentials.md) und [ \<ClientCredentials >](../../../../docs/framework/configure-apps/file-schema/wcf/clientcredentials.md) anmeldeinformationswerte für einen Dienst oder Client festlegen.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-113">Use the [\<serviceCredentials>](../../../../docs/framework/configure-apps/file-schema/wcf/servicecredentials.md) and [\<clientCredentials>](../../../../docs/framework/configure-apps/file-schema/wcf/clientcredentials.md) to set credential values for a service or client.</span></span> <span data-ttu-id="6cf8e-114">Durch die zugrunde liegende Bindungskonfiguration wird vorgegeben, ob Anmeldeinformationen festgelegt werden müssen.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-114">The underlying binding configuration determines whether a credential has to be set.</span></span> <span data-ttu-id="6cf8e-115">Wenn beispielsweise für den Sicherheitsmodus der Wert `None` gewählt wurde, findet keine gegenseitige Authentifizierung von Clients und Diensten statt. Es sind daher keine Anmeldeinformationen erforderlich.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-115">For example, if the security mode is set to `None`, both clients and services do not authenticate each other and require no credentials of any type.</span></span>  
  
 <span data-ttu-id="6cf8e-116">Andererseits kann es sein, dass die Dienstbindung eine Art von Clientanmeldeinformation erfordert.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-116">On the other hand, the service binding can require a client credential type.</span></span> <span data-ttu-id="6cf8e-117">In diesem Fall müssen Sie eventuell mithilfe eines Verhaltens einen Wert für die Anmeldeinformationen festlegen.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-117">In that case, you may have to set a credential value using a behavior.</span></span> <span data-ttu-id="6cf8e-118">(Weitere Informationen zu den möglichen Arten von Anmeldeinformationen, finden Sie unter [Ausählen eines Anmeldeinformationentyps](../../../../docs/framework/wcf/feature-details/selecting-a-credential-type.md).) Gelegentlich wird der tatsächliche Anmeldeinformationswert automatisch durch die Umgebung festgesetzt, zum Beispiel bei Verwendung von Windows-Anmeldeinformationen für die Authentifizierung. In diesem Fall müssen Sie den Wert für die Anmeldeinformationen nicht explizit festlegen, außer Sie möchten andere Anmeldeinformationen verwenden.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-118">(For more information about the possible types of credentials, see [Selecting a Credential Type](../../../../docs/framework/wcf/feature-details/selecting-a-credential-type.md).) In some cases, such as when Windows credentials are used to authenticate, the environment automatically establishes the actual credential value and you do not need to explicitly set the credential value (unless you want to specify a different set of credentials).</span></span>  
  
 <span data-ttu-id="6cf8e-119">Alle Dienstanmeldeinformationen als untergeordnete Elemente des befinden die [ \<ServiceBehaviors >](../../../../docs/framework/configure-apps/file-schema/wcf/servicebehaviors.md).</span><span class="sxs-lookup"><span data-stu-id="6cf8e-119">All service credentials are found as child elements of the [\<serviceBehaviors>](../../../../docs/framework/configure-apps/file-schema/wcf/servicebehaviors.md).</span></span> <span data-ttu-id="6cf8e-120">Im folgenden Beispiel wird ein Zertifikat als Dienstanmeldeinformation verwendet:</span><span class="sxs-lookup"><span data-stu-id="6cf8e-120">The following example shows a certificate used as a service credential.</span></span>  
  
```xml  
<configuration>  
 <system.serviceModel>  
  <behaviors>  
   <serviceBehaviors>  
    <behavior name="ServiceBehavior1">  
     <serviceCredentials>  
      <serviceCertificate findValue="000000000000000000000000000"   
                          storeLocation="CurrentUser"  
      storeName="Root" x509FindType="FindByThumbprint" />  
     </serviceCredentials>  
    </behavior>  
   </serviceBehaviors>  
  </behaviors>  
 </system.serviceModel>  
</configuration>  
```  
  
## <a name="service-credentials"></a><span data-ttu-id="6cf8e-121">Dienstanmeldeinformationen</span><span class="sxs-lookup"><span data-stu-id="6cf8e-121">Service Credentials</span></span>  
 <span data-ttu-id="6cf8e-122">Die [ \<ServiceCredentials >](../../../../docs/framework/configure-apps/file-schema/wcf/servicecredentials.md) vier untergeordnete Elemente enthält.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-122">The [\<serviceCredentials>](../../../../docs/framework/configure-apps/file-schema/wcf/servicecredentials.md) contains four child elements.</span></span> <span data-ttu-id="6cf8e-123">Diese Elemente und ihre Verwendung werden in den folgenden Abschnitten vorgestellt.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-123">The elements and their usages are discussed in the following sections.</span></span>  
  
### <a name="servicecertificate-element"></a><span data-ttu-id="6cf8e-124">\<ServiceCertificate >-Element</span><span class="sxs-lookup"><span data-stu-id="6cf8e-124">\<serviceCertificate> Element</span></span>  
 <span data-ttu-id="6cf8e-125">Geben Sie mit diesem Element ein X.509-Zertifikat an, mit dem der Dienst bei den Clients im Modus für die Nachrichtensicherheit authentifiziert wird.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-125">Use this element to specify an X.509 certificate that is used to authenticate the service to clients using Message security mode.</span></span> <span data-ttu-id="6cf8e-126">Falls Sie ein Zertifikat verwenden, das immer wieder erneuert wird, ändert sich sein Fingerabdruck.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-126">If you are using a certificate that is periodically renewed, then its thumbprint changes.</span></span> <span data-ttu-id="6cf8e-127">Verwenden Sie in diesem Fall den Antragstellernamen als `X509FindType`, da das Zertifikat erneut mit demselben Antragstellernamen ausgestellt werden kann.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-127">In that case, use the subject name as the `X509FindType` because the certificate can be reissued with the same subject name.</span></span>  
  
 <span data-ttu-id="6cf8e-128">Weitere Informationen zum Verwenden des Elements finden Sie unter [Vorgehensweise: Angeben der Clientanmeldeinformationswerte](../../../../docs/framework/wcf/how-to-specify-client-credential-values.md).</span><span class="sxs-lookup"><span data-stu-id="6cf8e-128">For more information about using the element, see [How to: Specify Client Credential Values](../../../../docs/framework/wcf/how-to-specify-client-credential-values.md).</span></span>  
  
### <a name="certificate-of-clientcertificate-element"></a><span data-ttu-id="6cf8e-129">\<Zertifikat > der \<ClientCertificate >-Element</span><span class="sxs-lookup"><span data-stu-id="6cf8e-129">\<certificate> of \<clientCertificate> Element</span></span>  
 <span data-ttu-id="6cf8e-130">Verwenden der [ \<Zertifikat >](../../../../docs/framework/configure-apps/file-schema/wcf/certificate-of-clientcertificate-element.md) -Element, wenn der Dienst das Zertifikat des Clients im voraus, um die sichere Kommunikation mit dem Client haben muss.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-130">Use the [\<certificate>](../../../../docs/framework/configure-apps/file-schema/wcf/certificate-of-clientcertificate-element.md) element when the service must have the client's certificate in advance to communicate securely with the client.</span></span> <span data-ttu-id="6cf8e-131">Dies ist bei der Duplexkommunikation der Fall.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-131">This occurs when using the duplex communication pattern.</span></span> <span data-ttu-id="6cf8e-132">Bei der üblicheren Kommunikation mit Anforderung und Antwort fügt der Client das Zertifikat in die Anforderung ein, das dann wiederum vom Dienst zum Schutz seiner Antwort an den Client verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-132">In the more typical request-reply pattern, the client includes its certificate in the request, which the service uses to secure its response back to the client.</span></span> <span data-ttu-id="6cf8e-133">Bei der Duplexkommunikation gibt es keine Anforderungen und Antworten.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-133">The duplex communication pattern, however, has no requests and replies.</span></span> <span data-ttu-id="6cf8e-134">Der Dienst kann das Zertifikat des Clients nicht aus der Kommunikation ableiten. Daher muss der Dienst bereits im Voraus über das Clientzertifikat verfügen, um seine Nachricht an den Client schützen zu können.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-134">The service cannot infer the client's certificate from the communication and therefore the service requires the client's certificate in advance to secure the messages to the client.</span></span> <span data-ttu-id="6cf8e-135">Sie müssen das Zertifikat des Clients in einem Out-of-Band-Verfahren beziehen und das Zertifikat mit diesem Element angeben.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-135">You must obtain the client's certificate in an out-of-band manner and specify the certificate using this element.</span></span> <span data-ttu-id="6cf8e-136">Weitere Informationen über duplexdienste finden Sie unter [Vorgehensweise: Erstellen eines Duplexvertrags](../../../../docs/framework/wcf/feature-details/how-to-create-a-duplex-contract.md).</span><span class="sxs-lookup"><span data-stu-id="6cf8e-136">For more information about duplex services, see [How to: Create a Duplex Contract](../../../../docs/framework/wcf/feature-details/how-to-create-a-duplex-contract.md).</span></span>  
  
### <a name="authentication-of-clientcertificate-element"></a><span data-ttu-id="6cf8e-137">\<Authentication > des \<ClientCertificate >-Element</span><span class="sxs-lookup"><span data-stu-id="6cf8e-137">\<authentication> of \<clientCertificate> Element</span></span>  
 <span data-ttu-id="6cf8e-138">Die [ \<Authentifizierung >](../../../../docs/framework/configure-apps/file-schema/wcf/authentication-of-clientcertificate-element.md) Element können Sie anpassen, wie Clients authentifiziert werden.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-138">The [\<authentication>](../../../../docs/framework/configure-apps/file-schema/wcf/authentication-of-clientcertificate-element.md) element enables you to customize how clients are authenticated.</span></span> <span data-ttu-id="6cf8e-139">Sie können als Wert für das `CertificateValidationMode`-Attribut `None`, `ChainTrust`, `PeerOrChainTrust`, `PeerTrust` oder `Custom` festlegen.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-139">You can set the `CertificateValidationMode` attribute to `None`, `ChainTrust`, `PeerOrChainTrust`, `PeerTrust`, or `Custom`.</span></span> <span data-ttu-id="6cf8e-140">In der Standardeinstellung die standardvertrauensebene ist `ChainTrust`, der angibt, dass jedes Zertifikat in einer Zertifizierungshierarchie befinden muss eine *Stammzertifizierungsstelle* am Anfang der Kette.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-140">By default, the level is set to `ChainTrust`, which specifies that each certificate must be found in a hierarchy of certificates ending in a *root authority* at the top of the chain.</span></span> <span data-ttu-id="6cf8e-141">Dies ist der sicherste Modus.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-141">This is the most secure mode.</span></span> <span data-ttu-id="6cf8e-142">Sie können auch den Wert `PeerOrChainTrust` verwenden, der vorgibt, dass neben den Zertifikaten in einer Vertrauenskette auch selbst ausgestellte Zertifikate (Peervertrauen) akzeptiert werden.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-142">You can also set the value to `PeerOrChainTrust`, which specifies that self-issued certificates (peer trust) are accepted as well as certificates that are in a trusted chain.</span></span> <span data-ttu-id="6cf8e-143">Sie können diesen Wert beim Entwickeln und Debuggen von Clients und Diensten verwenden, da selbst ausgestellte Zertifikate nicht von einer vertrauenswürdigen Zertifizierungsstelle bezogen werden müssen.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-143">This value is used when developing and debugging clients and services because self-issued certificates need not be purchased from a trusted authority.</span></span> <span data-ttu-id="6cf8e-144">Verwenden Sie beim Bereitstellen eines Clients jedoch den Wert `ChainTrust`.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-144">When deploying a client, use the `ChainTrust` value instead.</span></span> <span data-ttu-id="6cf8e-145">Sie können den Wert auch auf `Custom` setzen.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-145">You can also set the value to `Custom`.</span></span> <span data-ttu-id="6cf8e-146">Wenn Sie den Wert `Custom` verwenden, müssen Sie für das `CustomCertificateValidatorType`-Attribut zudem ein Assembly und einen Typ, mit dem das Zertifikat überprüft wird, festlegen.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-146">When set to the `Custom` value, you must also set the `CustomCertificateValidatorType` attribute to an assembly and type used to validate the certificate.</span></span> <span data-ttu-id="6cf8e-147">Wenn Sie Ihre eigene Überprüfung erstellen möchten, müssen Sie die abstrakte <xref:System.IdentityModel.Selectors.X509CertificateValidator>-Klasse vererben.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-147">To create your own custom validator, you must inherit from the abstract <xref:System.IdentityModel.Selectors.X509CertificateValidator> class.</span></span>  
  
### <a name="issuedtokenauthentication-element"></a><span data-ttu-id="6cf8e-148">\<IssuedTokenAuthentication >-Element</span><span class="sxs-lookup"><span data-stu-id="6cf8e-148">\<issuedTokenAuthentication> Element</span></span>  
 <span data-ttu-id="6cf8e-149">Das Szenario für ausgestellte Token weist drei Phasen auf.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-149">The issued token scenario has three stages.</span></span> <span data-ttu-id="6cf8e-150">In der ersten Phase wird ein Client einen Dienst zugreifen möchten bezeichnet einen *secure token Service* (STS).</span><span class="sxs-lookup"><span data-stu-id="6cf8e-150">In the first stage, a client trying to access a service is referred to a *secure token service* (STS).</span></span> <span data-ttu-id="6cf8e-151">Der STS authentifiziert den Client und stellt dann ein Token (in der Regel ein SAML-Token (SAML = Security Assertions Markup Language, XML-basierte Auszeichnungssprache für Sicherheitsbestätigungen) für den Client aus.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-151">The STS then authenticates the client and subsequently issues the client a token, typically a Security Assertions Markup Language (SAML) token.</span></span> <span data-ttu-id="6cf8e-152">Der Client kehrt dann mit dem Token zum Dienst zurück.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-152">The client then returns to the service with the token.</span></span> <span data-ttu-id="6cf8e-153">Der Dienst überprüft das Token auf Daten, die ihm die Authentifizierung des Tokens und somit des Clients erlauben.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-153">The service examines the token for data that allows the service to authenticate the token and therefore the client.</span></span> <span data-ttu-id="6cf8e-154">Damit das Token authentifiziert werden kann, muss dem Dienst das vom Sicherheitstokendienst verwendete Zertifikat bekannt sein.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-154">To authenticate the token, the certificate that the secure token service uses must be known to the service.</span></span> <span data-ttu-id="6cf8e-155">Die [ \<IssuedTokenAuthentication >](../../../../docs/framework/configure-apps/file-schema/wcf/issuedtokenauthentication-of-servicecredentials.md) Element ist das Repository für die Zertifikate des Sicherheitstokendiensts.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-155">The [\<issuedTokenAuthentication>](../../../../docs/framework/configure-apps/file-schema/wcf/issuedtokenauthentication-of-servicecredentials.md) element is the repository for any such secure token service certificates.</span></span> <span data-ttu-id="6cf8e-156">Verwenden Sie zum Hinzufügen von Zertifikaten der [ \<KnownCertificates >](../../../../docs/framework/configure-apps/file-schema/wcf/knowncertificates.md).</span><span class="sxs-lookup"><span data-stu-id="6cf8e-156">To add certificates, use the [\<knownCertificates>](../../../../docs/framework/configure-apps/file-schema/wcf/knowncertificates.md).</span></span> <span data-ttu-id="6cf8e-157">Fügen Sie eine [ \<hinzufügen >](../../../../docs/framework/configure-apps/file-schema/wcf/add-of-knowncertificates.md) für jedes Zertifikat, wie im folgenden Beispiel gezeigt.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-157">Insert an [\<add>](../../../../docs/framework/configure-apps/file-schema/wcf/add-of-knowncertificates.md) for each certificate, as shown in the following example.</span></span>  
  
```xml  
<issuedTokenAuthentication>  
   <knownCertificates>  
      <add findValue="www.contoso.com"   
           storeLocation="LocalMachine" storeName="My"   
           X509FindType="FindBySubjectName" />  
    </knownCertificates>  
</issuedTokenAuthentication>  
```  
  
 <span data-ttu-id="6cf8e-158">Standardmäßig müssen die Zertifikate von einem Sicherheitstokendienst bezogen werden.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-158">By default, the certificates must be obtained from a secure token service.</span></span> <span data-ttu-id="6cf8e-159">Durch diese "bekannten" Zertifikate wird sichergestellt, dass nur berechtigte Clients auf einen Dienst zugreifen können.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-159">These "known" certificates ensure that only legitimate clients can access a service.</span></span>  
  
 <span data-ttu-id="6cf8e-160">Verwenden Sie die [ \<AllowedAudienceUris >](../../../../docs/framework/configure-apps/file-schema/wcf/allowedaudienceuris.md) Sammlung in einer verbundanwendung, nutzt ein *secure token Service* (STS) ausstellt `SamlSecurityToken` Sicherheitstoken.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-160">You should use the [\<allowedAudienceUris>](../../../../docs/framework/configure-apps/file-schema/wcf/allowedaudienceuris.md) collection in a federated application that utilizes a *secure token service* (STS) that issues `SamlSecurityToken` security tokens.</span></span> <span data-ttu-id="6cf8e-161">Wenn der STS das Sicherheitstoken ausstellt, kann er den URI des Webdiensts angeben, für den das Sicherheitstoken verwendet werden soll, indem `SamlAudienceRestrictionCondition` dem Sicherheitstoken hinzugefügt wird.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-161">When the STS issues the security token, it can specify the URI of the Web services for which the security token is intended by adding a `SamlAudienceRestrictionCondition` to the security token.</span></span> <span data-ttu-id="6cf8e-162">Der `SamlSecurityTokenAuthenticator` für den Webdienst kann so überprüfen, ob das ausgestellte Sicherheitstoken für diesen Webdienst ausgelegt ist, indem diese Überprüfung durchgeführt wird. Führen Sie hierzu die folgenden Schritte aus:</span><span class="sxs-lookup"><span data-stu-id="6cf8e-162">That allows the `SamlSecurityTokenAuthenticator` for the recipient Web service to verify that the issued security token is intended for this Web service by specifying that this check should happen by doing the following:</span></span>  
  
-   <span data-ttu-id="6cf8e-163">Legen Sie die `audienceUriMode` Attribut [ \<IssuedTokenAuthentication >](../../../../docs/framework/configure-apps/file-schema/wcf/issuedtokenauthentication-of-servicecredentials.md) zu `Always` oder `BearerKeyOnly`.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-163">Set the `audienceUriMode` attribute of [\<issuedTokenAuthentication>](../../../../docs/framework/configure-apps/file-schema/wcf/issuedtokenauthentication-of-servicecredentials.md) to `Always` or `BearerKeyOnly`.</span></span>  
  
-   <span data-ttu-id="6cf8e-164">Geben Sie den Satz gültiger URIs an, indem Sie die URIs dieser Auflistung hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-164">Specify the set of valid URIs, by adding the URIs to this collection.</span></span> <span data-ttu-id="6cf8e-165">Fügen Sie zu diesem Zweck eine [ \<hinzufügen >](../../../../docs/framework/configure-apps/file-schema/wcf/add-of-allowedaudienceuris.md) für jeden URI</span><span class="sxs-lookup"><span data-stu-id="6cf8e-165">To do this, insert an [\<add>](../../../../docs/framework/configure-apps/file-schema/wcf/add-of-allowedaudienceuris.md) for each URI</span></span>  
  
 <span data-ttu-id="6cf8e-166">Weitere Informationen finden Sie unter <xref:System.IdentityModel.Selectors.SamlSecurityTokenAuthenticator>.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-166">For more information, see <xref:System.IdentityModel.Selectors.SamlSecurityTokenAuthenticator>.</span></span>  
  
 <span data-ttu-id="6cf8e-167">Weitere Informationen zur Verwendung dieses Konfigurationselements finden Sie unter [Vorgehensweise: Konfigurieren von Anmeldeinformationen für einen Verbunddienst](../../../../docs/framework/wcf/feature-details/how-to-configure-credentials-on-a-federation-service.md).</span><span class="sxs-lookup"><span data-stu-id="6cf8e-167">For more information about using this configuration element, see [How to: Configure Credentials on a Federation Service](../../../../docs/framework/wcf/feature-details/how-to-configure-credentials-on-a-federation-service.md).</span></span>  
  
#### <a name="allowing-anonymous-cardspace-users"></a><span data-ttu-id="6cf8e-168">Zulassen anonymer CardSpace-Benutzer</span><span class="sxs-lookup"><span data-stu-id="6cf8e-168">Allowing Anonymous CardSpace Users</span></span>  
 <span data-ttu-id="6cf8e-169">Wenn Sie das `AllowUntrustedRsaIssuers`-Attribut des `<IssuedTokenAuthentication>`-Elements auf `true` setzen, dürfen alle Clients ein selbst ausgestelltes und mit einem beliebigen RSA-Schlüsselpaar signiertes Token vorweisen.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-169">Setting the `AllowUntrustedRsaIssuers` attribute of the `<IssuedTokenAuthentication>` element to `true` explicitly allows any client to present a self-issued token signed with an arbitrary RSA key pair.</span></span> <span data-ttu-id="6cf8e-170">Der Aussteller ist *nicht vertrauenswürdigen* , da der Schlüssel kein Aussteller Daten zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-170">The issuer is *untrusted* because the key has no issuer data associated with it.</span></span> <span data-ttu-id="6cf8e-171">[!INCLUDE[infocard](../../../../includes/infocard-md.md)]-Benutzer können eine selbst ausgestellte Karte mit von ihnen selbst bereitgestellten Identitätsansprüchen erstellen.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-171">A [!INCLUDE[infocard](../../../../includes/infocard-md.md)] user can create a self-issued card that includes self-provided claims of identity.</span></span> <span data-ttu-id="6cf8e-172">Daher sollte diese Funktion nur mit Vorsicht verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-172">Use this capability with caution.</span></span> <span data-ttu-id="6cf8e-173">Falls Sie diese Funktion verwenden möchten, stellen Sie sich den öffentlichen RSA-Schlüssel als sichereres Kennwort vor, das mit dem Benutzernamen in einer Datenbank gespeichert werden sollte.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-173">To use this feature, think of the RSA public key as a more secure password that should be stored in a database along with a user name.</span></span> <span data-ttu-id="6cf8e-174">Überprüfen Sie den vom Client vorgelegten öffentlichen RSA-Schlüssel, indem Sie ihn mit dem für diesen Benutzernamen gespeicherten öffentlichen Schlüssel vergleichen, bevor Sie einem Client Zugriff auf den Dienst gewähren.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-174">Before allowing a client access to the service, verify the client-presented RSA public key by comparing it with the stored public key for the presented user name.</span></span> <span data-ttu-id="6cf8e-175">Dies setzt voraus, dass Sie einen Registrierungsvorgang eingerichtet haben, bei dem Benutzer ihre Benutzernamen registrieren und diesen die selbst ausgestellten öffentlichen RSA-Schlüssel zuordnen können.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-175">This presumes that you have established a registration process whereby users can register their user names and associate them with the self-issued RSA public keys.</span></span>  
  
## <a name="client-credentials"></a><span data-ttu-id="6cf8e-176">Clientanmeldeinformationen</span><span class="sxs-lookup"><span data-stu-id="6cf8e-176">Client Credentials</span></span>  
 <span data-ttu-id="6cf8e-177">Durch die Clientanmeldeinformationen wird der Client bei den Diensten authentifiziert, wenn eine gegenseitige Authentifizierung erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-177">Client credentials are used to authenticate the client to services in cases where mutual authentication is required.</span></span> <span data-ttu-id="6cf8e-178">Sie können den Abschnitt zur Angabe von Dienstzertifikaten in Szenarien verwenden, bei denen der Client seine Nachrichten an einen Dienst mithilfe des Dienstzertifikats schützen muss.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-178">You can use the section to specify service certificates for scenarios where the client must secure messages to a service with the service's certificate.</span></span>  
  
 <span data-ttu-id="6cf8e-179">Sie können einen Client auch als Teil eines Verbundszenarien konfigurieren, in dem die Token eines Sicherheitstokendiensts oder eines lokalen Tokenausstellers verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-179">You can also configure a client as part of a federation scenario to use issued tokens from a secure token service or a local issuer of tokens.</span></span> <span data-ttu-id="6cf8e-180">Weitere Informationen zu Verbundszenarien finden Sie unter [Verbund und ausgestellte Token](../../../../docs/framework/wcf/feature-details/federation-and-issued-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="6cf8e-180">For more information about federated scenarios, see [Federation and Issued Tokens](../../../../docs/framework/wcf/feature-details/federation-and-issued-tokens.md).</span></span> <span data-ttu-id="6cf8e-181">Alle Clientanmeldeinformationen befinden sich unter dem [ \<EndpointBehaviors >](../../../../docs/framework/configure-apps/file-schema/wcf/endpointbehaviors.md), wie im folgenden Code gezeigt.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-181">All client credentials are found under the [\<endpointBehaviors>](../../../../docs/framework/configure-apps/file-schema/wcf/endpointbehaviors.md), as shown in the following code.</span></span>  
  
```xml  
<behaviors>  
 <endpointBehaviors>  
  <behavior name="EndpointBehavior1">  
   <clientCredentials>  
    <clientCertificate findValue="cn=www.contoso.com"     
        storeLocation="LocalMachine"  
        storeName="AuthRoot" x509FindType="FindBySubjectName" />  
    <serviceCertificate>  
     <defaultCertificate findValue="www.cohowinery.com"   
                    storeLocation="LocalMachine"  
                    storeName="Root" x509FindType="FindByIssuerName" />  
    <authentication revocationMode="Online"  
                    trustedStoreLocation="LocalMachine" />  
    </serviceCertificate>  
   </clientCredentials>  
  </behavior>  
 </endpointBehaviors>  
```  
  
#### <a name="clientcertifictate-element"></a><span data-ttu-id="6cf8e-182">\<ClientCertifictate >-Element</span><span class="sxs-lookup"><span data-stu-id="6cf8e-182">\<clientCertifictate> Element</span></span>  
 <span data-ttu-id="6cf8e-183">Legen Sie mit diesem Element das Zertifikat fest, mit dem der Client authentifiziert wird.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-183">Set the certificate used to authenticate the client with this element.</span></span> <span data-ttu-id="6cf8e-184">Weitere Informationen finden Sie unter [Vorgehensweise: Angeben der Clientanmeldeinformationswerte](../../../../docs/framework/wcf/how-to-specify-client-credential-values.md).</span><span class="sxs-lookup"><span data-stu-id="6cf8e-184">For more information, see [How to: Specify Client Credential Values](../../../../docs/framework/wcf/how-to-specify-client-credential-values.md).</span></span>  
  
#### <a name="httpdigest"></a><span data-ttu-id="6cf8e-185">\<httpDigest></span><span class="sxs-lookup"><span data-stu-id="6cf8e-185">\<httpDigest></span></span>  
 <span data-ttu-id="6cf8e-186">Diese Funktion muss mit Active Directory unter Windows und unter IIS (Internet Information Services) aktiviert werden.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-186">This feature must be enabled with Active Directory on Windows and Internet Information Services (IIS).</span></span> <span data-ttu-id="6cf8e-187">Weitere Informationen finden Sie unter [Digestauthentifizierung in IIS 6.0](https://go.microsoft.com/fwlink/?LinkId=88443).</span><span class="sxs-lookup"><span data-stu-id="6cf8e-187">For more information, see [Digest Authentication in IIS 6.0](https://go.microsoft.com/fwlink/?LinkId=88443).</span></span>  
  
#### <a name="issuedtoken-element"></a><span data-ttu-id="6cf8e-188">\<IssuedToken >-Element</span><span class="sxs-lookup"><span data-stu-id="6cf8e-188">\<issuedToken> Element</span></span>  
 <span data-ttu-id="6cf8e-189">Die [ \<IssuedToken >](../../../../docs/framework/configure-apps/file-schema/wcf/issuedtoken.md) enthält die Elemente, die zum Konfigurieren eines lokalen Tokenausstellers, bzw. die mit einem Sicherheitstokendienst verwendeten Verhalten.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-189">The [\<issuedToken>](../../../../docs/framework/configure-apps/file-schema/wcf/issuedtoken.md) contains the elements used to configure a local issuer of tokens, or behaviors used with an security token service.</span></span> <span data-ttu-id="6cf8e-190">Anweisungen zum Konfigurieren von einem Client zur Verwendung eines lokalen Ausstellers finden Sie unter [Vorgehensweise: Konfigurieren eines lokalen Ausstellers](../../../../docs/framework/wcf/feature-details/how-to-configure-a-local-issuer.md).</span><span class="sxs-lookup"><span data-stu-id="6cf8e-190">For instructions on configuring a client to use a local issuer, see [How to: Configure a Local Issuer](../../../../docs/framework/wcf/feature-details/how-to-configure-a-local-issuer.md).</span></span>  
  
#### <a name="localissueraddress"></a><span data-ttu-id="6cf8e-191">\<localIssuerAddress></span><span class="sxs-lookup"><span data-stu-id="6cf8e-191">\<localIssuerAddress></span></span>  
 <span data-ttu-id="6cf8e-192">Gibt eine Standardadresse für den Sicherheitstokendienst an.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-192">Specifies a default security token service address.</span></span> <span data-ttu-id="6cf8e-193">Dies wird verwendet, wenn die <xref:System.ServiceModel.WSFederationHttpBinding> stellt keine URL für den Sicherheitstokendienst, oder wenn die Ausstelleradresse einer verbundbindung `http://schemas.microsoft.com/2005/12/ServiceModel/Addressing/Anonymous` oder `null`.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-193">This is used when the <xref:System.ServiceModel.WSFederationHttpBinding> does not supply a URL for the security token service, or when the issuer address of a federated binding is `http://schemas.microsoft.com/2005/12/ServiceModel/Addressing/Anonymous` or `null`.</span></span> <span data-ttu-id="6cf8e-194">In diesem Fall muss <xref:System.ServiceModel.Description.ClientCredentials> mit der Adresse des lokalen Ausstellers und der für die Kommunikation mit diesem Aussteller zu verwendenden Bindung konfiguriert werden.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-194">In such cases, the <xref:System.ServiceModel.Description.ClientCredentials> must be configured with the address of the local issuer and the binding to use to communicate with that issuer.</span></span>  
  
#### <a name="issuerchannelbehaviors"></a><span data-ttu-id="6cf8e-195">\<issuerChannelBehaviors></span><span class="sxs-lookup"><span data-stu-id="6cf8e-195">\<issuerChannelBehaviors></span></span>  
 <span data-ttu-id="6cf8e-196">Verwenden der [ \<IssuerChannelBehaviors >](../../../../docs/framework/configure-apps/file-schema/wcf/issuerchannelbehaviors-element.md) WCF-Client-Verhalten verwendet, bei der Kommunikation mit einem Security token Service hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-196">Use the [\<issuerChannelBehaviors>](../../../../docs/framework/configure-apps/file-schema/wcf/issuerchannelbehaviors-element.md) to add WCF client behaviors used when communicating with a security token service.</span></span> <span data-ttu-id="6cf8e-197">Definieren Sie Clientverhalten im der [ \<EndpointBehaviors >](../../../../docs/framework/configure-apps/file-schema/wcf/endpointbehaviors.md) Abschnitt.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-197">Define client behaviors in the [\<endpointBehaviors>](../../../../docs/framework/configure-apps/file-schema/wcf/endpointbehaviors.md) section.</span></span> <span data-ttu-id="6cf8e-198">Um ein definiertes Verhalten zu verwenden, fügen Sie ein <`add`>-Element der `<issuerChannelBehaviors>` mit zwei Attributen.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-198">To use a defined behavior, add an <`add`> element to the `<issuerChannelBehaviors>` element with two attributes.</span></span> <span data-ttu-id="6cf8e-199">Verwenden Sie für `issuerAddress` die URL des Sicherheitstokendiensts, und verwenden Sie für das `behaviorConfiguration`-Attribut den Namen des definierten Endpunktverhaltens, wie im folgenden Beispiel gezeigt:</span><span class="sxs-lookup"><span data-stu-id="6cf8e-199">Set the `issuerAddress` to the URL of the security token service and set the `behaviorConfiguration` attribute to the name of the defined endpoint behavior, as shown in the following example.</span></span>  
  
```xml  
<clientCredentials>  
   <issuedToken>  
      <issuerChannelBehaviors>  
         <add issuerAddress="http://www.contoso.com"  
               behaviorConfiguration="clientBehavior1" />     
```  
  
#### <a name="servicecertificate-element"></a><span data-ttu-id="6cf8e-200">\<ServiceCertificate >-Element</span><span class="sxs-lookup"><span data-stu-id="6cf8e-200">\<serviceCertificate> Element</span></span>  
 <span data-ttu-id="6cf8e-201">Verwenden Sie dieses Element, um die Authentifizierung von Dienstzertifikaten zu steuern.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-201">Use this element to control authentication of service certificates.</span></span>  
  
 <span data-ttu-id="6cf8e-202">Die [ \<DefaultCertificate >](../../../../docs/framework/configure-apps/file-schema/wcf/defaultcertificate-element.md) Element kann ein einzelnes Zertifikat speichern verwendet, wenn der Dienst kein Zertifikat angibt.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-202">The [\<defaultCertificate>](../../../../docs/framework/configure-apps/file-schema/wcf/defaultcertificate-element.md) element can store a single certificate used when the service specifies no certificate.</span></span>  
  
 <span data-ttu-id="6cf8e-203">Verwenden der [ \<ScopedCertificates >](../../../../docs/framework/configure-apps/file-schema/wcf/scopedcertificates-element.md) und [ \<hinzufügen >](../../../../docs/framework/configure-apps/file-schema/wcf/add-of-scopedcertificates-element.md) um Dienstzertifikate festzulegen, die bestimmten Diensten zugeordnet sind.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-203">Use the [\<scopedCertificates>](../../../../docs/framework/configure-apps/file-schema/wcf/scopedcertificates-element.md) and [\<add>](../../../../docs/framework/configure-apps/file-schema/wcf/add-of-scopedcertificates-element.md) to set service certificates that are associated with specific services.</span></span> <span data-ttu-id="6cf8e-204">Das `<add>`-Element beinhaltet ein `targetUri`-Attribut, mit dem das Zertifikat dem Dienst zugeordnet wird.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-204">The `<add>` element includes a `targetUri` attribute that is used to associate the certificate with the service.</span></span>  
  
 <span data-ttu-id="6cf8e-205">Die [ \<Authentifizierung >](../../../../docs/framework/configure-apps/file-schema/wcf/authentication-of-servicecertificate-element.md) Element gibt die Ebene der Vertrauenswürdigkeit angegeben, um Zertifikate zu authentifizieren.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-205">The [\<authentication>](../../../../docs/framework/configure-apps/file-schema/wcf/authentication-of-servicecertificate-element.md) element specifies the level of trust used to authenticate certificates.</span></span> <span data-ttu-id="6cf8e-206">Standardmäßig wird die Stufe "ChainTrust" verwendet, die angibt, dass jedes Zertifikat in einer Zertifizierungshierarchie zu finden sein muss, die in eine vertrauenswürdige Zertifizierungsstelle am Anfang der Kette mündet.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-206">By default, the level is set to "ChainTrust," which specifies that each certificate must be found in a hierarchy of certificates ending in a trusted certification authority at the top of the chain.</span></span> <span data-ttu-id="6cf8e-207">Dies ist der sicherste Modus.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-207">This is the most secure mode.</span></span> <span data-ttu-id="6cf8e-208">Sie können auch den Wert "PeerOrChainTrust" verwenden, der vorgibt, dass neben den Zertifikaten in einer Vertrauenskette auch selbst ausgestellte Zertifikate (Peervertrauen) akzeptiert werden.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-208">You can also set the value to "PeerOrChainTrust", which specifies that self-issued certificates (peer trust) are accepted, as well as certificates that are in a trusted chain.</span></span> <span data-ttu-id="6cf8e-209">Sie können diesen Wert beim Entwickeln und Debuggen von Clients und Diensten verwenden, da selbst ausgestellte Zertifikate nicht von einer vertrauenswürdigen Zertifizierungsstelle bezogen werden müssen.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-209">This value is used when developing and debugging clients and services because self-issued certificates need not be purchased from a trusted authority.</span></span> <span data-ttu-id="6cf8e-210">Verwenden Sie beim Bereitstellen eines Clients jedoch den Wert "ChainTrust".</span><span class="sxs-lookup"><span data-stu-id="6cf8e-210">When deploying a client, use the "ChainTrust" value instead.</span></span> <span data-ttu-id="6cf8e-211">Sie können auch den Wert "Custom" bzw. "None" verwenden.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-211">You can also set the value to "Custom" or "None."</span></span> <span data-ttu-id="6cf8e-212">Wenn Sie "Custom" verwenden möchten, müssen Sie für das `CustomCertificateValidatorType`-Attribut zudem ein Assembly und einen Typ, mit dem das Zertifikat überprüft wird, festlegen.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-212">To use the "Custom" value, you must also set the `CustomCertificateValidatorType` attribute to an assembly and type used to validate the certificate.</span></span> <span data-ttu-id="6cf8e-213">Wenn Sie Ihre eigene Überprüfung erstellen möchten, müssen Sie die abstrakte <xref:System.IdentityModel.Selectors.X509CertificateValidator>-Klasse vererben.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-213">To create your own custom validator, you must inherit from the abstract <xref:System.IdentityModel.Selectors.X509CertificateValidator> class.</span></span> <span data-ttu-id="6cf8e-214">Weitere Informationen finden Sie unter [Vorgehensweise: Erstellen Sie einen Dienst, der ein benutzerdefiniertes Zertifikats-Validierungssteuerelement verwendet](../../../../docs/framework/wcf/extending/how-to-create-a-service-that-employs-a-custom-certificate-validator.md).</span><span class="sxs-lookup"><span data-stu-id="6cf8e-214">For more information, see [How to: Create a Service that Employs a Custom Certificate Validator](../../../../docs/framework/wcf/extending/how-to-create-a-service-that-employs-a-custom-certificate-validator.md).</span></span>  
  
 <span data-ttu-id="6cf8e-215">Die [ \<Authentifizierung >](../../../../docs/framework/configure-apps/file-schema/wcf/authentication-of-servicecertificate-element.md) -Element enthält eine `RevocationMode` Attribut, das angibt, wie Zertifikate auf eine Sperre hin überprüft werden.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-215">The [\<authentication>](../../../../docs/framework/configure-apps/file-schema/wcf/authentication-of-servicecertificate-element.md) element includes a `RevocationMode` attribute that specifies how certificates are checked for revocation.</span></span> <span data-ttu-id="6cf8e-216">Der Standardwert ist "online", wodurch angegeben wird, dass Zertifikate automatisch auf eine Sperre hin überprüft werden.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-216">The default is "online", which indicates that certificates are automatically checked for revocation.</span></span> <span data-ttu-id="6cf8e-217">Weitere Informationen finden Sie unter [arbeiten mit Zertifikaten](../../../../docs/framework/wcf/feature-details/working-with-certificates.md).</span><span class="sxs-lookup"><span data-stu-id="6cf8e-217">For more information, see [Working with Certificates](../../../../docs/framework/wcf/feature-details/working-with-certificates.md).</span></span>  
  
## <a name="serviceauthorization"></a><span data-ttu-id="6cf8e-218">ServiceAuthorization</span><span class="sxs-lookup"><span data-stu-id="6cf8e-218">ServiceAuthorization</span></span>  
 <span data-ttu-id="6cf8e-219">Die [ \<ServiceAuthorization >](../../../../docs/framework/configure-apps/file-schema/wcf/serviceauthorization-element.md) -Element enthält Elemente, die Autorisierung, benutzerspezifische Rollenanbieter und den Identitätswechsel beeinflussen.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-219">The [\<serviceAuthorization>](../../../../docs/framework/configure-apps/file-schema/wcf/serviceauthorization-element.md) element contains elements that affect authorization, custom role providers, and impersonation.</span></span>  
  
 <span data-ttu-id="6cf8e-220">Die <xref:System.Security.Permissions.PrincipalPermissionAttribute>-Klasse wird auf eine Dienstmethode angewendet.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-220">The <xref:System.Security.Permissions.PrincipalPermissionAttribute> class is applied to a service method.</span></span> <span data-ttu-id="6cf8e-221">Das Attribut gibt die Benutzergruppen an, mit denen die Verwendung einer geschützten Methode autorisiert wird.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-221">The attribute specifies the groups of users to use when authorizing use of a protected method.</span></span> <span data-ttu-id="6cf8e-222">Der Standardwert lautet "UseWindowsGroups". Er gibt an, das in Windows-Gruppen wie der der Administratoren oder Benutzer nach einer Identität gesucht wird, die versucht, auf eine Ressource zuzugreifen.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-222">The default value is "UseWindowsGroups" and specifies that Windows groups, such as "Administrators" or "Users," are searched for an identity trying to access a resource.</span></span> <span data-ttu-id="6cf8e-223">Sie können auch "UseAspNetRoles" angeben, verwenden Sie einen benutzerdefinierten Rollenanbieter, der unter konfiguriert ist die <`system.web` > Element, wie im folgenden Code dargestellt.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-223">You can also specify "UseAspNetRoles" to use a custom role provider that is configured under the <`system.web` > element, as shown in the following code.</span></span>  
  
```xml  
<system.web>  
  <membership defaultProvider="SqlProvider"   
   userIsOnlineTimeWindow="15">  
     <providers>  
       <clear />  
       <add   
          name="SqlProvider"   
          type="System.Web.Security.SqlMembershipProvider"   
          connectionStringName="SqlConn"  
          applicationName="MembershipProvider"  
          enablePasswordRetrieval="false"  
          enablePasswordReset="false"  
          requiresQuestionAndAnswer="false"  
          requiresUniqueEmail="true"  
          passwordFormat="Hashed" />  
     </providers>  
   </membership>  
  <!-- Other configuration code not shown.-->  
</system.web>  
```  
  
 <span data-ttu-id="6cf8e-224">Im folgenden Code wird `roleProviderName` mit dem `principalPermissionMode`-Attribut verwendet.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-224">The following code shows the `roleProviderName` used with the `principalPermissionMode` attribute.</span></span>  
  
```xml  
<behaviors>  
 <behavior name="ServiceBehaviour">          
  <serviceAuthorization principalPermissionMode ="UseAspNetRoles"   
                        roleProviderName ="SqlProvider" />  
</behavior>   
   <!-- Other configuration code not shown. -->  
</behaviors>  
```  
  
## <a name="configuring-security-audits"></a><span data-ttu-id="6cf8e-225">Konfigurieren der Sicherheitsüberwachung</span><span class="sxs-lookup"><span data-stu-id="6cf8e-225">Configuring Security Audits</span></span>  
 <span data-ttu-id="6cf8e-226">Verwenden der [ \<ServiceSecurityAudit >](../../../../docs/framework/configure-apps/file-schema/wcf/servicesecurityaudit.md) auf das Protokoll geschrieben wird und welche Typen von Ereignissen protokolliert.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-226">Use the [\<serviceSecurityAudit>](../../../../docs/framework/configure-apps/file-schema/wcf/servicesecurityaudit.md) to specify the log written to, and what types of events to log.</span></span> <span data-ttu-id="6cf8e-227">Weitere Informationen finden Sie unter [Überwachung](../../../../docs/framework/wcf/feature-details/auditing-security-events.md).</span><span class="sxs-lookup"><span data-stu-id="6cf8e-227">For more information, see [Auditing](../../../../docs/framework/wcf/feature-details/auditing-security-events.md).</span></span>  
  
```xml  
<system.serviceModel>  
<serviceBehaviors>  
  <behavior name="NewBehavior">  
    <serviceSecurityAudit auditLogLocation="Application"   
             suppressAuditFailure="true"  
             serviceAuthorizationAuditLevel="Success"   
             messageAuthenticationAuditLevel="Success" />  
    </behavior>  
  </serviceBehaviors>  
</behaviors>  
```  
  
## <a name="secure-metadata-exchange"></a><span data-ttu-id="6cf8e-228">Sicherer Metadatenaustausch</span><span class="sxs-lookup"><span data-stu-id="6cf8e-228">Secure Metadata Exchange</span></span>  
 <span data-ttu-id="6cf8e-229">Das Exportieren von Metadaten auf Clients ist hilfreich für Dienst- und Cliententwickler, da so das Herunterladen von Konfigurations- und Clientcode möglich wird.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-229">Exporting metadata to clients is convenient for service and client developers, as it enables downloads of configuration and client code.</span></span> <span data-ttu-id="6cf8e-230">Damit der Dienst möglichst gut vor böswilligen Benutzern geschützt wird, können Sie für die Übertragung den HTTPS-Mechanismus (SSL über HTTP) verwenden.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-230">To reduce the exposure of a service to malicious users, it is possible to secure the transfer using the SSL over HTTP (HTTPS) mechanism.</span></span> <span data-ttu-id="6cf8e-231">Hierfür müssen Sie zunächst ein geeignetes X.509-Zertifikat an einen bestimmten Port des Computers, auf dem der Dienst gehostet wird, binden.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-231">To do so, you must first bind a suitable X.509 certificate to a specific port on the computer that is hosting the service.</span></span> <span data-ttu-id="6cf8e-232">(Weitere Informationen finden Sie unter [arbeiten mit Zertifikaten](../../../../docs/framework/wcf/feature-details/working-with-certificates.md).) Fügen Sie dann eine [ \<ServiceMetadata >](../../../../docs/framework/configure-apps/file-schema/wcf/servicemetadata.md) auf der Dienstkonfiguration und die `HttpsGetEnabled` Attribut `true`.</span><span class="sxs-lookup"><span data-stu-id="6cf8e-232">(For more information, see [Working with Certificates](../../../../docs/framework/wcf/feature-details/working-with-certificates.md).) Second, add a [\<serviceMetadata>](../../../../docs/framework/configure-apps/file-schema/wcf/servicemetadata.md) to the service configuration and set the `HttpsGetEnabled` attribute to `true`.</span></span> <span data-ttu-id="6cf8e-233">Setzen Sie abschließend wie im folgenden Beispiel gezeigt das `HttpsGetUrl`-Attribut auf den URL des Dienstmetadaten-Endpunkts:</span><span class="sxs-lookup"><span data-stu-id="6cf8e-233">Finally, set the `HttpsGetUrl` attribute to the URL of the service metadata endpoint, as shown in the following example.</span></span>  
  
```xml  
<behaviors>  
 <serviceBehaviors>  
  <behavior name="NewBehavior">  
    <serviceMetadata httpsGetEnabled="true"   
     httpsGetUrl="https://myComputerName/myEndpoint" />  
  </behavior>  
 </serviceBehaviors>  
</behaviors>  
```  
  
## <a name="see-also"></a><span data-ttu-id="6cf8e-234">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="6cf8e-234">See also</span></span>

- [<span data-ttu-id="6cf8e-235">Überwachung</span><span class="sxs-lookup"><span data-stu-id="6cf8e-235">Auditing</span></span>](../../../../docs/framework/wcf/feature-details/auditing-security-events.md)
- [<span data-ttu-id="6cf8e-236">Sicherheitsmodell für Windows Server AppFabric</span><span class="sxs-lookup"><span data-stu-id="6cf8e-236">Security Model for Windows Server App Fabric</span></span>](https://go.microsoft.com/fwlink/?LinkID=201279&clcid=0x409)
