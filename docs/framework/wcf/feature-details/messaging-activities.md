---
title: Aktivitäten - WCF-Messaging
ms.date: 03/30/2017
ms.assetid: 8498f215-1823-4aba-a6e1-391407f8c273
ms.openlocfilehash: 7670a6694e15f0a9e25152102d6237ef1ed60941
ms.sourcegitcommit: 9b552addadfb57fab0b9e7852ed4f1f1b8a42f8e
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 04/23/2019
ms.locfileid: "61771435"
---
# <a name="messaging-activities"></a><span data-ttu-id="d3040-102">Messagingaktivitäten</span><span class="sxs-lookup"><span data-stu-id="d3040-102">Messaging activities</span></span>

<span data-ttu-id="d3040-103">Messagingaktivitäten ermöglichen Workflows das Senden und Empfangen von WCF-Nachrichten.</span><span class="sxs-lookup"><span data-stu-id="d3040-103">Messaging activities allow workflows to send and receive WCF messages.</span></span> <span data-ttu-id="d3040-104">Indem Sie einem Workflow Messagingaktivitäten hinzufügen, können Sie beliebige komplexe Nachrichtenaustauschmuster (MEPs) modellieren.</span><span class="sxs-lookup"><span data-stu-id="d3040-104">By adding messaging activities to a workflow you can model any arbitrarily complex message exchange patterns (MEP).</span></span>

## <a name="message-exchange-patterns"></a><span data-ttu-id="d3040-105">Nachrichtenaustauschmuster</span><span class="sxs-lookup"><span data-stu-id="d3040-105">Message exchange patterns</span></span>

<span data-ttu-id="d3040-106">Es gibt drei grundlegende Nachrichtenaustauschmuster:</span><span class="sxs-lookup"><span data-stu-id="d3040-106">There are three basic message exchange patterns:</span></span>

- <span data-ttu-id="d3040-107">**Datagramm** : bei Verwendung des Datagramm-Nachrichtenaustauschmusters sendet des Clients eine Nachricht an den Dienst, aber der Dienst antwortet nicht.</span><span class="sxs-lookup"><span data-stu-id="d3040-107">**Datagram** - When using the datagram MEP the client sends a message to the service, but the service does not respond.</span></span> <span data-ttu-id="d3040-108">Dies wird auch als "fire and forget" bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="d3040-108">This is sometimes called "fire and forget".</span></span> <span data-ttu-id="d3040-109">Ein "fire and forget"-Austausch erfordert eine Out-of-Band-Bestätigung für die erfolgreiche Zustellung.</span><span class="sxs-lookup"><span data-stu-id="d3040-109">A fire and forget exchange is one that requires out-of-band confirmation of successful delivery.</span></span> <span data-ttu-id="d3040-110">Die Nachricht könnte unterwegs verloren gehen und den Dienst nicht erreichen.</span><span class="sxs-lookup"><span data-stu-id="d3040-110">The message might be lost in transit and never reach the service.</span></span> <span data-ttu-id="d3040-111">Wenn der Client das Senden einer Nachricht erfolgreich abgeschlossen hat, ist dies keine Garantie dafür, dass der Dienst die Nachricht erhalten hat.</span><span class="sxs-lookup"><span data-stu-id="d3040-111">If the client successfully sends a message, it does not guarantee that the service has received the message.</span></span> <span data-ttu-id="d3040-112">Das Datagramm ist ein wichtiger Baustein für das Messaging, da Sie darauf Ihre eigenen Nachrichtenaustauschmuster aufbauen können.</span><span class="sxs-lookup"><span data-stu-id="d3040-112">The datagram is a fundamental building block for messaging, as you can build your own MEPs on top of it.</span></span>

- <span data-ttu-id="d3040-113">**Anforderung / Antwort** : Wenn die Anforderung / Antwort-Nachrichtenaustauschmuster der Client sendet eine Nachricht an den Dienst, der Dienst führt die erforderliche Verarbeitung aus, und sendet dann eine Antwort zurück an den Client.</span><span class="sxs-lookup"><span data-stu-id="d3040-113">**Request-Response** - When using the request-response MEP the client sends a message to the service, the service does the required processing, and then sends a response back to the client.</span></span> <span data-ttu-id="d3040-114">Das Muster besteht aus Anforderungs-Antwort-Paaren.</span><span class="sxs-lookup"><span data-stu-id="d3040-114">The pattern consists of request-response pairs.</span></span> <span data-ttu-id="d3040-115">Beispiele für Anforderung-Antwort-Aufrufe sind Remoteprozeduraufrufe (RPC) und Browser-GET-Anforderungen.</span><span class="sxs-lookup"><span data-stu-id="d3040-115">Examples of request-response calls are remote procedure calls (RPC) and browser GET requests.</span></span> <span data-ttu-id="d3040-116">Dieses Muster wird auch als Halbduplex bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="d3040-116">This pattern is also known as half-duplex.</span></span>

- <span data-ttu-id="d3040-117">**Duplex** : Wenn mithilfe der duplex-Nachrichtenaustauschmuster des Clients und der Dienst Nachrichten miteinander in einer beliebigen Reihenfolge senden kann.</span><span class="sxs-lookup"><span data-stu-id="d3040-117">**Duplex** - When using the duplex MEP the client and service can send messages to each other in any order.</span></span> <span data-ttu-id="d3040-118">Das Duplex-Nachrichtenaustauschmuster ist mit einem Telefongespräch vergleichbar, bei dem jedes gesprochene Wort einer Nachricht entspricht.</span><span class="sxs-lookup"><span data-stu-id="d3040-118">The duplex MEP is like a phone conversation, where each word being spoken is a message.</span></span>

<span data-ttu-id="d3040-119">Mithilfe der Messagingaktivitäten können Sie diese grundlegenden Nachrichtenaustauschmuster sowie andere komplexe Nachrichtenaustauschmuster nach Belieben implementieren.</span><span class="sxs-lookup"><span data-stu-id="d3040-119">The messaging activities allow you to implement any of these basic MEPs as well as any arbitrarily complex MEP.</span></span>

## <a name="messaging-activities"></a><span data-ttu-id="d3040-120">Messagingaktivitäten</span><span class="sxs-lookup"><span data-stu-id="d3040-120">Messaging activities</span></span>

<span data-ttu-id="d3040-121">[!INCLUDE[netfx_current_long](../../../../includes/netfx-current-long-md.md)] definiert die folgenden Messagingaktivitäten:</span><span class="sxs-lookup"><span data-stu-id="d3040-121">The [!INCLUDE[netfx_current_long](../../../../includes/netfx-current-long-md.md)] defines the following messaging activities:</span></span>

- <span data-ttu-id="d3040-122"><xref:System.ServiceModel.Activities.Send> – Verwenden Sie die <xref:System.ServiceModel.Activities.Send>-Aktivität zum Senden einer Nachricht.</span><span class="sxs-lookup"><span data-stu-id="d3040-122"><xref:System.ServiceModel.Activities.Send>- Use the <xref:System.ServiceModel.Activities.Send> activity to send a message.</span></span>

- <span data-ttu-id="d3040-123"><xref:System.ServiceModel.Activities.SendReply> – Verwenden Sie die <xref:System.ServiceModel.Activities.SendReply>-Aktivität zum Senden einer Antwort auf eine empfangene Nachricht.</span><span class="sxs-lookup"><span data-stu-id="d3040-123"><xref:System.ServiceModel.Activities.SendReply> - Use the <xref:System.ServiceModel.Activities.SendReply> activity to send a response to a received message.</span></span> <span data-ttu-id="d3040-124">Diese Aktivität wird von Workflowdiensten beim Implementieren eines Anforderung-Antwort-Nachrichtenaustauschmusters verwendet.</span><span class="sxs-lookup"><span data-stu-id="d3040-124">This activity is used by workflow services when implementing a request/reply MEP.</span></span>

- <span data-ttu-id="d3040-125"><xref:System.ServiceModel.Activities.Receive> – Verwenden Sie die <xref:System.ServiceModel.Activities.Receive>-Aktivität zum Empfangen einer Nachricht.</span><span class="sxs-lookup"><span data-stu-id="d3040-125"><xref:System.ServiceModel.Activities.Receive>- Use the <xref:System.ServiceModel.Activities.Receive> activity to receive a message.</span></span>

- <span data-ttu-id="d3040-126"><xref:System.ServiceModel.Activities.ReceiveReply> – Verwenden Sie die <xref:System.ServiceModel.Activities.ReceiveReply>-Aktivität zum Empfangen einer Antwortnachricht.</span><span class="sxs-lookup"><span data-stu-id="d3040-126"><xref:System.ServiceModel.Activities.ReceiveReply> - Use the <xref:System.ServiceModel.Activities.ReceiveReply> activity to receive a reply message.</span></span> <span data-ttu-id="d3040-127">Diese Aktivität wird von Workflowdienstclients beim Implementieren eines Anforderung-Antwort-Nachrichtenaustauschmusters verwendet.</span><span class="sxs-lookup"><span data-stu-id="d3040-127">This activity is used by workflow service clients when implementing a request/reply MEP.</span></span>

## <a name="messaging-activities-and-message-exchange-patterns"></a><span data-ttu-id="d3040-128">Messagingaktivitäten und Nachrichtenaustauschmuster</span><span class="sxs-lookup"><span data-stu-id="d3040-128">Messaging activities and message exchange patterns</span></span>

<span data-ttu-id="d3040-129">Ein Datagramm-Nachrichtenaustauschmuster umfasst einen Client, der eine Nachricht sendet, und einen Dienst, der die Nachricht empfängt.</span><span class="sxs-lookup"><span data-stu-id="d3040-129">A datagram MEP involves a client sending a message and a service receiving the message.</span></span> <span data-ttu-id="d3040-130">Verwenden Sie eine <xref:System.ServiceModel.Activities.Send>-Aktivität zum Senden der Nachricht, wenn der Client ein Workflow ist.</span><span class="sxs-lookup"><span data-stu-id="d3040-130">If the client is a workflow use a <xref:System.ServiceModel.Activities.Send> activity to send the message.</span></span> <span data-ttu-id="d3040-131">Um diese Nachricht in einem Workflow zu empfangen, verwenden Sie eine <xref:System.ServiceModel.Activities.Receive>-Aktivität.</span><span class="sxs-lookup"><span data-stu-id="d3040-131">To receive that message in a workflow, use a <xref:System.ServiceModel.Activities.Receive> activity.</span></span> <span data-ttu-id="d3040-132">Die Aktivitäten <xref:System.ServiceModel.Activities.Send> und <xref:System.ServiceModel.Activities.Receive> verfügen jeweils über eine Eigenschaft mit dem Namen `Content`.</span><span class="sxs-lookup"><span data-stu-id="d3040-132">The <xref:System.ServiceModel.Activities.Send> and <xref:System.ServiceModel.Activities.Receive> activities each have a property named `Content`.</span></span> <span data-ttu-id="d3040-133">Diese Eigenschaft enthält die Daten, die gesendet oder empfangen werden.</span><span class="sxs-lookup"><span data-stu-id="d3040-133">This property contains the data being sent or received.</span></span> <span data-ttu-id="d3040-134">Beim Implementieren des Anforderung-Antwort-Nachrichtenaustauschmusters verwendet sowohl der Client als auch der Dienst Aktivitätspaare.</span><span class="sxs-lookup"><span data-stu-id="d3040-134">When implementing the request-response MEP both the client and the service use pairs of activities.</span></span> <span data-ttu-id="d3040-135">Der Client verwendet eine <xref:System.ServiceModel.Activities.Send>-Aktivität, um die Nachricht zu senden, und eine <xref:System.ServiceModel.Activities.ReceiveReply>-Aktivität, um die Antwort vom Dienst zu empfangen.</span><span class="sxs-lookup"><span data-stu-id="d3040-135">The client uses a <xref:System.ServiceModel.Activities.Send> activity to send the message and a <xref:System.ServiceModel.Activities.ReceiveReply> activity to receive the response from the service.</span></span> <span data-ttu-id="d3040-136">Diese zwei Aktivitäten sind einander über die <xref:System.ServiceModel.Activities.ReceiveReply.Request%2A>-Eigenschaft zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="d3040-136">These two activities are associated with each other by the <xref:System.ServiceModel.Activities.ReceiveReply.Request%2A> property.</span></span> <span data-ttu-id="d3040-137">Diese Eigenschaft wird auf die <xref:System.ServiceModel.Activities.Send>-Aktivität festgelegt, die die ursprüngliche Nachricht gesendet hat.</span><span class="sxs-lookup"><span data-stu-id="d3040-137">This property is set to the <xref:System.ServiceModel.Activities.Send> activity that sent the original message.</span></span> <span data-ttu-id="d3040-138">Der Dienst verwendet ebenfalls ein Paar zugeordneter Aktivitäten: <xref:System.ServiceModel.Activities.Receive> und <xref:System.ServiceModel.Activities.SendReply>.</span><span class="sxs-lookup"><span data-stu-id="d3040-138">The service also uses a pair of associated activities: <xref:System.ServiceModel.Activities.Receive> and <xref:System.ServiceModel.Activities.SendReply>.</span></span> <span data-ttu-id="d3040-139">Diese beiden Aktivitäten werden von der <xref:System.ServiceModel.Activities.SendReply.Request%2A>-Eigenschaft zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="d3040-139">These two activities are associated by the <xref:System.ServiceModel.Activities.SendReply.Request%2A> property.</span></span> <span data-ttu-id="d3040-140">Diese Eigenschaft wird auf die <xref:System.ServiceModel.Activities.Receive>-Aktivität festgelegt, die die ursprüngliche Nachricht empfangen hat.</span><span class="sxs-lookup"><span data-stu-id="d3040-140">This property is set to the <xref:System.ServiceModel.Activities.Receive> activity that received the original message.</span></span> <span data-ttu-id="d3040-141">Die Aktivitäten <xref:System.ServiceModel.Activities.ReceiveReply> und <xref:System.ServiceModel.Activities.SendReply> ermöglichen Ihnen wie <xref:System.ServiceModel.Activities.Send> und <xref:System.ServiceModel.Activities.Receive> das Senden einer <xref:System.ServiceModel.Channels.Message>-Instanz oder eines Nachrichtenvertragstyps.</span><span class="sxs-lookup"><span data-stu-id="d3040-141">The <xref:System.ServiceModel.Activities.ReceiveReply> and <xref:System.ServiceModel.Activities.SendReply> activities, like <xref:System.ServiceModel.Activities.Send> and <xref:System.ServiceModel.Activities.Receive> allow you to send a <xref:System.ServiceModel.Channels.Message> instance or a message contract type.</span></span>

<span data-ttu-id="d3040-142">Aufgrund der langen Ausführungsdauer von Workflows ist es für das Duplexmuster der Kommunikation wichtig, dass es auch Konversationen mit langer Laufzeit unterstützt.</span><span class="sxs-lookup"><span data-stu-id="d3040-142">Because of the long-running nature of workflows, it is important for the duplex pattern of communication to also support long-running conversations.</span></span> <span data-ttu-id="d3040-143">Um Konversationen mit langer Laufzeit zu unterstützen, müssen Clients, die die Konversation initiieren, dem Dienst die Möglichkeit eines Rückrufs zu einem späteren Zeitpunkt geben, sobald die Daten verfügbar sind.</span><span class="sxs-lookup"><span data-stu-id="d3040-143">To support long-running conversations, clients who initiate the conversation must provide the service with an opportunity to call it back at a later time when the data becomes available.</span></span> <span data-ttu-id="d3040-144">Eine Auftragsanforderung wird z. B. zur Genehmigung durch den Manager eingereicht. Sie wird ggf. jedoch erst nach einem Tag, einer Woche oder sogar einem Jahr verarbeitet. Der Workflow, der die Genehmigung von Bestellungen verwaltet, muss den Vorgang wiederaufnehmen können, nachdem die Genehmigung erteilt wurde.</span><span class="sxs-lookup"><span data-stu-id="d3040-144">For example, a purchase order request is submitted for manager approval, but it might not be processed for a day, a week, or even a year; the workflow that manages the purchase order approval must know to resume after the approval is given.</span></span> <span data-ttu-id="d3040-145">Dieses Muster der Duplexkommunikation wird in Workflows unterstützt, die die Korrelation verwenden.</span><span class="sxs-lookup"><span data-stu-id="d3040-145">This pattern of duplex communication is supported in workflows using correlation.</span></span> <span data-ttu-id="d3040-146">Um ein Duplexmuster zu implementieren, verwenden Sie die Aktivitäten <xref:System.ServiceModel.Activities.Send> und <xref:System.ServiceModel.Activities.Receive>.</span><span class="sxs-lookup"><span data-stu-id="d3040-146">To implement a duplex pattern, use <xref:System.ServiceModel.Activities.Send> and <xref:System.ServiceModel.Activities.Receive> activities.</span></span> <span data-ttu-id="d3040-147">Auf der <xref:System.ServiceModel.Activities.Receive> -Aktivität, initialisieren Sie eine Korrelation mit <xref:System.ServiceModel.Activities.CorrelationHandle>.</span><span class="sxs-lookup"><span data-stu-id="d3040-147">On the <xref:System.ServiceModel.Activities.Receive> activity, initialize a correlation using <xref:System.ServiceModel.Activities.CorrelationHandle>.</span></span> <span data-ttu-id="d3040-148">Legen Sie dieses Korrelationshandle für die <xref:System.ServiceModel.Activities.Send>-Aktivität als <xref:System.ServiceModel.Activities.Send.CorrelatesWith%2A>-Eigenschaftswert fest.</span><span class="sxs-lookup"><span data-stu-id="d3040-148">On the <xref:System.ServiceModel.Activities.Send> activity set that correlation handle as the <xref:System.ServiceModel.Activities.Send.CorrelatesWith%2A> property value.</span></span> <span data-ttu-id="d3040-149">Weitere Informationen finden Sie unter [permanenter Duplex](durable-duplex-correlation.md).</span><span class="sxs-lookup"><span data-stu-id="d3040-149">For more information, see [Durable Duplex](durable-duplex-correlation.md).</span></span>

> [!NOTE]
> <span data-ttu-id="d3040-150">Die dupleximplementierung des Workflows des mithilfe einer rückrufkorrelation ("permanenter Duplex") ist für Konversationen mit langer vorgesehen.</span><span class="sxs-lookup"><span data-stu-id="d3040-150">Workflow’s implementation of duplex using a callback correlation ("Durable Duplex") is intended for long-running conversations.</span></span> <span data-ttu-id="d3040-151">Dies ist nicht das Gleiche wie WCF-Duplex mit Rückrufverträgen, wo die Konversation nur über eine kurze Ausführungsdauer verfügt (die Lebensdauer des Kanals).</span><span class="sxs-lookup"><span data-stu-id="d3040-151">This is not the same as WCF duplex with callback contracts where the conversation is short-running (the lifetime of the channel).</span></span>

## <a name="message-formatting-and-messaging-activities"></a><span data-ttu-id="d3040-152">Nachrichtenformatierung und messagingaktivitäten</span><span class="sxs-lookup"><span data-stu-id="d3040-152">Message formatting and messaging activities</span></span>

<span data-ttu-id="d3040-153">Die Aktivitäten <xref:System.ServiceModel.Activities.Receive> und <xref:System.ServiceModel.Activities.ReceiveReply> verfügen über eine Eigenschaft mit dem Namen `Content`.</span><span class="sxs-lookup"><span data-stu-id="d3040-153">The <xref:System.ServiceModel.Activities.Receive> and <xref:System.ServiceModel.Activities.ReceiveReply> activities have a property named `Content`.</span></span> <span data-ttu-id="d3040-154">Diese Eigenschaft hat den Typ <xref:System.ServiceModel.Activities.ReceiveContent> und stellt Daten dar, die die <xref:System.ServiceModel.Activities.Receive>-Aktivität oder die <xref:System.ServiceModel.Activities.ReceiveReply>-Aktivität empfängt.</span><span class="sxs-lookup"><span data-stu-id="d3040-154">This property is of type <xref:System.ServiceModel.Activities.ReceiveContent> and represents data the <xref:System.ServiceModel.Activities.Receive> or <xref:System.ServiceModel.Activities.ReceiveReply> activity receives.</span></span> <span data-ttu-id="d3040-155">.NET Framework definiert zwei verknüpfte Klassen mit den Namen <xref:System.ServiceModel.Activities.ReceiveMessageContent> und <xref:System.ServiceModel.Activities.ReceiveParametersContent>, die beide von <xref:System.ServiceModel.Activities.ReceiveContent> abgeleitet sind.</span><span class="sxs-lookup"><span data-stu-id="d3040-155">The .NET Framework defines two related classes called <xref:System.ServiceModel.Activities.ReceiveMessageContent> and <xref:System.ServiceModel.Activities.ReceiveParametersContent> both of which are derived from <xref:System.ServiceModel.Activities.ReceiveContent>.</span></span> <span data-ttu-id="d3040-156">Legen Sie die <xref:System.ServiceModel.Activities.Receive>-Eigenschaft der <xref:System.ServiceModel.Activities.ReceiveReply>- oder der `Content`-Aktivität auf eine Instanz einer dieser Typen fest, um Daten in einem Workflowdienst zu empfangen.</span><span class="sxs-lookup"><span data-stu-id="d3040-156">Set the <xref:System.ServiceModel.Activities.Receive> or <xref:System.ServiceModel.Activities.ReceiveReply> activity’s `Content` property to an instance of one of these types to receive data into a workflow service.</span></span> <span data-ttu-id="d3040-157">Der zu verwendende Typ hängt vom Typ der Daten ab, die die Aktivität empfängt.</span><span class="sxs-lookup"><span data-stu-id="d3040-157">The type to use depends upon the type of data the activity receives.</span></span> <span data-ttu-id="d3040-158">Wenn die Aktivität ein `Message`-Objekt oder einen Nachrichtenvertragstyp empfängt, verwenden Sie <xref:System.ServiceModel.Activities.ReceiveMessageContent>.</span><span class="sxs-lookup"><span data-stu-id="d3040-158">If the activity receives a `Message` object or a message contract type, use <xref:System.ServiceModel.Activities.ReceiveMessageContent>.</span></span> <span data-ttu-id="d3040-159">Wenn die Aktivität einen Satz von Datenvertrags- oder XML-Typen empfängt, die serialisiert werden können, verwenden Sie <xref:System.ServiceModel.Activities.ReceiveParametersContent>.</span><span class="sxs-lookup"><span data-stu-id="d3040-159">If the activity receives a set of data contract or XML types that can be serialized, use <xref:System.ServiceModel.Activities.ReceiveParametersContent>.</span></span> <span data-ttu-id="d3040-160">Mit <xref:System.ServiceModel.Activities.ReceiveParametersContent> können Sie mehrere Parameter senden, während Sie mit <xref:System.ServiceModel.Activities.ReceiveMessageContent> nur ein Objekt senden können, nämlich die Nachricht (bzw. den Nachrichtenvertragstyp).</span><span class="sxs-lookup"><span data-stu-id="d3040-160"><xref:System.ServiceModel.Activities.ReceiveParametersContent> allows you to send multiple parameters, whereas <xref:System.ServiceModel.Activities.ReceiveMessageContent> only allows you to send one object, the message (or message contract type).</span></span>

> [!NOTE]
> <span data-ttu-id="d3040-161"><xref:System.ServiceModel.Activities.ReceiveMessageContent> kann auch mit einem einzelnen Datenvertrag oder XML-Typ verwendet werden, der serialisiert werden kann.</span><span class="sxs-lookup"><span data-stu-id="d3040-161"><xref:System.ServiceModel.Activities.ReceiveMessageContent> can also be used with a single data contract or XML type that can be serialized.</span></span> <span data-ttu-id="d3040-162">Der Unterschied zwischen der Verwendung von <xref:System.ServiceModel.Activities.ReceiveParametersContent> mit einem einzelnen Parameter und dem direkten Übergeben des Objekts an <xref:System.ServiceModel.Activities.ReceiveMessageContent> ist das Übertragungsformat.</span><span class="sxs-lookup"><span data-stu-id="d3040-162">The difference between using <xref:System.ServiceModel.Activities.ReceiveParametersContent> with a single parameter and the object passed directly to <xref:System.ServiceModel.Activities.ReceiveMessageContent> is the wire-format.</span></span> <span data-ttu-id="d3040-163">Der Inhalt des Parameters wird mit einem XML-Element als Wrapper versehen, das dem Vorgangsnamen entspricht, und das serialisierte Objekt wird mit einem XML-Element als Wrapper versehen, indem der Parametername (z. B. `<Echo><msg>Hello, World</msg></Echo>`) verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="d3040-163">The parameter’s content is wrapped in an XML element that corresponds to the operation name and the serialized object is wrapped in an XML element using the parameter name (for example, `<Echo><msg>Hello, World</msg></Echo>`).</span></span> <span data-ttu-id="d3040-164">Der Meldungsinhalt weist keinen Vorgangsnamen als Wrapper auf.</span><span class="sxs-lookup"><span data-stu-id="d3040-164">The message content is not wrapped by the operation name.</span></span> <span data-ttu-id="d3040-165">Stattdessen wird das serialisierte Objekt in einem XML-Element platziert, indem der Typname mit XML-Qualifizierung (z. B. `<string>Hello, World</string>`) verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="d3040-165">Instead, the serialized object is placed within an XML element using the XML-qualified type name (for example, `<string>Hello, World</string>`).</span></span>

<span data-ttu-id="d3040-166">Die Aktivitäten <xref:System.ServiceModel.Activities.Send> und <xref:System.ServiceModel.Activities.SendReply> verfügen auch über eine Eigenschaft mit dem Namen `Content`.</span><span class="sxs-lookup"><span data-stu-id="d3040-166">The <xref:System.ServiceModel.Activities.Send> and <xref:System.ServiceModel.Activities.SendReply> activities also have a property named `Content`.</span></span> <span data-ttu-id="d3040-167">Diese Eigenschaft hat den Typ <xref:System.ServiceModel.Activities.SendContent> und stellt Daten dar, die die <xref:System.ServiceModel.Activities.Send>-Aktivität oder die <xref:System.ServiceModel.Activities.SendReply>-Aktivität sendet.</span><span class="sxs-lookup"><span data-stu-id="d3040-167">This property is of type <xref:System.ServiceModel.Activities.SendContent> and represents data the <xref:System.ServiceModel.Activities.Send> or <xref:System.ServiceModel.Activities.SendReply> activity sends.</span></span> <span data-ttu-id="d3040-168">.NET Framework definiert zwei verknüpfte Typen mit den Namen <xref:System.ServiceModel.Activities.SendMessageContent> und <xref:System.ServiceModel.Activities.SendParametersContent>, die beide von <xref:System.ServiceModel.Activities.SendContent> abgeleitet sind.</span><span class="sxs-lookup"><span data-stu-id="d3040-168">The .NET Framework defines two related types called <xref:System.ServiceModel.Activities.SendMessageContent> and <xref:System.ServiceModel.Activities.SendParametersContent> both of which are derived from <xref:System.ServiceModel.Activities.SendContent>.</span></span> <span data-ttu-id="d3040-169">Legen Sie die <xref:System.ServiceModel.Activities.Send>-Eigenschaft der <xref:System.ServiceModel.Activities.SendReply>-Aktivität oder `Content`-Aktivität auf eine Instanz mit einem dieser Typen fest, um Daten von einem Workflowdienst zu senden.</span><span class="sxs-lookup"><span data-stu-id="d3040-169">Set the <xref:System.ServiceModel.Activities.Send> or <xref:System.ServiceModel.Activities.SendReply> activity’s `Content` property to an instance of one of these types to send data from a workflow service.</span></span> <span data-ttu-id="d3040-170">Der zu verwendende Typ hängt vom Typ der Daten ab, die die Aktivität sendet.</span><span class="sxs-lookup"><span data-stu-id="d3040-170">The type to use depends upon the type of data the activity sends.</span></span> <span data-ttu-id="d3040-171">Wenn die Aktivität ein `Message`-Objekt oder einen Nachrichtenvertragstyp sendet, verwenden Sie <xref:System.ServiceModel.Activities.SendMessageContent>.</span><span class="sxs-lookup"><span data-stu-id="d3040-171">If the activity sends a `Message` object or a message contract type, use <xref:System.ServiceModel.Activities.SendMessageContent>.</span></span> <span data-ttu-id="d3040-172">Wenn die Aktivität einen Datenvertragstyp sendet, verwenden Sie <xref:System.ServiceModel.Activities.SendParametersContent>.</span><span class="sxs-lookup"><span data-stu-id="d3040-172">If the activity sends a data contract type use <xref:System.ServiceModel.Activities.SendParametersContent>.</span></span> <span data-ttu-id="d3040-173">Mit <xref:System.ServiceModel.Activities.SendParametersContent> können Sie mehrere Parameter senden, während Sie mit <xref:System.ServiceModel.Activities.SendMessageContent> nur ein Objekt senden können, nämlich die Nachricht (bzw. den Nachrichtenvertragstyp).</span><span class="sxs-lookup"><span data-stu-id="d3040-173"><xref:System.ServiceModel.Activities.SendParametersContent> allows you to send multiple parameters, whereas <xref:System.ServiceModel.Activities.SendMessageContent> only allows you to send one object, the message (or the message contract type).</span></span>

<span data-ttu-id="d3040-174">Falls Sie nur mithilfe der Messagingaktivitäten programmieren müssen, verwenden Sie die generischen Objekte <xref:System.Activities.InArgument%601> und <xref:System.Activities.OutArgument%601> zum Versehen der Objekte mit Wrappern, die Sie den Nachrichten- oder Parametereigenschaften der Aktivitäten <xref:System.ServiceModel.Activities.Send>, <xref:System.ServiceModel.Activities.SendReply>, <xref:System.ServiceModel.Activities.Receive> und <xref:System.ServiceModel.Activities.ReceiveReply> zuweisen.</span><span class="sxs-lookup"><span data-stu-id="d3040-174">When programming imperatively with the messaging activities, you use the generic <xref:System.Activities.InArgument%601> and <xref:System.Activities.OutArgument%601> to wrap the objects you assign to the message or parameters properties of the <xref:System.ServiceModel.Activities.Send>, <xref:System.ServiceModel.Activities.SendReply>, <xref:System.ServiceModel.Activities.Receive>, and <xref:System.ServiceModel.Activities.ReceiveReply> activities.</span></span> <span data-ttu-id="d3040-175">Verwendung <xref:System.Activities.InArgument%601> für die <xref:System.ServiceModel.Activities.Send> und <xref:System.ServiceModel.Activities.SendReply> Aktivitäten und <xref:System.Activities.OutArgument%601> für <xref:System.ServiceModel.Activities.Receive> und <xref:System.ServiceModel.Activities.ReceiveReply> Aktivitäten.</span><span class="sxs-lookup"><span data-stu-id="d3040-175">Use <xref:System.Activities.InArgument%601> for the <xref:System.ServiceModel.Activities.Send> and <xref:System.ServiceModel.Activities.SendReply> activities and <xref:System.Activities.OutArgument%601> for <xref:System.ServiceModel.Activities.Receive> and <xref:System.ServiceModel.Activities.ReceiveReply> activities.</span></span> <span data-ttu-id="d3040-176">Für die Sendeaktivitäten werden `In`-Argumente verwendet, da die Daten an die Aktivitäten übergeben werden.</span><span class="sxs-lookup"><span data-stu-id="d3040-176">`In` arguments are used with the send activities because the data is being passed into the activities.</span></span> <span data-ttu-id="d3040-177">Für die Empfangsaktivitäten werden `Out`-Argumente verwendet, da die Daten aus den Aktivitäten übergeben werden. Dies wird im folgenden Beispiel veranschaulicht.</span><span class="sxs-lookup"><span data-stu-id="d3040-177">`Out` arguments are used with the receive activities because data is being passed out of the activities, as shown in the following example.</span></span>

```csharp
Receive reserveSeat = new Receive
{
    ...
    Content = new ReceiveParametersContent
    {
        Parameters =
        {
            { "ReservationInfo", new OutArgument<ReservationRequest>(reservationInfo) }
        }
    }
};
SendReply reserveSeat = new SendReply
{
    ...
    Request = reserveSeat,
    Content = new SendParametersContent
    {
        Parameters =
        {
            { "ReservationId", new InArgument<string>(reservationId) }
        }
    },
};
```

<span data-ttu-id="d3040-178">Beim Implementieren eines Workflowdiensts, der einen Anforderung/Antwort-Vorgang mit void-Rückgabe definiert, müssen Sie eine <xref:System.ServiceModel.Activities.SendReply>-Aktivität instanziieren und die <xref:System.ServiceModel.Activities.SendReply.Content%2A>-Eigenschaft auf eine leere Instanz von einem der Inhaltstypen (<xref:System.ServiceModel.Activities.SendMessageContent> oder <xref:System.ServiceModel.Activities.SendParametersContent>) festlegen. Dies wird im folgenden Beispiel veranschaulicht.</span><span class="sxs-lookup"><span data-stu-id="d3040-178">When implementing a workflow service that defines a request/response operation that returns void, you must instantiate a <xref:System.ServiceModel.Activities.SendReply> activity and set the <xref:System.ServiceModel.Activities.SendReply.Content%2A> property to an empty instance of one of the content types (<xref:System.ServiceModel.Activities.SendMessageContent> or <xref:System.ServiceModel.Activities.SendParametersContent>) as shown in the following example.</span></span>

```csharp
Receive rcv = new Receive()
{
ServiceContractName = "IService",
OperationName = "NullReturningContract",
Content = new ReceiveParametersContent( new Dictionary<string, OutArgument>() { { "message", new OutArgument<string>() } } )
};
SendReply sr = new SendReply()
{
Request = rcv
   Content = new SendParametersContent();
};
```

## <a name="add-service-reference"></a><span data-ttu-id="d3040-179">Hinzufügen eines Dienstverweises</span><span class="sxs-lookup"><span data-stu-id="d3040-179">Add service reference</span></span>

<span data-ttu-id="d3040-180">Beim Aufrufen eines Workflowdiensts aus einer workflowanwendung generiert Visual Studio 2012 benutzerdefinierte messagingaktivitäten, die kapseln die üblichen <xref:System.ServiceModel.Activities.Send> und <xref:System.ServiceModel.Activities.ReceiveReply> Aktivitäten in einem Anforderung-Antwort-Nachrichtenaustauschmusters verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="d3040-180">When calling a workflow service from a workflow application, Visual Studio 2012 generates custom messaging activities that encapsulate the usual <xref:System.ServiceModel.Activities.Send> and <xref:System.ServiceModel.Activities.ReceiveReply> activities used in a request/reply MEP.</span></span> <span data-ttu-id="d3040-181">Um dieses Feature verwenden zu können, mit der rechten Maustaste in des Clientprojekt in Visual Studio, und wählen Sie **hinzufügen** > **Dienstverweis**.</span><span class="sxs-lookup"><span data-stu-id="d3040-181">To use this feature, right-click the client project in Visual Studio and select **Add** > **Service Reference**.</span></span> <span data-ttu-id="d3040-182">Geben Sie im Adressfeld die Basisadresse des Diensts ein, und klicken Sie auf "Gehe zu".</span><span class="sxs-lookup"><span data-stu-id="d3040-182">Type the base address of the service in the address box and click Go.</span></span> <span data-ttu-id="d3040-183">Die verfügbaren Dienste werden angezeigt, der **Services:** Feld.</span><span class="sxs-lookup"><span data-stu-id="d3040-183">The available services are displayed in the **Services:** box.</span></span> <span data-ttu-id="d3040-184">Erweitern Sie den Dienstknoten, um die unterstützten Verträge anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="d3040-184">Expand the service node to display the contracts supported.</span></span> <span data-ttu-id="d3040-185">Wählen Sie den Vertrag, die Sie aufrufen möchten, und die Liste der verfügbaren Vorgänge wird angezeigt, der **Vorgänge** Feld.</span><span class="sxs-lookup"><span data-stu-id="d3040-185">Select the contract you want to call and the list of available operations is displayed in the **Operations** box.</span></span> <span data-ttu-id="d3040-186">Sie können dann geben Sie den Namespace für die generierte Aktivität, und klicken Sie auf **OK**.</span><span class="sxs-lookup"><span data-stu-id="d3040-186">You can then specify the namespace for the generated activity and click **OK**.</span></span> <span data-ttu-id="d3040-187">In einem Meldungsdialogfeld wird angegeben, dass der Vorgang erfolgreich abgeschlossen wurden und dass sich die generierten benutzerdefinierten Aktivitäten in der Toolbox befinden, nachdem Sie das Projekt neu erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="d3040-187">You then see a dialog that says the operation completed successfully and that the generated custom activities are in the toolbox after you have rebuilt the project.</span></span> <span data-ttu-id="d3040-188">Für jeden im Dienstvertrag definierten Vorgang ist eine Aktivität vorhanden.</span><span class="sxs-lookup"><span data-stu-id="d3040-188">There is one activity for each operation defined on the service contract.</span></span> <span data-ttu-id="d3040-189">Nach der Neuerstellung des Projekts können Sie die benutzerdefinierten Aktivitäten per Drag &amp; Drop im Workflow ablegen und im Eigenschaftenfenster alle erforderlichen Eigenschaften festlegen.</span><span class="sxs-lookup"><span data-stu-id="d3040-189">After rebuilding the project you can drag and drop the custom activities onto your workflow and set any required properties in the properties window.</span></span>

## <a name="messaging-activity-templates"></a><span data-ttu-id="d3040-190">Vorlagen für messagingaktivitäten</span><span class="sxs-lookup"><span data-stu-id="d3040-190">Messaging activity templates</span></span>

<span data-ttu-id="d3040-191">Zur Vereinfachung der Einrichtung eines Anforderung/Antwort-Nachrichtenaustauschmusters auf dem Client und Dienst stellt Visual Studio 2012 zwei Vorlagen für messagingaktivitäten bereit.</span><span class="sxs-lookup"><span data-stu-id="d3040-191">To make setting up a request/response MEP on the client and service easier, Visual Studio 2012 provides two messaging activity templates.</span></span> <span data-ttu-id="d3040-192">`System.ServiceModel.Activities.Design.ReceiveAndSendReply` wird für den Dienst und `System.ServiceModel.Activities.Design.SendAndReceiveReply` wird für den Client verwendet.</span><span class="sxs-lookup"><span data-stu-id="d3040-192">`System.ServiceModel.Activities.Design.ReceiveAndSendReply` is used on the service and `System.ServiceModel.Activities.Design.SendAndReceiveReply` is used on the client.</span></span> <span data-ttu-id="d3040-193">In beiden Fällen fügen die Vorlagen dem Workflow die entsprechenden Messagingaktivitäten hinzu.</span><span class="sxs-lookup"><span data-stu-id="d3040-193">In both cases the templates add the appropriate messaging activities to your workflow.</span></span> <span data-ttu-id="d3040-194">Für den Dienst fügt `System.ServiceModel.Activities.Design.ReceiveAndSendReply` eine <xref:System.ServiceModel.Activities.Receive>-Aktivität gefolgt von einer <xref:System.ServiceModel.Activities.SendReply>-Aktivität hinzu.</span><span class="sxs-lookup"><span data-stu-id="d3040-194">On the service, the `System.ServiceModel.Activities.Design.ReceiveAndSendReply` adds a <xref:System.ServiceModel.Activities.Receive> activity followed by a <xref:System.ServiceModel.Activities.SendReply> activity.</span></span> <span data-ttu-id="d3040-195">Die <xref:System.ServiceModel.Activities.SendReply.Request>-Eigenschaft wird automatisch auf die <xref:System.ServiceModel.Activities.Receive>-Aktivität festgelegt.</span><span class="sxs-lookup"><span data-stu-id="d3040-195">The <xref:System.ServiceModel.Activities.SendReply.Request> property is automatically set to the <xref:System.ServiceModel.Activities.Receive> activity.</span></span> <span data-ttu-id="d3040-196">Auf dem Client fügt `System.ServiceModel.Activities.Design.SendAndReceiveReply` eine <xref:System.ServiceModel.Activities.Send>-Aktivität gefolgt von einer <xref:System.ServiceModel.Activities.ReceiveReply>-Aktivität hinzu.</span><span class="sxs-lookup"><span data-stu-id="d3040-196">On the client, the `System.ServiceModel.Activities.Design.SendAndReceiveReply` adds a <xref:System.ServiceModel.Activities.Send> activity followed by a <xref:System.ServiceModel.Activities.ReceiveReply>.</span></span> <span data-ttu-id="d3040-197">Die <xref:System.ServiceModel.Activities.ReceiveReply.Request%2A>-Eigenschaft wird automatisch auf die <xref:System.ServiceModel.Activities.Send>-Aktivität festgelegt.</span><span class="sxs-lookup"><span data-stu-id="d3040-197">The <xref:System.ServiceModel.Activities.ReceiveReply.Request%2A> property is automatically set to the <xref:System.ServiceModel.Activities.Send> activity.</span></span> <span data-ttu-id="d3040-198">Um diese Vorlagen zu verwenden, legen Sie die entsprechende Vorlage einfach per Drag &amp; Drop auf dem Workflow ab.</span><span class="sxs-lookup"><span data-stu-id="d3040-198">To use these templates, just drag and drop the appropriate template onto your workflow.</span></span>

## <a name="messaging-activities-and-transactions"></a><span data-ttu-id="d3040-199">Messagingaktivitäten und Transaktionen</span><span class="sxs-lookup"><span data-stu-id="d3040-199">Messaging activities and transactions</span></span>

<span data-ttu-id="d3040-200">Wenn einen Aufruf an einen Workflowdienst ausgeführt wird, kann es ratsam sein, eine Transaktion zum Dienstvorgang auszuführen.</span><span class="sxs-lookup"><span data-stu-id="d3040-200">When a call is made to a workflow service you may want to flow a transaction to the service operation.</span></span> <span data-ttu-id="d3040-201">Platzieren Sie dazu die <xref:System.ServiceModel.Activities.Receive>-Aktivität innerhalb einer <xref:System.ServiceModel.Activities.TransactedReceiveScope>-Aktivität.</span><span class="sxs-lookup"><span data-stu-id="d3040-201">To do this place the <xref:System.ServiceModel.Activities.Receive> activity within a <xref:System.ServiceModel.Activities.TransactedReceiveScope> activity.</span></span> <span data-ttu-id="d3040-202">Die <xref:System.ServiceModel.Activities.TransactedReceiveScope>-Aktivität enthält eine `Receive`-Aktivität und einen Textteil.</span><span class="sxs-lookup"><span data-stu-id="d3040-202">The <xref:System.ServiceModel.Activities.TransactedReceiveScope> activity contains a `Receive` activity and a body.</span></span> <span data-ttu-id="d3040-203">Die für den Dienst ausgeführte Transaktion wird während der Ausführung des Textteils von <xref:System.ServiceModel.Activities.TransactedReceiveScope> in der Umgebung beibehalten.</span><span class="sxs-lookup"><span data-stu-id="d3040-203">The transaction flowed to the service remains ambient throughout the execution of the body of the <xref:System.ServiceModel.Activities.TransactedReceiveScope>.</span></span> <span data-ttu-id="d3040-204">Die Transaktion ist abgeschlossen, wenn die Ausführung des Textteils beendet ist.</span><span class="sxs-lookup"><span data-stu-id="d3040-204">The transaction is completed when the body finishes executing.</span></span> <span data-ttu-id="d3040-205">Weitere Informationen zu Workflows und Transaktionen finden Sie unter [Workflowtransaktionen](../../../../docs/framework/windows-workflow-foundation/workflow-transactions.md).</span><span class="sxs-lookup"><span data-stu-id="d3040-205">For more information about workflows and transactions see [Workflow Transactions](../../../../docs/framework/windows-workflow-foundation/workflow-transactions.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="d3040-206">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="d3040-206">See also</span></span>

- [<span data-ttu-id="d3040-207">Das Senden und Empfangen von Fehlern in Workflowdiensten</span><span class="sxs-lookup"><span data-stu-id="d3040-207">How to Send and Receive Faults in Workflow Services</span></span>](https://go.microsoft.com/fwlink/?LinkId=189151)
- [<span data-ttu-id="d3040-208">Erstellen eines Workflowdiensts mit langer Ausführungszeit</span><span class="sxs-lookup"><span data-stu-id="d3040-208">Creating a Long-running Workflow Service</span></span>](creating-a-long-running-workflow-service.md)
