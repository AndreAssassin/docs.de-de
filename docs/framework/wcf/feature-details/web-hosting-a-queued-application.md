---
title: Webhosting einer Anwendung mit Queuing
ms.date: 03/30/2017
ms.assetid: c7a539fa-e442-4c08-a7f1-17b7f5a03e88
ms.openlocfilehash: c8584f78b6b31bc95e088b424122a9cf77a17f27
ms.sourcegitcommit: bab17fd81bab7886449217356084bf4881d6e7c8
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 06/26/2019
ms.locfileid: "67402283"
---
# <a name="web-hosting-a-queued-application"></a><span data-ttu-id="90c23-102">Webhosting einer Anwendung mit Queuing</span><span class="sxs-lookup"><span data-stu-id="90c23-102">Web Hosting a Queued Application</span></span>
<span data-ttu-id="90c23-103">Der Windows Process Activation Service (WAS) verwaltet die Aktivierung und Lebensdauer der Arbeitsprozesse, die Anwendungen, die Hostdienste Windows Communication Foundation (WCF) enthalten.</span><span class="sxs-lookup"><span data-stu-id="90c23-103">The Windows Process Activation Service (WAS) manages the activation and lifetime of the worker processes that contain applications that host Windows Communication Foundation (WCF) services.</span></span> <span data-ttu-id="90c23-104">Die WAS-Prozessmodell generalisiert das IIS 6.0-Prozessmodell für den HTTP-Server durch das Entfernen der Abhängigkeit von HTTP.</span><span class="sxs-lookup"><span data-stu-id="90c23-104">The WAS process model generalizes the IIS 6.0 process model for the HTTP server by removing the dependency on HTTP.</span></span> <span data-ttu-id="90c23-105">Dadurch wird ein WCF-Diensten für die Verwendung von HTTP- und nicht-HTTP-Protokolle, z. B. net.msmq und msmq.formatname in einer hostumgebung, die Nachrichtenbasierte Aktivierung unterstützt und bietet die Möglichkeit, eine große Anzahl von Anwendungen auf einem Computer hosten.</span><span class="sxs-lookup"><span data-stu-id="90c23-105">This allows WCF services to use both HTTP and non-HTTP protocols, such as net.msmq and msmq.formatname, in a hosting environment that supports message-based activation and offers the ability to host a large number of applications on a given computer.</span></span>  
  
 <span data-ttu-id="90c23-106">WAS enthält einen Message Queuing (MSMQ)-Aktivierungsdienst, der eine Anwendung mit Queuing aktiviert, wenn mindestens eine Nachricht in einer der von der Anwendung verwendeten Warteschlangen platziert wird.</span><span class="sxs-lookup"><span data-stu-id="90c23-106">WAS includes a Message Queuing (MSMQ) activation service that activates a queued application when one or more messages are placed in one of the queues used by the application.</span></span> <span data-ttu-id="90c23-107">Der MSMQ-Aktivierungsdienst ist ein NT-Dienst, der standardmäßig automatisch gestartet wird.</span><span class="sxs-lookup"><span data-stu-id="90c23-107">The MSMQ activation service is an NT service that is automatically started by default.</span></span>  
  
 <span data-ttu-id="90c23-108">Weitere Informationen zu WAS und seinen Vorteilen finden Sie unter [Hosten in Windows Process Activation Service](../../../../docs/framework/wcf/feature-details/hosting-in-windows-process-activation-service.md).</span><span class="sxs-lookup"><span data-stu-id="90c23-108">For more information about WAS and its benefits, see [Hosting in Windows Process Activation Service](../../../../docs/framework/wcf/feature-details/hosting-in-windows-process-activation-service.md).</span></span> <span data-ttu-id="90c23-109">Weitere Informationen zu MSMQ finden Sie unter [Warteschlangenübersicht](../../../../docs/framework/wcf/feature-details/queues-overview.md).</span><span class="sxs-lookup"><span data-stu-id="90c23-109">For more information about MSMQ, see [Queues Overview](../../../../docs/framework/wcf/feature-details/queues-overview.md).</span></span>
  
## <a name="queue-addressing-in-was"></a><span data-ttu-id="90c23-110">Adressieren von Warteschlangen in WAS</span><span class="sxs-lookup"><span data-stu-id="90c23-110">Queue Addressing in WAS</span></span>  
 <span data-ttu-id="90c23-111">WAS-Anwendungen weisen Uniform Resource Identifier (URI)-Adressen auf.</span><span class="sxs-lookup"><span data-stu-id="90c23-111">WAS applications have Uniform Resource Identifier (URI) addresses.</span></span> <span data-ttu-id="90c23-112">Anwendungsadressen haben zwei Teile: einen Basis-URI-Präfix und eine anwendungsspezifische, relative Adresse (Pfad).</span><span class="sxs-lookup"><span data-stu-id="90c23-112">Application addresses have two parts: a base URI prefix and an application-specific, relative address (path).</span></span> <span data-ttu-id="90c23-113">Diese beiden Teile stellen beim Zusammenfügen die externe Adresse für eine Anwendung bereit.</span><span class="sxs-lookup"><span data-stu-id="90c23-113">These two parts provide the external address for an application when joined together.</span></span> <span data-ttu-id="90c23-114">Die base-URI-Präfix wird aus der sitebindung erstellt und wird für alle Anwendungen auf der Website, z. B. "MSMQ://localhost", "Formatname://localhost" oder "Net. TCP://localhost" verwendet.</span><span class="sxs-lookup"><span data-stu-id="90c23-114">The base URI prefix is constructed from the site binding and is used for all the applications under the site, for example, "net.msmq://localhost", "msmq.formatname://localhost", or "net.tcp://localhost".</span></span> <span data-ttu-id="90c23-115">Anwendungsadressen werden anschließend mithilfe einer anwendungsspezifischen Pfad-Fragmente erstellt (z. B. "/ ApplicationOne") und Anfügen an den Basis-URI-Präfix, das den vollständigen Anwendungs-URI, z. B. erreichen "MSMQ://localhost/applicationone".</span><span class="sxs-lookup"><span data-stu-id="90c23-115">Application addresses are then constructed by taking application-specific path fragments (such as "/applicationOne") and appending them to the base URI prefix to arrive at the full application URI, for example, "net.msmq://localhost/applicationOne".</span></span>  
  
 <span data-ttu-id="90c23-116">Der MSMQ-Aktivierungsdienst verwendet den Anwendungs-URI zum Abgleichen der Warteschlange, die der MSMQ-Aktivierungsdienst auf Nachrichten überwachen muss.</span><span class="sxs-lookup"><span data-stu-id="90c23-116">The MSMQ activation service uses the application URI to match the queue that the MSMQ activation service must monitor for messages.</span></span> <span data-ttu-id="90c23-117">Wenn der MSMQ-Aktivierungsdienst startet, listet er alle öffentlichen und privaten Warteschlangen auf dem Computer auf, für deren Empfang er konfiguriert ist, und überwacht ihn auf Nachrichten.</span><span class="sxs-lookup"><span data-stu-id="90c23-117">When the MSMQ activation service starts, it enumerates all public and private queues on the computer it is configured to receive from and monitors them for messages.</span></span> <span data-ttu-id="90c23-118">Alle 10 Minuten aktualisiert der MSMQ-Aktivierungsdienst die Liste der zu überwachenden Warteschlangen.</span><span class="sxs-lookup"><span data-stu-id="90c23-118">Every 10 minutes, the MSMQ activation service refreshes the list of queues to monitor.</span></span> <span data-ttu-id="90c23-119">Wenn in einer Warteschlange eine Nachricht gefunden wird, gleicht der Aktivierungsdienst den Warteschlangennamen entsprechend dem längsten übereinstimmenden Anwendungs-URI für die Bindung „net.msmq“ ab und aktiviert die Anwendung.</span><span class="sxs-lookup"><span data-stu-id="90c23-119">When a message is found in a queue, the activation service matches the queue name to the longest matching application URI for the net.msmq binding and activates the application.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="90c23-120">Die aktivierte Anwendung muss mit dem Präfix des Warteschlangennamens übereinstimmen (längstmögliche Übereinstimmung).</span><span class="sxs-lookup"><span data-stu-id="90c23-120">The application being activated must match (longest match) the prefix of the queue name.</span></span>  
  
 <span data-ttu-id="90c23-121">Ein Warteschlangenname lautet beispielsweise msmqWebHost/orderProcessing/service.svc.</span><span class="sxs-lookup"><span data-stu-id="90c23-121">For example, a queue name is: msmqWebHost/orderProcessing/service.svc.</span></span> <span data-ttu-id="90c23-122">Wenn Anwendung 1 über ein virtuelles Verzeichnis /msmqWebHost/orderProcessing mit service.svc darunter verfügt und Anwendung 2 über ein virtuelles Verzeichnis /msmqWebHost mit orderProcessing.svc darunter verfügt, wird Anwendung 1 aktiviert.</span><span class="sxs-lookup"><span data-stu-id="90c23-122">If Application 1 has a virtual directory /msmqWebHost/orderProcessing with a service.svc under it, and Application 2 has a virtual directory /msmqWebHost with an orderProcessing.svc under it, Application 1 is activated.</span></span> <span data-ttu-id="90c23-123">Wenn Anwendung 1 gelöscht wird, wird Anwendung 2 aktiviert.</span><span class="sxs-lookup"><span data-stu-id="90c23-123">If Application 1 is deleted, Application 2 is activated.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="90c23-124">Beim Erstellen einer Warteschlange aktivieren gesendete Nachrichten eine Anwendung erst dann, wenn der MSMQ-Aktivierungsdienst die Warteschlangenliste aktiviert; dies geschieht maximal 10 Minuten nach dem Erstellen der Warteschlange.</span><span class="sxs-lookup"><span data-stu-id="90c23-124">When a queue is created, any messages sent to it do not activate an application until the MSMQ activation service refreshes the queue list, which is, at most, 10 minutes from the time the queue was created.</span></span> <span data-ttu-id="90c23-125">Beim Neustart des Aktivierungsdienstes wird auch die Warteschlangenliste aktualisiert.</span><span class="sxs-lookup"><span data-stu-id="90c23-125">Restarting the activation service refreshes the queue list as well.</span></span>  
  
### <a name="the-effect-of-private-and-public-queues-on-addressing"></a><span data-ttu-id="90c23-126">Die Auswirkung privater und öffentlicher Warteschlangen auf die Adressierung</span><span class="sxs-lookup"><span data-stu-id="90c23-126">The Effect of Private and Public Queues on Addressing</span></span>  
 <span data-ttu-id="90c23-127">Der MSMQ-Aktivierungsdienst unterscheidet nicht zwischen privater und öffentlicher Warteschlangenüberwachung.</span><span class="sxs-lookup"><span data-stu-id="90c23-127">The MSMQ activation service does not distinguish between private and public queue monitoring.</span></span> <span data-ttu-id="90c23-128">Öffentliche und private Warteschlangen sollten nicht den gleichen Namen haben.</span><span class="sxs-lookup"><span data-stu-id="90c23-128">As such, you cannot have public and private queues with the same name.</span></span> <span data-ttu-id="90c23-129">Anderenfalls wird eine im Internet gehostete Anwendung möglicherweise beim Lesen aus einer der beiden Warteschlangen aktiviert.</span><span class="sxs-lookup"><span data-stu-id="90c23-129">If you do, a Web-hosted application may get activated reading from either of the queues.</span></span>  
  
### <a name="queue-configuration-for-activation"></a><span data-ttu-id="90c23-130">Warteschlangenkonfiguration zur Aktivierung</span><span class="sxs-lookup"><span data-stu-id="90c23-130">Queue Configuration for Activation</span></span>  
 <span data-ttu-id="90c23-131">Der MSMQ-Aktivierungsdienst wird als NETZWERKDIENST ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="90c23-131">The MSMQ activation service runs as NETWORK SERVICE.</span></span> <span data-ttu-id="90c23-132">Dieser Dienst überwacht Warteschlangen zum Aktivieren von Anwendungen.</span><span class="sxs-lookup"><span data-stu-id="90c23-132">It is the service that monitors queues to activate applications.</span></span> <span data-ttu-id="90c23-133">Zum Aktivieren von Anwendungen aus der Warteschlange muss die Warteschlange NETZWERKDIENST-Zugriff bieten, um Nachrichten in der Zugriffssteuerungsliste einzusehen.</span><span class="sxs-lookup"><span data-stu-id="90c23-133">For it to activate applications from the queue, the queue must provide for NETWORK SERVICE access to peek for messages in its access control list (ACL).</span></span>  
  
### <a name="poison-messaging"></a><span data-ttu-id="90c23-134">Nicht verarbeitbare Nachrichten</span><span class="sxs-lookup"><span data-stu-id="90c23-134">Poison Messaging</span></span>  
 <span data-ttu-id="90c23-135">In WCF Handhabung beschädigter Nachrichten erfolgt durch den Kanal, der nicht nur feststellt, dass eine Nachricht nicht verarbeitbar ist, aber ein basierend auf der Benutzerkonfiguration Disposition auswählt.</span><span class="sxs-lookup"><span data-stu-id="90c23-135">Poison message handling in WCF is handled by the channel, which not only detects that a message is poisoned but selects a disposition based on user configuration.</span></span> <span data-ttu-id="90c23-136">Als Ergebnis gibt es eine einzelne Nachricht in der Warteschlange.</span><span class="sxs-lookup"><span data-stu-id="90c23-136">As a result, there is a single message in the queue.</span></span> <span data-ttu-id="90c23-137">Die im Internet gehostete Anwendung bricht mehrmals hintereinander ab, und die Nachricht wird in eine Wiederholungswarteschlange verschoben.</span><span class="sxs-lookup"><span data-stu-id="90c23-137">The Web-hosted application aborts successive times and the message is moved to a retry queue.</span></span> <span data-ttu-id="90c23-138">Zu einem von der Zeitverzögerung zwischen den Wiederholungszyklen festgelegten Zeitpunkt wird die Nachricht aus der Wiederholungswarteschlange für einen erneuten Versuch in die Hauptwarteschlange verschoben.</span><span class="sxs-lookup"><span data-stu-id="90c23-138">At a point dictated by the retry cycle delay, the message is moved from the retry queue to the main queue to try again.</span></span> <span data-ttu-id="90c23-139">Dazu muss jedoch der in der Warteschlange stehende Kanal aktiv sein.</span><span class="sxs-lookup"><span data-stu-id="90c23-139">But this requires the queued channel to be active.</span></span> <span data-ttu-id="90c23-140">Wenn die Anwendung vom WAS wiederverwendet wird, verbleibt die Nachricht in der Wiederholungswarteschlange, bis eine weitere Nachricht zum Aktivieren der Anwendung mit Queuing in der Hauptwarteschlange eingeht.</span><span class="sxs-lookup"><span data-stu-id="90c23-140">If the application is recycled by WAS, then the message remains in the retry queue until another message arrives in the main queue to activate the queued application.</span></span> <span data-ttu-id="90c23-141">In diesem Fall kann das Problem behoben werden, indem die Nachricht manuell aus der Wiederholungswarteschlange zurück in die Hauptwarteschlange verschoben wird, um die Anwendung erneut zu aktivieren.</span><span class="sxs-lookup"><span data-stu-id="90c23-141">The workaround in this case is to move the message manually from the retry queue back to the main queue to reactivate the application.</span></span>  
  
### <a name="subqueue-and-system-queue-caveat"></a><span data-ttu-id="90c23-142">Einschränkung für Unterwarteschlangen und Systemwarteschlangen</span><span class="sxs-lookup"><span data-stu-id="90c23-142">Subqueue and System Queue Caveat</span></span>  
 <span data-ttu-id="90c23-143">Eine in WAS gehostete Anwendungen kann in einer Systemwarteschlange wie der systemweiten Warteschlange für unzustellbare Nachrichten oder in Unterwarteschlangen wie der Unterwarteschlange für potenziell schädliche Nachrichten nicht basierend auf Nachrichten aktiviert werden.</span><span class="sxs-lookup"><span data-stu-id="90c23-143">A WAS-hosted application cannot be activated based on messages in a system queue, such as the system-wide dead-letter queue, or sub-queues, such as poison sub-queues.</span></span> <span data-ttu-id="90c23-144">Dies ist eine Einschränkung für diese Produktversion.</span><span class="sxs-lookup"><span data-stu-id="90c23-144">This is a limitation for this version of the product.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="90c23-145">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="90c23-145">See also</span></span>

- [<span data-ttu-id="90c23-146">Behandlung nicht verarbeitbarer Nachrichten</span><span class="sxs-lookup"><span data-stu-id="90c23-146">Poison Message Handling</span></span>](../../../../docs/framework/wcf/feature-details/poison-message-handling.md)
- [<span data-ttu-id="90c23-147">Dienstendpunkte und Adressieren von Warteschlangen</span><span class="sxs-lookup"><span data-stu-id="90c23-147">Service Endpoints and Queue Addressing</span></span>](../../../../docs/framework/wcf/feature-details/service-endpoints-and-queue-addressing.md)
