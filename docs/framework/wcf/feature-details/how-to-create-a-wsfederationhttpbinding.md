---
title: 'Vorgehensweise: Erstellen einer WSFederationHttpBinding'
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- WCF, federation
- federation
ms.assetid: e54897d7-aa6c-46ec-a278-b2430c8c2e10
ms.openlocfilehash: 16b93126157ff129d5e0b815bc951873e7fa760d
ms.sourcegitcommit: 9b552addadfb57fab0b9e7852ed4f1f1b8a42f8e
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 04/23/2019
ms.locfileid: "61778351"
---
# <a name="how-to-create-a-wsfederationhttpbinding"></a><span data-ttu-id="ad45c-102">Vorgehensweise: Erstellen einer WSFederationHttpBinding</span><span class="sxs-lookup"><span data-stu-id="ad45c-102">How to: Create a WSFederationHttpBinding</span></span>

<span data-ttu-id="ad45c-103">In Windows Communication Foundation (WCF), die <xref:System.ServiceModel.WSFederationHttpBinding> Klasse ([\<WsFederationHttpBinding >](../../../../docs/framework/configure-apps/file-schema/wcf/wsfederationhttpbinding.md) in der Konfiguration) bietet einen Mechanismus zum Bereitstellen eines verbundenen Diensts.</span><span class="sxs-lookup"><span data-stu-id="ad45c-103">In Windows Communication Foundation (WCF), the <xref:System.ServiceModel.WSFederationHttpBinding> class ([\<wsFederationHttpBinding>](../../../../docs/framework/configure-apps/file-schema/wcf/wsfederationhttpbinding.md) in configuration) provides a mechanism for exposing a federated service.</span></span> <span data-ttu-id="ad45c-104">Hierbei handelt es sich um einen Dienst, der eine Clientauthentifizierung mithilfe eines von einem Sicherheitstokendienst ausgestellten Sicherheitstokens erfordert.</span><span class="sxs-lookup"><span data-stu-id="ad45c-104">That is, a service that requires clients to authenticate using a security token issued by a security token service.</span></span> <span data-ttu-id="ad45c-105">In diesem Thema wird erläutert, wie <xref:System.ServiceModel.WSFederationHttpBinding> sowohl im Code als auch in der Konfiguration eingerichtet werden kann.</span><span class="sxs-lookup"><span data-stu-id="ad45c-105">This topic shows how to set up a <xref:System.ServiceModel.WSFederationHttpBinding> in both code and configuration.</span></span> <span data-ttu-id="ad45c-106">Nach dem Erstellen der Bindung können Sie einen Endpunkt einrichten, von dem diese Bindung verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="ad45c-106">Once the binding is created, you can set up an endpoint to use that binding.</span></span>

 <span data-ttu-id="ad45c-107">Die folgenden grundlegenden Schritte sind erforderlich:</span><span class="sxs-lookup"><span data-stu-id="ad45c-107">The basic steps are outlined as follows:</span></span>

1. <span data-ttu-id="ad45c-108">Wählen Sie einen Sicherheitsmodus aus.</span><span class="sxs-lookup"><span data-stu-id="ad45c-108">Select a security mode.</span></span> <span data-ttu-id="ad45c-109">Von <xref:System.ServiceModel.WSFederationHttpBinding> wird `Message` unterstützt, wodurch sogar über mehrere Hops hinweg eine End-to-End-Sicherheit auf Nachrichtenebene erzielt wird. Zudem wird `TransportWithMessageCredential` unterstützt, um bei einer direkten HTTPS-Verbindung zwischen Client und Dienst eine höhere Leistung zu erzielen.</span><span class="sxs-lookup"><span data-stu-id="ad45c-109">The <xref:System.ServiceModel.WSFederationHttpBinding> supports `Message`, which provides end-to-end security at the message level, even across multiple hops, and `TransportWithMessageCredential`, which provides better performance in cases where the client and the service can make a direct connection over HTTPS.</span></span>

    > [!NOTE]
    > <span data-ttu-id="ad45c-110">Von <xref:System.ServiceModel.WSFederationHttpBinding> wird als Sicherheitsmodus auch `None` unterstützt.</span><span class="sxs-lookup"><span data-stu-id="ad45c-110">The <xref:System.ServiceModel.WSFederationHttpBinding> also supports `None` as a security mode.</span></span> <span data-ttu-id="ad45c-111">Dieser Modus ist nicht sicher und wird nur zu Debuggingzwecken bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="ad45c-111">This mode is not secure and is provided for debugging purposes only.</span></span> <span data-ttu-id="ad45c-112">Wenn ein Dienstendpunkt mit bereitgestellt wird eine <xref:System.ServiceModel.WSFederationHttpBinding> deren Sicherheitsmodus auf festgelegt `None`, die sich ergebende Clientbindung (von generiert die [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md)) ist eine <xref:System.ServiceModel.WSHttpBinding> mit einer Sicherheitsmodus des `None`.</span><span class="sxs-lookup"><span data-stu-id="ad45c-112">If a service endpoint is deployed with a <xref:System.ServiceModel.WSFederationHttpBinding> with its security mode set to `None`, the resulting client binding (generated by the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md)) is a <xref:System.ServiceModel.WSHttpBinding> with a security mode of `None`.</span></span>

     <span data-ttu-id="ad45c-113">Im Gegensatz zu anderen vom System bereitgestellten Bindungen muss bei Verwendung von `WSFederationHttpBinding` kein Typ für die Clientanmeldeinformationen ausgewählt werden, da für die Anmeldeinformationen immer ein ausgestelltes Token verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="ad45c-113">Unlike other system-provided bindings, it is not necessary to select a client credential type when using the `WSFederationHttpBinding`.</span></span> <span data-ttu-id="ad45c-114">Der Grund: Für die Clientanmeldeinformationen wird immer ein ausgestelltes Token verwendet.</span><span class="sxs-lookup"><span data-stu-id="ad45c-114">This is because the client credential type is always an issued token.</span></span> <span data-ttu-id="ad45c-115">WCF erhält ein Token von einem angegebenen Aussteller und dieses Token an den Dienst zum Authentifizieren des Clients präsentiert.</span><span class="sxs-lookup"><span data-stu-id="ad45c-115">WCF acquires a token from a specified issuer and presents that token to the service to authenticate the client.</span></span>

2. <span data-ttu-id="ad45c-116">Legen Sie auf Verbundclients die <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerAddress%2A>-Eigenschaft auf die URL des Sicherheitstokendiensts fest.</span><span class="sxs-lookup"><span data-stu-id="ad45c-116">On federated clients, set the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerAddress%2A> property to the URL of the security token service.</span></span> <span data-ttu-id="ad45c-117">Legen Sie <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerBinding%2A> auf die Bindung fest, die für die Kommunikation mit dem Sicherheitstokendienst verwendet werden soll.</span><span class="sxs-lookup"><span data-stu-id="ad45c-117">Set the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerBinding%2A> to the binding to use to communicate with the security token service.</span></span>

3. <span data-ttu-id="ad45c-118">Dies ist optional.</span><span class="sxs-lookup"><span data-stu-id="ad45c-118">Optional.</span></span> <span data-ttu-id="ad45c-119">Legen Sie die <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuedTokenType%2A>-Eigenschaft auf den Uniform Resource Identifier (URI) eines Tokentyps fest.</span><span class="sxs-lookup"><span data-stu-id="ad45c-119">Set the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuedTokenType%2A> property to the Uniform Resource Identifier (URI) of a token type.</span></span> <span data-ttu-id="ad45c-120">Geben Sie bei Verbunddiensten den Tokentyp an, der vom Dienst erwartet wird.</span><span class="sxs-lookup"><span data-stu-id="ad45c-120">On federated services, specify the token type that the service expects.</span></span> <span data-ttu-id="ad45c-121">Geben Sie bei Verbundclients den Tokentyp an, der durch den Client vom Sicherheitstokendienst angefordert wird.</span><span class="sxs-lookup"><span data-stu-id="ad45c-121">On federated clients, specify the token type the client requests from the security token service.</span></span>

     <span data-ttu-id="ad45c-122">Ist kein Tokentyp angegeben, werden von den Clients WS-Trust Request Security-Tokens (RSTs) ohne Tokentyp-URI generiert, und von den Diensten wird standardmäßig eine Clientauthentifizierung mithilfe eines SAML 1.1-Tokens (Security Assertions Markup Language) erwartet.</span><span class="sxs-lookup"><span data-stu-id="ad45c-122">If no token type is specified, clients generate WS-Trust Request Security Tokens (RSTs) without a token type URI, and services expect client authentication using a Security Assertions Markup Language (SAML) 1.1 token by default.</span></span>

     <span data-ttu-id="ad45c-123">Der URI für ein SAML 1.1-Token ist `http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV1.1`.</span><span class="sxs-lookup"><span data-stu-id="ad45c-123">The URI for a SAML 1.1 token is `http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV1.1`.</span></span>

4. <span data-ttu-id="ad45c-124">Dies ist optional.</span><span class="sxs-lookup"><span data-stu-id="ad45c-124">Optional.</span></span> <span data-ttu-id="ad45c-125">Legen Sie bei Verbunddiensten die <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerMetadataAddress%2A>-Eigenschaft auf die Metadaten-URL eines Sicherheitstokendiensts fest.</span><span class="sxs-lookup"><span data-stu-id="ad45c-125">On federated services, set the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerMetadataAddress%2A> property to the metadata URL of a security token service.</span></span> <span data-ttu-id="ad45c-126">Der Metadatenendpunkt ermöglicht den Clients des Diensts das Auswählen eines geeigneten Bindungs-/Endpunktpaars, sofern der Dienst zum Veröffentlichen von Metadaten konfiguriert ist.</span><span class="sxs-lookup"><span data-stu-id="ad45c-126">The metadata endpoint enables clients of the service to select an appropriate binding/endpoint pair, if the service is configured to publish metadata.</span></span> <span data-ttu-id="ad45c-127">Weitere Informationen zum Veröffentlichen von Metadaten finden Sie unter [Veröffentlichungsmetadaten](publishing-metadata.md).</span><span class="sxs-lookup"><span data-stu-id="ad45c-127">For more information about publishing metadata, see [Publishing Metadata](publishing-metadata.md).</span></span>

 <span data-ttu-id="ad45c-128">Auch andere Eigenschaften können festgelegt werden. Dazu zählen unter anderem der Schlüsseltyp, der im ausgestellten Token als Prüfschlüssel verwendet wird, die zwischen Client und Dienst verwendete Algorithmussammlung, die Einstellung, ob die Dienstanmeldeinformationen ausgehandelt oder explizit angegeben werden, bestimmte Ansprüche, die vom Dienst im ausgestellten Token erwartet werden, sowie sämtliche zusätzliche XML-Elemente, die der vom Client an den Sicherheitstokendienst gesendeten Anforderung hinzugefügt werden müssen.</span><span class="sxs-lookup"><span data-stu-id="ad45c-128">You can also set other properties, including the type of key used as a proof key in the issued token, the algorithm suite to use between the client and the service, whether to negotiate or explicitly specify the service credential, any specific claims the service expects the issued token to contain, and any additional XML elements that must be added to the request the client sends to the security token service.</span></span>

> [!NOTE]
>  <span data-ttu-id="ad45c-129">Die `NegotiateServiceCredential`-Eigenschaft ist nur relevant, wenn `SecurityMode` auf `Message` festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="ad45c-129">The `NegotiateServiceCredential` property is only relevant when the `SecurityMode` is set to `Message`.</span></span> <span data-ttu-id="ad45c-130">Ist `SecurityMode` auf `TransportWithMessageCredential` festgelegt, wird die `NegotiateServiceCredential`-Eigenschaft ignoriert.</span><span class="sxs-lookup"><span data-stu-id="ad45c-130">If `SecurityMode` is set to `TransportWithMessageCredential`, then the `NegotiateServiceCredential` property is ignored.</span></span>

## <a name="to-configure-a-wsfederationhttpbinding-in-code"></a><span data-ttu-id="ad45c-131">So konfigurieren Sie WSFederationHttpBinding im Code</span><span class="sxs-lookup"><span data-stu-id="ad45c-131">To configure a WSFederationHttpBinding in code</span></span>

1. <span data-ttu-id="ad45c-132">Erstellen Sie eine Instanz von <xref:System.ServiceModel.WSFederationHttpBinding>.</span><span class="sxs-lookup"><span data-stu-id="ad45c-132">Create an instance of the <xref:System.ServiceModel.WSFederationHttpBinding>.</span></span>

2. <span data-ttu-id="ad45c-133">Legen Sie die <xref:System.ServiceModel.WSFederationHttpSecurity.Mode%2A>-Eigenschaft gemäß Ihren Anforderungen auf <xref:System.ServiceModel.WSFederationHttpSecurityMode> oder <xref:System.ServiceModel.WSFederationHttpSecurityMode.Message> fest.</span><span class="sxs-lookup"><span data-stu-id="ad45c-133">Set the <xref:System.ServiceModel.WSFederationHttpSecurity.Mode%2A> property to <xref:System.ServiceModel.WSFederationHttpSecurityMode> or <xref:System.ServiceModel.WSFederationHttpSecurityMode.Message> as required.</span></span> <span data-ttu-id="ad45c-134">Wenn eine algorithmussuite außer <xref:System.ServiceModel.Security.SecurityAlgorithmSuite.Basic256%2A> erforderlich ist, legen Sie die <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.AlgorithmSuite%2A> Eigenschaft ein Wert aus <xref:System.ServiceModel.Security.SecurityAlgorithmSuite>.</span><span class="sxs-lookup"><span data-stu-id="ad45c-134">If an algorithm suite other than <xref:System.ServiceModel.Security.SecurityAlgorithmSuite.Basic256%2A> is required, set the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.AlgorithmSuite%2A> property to a value taken from <xref:System.ServiceModel.Security.SecurityAlgorithmSuite>.</span></span>

3. <span data-ttu-id="ad45c-135">Legen Sie die <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.NegotiateServiceCredential%2A>-Eigenschaft auf einen geeigneten Wert fest.</span><span class="sxs-lookup"><span data-stu-id="ad45c-135">Set the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.NegotiateServiceCredential%2A> property as appropriate.</span></span>

4. <span data-ttu-id="ad45c-136">Legen Sie die <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuedKeyType%2A> Eigenschaft <xref:System.IdentityModel.Tokens.SecurityKeyType> `SymmetricKey` oder.`AsymmetricKey`</span><span class="sxs-lookup"><span data-stu-id="ad45c-136">Set the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuedKeyType%2A> property to <xref:System.IdentityModel.Tokens.SecurityKeyType>`SymmetricKey` or .`AsymmetricKey`</span></span> <span data-ttu-id="ad45c-137">nach Bedarf.</span><span class="sxs-lookup"><span data-stu-id="ad45c-137">as required.</span></span>

5. <span data-ttu-id="ad45c-138">Legen Sie die <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuedTokenType%2A>-Eigenschaft auf einen geeigneten Wert fest.</span><span class="sxs-lookup"><span data-stu-id="ad45c-138">Set the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuedTokenType%2A> property to the appropriate value.</span></span> <span data-ttu-id="ad45c-139">Wenn kein Wert festgelegt ist, verwendet WCF standardmäßig `http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV1.1`, womit der SAML 1.1-Token.</span><span class="sxs-lookup"><span data-stu-id="ad45c-139">If no value is set, WCF defaults to `http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV1.1`, which indicates SAML 1.1 tokens.</span></span>

6. <span data-ttu-id="ad45c-140">Ist erforderlich für den Client, wenn kein lokaler Aussteller angegeben ist. Optional für den Dienst.</span><span class="sxs-lookup"><span data-stu-id="ad45c-140">Required on the client if no local issuer is specified; optional on the service.</span></span> <span data-ttu-id="ad45c-141">Erstellen Sie eine <xref:System.ServiceModel.EndpointAddress> mit der Adresse und den Identitätsinformationen des Sicherheitstokendiensts, und weisen Sie die <xref:System.ServiceModel.EndpointAddress>-Instanz der <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerAddress%2A>-Eigenschaft zu.</span><span class="sxs-lookup"><span data-stu-id="ad45c-141">Create an <xref:System.ServiceModel.EndpointAddress> that contains the address and identity information of the security token service and assign the <xref:System.ServiceModel.EndpointAddress> instance to the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerAddress%2A> property.</span></span>

7. <span data-ttu-id="ad45c-142">Erforderlich für den Client, wenn kein lokaler Aussteller angegeben ist. Wird nicht für den Dienst verwendet.</span><span class="sxs-lookup"><span data-stu-id="ad45c-142">Required on the client if no local issuer is specified; not used on the service.</span></span> <span data-ttu-id="ad45c-143">Erstellen Sie eine <xref:System.ServiceModel.Channels.Binding> für die `SecurityTokenService` und weisen Sie die <xref:System.ServiceModel.Channels.Binding> -Instanz, auf die <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerBinding%2A> Eigenschaft.</span><span class="sxs-lookup"><span data-stu-id="ad45c-143">Create a <xref:System.ServiceModel.Channels.Binding> for the `SecurityTokenService` and assign the <xref:System.ServiceModel.Channels.Binding> instance to the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerBinding%2A> property.</span></span>

8. <span data-ttu-id="ad45c-144">Wird nicht für den Client verwendet. Optional für den Dienst.</span><span class="sxs-lookup"><span data-stu-id="ad45c-144">Not used on the client; optional on the service.</span></span> <span data-ttu-id="ad45c-145">Erstellen Sie eine <xref:System.ServiceModel.EndpointAddress>-Instanz für die Metadaten des Sicherheitstokendiensts, und weisen Sie sie der `IssuerMetadataAddress`-Eigenschaft zu.</span><span class="sxs-lookup"><span data-stu-id="ad45c-145">Create an <xref:System.ServiceModel.EndpointAddress> instance for the metadata of the security token service and assign it to the `IssuerMetadataAddress` property.</span></span>

9. <span data-ttu-id="ad45c-146">Optional für Client und Dienst.</span><span class="sxs-lookup"><span data-stu-id="ad45c-146">Optional on both the client and the service.</span></span> <span data-ttu-id="ad45c-147">Erstellen Sie mindestens eine <xref:System.ServiceModel.Security.Tokens.ClaimTypeRequirement>-Instanz, und fügen Sie sie der von der <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.ClaimTypeRequirements%2A>-Eigenschaft zurückgegebenen Auflistung hinzu.</span><span class="sxs-lookup"><span data-stu-id="ad45c-147">Create and add one or more <xref:System.ServiceModel.Security.Tokens.ClaimTypeRequirement> instances to the collection returned by the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.ClaimTypeRequirements%2A> property.</span></span>

10. <span data-ttu-id="ad45c-148">Optional für Client und Dienst.</span><span class="sxs-lookup"><span data-stu-id="ad45c-148">Optional on both the client and the service.</span></span> <span data-ttu-id="ad45c-149">Erstellen Sie mindestens eine <xref:System.Xml.XmlElement>-Instanz, und fügen Sie sie der von der <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.TokenRequestParameters%2A>-Eigenschaft zurückgegebenen Auflistung hinzu.</span><span class="sxs-lookup"><span data-stu-id="ad45c-149">Create and add one or more <xref:System.Xml.XmlElement> instances to the collection returned by the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.TokenRequestParameters%2A> property.</span></span>

## <a name="to-create-a-federated-endpoint-in-configuration"></a><span data-ttu-id="ad45c-150">So erstellen Sie einen Verbundendpunkt in der Konfiguration</span><span class="sxs-lookup"><span data-stu-id="ad45c-150">To create a federated endpoint in configuration</span></span>

1. <span data-ttu-id="ad45c-151">Erstellen Sie eine [ \<WsFederationHttpBinding >](../../../../docs/framework/configure-apps/file-schema/wcf/wsfederationhttpbinding.md) als untergeordnetes Element der [ \<Bindungen >](../../../../docs/framework/configure-apps/file-schema/wcf/bindings.md) Element in der Konfigurationsdatei der Anwendung.</span><span class="sxs-lookup"><span data-stu-id="ad45c-151">Create a [\<wsFederationHttpBinding>](../../../../docs/framework/configure-apps/file-schema/wcf/wsfederationhttpbinding.md) as a child of the [\<bindings>](../../../../docs/framework/configure-apps/file-schema/wcf/bindings.md) element in the application configuration file.</span></span>

2. <span data-ttu-id="ad45c-152">Erstellen Sie eine [ \<Bindung >](../../../../docs/framework/misc/binding.md) -Element als untergeordnetes Element des [ \<WsFederationHttpBinding >](../../../../docs/framework/configure-apps/file-schema/wcf/wsfederationhttpbinding.md) und legen Sie die `name` -Attribut auf einen geeigneten Wert.</span><span class="sxs-lookup"><span data-stu-id="ad45c-152">Create a [\<binding>](../../../../docs/framework/misc/binding.md) element as a child of [\<wsFederationHttpBinding>](../../../../docs/framework/configure-apps/file-schema/wcf/wsfederationhttpbinding.md) and set the `name` attribute to an appropriate value.</span></span>

3. <span data-ttu-id="ad45c-153">Erstellen Sie eine `<security>` Element als untergeordnetes Element der [ \<Bindung >](../../../../docs/framework/misc/binding.md) Element.</span><span class="sxs-lookup"><span data-stu-id="ad45c-153">Create a `<security>` element as a child of the [\<binding>](../../../../docs/framework/misc/binding.md) element.</span></span>

4. <span data-ttu-id="ad45c-154">Legen Sie das `mode`-Attribut des `<security>``TransportWithMessageCredential`-Elements gemäß Ihren Anforderungen auf `Message` oder  fest.</span><span class="sxs-lookup"><span data-stu-id="ad45c-154">Set the `mode` attribute on the `<security>` element to a value of `Message` or `TransportWithMessageCredential`, as required.</span></span>

5. <span data-ttu-id="ad45c-155">Erstellen Sie ein `<message>`-Element als untergeordnetes Element des `<security>`-Elements.</span><span class="sxs-lookup"><span data-stu-id="ad45c-155">Create a `<message>` element as a child of the `<security>` element.</span></span>

6. <span data-ttu-id="ad45c-156">Dies ist optional.</span><span class="sxs-lookup"><span data-stu-id="ad45c-156">Optional.</span></span> <span data-ttu-id="ad45c-157">Legen Sie das `algorithmSuite`-Attribut des `<message>`-Elements auf einen geeigneten Wert fest.</span><span class="sxs-lookup"><span data-stu-id="ad45c-157">Set the `algorithmSuite` attribute on the `<message>` element with an appropriate value.</span></span> <span data-ttu-id="ad45c-158">Die Standardeinstellung ist `Basic256`.</span><span class="sxs-lookup"><span data-stu-id="ad45c-158">The default is `Basic256`.</span></span>

7. <span data-ttu-id="ad45c-159">Dies ist optional.</span><span class="sxs-lookup"><span data-stu-id="ad45c-159">Optional.</span></span> <span data-ttu-id="ad45c-160">Ist ein asymmetrischer Prüfschlüssel erforderlich, legen Sie das `issuedKeyType`-Attribut des `<message>`AsymmetricKey-Elements auf`AsymmetricKey` fest.</span><span class="sxs-lookup"><span data-stu-id="ad45c-160">If an asymmetric proof key is required, set the `issuedKeyType` attribute of the `<message>` element to `AsymmetricKey`.</span></span> <span data-ttu-id="ad45c-161">Die Standardeinstellung ist `SymmetricKey`.</span><span class="sxs-lookup"><span data-stu-id="ad45c-161">The default is `SymmetricKey`.</span></span>

8. <span data-ttu-id="ad45c-162">Dies ist optional.</span><span class="sxs-lookup"><span data-stu-id="ad45c-162">Optional.</span></span> <span data-ttu-id="ad45c-163">Legen Sie das `issuedTokenType`-Attribut des `<message>`-Elements fest.</span><span class="sxs-lookup"><span data-stu-id="ad45c-163">Set the `issuedTokenType` attribute on the `<message>` element.</span></span>

9. <span data-ttu-id="ad45c-164">Ist erforderlich für den Client, wenn kein lokaler Aussteller angegeben ist. Optional für den Dienst.</span><span class="sxs-lookup"><span data-stu-id="ad45c-164">Required on the client if no local issuer is specified; optional on the service.</span></span> <span data-ttu-id="ad45c-165">Erstellen Sie ein `<issuer>`-Element als untergeordnetes Element des `<message>`-Elements.</span><span class="sxs-lookup"><span data-stu-id="ad45c-165">Create an `<issuer>` element as a child of the `<message>` element.</span></span>

10. <span data-ttu-id="ad45c-166">Legen Sie das `address`-Attribut auf das `<issuer>`-Element fest, und geben Sie die Adresse an, unter der vom Sicherheitstokendienst Tokenanforderungen angenommen werden.</span><span class="sxs-lookup"><span data-stu-id="ad45c-166">Set the `address` attribute to the `<issuer>` element and specify the address at which the security token service accepts token requests.</span></span>

11. <span data-ttu-id="ad45c-167">Dies ist optional.</span><span class="sxs-lookup"><span data-stu-id="ad45c-167">Optional.</span></span> <span data-ttu-id="ad45c-168">Fügen Sie ein untergeordnetes `<identity>`-Element hinzu, und geben Sie die Identität des Sicherheitstokendiensts an.</span><span class="sxs-lookup"><span data-stu-id="ad45c-168">Add an `<identity>` child element and specify the identity of the security token service</span></span>

12. <span data-ttu-id="ad45c-169">Weitere Informationen finden Sie unter [Dienstidentität und Authentifizierung](service-identity-and-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="ad45c-169">For more information, see [Service Identity and Authentication](service-identity-and-authentication.md).</span></span>

13. <span data-ttu-id="ad45c-170">Erforderlich für den Client, wenn kein lokaler Aussteller angegeben ist. Wird nicht für den Dienst verwendet.</span><span class="sxs-lookup"><span data-stu-id="ad45c-170">Required on the client if no local issuer is specified; not used on the service.</span></span> <span data-ttu-id="ad45c-171">Erstellen Sie eine [ \<Bindung >](../../../../docs/framework/misc/binding.md) Element im Bindungsabschnitt, die für die Kommunikation mit dem Sicherheitstokendienst verwendet werden kann.</span><span class="sxs-lookup"><span data-stu-id="ad45c-171">Create a [\<binding>](../../../../docs/framework/misc/binding.md) element in the bindings section that can be used to communicate with the security token service.</span></span> <span data-ttu-id="ad45c-172">Weitere Informationen zum Erstellen einer Bindung finden Sie unter [Vorgehensweise: Angeben eine Dienstbindung in einer Konfiguration](../../../../docs/framework/wcf/how-to-specify-a-service-binding-in-configuration.md).</span><span class="sxs-lookup"><span data-stu-id="ad45c-172">For more information about creating a binding, see [How to: Specify a Service Binding in Configuration](../../../../docs/framework/wcf/how-to-specify-a-service-binding-in-configuration.md).</span></span>

14. <span data-ttu-id="ad45c-173">Geben Sie die im vorangegangenen Schritt erstellte Bindung an, indem Sie das `binding`-Attribut und das `bindingConfiguration`-Attribut des `<issuer>`-Elements festlegen.</span><span class="sxs-lookup"><span data-stu-id="ad45c-173">Specify the binding created in the previous step by setting the `binding` and `bindingConfiguration` attributes of the `<issuer>` element.</span></span>

15. <span data-ttu-id="ad45c-174">Wird nicht für den Client verwendet. Optional für den Dienst.</span><span class="sxs-lookup"><span data-stu-id="ad45c-174">Not used on the client; optional on the service.</span></span> <span data-ttu-id="ad45c-175">Erstellen Sie eine `<issuerMetadata>` Element als untergeordnetes Element der <`message`> Element.</span><span class="sxs-lookup"><span data-stu-id="ad45c-175">Create an `<issuerMetadata>` element as a child of the <`message`> element.</span></span> <span data-ttu-id="ad45c-176">Geben Sie anschließend in einem `address`-Attribut des `<issuerMetadata>`-Elements die Adresse an, unter der die Metadaten des Sicherheitstokendiensts veröffentlicht werden.</span><span class="sxs-lookup"><span data-stu-id="ad45c-176">Then, in an `address` attribute on the `<issuerMetadata>` element, specify the address at which the security token service is to publish its metadata.</span></span> <span data-ttu-id="ad45c-177">Optional können Sie ein untergeordnetes `<identity>`-Element hinzufügen und die Identität des Sicherheitstokendiensts angeben.</span><span class="sxs-lookup"><span data-stu-id="ad45c-177">Optionally, add an `<identity>` child element and specify the identity of the security token service.</span></span>

16. <span data-ttu-id="ad45c-178">Optional für Client und Dienst.</span><span class="sxs-lookup"><span data-stu-id="ad45c-178">Optional on both the client and the service.</span></span> <span data-ttu-id="ad45c-179">Fügen Sie ein `<claimTypeRequirements>`-Element als untergeordnetes Element des `<message>`-Elements hinzu.</span><span class="sxs-lookup"><span data-stu-id="ad45c-179">Add a `<claimTypeRequirements>` element as a child of the `<message>` element.</span></span> <span data-ttu-id="ad45c-180">Geben Sie die erforderlichen und optionalen Ansprüche, die der Dienst beruht, durch das Hinzufügen [ \<hinzufügen >](../../../../docs/framework/configure-apps/file-schema/wcf/add-of-claimtyperequirements.md) Elementen, die die `<claimTypeRequirements>` Element- und Angeben des Anspruchs eingeben, mit der `claimType` Attribut.</span><span class="sxs-lookup"><span data-stu-id="ad45c-180">Specify required and optional claims that the service relies on by adding [\<add>](../../../../docs/framework/configure-apps/file-schema/wcf/add-of-claimtyperequirements.md) elements to the `<claimTypeRequirements>` element and specifying the claim type with the `claimType` attribute.</span></span> <span data-ttu-id="ad45c-181">Geben Sie an, ob ein bestimmter Anspruch erforderlich oder optional ist, indem Sie das `isOptional`-Attribut festlegen.</span><span class="sxs-lookup"><span data-stu-id="ad45c-181">Specify whether a given claim is required or optional by setting the `isOptional` attribute.</span></span>

## <a name="example"></a><span data-ttu-id="ad45c-182">Beispiel</span><span class="sxs-lookup"><span data-stu-id="ad45c-182">Example</span></span>

<span data-ttu-id="ad45c-183">Das folgende Codebeispiel zeigt einen Code zum imperativen Einrichten einer `WSFederationHttpBinding`.</span><span class="sxs-lookup"><span data-stu-id="ad45c-183">The following code sample shows code for setting up a `WSFederationHttpBinding` imperatively.</span></span>

[!code-csharp[c_FederationBinding#2](~/samples/snippets/csharp/VS_Snippets_CFX/c_federationbinding/cs/source.cs#2)]
[!code-vb[c_FederationBinding#2](~/samples/snippets/visualbasic/VS_Snippets_CFX/c_federationbinding/vb/source.vb#2)]

## <a name="see-also"></a><span data-ttu-id="ad45c-184">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="ad45c-184">See also</span></span>

- [<span data-ttu-id="ad45c-185">Verbund</span><span class="sxs-lookup"><span data-stu-id="ad45c-185">Federation</span></span>](federation.md)
- [<span data-ttu-id="ad45c-186">Verbundbeispiel</span><span class="sxs-lookup"><span data-stu-id="ad45c-186">Federation Sample</span></span>](../../../../docs/framework/wcf/samples/federation-sample.md)
- [<span data-ttu-id="ad45c-187">Vorgehensweise: Deaktivieren von Sicherheitssitzungen auf einer WSFederationHttpBinding</span><span class="sxs-lookup"><span data-stu-id="ad45c-187">How to: Disable Secure Sessions on a WSFederationHttpBinding</span></span>](how-to-disable-secure-sessions-on-a-wsfederationhttpbinding.md)