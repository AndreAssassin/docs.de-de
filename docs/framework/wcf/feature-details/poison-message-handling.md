---
title: Behandlung nicht verarbeitbarer Nachrichten
ms.date: 03/30/2017
ms.assetid: 8d1c5e5a-7928-4a80-95ed-d8da211b8595
ms.openlocfilehash: fe748ac40f03ed22cacb254ab464a6caf3d27a8c
ms.sourcegitcommit: 9b552addadfb57fab0b9e7852ed4f1f1b8a42f8e
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 04/23/2019
ms.locfileid: "62046436"
---
# <a name="poison-message-handling"></a><span data-ttu-id="d1624-102">Behandlung nicht verarbeitbarer Nachrichten</span><span class="sxs-lookup"><span data-stu-id="d1624-102">Poison Message Handling</span></span>
<span data-ttu-id="d1624-103">Ein *für nicht verarbeitbare Nachrichten* ist eine Nachricht, das die maximale Anzahl von Versuchen nicht an der Anwendung überschritten hat.</span><span class="sxs-lookup"><span data-stu-id="d1624-103">A *poison message* is a message that has exceeded the maximum number of delivery attempts to the application.</span></span> <span data-ttu-id="d1624-104">Diese Situation kann auftreten, wenn eine warteschlangenbasierte Anwendung aufgrund der Fehler keine Nachricht verarbeiten kann.</span><span class="sxs-lookup"><span data-stu-id="d1624-104">This situation can arise when a queue-based application cannot process a message because of errors.</span></span> <span data-ttu-id="d1624-105">Um Zuverlässigkeitsforderungen zu erfüllen, empfängt eine in der Warteschlange stehende Anwendung Nachrichten unter einer Transaktion.</span><span class="sxs-lookup"><span data-stu-id="d1624-105">To meet reliability demands, a queued application receives messages under a transaction.</span></span> <span data-ttu-id="d1624-106">Beim Abbrechen der Transaktion, in der eine in der Warteschlange stehende Nachricht empfangen wurde, bleibt die Nachricht in der Warteschlange und wird dann unter einer neuen Transaktion wiederholt.</span><span class="sxs-lookup"><span data-stu-id="d1624-106">Aborting the transaction in which a queued message was received leaves the message in the queue so that the message is retried under a new transaction.</span></span> <span data-ttu-id="d1624-107">Wenn das Problem, das zum Abbrechen der Transaktion geführt hat, nicht korrigiert wird, kann die empfangende Anwendung in einer Schleife hängen bleiben, in der sie dieselbe Nachricht immer wieder empfängt und abbricht, bis die maximale Anzahl der Zustellversuche überschritten ist. Auf diese Weise entsteht eine nicht verarbeitbare Nachricht.</span><span class="sxs-lookup"><span data-stu-id="d1624-107">If the problem that caused the transaction to abort is not corrected, the receiving application can get stuck in a loop receiving and aborting the same message until the maximum number of delivery attempts has been exceeded and a poison message results.</span></span>  
  
 <span data-ttu-id="d1624-108">Eine Nachricht kann aus vielen Gründen zu einer nicht verarbeitbaren Nachrichten werden.</span><span class="sxs-lookup"><span data-stu-id="d1624-108">A message can become a poison message for many reasons.</span></span> <span data-ttu-id="d1624-109">Die häufigsten Ursachen sind anwendungsspezifisch.</span><span class="sxs-lookup"><span data-stu-id="d1624-109">The most common reasons are application specific.</span></span> <span data-ttu-id="d1624-110">Wenn beispielsweise eine Anwendung eine Nachricht aus einer Warteschlange liest und dann Datenbankprozesse durchführt, kann es vorkommen, dass von der Anwendung keine Sperre für die Datenbank bewirkt werden kann. Dies führt dann dazu, dass sie die Transaktion abbricht.</span><span class="sxs-lookup"><span data-stu-id="d1624-110">For example, if an application reads a message from a queue and performs some database processing, the application may fail to get a lock on the database, causing it to abort the transaction.</span></span> <span data-ttu-id="d1624-111">Da die Datenbanktransaktion abgebrochen wurde, verbleibt die Nachricht in der Warteschlange, wodurch die Nachricht von der Anwendung ein zweites Mal gelesen und ein neuer Versuch gestartet wird, eine Sperrung der Datenbank zu bewirken.</span><span class="sxs-lookup"><span data-stu-id="d1624-111">Because the database transaction was aborted, the message remains in the queue, which causes the application to reread the message a second time and make another attempt to acquire a lock on the database.</span></span> <span data-ttu-id="d1624-112">Nachrichten können auch nicht verarbeitbar werden, wenn sie ungültige Informationen enthalten.</span><span class="sxs-lookup"><span data-stu-id="d1624-112">Messages can also become poison if they contain invalid information.</span></span> <span data-ttu-id="d1624-113">So enthält z. B. eine Bestellung möglicherweise eine ungültige Kundennummer.</span><span class="sxs-lookup"><span data-stu-id="d1624-113">For example, a purchase order may contain an invalid customer number.</span></span> <span data-ttu-id="d1624-114">In diesen Fällen kann die Anwendung die Transaktion freiwillig abbrechen und die Nachricht zwingen, eine nicht verarbeitbare Nachricht zu werden.</span><span class="sxs-lookup"><span data-stu-id="d1624-114">In these cases, the application may voluntarily abort the transaction and force the message to become a poison message.</span></span>  
  
 <span data-ttu-id="d1624-115">Bei seltenen Gelegenheiten können Nachrichten nicht zur Anwendung weitergeleitet werden.</span><span class="sxs-lookup"><span data-stu-id="d1624-115">On rare occasions, messages can fail to get dispatched to the application.</span></span> <span data-ttu-id="d1624-116">Die Windows Communication Foundation (WCF)-Ebene möglicherweise ein Problem mit der Nachricht, z. B. wenn die Nachricht den falschen Frame, ungültige nachrichtenanmeldeinformationen im Anhang oder einen ungültigen aktionsheader.</span><span class="sxs-lookup"><span data-stu-id="d1624-116">The Windows Communication Foundation (WCF) layer may find a problem with the message, such as if the message has the wrong frame, invalid message credentials attached to it, or an invalid action header.</span></span> <span data-ttu-id="d1624-117">In diesen Fällen empfängt die Anwendung die Nachricht niemals; trotzdem kann die Nachricht noch zu einer nicht verarbeitbaren Nachricht werden, die manuell verarbeitet werden kann.</span><span class="sxs-lookup"><span data-stu-id="d1624-117">In these cases, the application never receives the message; however, the message can still become a poison message and be processed manually.</span></span>  
  
## <a name="handling-poison-messages"></a><span data-ttu-id="d1624-118">Behandeln von nicht verarbeitbaren Nachrichten</span><span class="sxs-lookup"><span data-stu-id="d1624-118">Handling Poison Messages</span></span>  
 <span data-ttu-id="d1624-119">In WCF bietet die Handhabung beschädigter Nachrichten einen Mechanismus für eine empfangende Anwendung zum Umgang mit Nachrichten, die an die Anwendung weitergeleitet werden können oder Nachrichten, die zur Anwendung weitergeleitet werden, aber nicht die aufgrund einer anwendungsspezifischen verarbeitet werden Gründe.</span><span class="sxs-lookup"><span data-stu-id="d1624-119">In WCF, poison message handling provides a mechanism for a receiving application to deal with messages that cannot be dispatched to the application, or messages that are dispatched to the application but which fail to be processed because of application-specific reasons.</span></span> <span data-ttu-id="d1624-120">Die Konfiguration der Behandlung nicht verarbeitbarer Nachrichten erfolgt in jeder der verfügbaren, in der Warteschlange stehenden Bindungen durch die folgenden Eigenschaften:</span><span class="sxs-lookup"><span data-stu-id="d1624-120">Poison message handling is configured by the following properties in each of the available queued bindings:</span></span>  
  
- <span data-ttu-id="d1624-121">`ReceiveRetryCount`.</span><span class="sxs-lookup"><span data-stu-id="d1624-121">`ReceiveRetryCount`.</span></span> <span data-ttu-id="d1624-122">Ein Ganzzahlwert, die die maximale Anzahl der Neuversuche für den Versand einer Nachricht von der Anwendungswarteschlange zu der Anwendung angibt.</span><span class="sxs-lookup"><span data-stu-id="d1624-122">An integer value that indicates the maximum number of times to retry delivery of a message from the application queue to the application.</span></span> <span data-ttu-id="d1624-123">Der Standardwert ist 5.</span><span class="sxs-lookup"><span data-stu-id="d1624-123">The default value is 5.</span></span> <span data-ttu-id="d1624-124">Dieser Wert ist in Fällen ausreichend, in denen eine sofortige Wiederholung das Problem behebt, beispielsweise wenn ein temporärer Deadlock für eine Datenbank vorliegt.</span><span class="sxs-lookup"><span data-stu-id="d1624-124">This is sufficient in cases where an immediate retry fixes the problem, such as with a temporary deadlock on a database.</span></span>  
  
- <span data-ttu-id="d1624-125">`MaxRetryCycles`.</span><span class="sxs-lookup"><span data-stu-id="d1624-125">`MaxRetryCycles`.</span></span> <span data-ttu-id="d1624-126">Ein Ganzzahlwert, der die maximale Anzahl der Wiederholungszyklen angibt.</span><span class="sxs-lookup"><span data-stu-id="d1624-126">An integer value that indicates the maximum number of retry cycles.</span></span> <span data-ttu-id="d1624-127">Ein Wiederholungszyklus umfasst die Übertragung einer Nachricht von der Anwendungswarteschlange zur untergeordneten Wiederholungswarteschlange und – nach einer konfigurierbaren Verzögerung – die Rückübertragung der Nachricht aus der untergeordneten Wiederholungswarteschlange zur Anwendungswarteschlange, um einen erneuten Zustellversuch zu unternehmen.</span><span class="sxs-lookup"><span data-stu-id="d1624-127">A retry cycle consists of transferring a message from the application queue to the retry subqueue and, after a configurable delay, from the retry subqueue back into the application queue to reattempt delivery.</span></span> <span data-ttu-id="d1624-128">Der Standardwert ist 2.</span><span class="sxs-lookup"><span data-stu-id="d1624-128">The default value is 2.</span></span> <span data-ttu-id="d1624-129">In [!INCLUDE[wv](../../../../includes/wv-md.md)] erfolgen maximal (`ReceiveRetryCount` +1) \* (`MaxRetryCycles` + 1) Versuche.</span><span class="sxs-lookup"><span data-stu-id="d1624-129">On [!INCLUDE[wv](../../../../includes/wv-md.md)], the message is tried a maximum of (`ReceiveRetryCount` +1) \* (`MaxRetryCycles` + 1) times.</span></span> <span data-ttu-id="d1624-130">`MaxRetryCycles` wird für [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] und [!INCLUDE[wxp](../../../../includes/wxp-md.md)] ignoriert.</span><span class="sxs-lookup"><span data-stu-id="d1624-130">`MaxRetryCycles` is ignored on [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] and [!INCLUDE[wxp](../../../../includes/wxp-md.md)].</span></span>  
  
- <span data-ttu-id="d1624-131">`RetryCycleDelay`.</span><span class="sxs-lookup"><span data-stu-id="d1624-131">`RetryCycleDelay`.</span></span> <span data-ttu-id="d1624-132">Die Verzögerungszeit für Wiederholungszyklen.</span><span class="sxs-lookup"><span data-stu-id="d1624-132">The time delay between retry cycles.</span></span> <span data-ttu-id="d1624-133">Der Standardwert ist 30 Minuten.</span><span class="sxs-lookup"><span data-stu-id="d1624-133">The default value is 30 minutes.</span></span> <span data-ttu-id="d1624-134">`MaxRetryCycles` und `RetryCycleDelay` bieten gemeinsam einen Mechanismus zur Behandlung des Problems, wenn eine Wiederholung nach einer periodischen Verzögerung das Problem behebt.</span><span class="sxs-lookup"><span data-stu-id="d1624-134">`MaxRetryCycles` and `RetryCycleDelay` together provide a mechanism to address the problem where a retry after a periodic delay fixes the problem.</span></span> <span data-ttu-id="d1624-135">Damit wird z. B. ein gesperrtes Rowset bei einem in SQL Server anstehenden Transaktionscommit behandelt.</span><span class="sxs-lookup"><span data-stu-id="d1624-135">For example, this handles a locked row set in SQL Server pending transaction commit.</span></span>  
  
- <span data-ttu-id="d1624-136">`ReceiveErrorHandling`.</span><span class="sxs-lookup"><span data-stu-id="d1624-136">`ReceiveErrorHandling`.</span></span> <span data-ttu-id="d1624-137">Eine Enumeration, die angibt, welche Aktion für eine Nachricht erfolgen soll, deren Zustellung auch nach der maximalen Anzahl von Wiederholungen fehlgeschlagen ist.</span><span class="sxs-lookup"><span data-stu-id="d1624-137">An enumeration that indicates the action to take for a message that has failed delivery after the maximum number of retries has been attempted.</span></span> <span data-ttu-id="d1624-138">Die Werte können „Fehler“, „Ablegen“, „Ablehnen“ und „Verschieben“ sein.</span><span class="sxs-lookup"><span data-stu-id="d1624-138">The values can be Fault, Drop, Reject, and Move.</span></span> <span data-ttu-id="d1624-139">Die Standardoption ist "Fehler".</span><span class="sxs-lookup"><span data-stu-id="d1624-139">The default option is Fault.</span></span>  
  
- <span data-ttu-id="d1624-140">Fehler.</span><span class="sxs-lookup"><span data-stu-id="d1624-140">Fault.</span></span> <span data-ttu-id="d1624-141">Diese Option sendet einen Fehler an den Listener, der bewirkt hat, dass der `ServiceHost` fehlerhaft agiert.</span><span class="sxs-lookup"><span data-stu-id="d1624-141">This option sends a fault to the listener that caused the `ServiceHost` to fault.</span></span> <span data-ttu-id="d1624-142">Die Nachricht muss durch einen externen Mechanismus aus der Anwendungswarteschlange entfernt werden, bevor die Anwendung mit der Verarbeitung von Nachrichten aus der Warteschlange fortfahren kann.</span><span class="sxs-lookup"><span data-stu-id="d1624-142">The message must be removed from the application queue by some external mechanism before the application can continue to process messages from the queue.</span></span>  
  
- <span data-ttu-id="d1624-143">Ablage.</span><span class="sxs-lookup"><span data-stu-id="d1624-143">Drop.</span></span> <span data-ttu-id="d1624-144">Diese Option legt die nicht verarbeitbare Nachricht ab, und die Nachricht wird der Anwendung nie zugestellt.</span><span class="sxs-lookup"><span data-stu-id="d1624-144">This option drops the poison message and the message is never delivered to the application.</span></span> <span data-ttu-id="d1624-145">Wenn die Eigenschaft `TimeToLive` der Nachricht zu diesem Zeitpunkt bereits abgelaufen ist, kann die Nachricht in der Warteschlange für unzustellbare Nachrichten des Absenders angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="d1624-145">If the message's `TimeToLive` property has expired at this point, then the message may appear in the sender's dead-letter queue.</span></span> <span data-ttu-id="d1624-146">Andernfalls wird die Nachricht nirgendwo angezeigt.</span><span class="sxs-lookup"><span data-stu-id="d1624-146">If not, the message does not appear anywhere.</span></span> <span data-ttu-id="d1624-147">Diese Option gibt an, dass vom Benutzer keine Aktion für den Fall angegeben wurde, dass die Nachricht verloren geht.</span><span class="sxs-lookup"><span data-stu-id="d1624-147">This option indicates that the user has not specified what to do if the message is lost.</span></span>  
  
- <span data-ttu-id="d1624-148">Ablehnen.</span><span class="sxs-lookup"><span data-stu-id="d1624-148">Reject.</span></span> <span data-ttu-id="d1624-149">Diese Option ist nur in [!INCLUDE[wv](../../../../includes/wv-md.md)] verfügbar.</span><span class="sxs-lookup"><span data-stu-id="d1624-149">This option is available only on [!INCLUDE[wv](../../../../includes/wv-md.md)].</span></span> <span data-ttu-id="d1624-150">Damit wird das Message Queuing (MSMQ) angewiesen, eine negative Bestätigung mit dem Hinweis, dass die Anwendung die Nachricht nicht empfangen kann, an den sendenden Warteschlangen-Manager zu senden.</span><span class="sxs-lookup"><span data-stu-id="d1624-150">This instructs Message Queuing (MSMQ) to send a negative acknowledgement back to the sending queue manager that the application cannot receive the message.</span></span> <span data-ttu-id="d1624-151">Die Nachricht wird in die Warteschlange für unzustellbare Nachrichten des sendenden Warteschlangen-Managers eingefügt.</span><span class="sxs-lookup"><span data-stu-id="d1624-151">The message is placed in the sending queue manager's dead-letter queue.</span></span>  
  
- <span data-ttu-id="d1624-152">Verschieben.</span><span class="sxs-lookup"><span data-stu-id="d1624-152">Move.</span></span> <span data-ttu-id="d1624-153">Diese Option ist nur in [!INCLUDE[wv](../../../../includes/wv-md.md)] verfügbar.</span><span class="sxs-lookup"><span data-stu-id="d1624-153">This option is available only on [!INCLUDE[wv](../../../../includes/wv-md.md)].</span></span> <span data-ttu-id="d1624-154">Damit wird die nicht verarbeitbare Nachricht in eine Warteschlange für potenziell schädliche Nachrichten verschoben, sodass sie später durch eine Anwendung zur Behandlung nicht verarbeitbarer Nachrichten verarbeitet werden kann.</span><span class="sxs-lookup"><span data-stu-id="d1624-154">This moves the poison message to a poison-message queue for later processing by a poison-message handling application.</span></span> <span data-ttu-id="d1624-155">Die Warteschlange für potenziell schädliche Nachrichten ist eine untergeordnete Warteschlange der Anwendungswarteschlange.</span><span class="sxs-lookup"><span data-stu-id="d1624-155">The poison-message queue is a subqueue of the application queue.</span></span> <span data-ttu-id="d1624-156">Eine Anwendung für die Handhabung beschädigter Nachrichten kann es sich um einen WCF-Dienst sein, der Nachrichten aus der Warteschlange für nicht verarbeitbare liest.</span><span class="sxs-lookup"><span data-stu-id="d1624-156">A poison-message handling application can be a WCF service that reads messages out of the poison queue.</span></span> <span data-ttu-id="d1624-157">Die Warteschlange für nicht verarbeitbare ist eine Unterwarteschlange der Anwendungswarteschlange und kann als net.msmq:// adressiert werden\<*Computername*>/*ApplicationQueue*; poison, wobei  *Computername* ist der Name des Computers, auf dem die Warteschlange befindet, und die *ApplicationQueue* ist der Name der anwendungsspezifischen Warteschlange.</span><span class="sxs-lookup"><span data-stu-id="d1624-157">The poison queue is a subqueue of the application queue and can be addressed as net.msmq://\<*machine-name*>/*applicationQueue*;poison, where *machine-name* is the name of the computer on which the queue resides and the *applicationQueue* is the name of the application-specific queue.</span></span>  
  
 <span data-ttu-id="d1624-158">Im Folgenden ist die maximale Anzahl von für eine Nachricht durchgeführten Übermittlungsversuchen dargestellt:</span><span class="sxs-lookup"><span data-stu-id="d1624-158">The following are the maximum number of delivery attempts made for a message:</span></span>  
  
- <span data-ttu-id="d1624-159">((ReceiveRetryCount+1) \* (MaxRetryCycles + 1)) auf [!INCLUDE[wv](../../../../includes/wv-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d1624-159">((ReceiveRetryCount+1) \* (MaxRetryCycles + 1)) on [!INCLUDE[wv](../../../../includes/wv-md.md)].</span></span>  
  
- <span data-ttu-id="d1624-160">(ReceiveRetryCount+1) auf [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] und [!INCLUDE[wxp](../../../../includes/wxp-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d1624-160">(ReceiveRetryCount + 1) on [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] and [!INCLUDE[wxp](../../../../includes/wxp-md.md)].</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="d1624-161">Für eine Nachricht, die erfolgreich zugestellt wird, werden keine Wiederholungen durchgeführt.</span><span class="sxs-lookup"><span data-stu-id="d1624-161">No retries are made for a message that is delivered successfully.</span></span>  
  
 <span data-ttu-id="d1624-162">Zur Nachverfolgung, wie oft das Lesen einer Nachricht versucht wurde, verfügt [!INCLUDE[wv](../../../../includes/wv-md.md)] über eine dauerhafte Nachrichteneigenschaft, die die Anzahl der Abbrüche zählt, und über eine Verschiebungszähleigenschaft, die zählt, wie oft die Nachricht zwischen der Anwendungswarteschlange und den untergeordneten Warteschlangen verschoben wurde.</span><span class="sxs-lookup"><span data-stu-id="d1624-162">To keep track of the number of times a message read is attempted, [!INCLUDE[wv](../../../../includes/wv-md.md)] maintains a durable message property that counts the number of aborts and a move count property that counts the number of times the message moves between the application queue and subqueues.</span></span> <span data-ttu-id="d1624-163">Der WCF-Kanal verwendet diese zum Berechnen der empfangswiederholungsanzahl und der wiederholungszyklusanzahl.</span><span class="sxs-lookup"><span data-stu-id="d1624-163">The WCF channel uses these to compute the receive retry count and the retry cycles count.</span></span> <span data-ttu-id="d1624-164">Auf [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] und [!INCLUDE[wxp](../../../../includes/wxp-md.md)], die abbruchanzahl im Arbeitsspeicher verwaltet wird, die von der WCF-Kanal und wird zurückgesetzt, wenn die Anwendung ein Fehler auftritt.</span><span class="sxs-lookup"><span data-stu-id="d1624-164">On [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] and [!INCLUDE[wxp](../../../../includes/wxp-md.md)], the abort count is maintained in memory by the WCF channel and is reset if the application fails.</span></span> <span data-ttu-id="d1624-165">Darüber hinaus kann der WCF-Kanal enthalten, dass die abbruchanzahl für bis zu 256 Nachrichten im Arbeitsspeicher zu einem beliebigen Zeitpunkt.</span><span class="sxs-lookup"><span data-stu-id="d1624-165">Also, the WCF channel can hold the abort counts for up to 256 messages in memory at any time.</span></span> <span data-ttu-id="d1624-166">Wenn eine 257. Nachricht gelesen wird, dann wird die Abbruchanzahl der ältesten Nachricht zurückgesetzt.</span><span class="sxs-lookup"><span data-stu-id="d1624-166">If a 257th message is read, then the oldest message's abort count is reset.</span></span>  
  
 <span data-ttu-id="d1624-167">Die Abbruchanzahl- und Verschiebungsanzahleigenschaften stehen dem Dienstvorgang durch den Vorgangskontext zur Verfügung.</span><span class="sxs-lookup"><span data-stu-id="d1624-167">The abort count and move count properties are available to the service operation through the operation context.</span></span> <span data-ttu-id="d1624-168">Im folgenden Codebeispiel wird der Zugriff darauf veranschaulicht.</span><span class="sxs-lookup"><span data-stu-id="d1624-168">The following code example shows how to access them.</span></span>  
  
 [!code-csharp[S_UE_MSMQ_Poison#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/s_ue_msmq_poison/cs/service.cs#1)]  
  
 <span data-ttu-id="d1624-169">WCF stellt zwei in der Warteschlange stehende standardbindungen bereit:</span><span class="sxs-lookup"><span data-stu-id="d1624-169">WCF provides two standard queued bindings:</span></span>  
  
- <span data-ttu-id="d1624-170"><xref:System.ServiceModel.NetMsmqBinding>.</span><span class="sxs-lookup"><span data-stu-id="d1624-170"><xref:System.ServiceModel.NetMsmqBinding>.</span></span> <span data-ttu-id="d1624-171">Ein [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] Bindung geeignet ist, zum Ausführen warteschlangenbasierter Kommunikation mit anderen WCF-Endpunkten.</span><span class="sxs-lookup"><span data-stu-id="d1624-171">A [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] binding suitable for performing queue-based communication with other WCF endpoints.</span></span>  
  
- <span data-ttu-id="d1624-172"><xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding>.</span><span class="sxs-lookup"><span data-stu-id="d1624-172"><xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding>.</span></span> <span data-ttu-id="d1624-173">Eine Bindung, die zur Kommunikation mit vorhandenen Message Queuing-Anwendungen geeignet ist.</span><span class="sxs-lookup"><span data-stu-id="d1624-173">A binding suitable for communicating with existing Message Queuing applications.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="d1624-174">Sie können Eigenschaften in diesen Bindungen basierend auf den Anforderungen von den WCF-Dienst ändern.</span><span class="sxs-lookup"><span data-stu-id="d1624-174">You can alter properties in these bindings based on the requirements of your WCF service.</span></span> <span data-ttu-id="d1624-175">Der gesamte Mechanismus zur Behandlung nicht verarbeitbarer Nachrichten ist zur empfangenden Anwendung lokal.</span><span class="sxs-lookup"><span data-stu-id="d1624-175">The entire poison message handling mechanism is local to the receiving application.</span></span> <span data-ttu-id="d1624-176">Der Prozess ist für die sendende Anwendung unsichtbar, es sei denn, die empfangende Anwendung beendet den Vorgang und sendet eine negative Bestätigung an den Absender zurück.</span><span class="sxs-lookup"><span data-stu-id="d1624-176">The process is invisible to the sending application unless the receiving application ultimately stops and sends a negative acknowledgment back to the sender.</span></span> <span data-ttu-id="d1624-177">In diesem Fall wird die Nachricht in die Warteschlange für unzustellbare Nachrichten des Absenders verschoben.</span><span class="sxs-lookup"><span data-stu-id="d1624-177">In that case, the message is moved to the sender's dead-letter queue.</span></span>  
  
## <a name="best-practice-handling-msmqpoisonmessageexception"></a><span data-ttu-id="d1624-178">Bewährte Methode: Handling MsmqPoisonMessageException</span><span class="sxs-lookup"><span data-stu-id="d1624-178">Best Practice: Handling MsmqPoisonMessageException</span></span>  
 <span data-ttu-id="d1624-179">Wenn der Dienst feststellt, dass eine Nachricht nicht verarbeitbar ist, löst der Warteschlangentransport eine <xref:System.ServiceModel.MsmqPoisonMessageException> aus, die die `LookupId` der nicht verarbeitbaren Nachricht enthält.</span><span class="sxs-lookup"><span data-stu-id="d1624-179">When the service determines that a message is poison, the queued transport throws a <xref:System.ServiceModel.MsmqPoisonMessageException> that contains the `LookupId` of the poison message.</span></span>  
  
 <span data-ttu-id="d1624-180">Eine empfangende Anwendung kann die <xref:System.ServiceModel.Dispatcher.IErrorHandler>-Schnittstelle implementieren, um alle Fehler zu behandeln, die die Anwendung erfordert.</span><span class="sxs-lookup"><span data-stu-id="d1624-180">A receiving application can implement the <xref:System.ServiceModel.Dispatcher.IErrorHandler> interface to handle any errors that the application requires.</span></span> <span data-ttu-id="d1624-181">Weitere Informationen finden Sie unter [erweitern-Steuerelement über Fehlerbehandlung und Berichterstellung](../../../../docs/framework/wcf/samples/extending-control-over-error-handling-and-reporting.md).</span><span class="sxs-lookup"><span data-stu-id="d1624-181">For more information, see [Extending Control Over Error Handling and Reporting](../../../../docs/framework/wcf/samples/extending-control-over-error-handling-and-reporting.md).</span></span>  
  
 <span data-ttu-id="d1624-182">Die Anwendung erfordert möglicherweise eine bestimmte automatische Behandlung von nicht verarbeitbaren Nachrichten, mit der die nicht verarbeitbaren Nachrichten in eine entsprechende Warteschlange verschoben werden, sodass der Dienst auf die restlichen Nachrichten in der Warteschlange zugreifen kann.</span><span class="sxs-lookup"><span data-stu-id="d1624-182">The application may require some kind of automated handling of poison messages that moves the poison messages to a poison message queue so that the service can access the rest of the messages in the queue.</span></span> <span data-ttu-id="d1624-183">Das einzige Szenario, in dem der Fehlerbehandlungsmechanismus zum Abhören auf Ausnahmen für nicht verarbeitbare Nachrichten verwendet werden kann, liegt vor, wenn die <xref:System.ServiceModel.Configuration.MsmqBindingElementBase.ReceiveErrorHandling%2A>-Einstellung auf <xref:System.ServiceModel.ReceiveErrorHandling.Fault> festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="d1624-183">The only scenario for using the error-handler mechanism to listen for poison-message exceptions is when the <xref:System.ServiceModel.Configuration.MsmqBindingElementBase.ReceiveErrorHandling%2A> setting is set to <xref:System.ServiceModel.ReceiveErrorHandling.Fault>.</span></span> <span data-ttu-id="d1624-184">Das Beispiel der nicht verarbeitbaren Nachricht für Message Queuing 3.0 veranschaulicht dieses Verhalten.</span><span class="sxs-lookup"><span data-stu-id="d1624-184">The poison-message sample for Message Queuing 3.0 demonstrates this behavior.</span></span> <span data-ttu-id="d1624-185">Im Folgenden werden die Schritte zur Behandlung nicht verarbeitbarer Nachrichten, einschließlich empfohlener Vorgehensweisen, umrissen:</span><span class="sxs-lookup"><span data-stu-id="d1624-185">The following outlines the steps to take to handle poison messages, including best practices:</span></span>  
  
1. <span data-ttu-id="d1624-186">Stellen Sie sicher, dass die Einstellungen für nicht verarbeitbare Nachrichten den Anforderungen Ihrer Anwendung entsprechen.</span><span class="sxs-lookup"><span data-stu-id="d1624-186">Ensure your poison settings reflect the requirements of your application.</span></span> <span data-ttu-id="d1624-187">Stellen Sie bei der Arbeit mit diesen Einstellungen sicher, dass Ihnen die Unterschiede zwischen den Message Queuing-Fähigkeiten in [!INCLUDE[wv](../../../../includes/wv-md.md)], [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] und [!INCLUDE[wxp](../../../../includes/wxp-md.md)] bekannt sind.</span><span class="sxs-lookup"><span data-stu-id="d1624-187">When working with the settings, ensure that you understand the differences between the capabilities of Message Queuing on [!INCLUDE[wv](../../../../includes/wv-md.md)], [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)], and [!INCLUDE[wxp](../../../../includes/wxp-md.md)].</span></span>  
  
2. <span data-ttu-id="d1624-188">Implementieren Sie falls erforderlich den `IErrorHandler`, um Fehler mit nicht verarbeitbaren Nachrichten zu behandeln.</span><span class="sxs-lookup"><span data-stu-id="d1624-188">If required, implement the `IErrorHandler` to handle poison-message errors.</span></span> <span data-ttu-id="d1624-189">Das das Festlegen von `ReceiveErrorHandling` auf `Fault` einen manuellen Mechanismus zum Verschieben der nicht verarbeitbaren Nachricht aus der Warteschlange oder zum Korrigieren eines Problems mit externen Abhängigkeiten erfordert, besteht die typische Nutzung darin, den `IErrorHandler` zu implementieren, wenn `ReceiveErrorHandling` auf `Fault` festgelegt ist, wie im folgenden Code gezeigt:</span><span class="sxs-lookup"><span data-stu-id="d1624-189">Because setting `ReceiveErrorHandling` to `Fault` requires a manual mechanism to move the poison message out of the queue or to correct an external dependent issue, the typical usage is to implement `IErrorHandler` when `ReceiveErrorHandling` is set to `Fault`, as shown in the following code.</span></span>  
  
     [!code-csharp[S_UE_MSMQ_Poison#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/s_ue_msmq_poison/cs/poisonerrorhandler.cs#2)]  
  
3. <span data-ttu-id="d1624-190">Erstellen Sie ein `PoisonBehaviorAttribute`, das das Dienstverhalten verwenden kann.</span><span class="sxs-lookup"><span data-stu-id="d1624-190">Create a `PoisonBehaviorAttribute` that the service behavior can use.</span></span> <span data-ttu-id="d1624-191">Das Verhalten installiert den `IErrorHandler` auf dem Verteiler.</span><span class="sxs-lookup"><span data-stu-id="d1624-191">The behavior installs the `IErrorHandler` on the dispatcher.</span></span> <span data-ttu-id="d1624-192">Siehe nachstehendes Codebeispiel.</span><span class="sxs-lookup"><span data-stu-id="d1624-192">See the following code example.</span></span>  
  
     [!code-csharp[S_UE_MSMQ_Poison#3](../../../../samples/snippets/csharp/VS_Snippets_CFX/s_ue_msmq_poison/cs/poisonbehaviorattribute.cs#3)]  
  
4. <span data-ttu-id="d1624-193">Stellen Sie sicher, dass der Dienst mit dem Verhaltensattribut für nicht verarbeitbare Nachrichten kommentiert wird.</span><span class="sxs-lookup"><span data-stu-id="d1624-193">Ensure that your service is annotated with the poison behavior attribute.</span></span>  

 <span data-ttu-id="d1624-194">Wenn außerdem das `ReceiveErrorHandling` auf `Fault` festgelegt ist, tritt beim `ServiceHost` ein Fehler auf, wenn dieser auf die nicht verarbeitbare Nachricht stößt.</span><span class="sxs-lookup"><span data-stu-id="d1624-194">In addition, if the `ReceiveErrorHandling` is set to `Fault`, the `ServiceHost` faults when encountering the poison message.</span></span> <span data-ttu-id="d1624-195">Sie können sich dem Fehlerereignis zuwenden und den Dienst herunterfahren, Korrekturmaßnahmen treffen und neu starten.</span><span class="sxs-lookup"><span data-stu-id="d1624-195">You can hook up to the faulted event and shut down the service, take corrective actions, and restart.</span></span> <span data-ttu-id="d1624-196">Beispielsweise kann die `LookupId` in der <xref:System.ServiceModel.MsmqPoisonMessageException>, die an den `IErrorHandler` weitergegeben wurde, notiert werden. Tritt nun beim Diensthost ein Fehler auf, können Sie die `System.Messaging`-API verwenden, um die Nachricht mithilfe der `LookupId` aus der Warteschlange zu empfangen, die Nachricht aus der Warteschlange zu entfernen und die Nachricht in einem externen Speicher oder einer anderen Warteschlange zu speichern.</span><span class="sxs-lookup"><span data-stu-id="d1624-196">For example, the `LookupId` in the <xref:System.ServiceModel.MsmqPoisonMessageException> propagated to the `IErrorHandler` can be noted and when the service host faults, you could use the `System.Messaging` API to receive the message from the queue using the `LookupId` to remove the message from the queue and store the message in some external store or another queue.</span></span> <span data-ttu-id="d1624-197">Sie können dann den `ServiceHost` neu starten, um die normale Verarbeitung fortzusetzen.</span><span class="sxs-lookup"><span data-stu-id="d1624-197">You can then restart `ServiceHost` to resume normal processing.</span></span> <span data-ttu-id="d1624-198">Die [Nachrichtenbehandlung nicht verarbeitbarer Nachrichten in MSMQ 4.0](../../../../docs/framework/wcf/samples/poison-message-handling-in-msmq-4-0.md) veranschaulicht dieses Verhalten.</span><span class="sxs-lookup"><span data-stu-id="d1624-198">The [Poison Message Handling in MSMQ 4.0](../../../../docs/framework/wcf/samples/poison-message-handling-in-msmq-4-0.md) demonstrates this behavior.</span></span>  
  
## <a name="transaction-time-out-and-poison-messages"></a><span data-ttu-id="d1624-199">Transaktionstimeout und nicht verarbeitbare Nachrichten</span><span class="sxs-lookup"><span data-stu-id="d1624-199">Transaction Time-Out and Poison Messages</span></span>  
 <span data-ttu-id="d1624-200">Eine Klasse von Fehlern kann zwischen dem Wartenschlangentransportkanal und dem Benutzercode auftreten.</span><span class="sxs-lookup"><span data-stu-id="d1624-200">A class of errors can occur between the queued transport channel and the user code.</span></span> <span data-ttu-id="d1624-201">Diese Fehler können durch Zwischenschichten erkannt werden, beispielsweise die Nachrichtensicherheitsschicht oder die Dienstverteilungslogik.</span><span class="sxs-lookup"><span data-stu-id="d1624-201">These errors can be detected by layers in-between, such as the message security layer or the service dispatching logic.</span></span> <span data-ttu-id="d1624-202">So stellen beispielsweise ein in der SOAP-Sicherheitsschicht erkanntes fehlendes X.509-Zertifikat und eine fehlende Aktion Fälle dar, in denen die Nachricht nicht an die Anwendung verteilt wird.</span><span class="sxs-lookup"><span data-stu-id="d1624-202">For example, a missing X.509 certificate detected in the SOAP security layer and a missing action are cases where the message does get dispatched to the application.</span></span> <span data-ttu-id="d1624-203">In diesem Fall wird die Nachricht durch das Dienstmodell wieder abgelegt.</span><span class="sxs-lookup"><span data-stu-id="d1624-203">When this happens, the service model drops the message.</span></span> <span data-ttu-id="d1624-204">Da die Nachricht in einer Transaktion gelesen wird und ein Ergebnis für diese Transaktion nicht geliefert werden kann, kommt es letztlich zum Timeout der Transaktion, sie wird abgebrochen, und die Nachricht wird wieder in die Warteschlange zurückgestellt.</span><span class="sxs-lookup"><span data-stu-id="d1624-204">Because the message is read in a transaction and an outcome for that transaction cannot be provided, the transaction eventually times out, aborts, and the message is put back into the queue.</span></span> <span data-ttu-id="d1624-205">Mit anderen Worten: Für eine bestimmte Fehlerklasse führt die Transaktion keinen sofortigen Abbruch durch, sondern wartet, bis es zum Timeout der Transaktion kommt. Sie können das Transaktionstimeout für einen Dienst mit <xref:System.ServiceModel.ServiceBehaviorAttribute> ändern.</span><span class="sxs-lookup"><span data-stu-id="d1624-205">In other words, for a certain class of errors, the transaction does not immediately abort but waits until the transaction times out. You can modify the transaction time-out for a service using <xref:System.ServiceModel.ServiceBehaviorAttribute>.</span></span>  
  
 <span data-ttu-id="d1624-206">Um das Transaktionstimeout auf einer computerweiten Basis zu ändern, modifizieren Sie die machine.config-Datei und legen das entsprechende Transaktionstimeout fest. Wichtig: Die Transaktion wird in Abhängigkeit vom festgelegten Transaktionstimeout schließlich abgebrochen, wieder in der Warteschlange platziert, und die Abbruchanzahl wird erhöht.</span><span class="sxs-lookup"><span data-stu-id="d1624-206">To change the transaction time-out on a computer-wide basis, modify the machine.config file and set the appropriate transaction time-out. It is important to note that, depending on the time-out set in the transaction, the transaction eventually aborts and goes back to the queue and its abort count is incremented.</span></span> <span data-ttu-id="d1624-207">Schließlich wird die Nachricht nicht verarbeitbar, und die richtige Disposition wird entsprechend den Benutzereinstellungen gewählt.</span><span class="sxs-lookup"><span data-stu-id="d1624-207">Eventually, the message becomes poison and the right disposition is made according to the user settings.</span></span>  
  
## <a name="sessions-and-poison-messages"></a><span data-ttu-id="d1624-208">Sitzungen und nicht verarbeitbare Nachrichten</span><span class="sxs-lookup"><span data-stu-id="d1624-208">Sessions and Poison Messages</span></span>  
 <span data-ttu-id="d1624-209">Eine Sitzung durchläuft die gleichen Wiederholungsprozeduren und Prozeduren zur Behandlung nicht verarbeitbarer Nachrichten wie eine einzelne Nachricht.</span><span class="sxs-lookup"><span data-stu-id="d1624-209">A session undergoes the same retry and poison-message handling procedures as a single message.</span></span> <span data-ttu-id="d1624-210">Die zuvor aufgeführten Eigenschaften für nicht verarbeitbare Nachrichten gelten auch für die ganze Sitzung,</span><span class="sxs-lookup"><span data-stu-id="d1624-210">The properties previously listed for poison messages apply to the entire session.</span></span> <span data-ttu-id="d1624-211">d. h., dass die gesamte Sitzung wiederholt wird und schließlich in einer Warteschlange für potenziell schädliche Nachrichten oder in der Absenderwarteschlange für unzustellbare Nachrichten platziert wird, wenn die Nachricht abgelehnt wird.</span><span class="sxs-lookup"><span data-stu-id="d1624-211">This means that the entire session is retried and goes to a final poison-message queue or the sender’s dead-letter queue if the message is rejected.</span></span>  
  
## <a name="batching-and-poison-messages"></a><span data-ttu-id="d1624-212">Batchverarbeitung und nicht verarbeitbare Nachrichten</span><span class="sxs-lookup"><span data-stu-id="d1624-212">Batching and Poison Messages</span></span>  
 <span data-ttu-id="d1624-213">Wenn eine Nachricht zu einer nicht verarbeitbaren Nachricht wird und Teil eines Batches ist, wird für den gesamten Batch ein Rollback durchgeführt, und der Kanal kehrt zum Lesen einzelner Nachrichten zurück.</span><span class="sxs-lookup"><span data-stu-id="d1624-213">If a message becomes a poison message and is part of a batch, then the entire batch is rolled back and the channel returns to reading one message at a time.</span></span> <span data-ttu-id="d1624-214">Weitere Informationen zur Batchverarbeitung finden Sie unter [Batchverarbeitung von Nachrichten in einer Transaktion](../../../../docs/framework/wcf/feature-details/batching-messages-in-a-transaction.md)</span><span class="sxs-lookup"><span data-stu-id="d1624-214">For more information about batching, see [Batching Messages in a Transaction](../../../../docs/framework/wcf/feature-details/batching-messages-in-a-transaction.md)</span></span>  
  
## <a name="poison-message-handling-for-messages-in-a-poison-queue"></a><span data-ttu-id="d1624-215">Behandlung nicht verarbeitbarer Nachrichten für Nachrichten in einer Warteschlange für potenziell schädliche Nachrichten</span><span class="sxs-lookup"><span data-stu-id="d1624-215">Poison-message Handling for Messages in a Poison Queue</span></span>  
 <span data-ttu-id="d1624-216">Die Behandlung nicht verarbeitbarer Nachrichten ist nicht damit beendet, dass eine Nachricht in die Warteschlange für potenziell schädliche Nachrichten eingefügt wird.</span><span class="sxs-lookup"><span data-stu-id="d1624-216">Poison-message handling does not end when a message is placed in the poison-message queue.</span></span> <span data-ttu-id="d1624-217">Die Nachrichten in der Warteschlange für potenziell schädliche Nachrichten müssen immer noch gelesen und behandelt werden.</span><span class="sxs-lookup"><span data-stu-id="d1624-217">Messages in the poison-message queue must still be read and handled.</span></span> <span data-ttu-id="d1624-218">Beim Lesen von Nachrichten aus der endgültigen Warteschlange für potenziell schädliche Nachrichten können Sie eine Teilmenge der Einstellungen zur Behandlung nicht verarbeitbarer Nachrichten verwenden.</span><span class="sxs-lookup"><span data-stu-id="d1624-218">You can use a subset of the poison-message handling settings when reading messages from the final poison subqueue.</span></span> <span data-ttu-id="d1624-219">Die anwendbaren Einstellungen sind `ReceiveRetryCount` und `ReceiveErrorHandling`.</span><span class="sxs-lookup"><span data-stu-id="d1624-219">The applicable settings are `ReceiveRetryCount` and `ReceiveErrorHandling`.</span></span> <span data-ttu-id="d1624-220">Sie können `ReceiveErrorHandling` auf "Drop", "Reject" oder "Fault" festlegen.</span><span class="sxs-lookup"><span data-stu-id="d1624-220">You can set `ReceiveErrorHandling` to Drop, Reject, or Fault.</span></span> <span data-ttu-id="d1624-221">`MaxRetryCycles` wird ignoriert, und es wird eine Ausnahme ausgelöst, wenn `ReceiveErrorHandling` auf {3&amp;amp;gt;Move&amp;amp;lt;3} festgelegt wird.</span><span class="sxs-lookup"><span data-stu-id="d1624-221">`MaxRetryCycles` is ignored and an exception is thrown if `ReceiveErrorHandling` is set to Move.</span></span>  
  
## <a name="windows-vista-windows-server-2003-and-windows-xp-differences"></a><span data-ttu-id="d1624-222">Unterschiede zwischen Windows Vista, Windows Server 2003 und Windows XP</span><span class="sxs-lookup"><span data-stu-id="d1624-222">Windows Vista, Windows Server 2003, and Windows XP Differences</span></span>  
 <span data-ttu-id="d1624-223">Wie bereits oben erwähnt, sind in [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] und [!INCLUDE[wxp](../../../../includes/wxp-md.md)] nicht alle Einstellungen für die Behandlung nicht verarbeitbarer Nachrichten anwendbar.</span><span class="sxs-lookup"><span data-stu-id="d1624-223">As noted earlier, not all poison-message handling settings apply to [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] and [!INCLUDE[wxp](../../../../includes/wxp-md.md)].</span></span> <span data-ttu-id="d1624-224">Die folgenden Hauptunterschiede zwischen dem Message Queuing in [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)], [!INCLUDE[wxp](../../../../includes/wxp-md.md)] und [!INCLUDE[wv](../../../../includes/wv-md.md)] sind für die Behandlung nicht verarbeitbarer Nachrichten relevant:</span><span class="sxs-lookup"><span data-stu-id="d1624-224">The following key differences between Message Queuing on [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)], [!INCLUDE[wxp](../../../../includes/wxp-md.md)], and [!INCLUDE[wv](../../../../includes/wv-md.md)] are relevant to poison-message handling:</span></span>  
  
- <span data-ttu-id="d1624-225">Message Queuing in [!INCLUDE[wv](../../../../includes/wv-md.md)] unterstützt untergeordnete Warteschlangen, während [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] und [!INCLUDE[wxp](../../../../includes/wxp-md.md)] keine untergeordneten Warteschlangen unterstützen.</span><span class="sxs-lookup"><span data-stu-id="d1624-225">Message Queuing in [!INCLUDE[wv](../../../../includes/wv-md.md)] supports subqueues, while [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] and [!INCLUDE[wxp](../../../../includes/wxp-md.md)] do not support subqueues.</span></span> <span data-ttu-id="d1624-226">Untergeordnete Warteschlangen werden zur Behandlung nicht verarbeitbarer Nachrichten verwendet.</span><span class="sxs-lookup"><span data-stu-id="d1624-226">Subqueues are used in poison-message handling.</span></span> <span data-ttu-id="d1624-227">Die Wiederholungswarteschlangen und die Warteschlange für potenziell schädliche Nachrichten sind untergeordnete Warteschlangen der Anwendungswarteschlange, die basierend auf den Einstellungen für die Behandlung nicht verarbeitbarer Nachrichten erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="d1624-227">The retry queues and the poison queue are subqueues to the application queue that is created based on the poison-message handling settings.</span></span> <span data-ttu-id="d1624-228">Die Eigenschaft `MaxRetryCycles` bestimmt, wie viele untergeordnete Wiederholungwarteschlangen erstellt werden sollen.</span><span class="sxs-lookup"><span data-stu-id="d1624-228">The `MaxRetryCycles` dictates how many retry subqueues to create.</span></span> <span data-ttu-id="d1624-229">Deshalb werden bei der Ausführung unter [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] oder unter [!INCLUDE[wxp](../../../../includes/wxp-md.md)] die `MaxRetryCycles` ignoriert, und `ReceiveErrorHandling.Move` wird nicht zugelassen.</span><span class="sxs-lookup"><span data-stu-id="d1624-229">Therefore, when running on [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] or [!INCLUDE[wxp](../../../../includes/wxp-md.md)], `MaxRetryCycles` are ignored and `ReceiveErrorHandling.Move` is not allowed.</span></span>  
  
- <span data-ttu-id="d1624-230">Message Queuing in [!INCLUDE[wv](../../../../includes/wv-md.md)] unterstützt die negative Bestätigung, während [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] und [!INCLUDE[wxp](../../../../includes/wxp-md.md)] dies nicht tun.</span><span class="sxs-lookup"><span data-stu-id="d1624-230">Message Queuing in [!INCLUDE[wv](../../../../includes/wv-md.md)] supports negative acknowledgment, while [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] and [!INCLUDE[wxp](../../../../includes/wxp-md.md)] do not.</span></span> <span data-ttu-id="d1624-231">Eine negative Bestätigung vom empfangenden Warteschlangen-Manager bewirkt, dass der sendende Warteschlangen-Manager die abgelehnte Nachricht in die Warteschlange für unzustellbare Nachrichten einstellt.</span><span class="sxs-lookup"><span data-stu-id="d1624-231">A negative acknowledgment from the receiving queue manager causes the sending queue manager to place the rejected message in the dead-letter queue.</span></span> <span data-ttu-id="d1624-232">Damit ist `ReceiveErrorHandling.Reject` in [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] und [!INCLUDE[wxp](../../../../includes/wxp-md.md)] nicht zulässig.</span><span class="sxs-lookup"><span data-stu-id="d1624-232">As such, `ReceiveErrorHandling.Reject` is not allowed with [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] and [!INCLUDE[wxp](../../../../includes/wxp-md.md)].</span></span>  
  
- <span data-ttu-id="d1624-233">Message Queuing in [!INCLUDE[wv](../../../../includes/wv-md.md)] unterstützt eine Nachrichteneigenschaft, die zählt, wie oft die Nachrichtenzustellung versucht wird.</span><span class="sxs-lookup"><span data-stu-id="d1624-233">Message Queuing in [!INCLUDE[wv](../../../../includes/wv-md.md)] supports a message property that keeps count of the number of times message delivery is attempted.</span></span> <span data-ttu-id="d1624-234">Diese Abbruchanzahleigenschaft ist in [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] und [!INCLUDE[wxp](../../../../includes/wxp-md.md)] nicht verfügbar.</span><span class="sxs-lookup"><span data-stu-id="d1624-234">This abort count property is not available on [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] and [!INCLUDE[wxp](../../../../includes/wxp-md.md)].</span></span> <span data-ttu-id="d1624-235">WCF verwaltet die abbruchanzahl im Arbeitsspeicher, sodass es möglich, dass diese Eigenschaft nicht auf einen genauen Wert enthalten kann, wenn dieselbe Nachricht von mehr als ein WCF-Dienst in einer Farm gelesen wird.</span><span class="sxs-lookup"><span data-stu-id="d1624-235">WCF maintains the abort count in memory, so it is possible that this property may not contain an accurate value when the same message is read by more than one WCF service in a farm.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="d1624-236">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="d1624-236">See also</span></span>

- [<span data-ttu-id="d1624-237">Warteschlangenübersicht</span><span class="sxs-lookup"><span data-stu-id="d1624-237">Queues Overview</span></span>](../../../../docs/framework/wcf/feature-details/queues-overview.md)
- [<span data-ttu-id="d1624-238">Unterschiede zwischen den Warteschlangenfunktionen in Windows Vista, Windows Server 2003 und Windows XP</span><span class="sxs-lookup"><span data-stu-id="d1624-238">Differences in Queuing Features in Windows Vista, Windows Server 2003, and Windows XP</span></span>](../../../../docs/framework/wcf/feature-details/diff-in-queue-in-vista-server-2003-windows-xp.md)
- [<span data-ttu-id="d1624-239">Angeben und Behandeln von Fehlern in Verträgen und Diensten</span><span class="sxs-lookup"><span data-stu-id="d1624-239">Specifying and Handling Faults in Contracts and Services</span></span>](../../../../docs/framework/wcf/specifying-and-handling-faults-in-contracts-and-services.md)
