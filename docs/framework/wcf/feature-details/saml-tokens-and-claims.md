---
title: SAML-Token und SAML-Ansprüche
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- WCF, federation
- federation
- issued tokens
- SAML token
ms.assetid: 930b6e34-9eab-4e95-826c-4e06659bb977
ms.openlocfilehash: 04517e5089f55c2d2b08a492439026d33ed9069d
ms.sourcegitcommit: 558d78d2a68acd4c95ef23231c8b4e4c7bac3902
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 04/09/2019
ms.locfileid: "59339839"
---
# <a name="saml-tokens-and-claims"></a><span data-ttu-id="adde7-102">SAML-Token und SAML-Ansprüche</span><span class="sxs-lookup"><span data-stu-id="adde7-102">SAML Tokens and Claims</span></span>
<span data-ttu-id="adde7-103">Security Assertions Markup Language (SAML) *Token* sind XML-Darstellungen von Ansprüchen.</span><span class="sxs-lookup"><span data-stu-id="adde7-103">Security Assertions Markup Language (SAML) *tokens* are XML representations of claims.</span></span> <span data-ttu-id="adde7-104">Windows Communication Foundation (WCF) verwendet wird, in verbundsicherheitsszenarien SAML-Token sind standardmäßig *ausgestellte Token*.</span><span class="sxs-lookup"><span data-stu-id="adde7-104">By default, SAML tokens Windows Communication Foundation (WCF) uses in federated security scenarios are *issued tokens*.</span></span>  
  
 <span data-ttu-id="adde7-105">SAML-Token enthalten Anweisungen, die Sets mit Ansprüchen sind, die von einer Entität über eine andere Entität gemacht wurden.</span><span class="sxs-lookup"><span data-stu-id="adde7-105">SAML tokens carry statements that are sets of claims made by one entity about another entity.</span></span> <span data-ttu-id="adde7-106">In Verbundsicherheitsszenarien werden Anweisungen beispielsweise von einem Sicherheitstokendienst über einen Benutzer im System getroffen.</span><span class="sxs-lookup"><span data-stu-id="adde7-106">For example, in federated security scenarios, the statements are made by a security token service about a user in the system.</span></span> <span data-ttu-id="adde7-107">Der Sicherheitstokendienst signiert das SAML-Token, um die Richtigkeit der Anweisungen im Token zu bestätigen.</span><span class="sxs-lookup"><span data-stu-id="adde7-107">The security token service signs the SAML token to indicate the veracity of the statements contained in the token.</span></span> <span data-ttu-id="adde7-108">Darüber hinaus ist das SAML-Token kryptografischen Schlüsselmaterialien zugewiesen, wobei der Benutzer des SAML-Tokens beweisen muss, dass er um diese Materialien weiß.</span><span class="sxs-lookup"><span data-stu-id="adde7-108">In addition, the SAML token is associated with cryptographic key material that the user of the SAML token proves knowledge of.</span></span> <span data-ttu-id="adde7-109">Dieser Beleg reicht aus, um die vertrauende Seite zu überzeugen, dass das SAML-Token tatsächlich für diesen Benutzer ausgestellt wurde.</span><span class="sxs-lookup"><span data-stu-id="adde7-109">This proof satisfies the relying party that the SAML token was, in fact, issued to that user.</span></span> <span data-ttu-id="adde7-110">Ein typisches Szenario sieht folgendermaßen aus:</span><span class="sxs-lookup"><span data-stu-id="adde7-110">For example, in a typical scenario:</span></span>  
  
1. <span data-ttu-id="adde7-111">Ein Client fordert einen SAML-Token von einem Sicherheitstokendienst an, wobei er sich bei diesem Dienst mit den Windows-Anmeldeinformationen authentifiziert.</span><span class="sxs-lookup"><span data-stu-id="adde7-111">A client requests a SAML token from a security token service, authenticating to that security token service by using Windows credentials.</span></span>  
  
2. <span data-ttu-id="adde7-112">Der Sicherheitstokendienst stellt dem Client einen SAML-Token aus.</span><span class="sxs-lookup"><span data-stu-id="adde7-112">The security token service issues a SAML token to the client.</span></span> <span data-ttu-id="adde7-113">Das SAML-Token wird mit einem dem Sicherheitstokendienst zugewiesenen Zertifikat signiert und enthält einen Prüfschlüssel, der für den Zieldienst verschlüsselt wurde.</span><span class="sxs-lookup"><span data-stu-id="adde7-113">The SAML token is signed with a certificate associated with the security token service and contains a proof key encrypted for the target service.</span></span>  
  
3. <span data-ttu-id="adde7-114">Der Client empfängt auch eine Kopie der *Prüfschlüssel*.</span><span class="sxs-lookup"><span data-stu-id="adde7-114">The client also receives a copy of the *proof key*.</span></span> <span data-ttu-id="adde7-115">Der Client stellt dann das SAML-Token an den Anwendungsdienst (der *vertrauende*) und signiert die Nachricht mit diesem Prüfschlüssel.</span><span class="sxs-lookup"><span data-stu-id="adde7-115">The client then presents the SAML token to the application service (the *relying party*) and signs the message with that proof key.</span></span>  
  
4. <span data-ttu-id="adde7-116">Die Signatur über dem SAML-Token zeigt der vertrauenden Seite, dass der Sicherheitstokendienst das Token ausgestellt hat.</span><span class="sxs-lookup"><span data-stu-id="adde7-116">The signature over the SAML token tells the relying party that the security token service issued the token.</span></span> <span data-ttu-id="adde7-117">Die mit dem Prüfschlüssel erstellte Nachrichtensignatur zeigt der vertrauenden Seite, dass das Token für den Client ausgestellt wurde.</span><span class="sxs-lookup"><span data-stu-id="adde7-117">The message signature created with the proof key tells the relying party that the token was issued to the client.</span></span>  
  
## <a name="from-claims-to-samlattributes"></a><span data-ttu-id="adde7-118">Von Ansprüchen zu SamlAttributes</span><span class="sxs-lookup"><span data-stu-id="adde7-118">From Claims to SamlAttributes</span></span>  
 <span data-ttu-id="adde7-119">In WCF-Anweisungen in SAML-Token werden als modelliert <xref:System.IdentityModel.Tokens.SamlAttribute> -Objekte, die direkt aus aufgefüllt werden können <xref:System.IdentityModel.Claims.Claim> bereitgestellten Objekte die <xref:System.IdentityModel.Claims.Claim> Objekt verfügt über eine <xref:System.IdentityModel.Claims.Claim.Right%2A> Eigenschaft <xref:System.IdentityModel.Claims.Rights.PossessProperty%2A> und <xref:System.IdentityModel.Claims.Claim.Resource%2A> Eigenschaft hat den Typ <xref:System.String>.</span><span class="sxs-lookup"><span data-stu-id="adde7-119">In WCF, statements in SAML tokens are modeled as <xref:System.IdentityModel.Tokens.SamlAttribute> objects, which can be populated directly from <xref:System.IdentityModel.Claims.Claim> objects, provided the <xref:System.IdentityModel.Claims.Claim> object has a <xref:System.IdentityModel.Claims.Claim.Right%2A> property of <xref:System.IdentityModel.Claims.Rights.PossessProperty%2A> and the <xref:System.IdentityModel.Claims.Claim.Resource%2A> property is of type <xref:System.String>.</span></span> <span data-ttu-id="adde7-120">Zum Beispiel:</span><span class="sxs-lookup"><span data-stu-id="adde7-120">For example:</span></span>  
  
 [!code-csharp[c_CreateSTS#8](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_creatests/cs/source.cs#8)]
 [!code-vb[c_CreateSTS#8](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_creatests/vb/source.vb#8)]  
  
> [!NOTE]
>  <span data-ttu-id="adde7-121">Wenn SAML-Token in Nachrichten serialisiert werden, z. B. wenn sie von einem Sicherheitstokendienst ausgestellt werden oder von Clients im Rahmen der Authentifizierung an Dienste gegeben werden, muss das Kontingent für die maximale Nachrichtengröße groß genug sein, um das SAML-Token und die anderen Teile der Nachricht aufnehmen zu können.</span><span class="sxs-lookup"><span data-stu-id="adde7-121">When SAML tokens are serialized in messages, either when they are issued by a security token service or when they are presented by clients to services as part of authentication, the maximum message size quota must be sufficiently large to accommodate the SAML token and the other message parts.</span></span> <span data-ttu-id="adde7-122">Normalerweise ist das Kontingent für Nachrichten in Standardgröße ausreichend.</span><span class="sxs-lookup"><span data-stu-id="adde7-122">In normal cases, the default message size quotas are sufficient.</span></span> <span data-ttu-id="adde7-123">Wenn jedoch ein SAML-Token sehr groß ist, da es mehrere Hundert Ansprüche enthält, müssen Sie u. U. das Kontingent vergrößern, um das serialisierte Token aufnehmen zu können.</span><span class="sxs-lookup"><span data-stu-id="adde7-123">However, in cases where a SAML token is large because it contains hundreds of claims, you may need to increase the quotas to accommodate the serialized token.</span></span> <span data-ttu-id="adde7-124">Weitere Informationen finden Sie unter [Sicherheitsüberlegungen zu Daten](../../../../docs/framework/wcf/feature-details/security-considerations-for-data.md).</span><span class="sxs-lookup"><span data-stu-id="adde7-124">For more information, see [Security Considerations for Data](../../../../docs/framework/wcf/feature-details/security-considerations-for-data.md).</span></span>  
  
## <a name="from-samlattributes-to-claims"></a><span data-ttu-id="adde7-125">Von SamlAttributes zu Ansprüchen</span><span class="sxs-lookup"><span data-stu-id="adde7-125">From SamlAttributes to Claims</span></span>  
 <span data-ttu-id="adde7-126">Wenn SAML-Token in Nachrichten empfangen werden, werden die unterschiedlichen Anweisungen im SAML-Token in <xref:System.IdentityModel.Policy.IAuthorizationPolicy>-Objekte umgewandelt, die in den <xref:System.IdentityModel.Policy.AuthorizationContext> gesetzt werden.</span><span class="sxs-lookup"><span data-stu-id="adde7-126">When SAML tokens are received in messages, the various statements in the SAML token are turned into <xref:System.IdentityModel.Policy.IAuthorizationPolicy> objects that are placed into the <xref:System.IdentityModel.Policy.AuthorizationContext>.</span></span> <span data-ttu-id="adde7-127">Die Ansprüche aus jeder SAML-Anweisung werden von der <xref:System.IdentityModel.Policy.AuthorizationContext.ClaimSets%2A>-Eigenschaft des <xref:System.IdentityModel.Policy.AuthorizationContext> zurückgegeben und können überprüft werden, um zu bestimmen, ob der Benutzer authentifiziert und autorisiert werden soll</span><span class="sxs-lookup"><span data-stu-id="adde7-127">The claims from each SAML statement are returned by the <xref:System.IdentityModel.Policy.AuthorizationContext.ClaimSets%2A> property of the <xref:System.IdentityModel.Policy.AuthorizationContext> and can be examined to determine whether to authenticate and authorize the user.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="adde7-128">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="adde7-128">See also</span></span>

- <xref:System.IdentityModel.Policy.AuthorizationContext>
- <xref:System.IdentityModel.Policy.IAuthorizationPolicy>
- <xref:System.IdentityModel.Claims.ClaimSet>
- [<span data-ttu-id="adde7-129">Verbund</span><span class="sxs-lookup"><span data-stu-id="adde7-129">Federation</span></span>](../../../../docs/framework/wcf/feature-details/federation.md)
- [<span data-ttu-id="adde7-130">Vorgehensweise: Erstellen eines Verbundclients</span><span class="sxs-lookup"><span data-stu-id="adde7-130">How to: Create a Federated Client</span></span>](../../../../docs/framework/wcf/feature-details/how-to-create-a-federated-client.md)
- [<span data-ttu-id="adde7-131">Vorgehensweise: Konfigurieren von Anmeldeinformationen auf einem Verbunddienst</span><span class="sxs-lookup"><span data-stu-id="adde7-131">How to: Configure Credentials on a Federation Service</span></span>](../../../../docs/framework/wcf/feature-details/how-to-configure-credentials-on-a-federation-service.md)
- [<span data-ttu-id="adde7-132">Verwalten von Ansprüchen und Autorisierung mit dem Identitätsmodell</span><span class="sxs-lookup"><span data-stu-id="adde7-132">Managing Claims and Authorization with the Identity Model</span></span>](../../../../docs/framework/wcf/feature-details/managing-claims-and-authorization-with-the-identity-model.md)
- [<span data-ttu-id="adde7-133">Ansprüche und Token</span><span class="sxs-lookup"><span data-stu-id="adde7-133">Claims and Tokens</span></span>](../../../../docs/framework/wcf/feature-details/claims-and-tokens.md)
- [<span data-ttu-id="adde7-134">Erstellen von Ansprüchen und Ressourcenwerte</span><span class="sxs-lookup"><span data-stu-id="adde7-134">Claim Creation and Resource Values</span></span>](../../../../docs/framework/wcf/feature-details/claim-creation-and-resource-values.md)
- [<span data-ttu-id="adde7-135">Vorgehensweise: Erstellen eines benutzerdefinierten Anspruchs</span><span class="sxs-lookup"><span data-stu-id="adde7-135">How to: Create a Custom Claim</span></span>](../../../../docs/framework/wcf/extending/how-to-create-a-custom-claim.md)
