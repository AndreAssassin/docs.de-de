---
title: Grundlagen der Schutzebene
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- WCF, security
- ProtectionLevel property
ms.assetid: 0c034608-a1ac-4007-8287-b1382eaa8bf2
ms.openlocfilehash: 4ebb93d3ed325c115dcf311c821b014532dffc11
ms.sourcegitcommit: d6e27023aeaffc4b5a3cb4b88685018d6284ada4
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 07/09/2019
ms.locfileid: "67663944"
---
# <a name="understanding-protection-level"></a><span data-ttu-id="9ebbc-102">Grundlagen der Schutzebene</span><span class="sxs-lookup"><span data-stu-id="9ebbc-102">Understanding Protection Level</span></span>

<span data-ttu-id="9ebbc-103">Die `ProtectionLevel`-Eigenschaft ist in vielen anderen Klassen zu finden, z. B. die <xref:System.ServiceModel.ServiceContractAttribute>-Klasse und die <xref:System.ServiceModel.OperationContractAttribute>-Klasse.</span><span class="sxs-lookup"><span data-stu-id="9ebbc-103">The `ProtectionLevel` property is found on many different classes, such as the <xref:System.ServiceModel.ServiceContractAttribute> and the <xref:System.ServiceModel.OperationContractAttribute> classes.</span></span> <span data-ttu-id="9ebbc-104">Die Eigenschaft steuert, wie eine Nachricht zum Teil (oder ganz) geschützt wird.</span><span class="sxs-lookup"><span data-stu-id="9ebbc-104">The property controls how a part (or whole) of a message is protected.</span></span> <span data-ttu-id="9ebbc-105">In diesem Thema wird erläutert, die Windows Communication Foundation (WCF)-Funktion und wie es funktioniert.</span><span class="sxs-lookup"><span data-stu-id="9ebbc-105">This topic explains the Windows Communication Foundation (WCF) feature and how it works.</span></span>

<span data-ttu-id="9ebbc-106">Anweisungen zum Festlegen der Schutzebene finden Sie [Vorgehensweise: Legen Sie die ProtectionLevel-Eigenschaft](../../../docs/framework/wcf/how-to-set-the-protectionlevel-property.md).</span><span class="sxs-lookup"><span data-stu-id="9ebbc-106">For instructions on setting the protection level, see [How to: Set the ProtectionLevel Property](../../../docs/framework/wcf/how-to-set-the-protectionlevel-property.md).</span></span>

> [!NOTE]
> <span data-ttu-id="9ebbc-107">Schutzebenen können nur im Code, nicht in der Konfiguration festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="9ebbc-107">Protection levels can be set only in code, not in configuration.</span></span>

## <a name="basics"></a><span data-ttu-id="9ebbc-108">Grundlagen</span><span class="sxs-lookup"><span data-stu-id="9ebbc-108">Basics</span></span>

<span data-ttu-id="9ebbc-109">Um die Schutzebenenfunktion zu verstehen, sind die folgenden grundlegenden Anweisungen wichtig:</span><span class="sxs-lookup"><span data-stu-id="9ebbc-109">To understand the protection level feature, the following basic statements apply:</span></span>

- <span data-ttu-id="9ebbc-110">Drei grundlegende Ebenen des Schutzes sind für jeden Teil einer Nachricht vorhanden.</span><span class="sxs-lookup"><span data-stu-id="9ebbc-110">Three basic levels of protection exist for any part of a message.</span></span> <span data-ttu-id="9ebbc-111">Die Eigenschaft wird (bei jedem Auftreten) auf einen der <xref:System.Net.Security.ProtectionLevel>-Enumerationswerte festgelegt.</span><span class="sxs-lookup"><span data-stu-id="9ebbc-111">The property (wherever it occurs) is set to one of the <xref:System.Net.Security.ProtectionLevel> enumeration values.</span></span> <span data-ttu-id="9ebbc-112">In aufsteigender Reihenfolge des Schutzes umfassen sie:</span><span class="sxs-lookup"><span data-stu-id="9ebbc-112">In ascending order of protection, they include:</span></span>

  - <span data-ttu-id="9ebbc-113">`None`.</span><span class="sxs-lookup"><span data-stu-id="9ebbc-113">`None`.</span></span>

  - <span data-ttu-id="9ebbc-114">`Sign`.</span><span class="sxs-lookup"><span data-stu-id="9ebbc-114">`Sign`.</span></span> <span data-ttu-id="9ebbc-115">Der geschützte Teil wird digital signiert.</span><span class="sxs-lookup"><span data-stu-id="9ebbc-115">The protected part is digitally signed.</span></span> <span data-ttu-id="9ebbc-116">Dies stellt sicher, dass eine Manipulation am Nachrichtenteil erkannt wird.</span><span class="sxs-lookup"><span data-stu-id="9ebbc-116">This ensures detection of any tampering with the protected message part.</span></span>

  - <span data-ttu-id="9ebbc-117">`EncryptAndSign`.</span><span class="sxs-lookup"><span data-stu-id="9ebbc-117">`EncryptAndSign`.</span></span> <span data-ttu-id="9ebbc-118">Der Nachrichtenteil wird verschlüsselt, um Vertraulichkeit sicherzustellen, bevor er signiert wird.</span><span class="sxs-lookup"><span data-stu-id="9ebbc-118">The message part is encrypted to ensure confidentiality before it is signed.</span></span>

- <span data-ttu-id="9ebbc-119">Sie können schutzanforderungen nur für festlegen *Anwendungsdaten* mit diesem Feature.</span><span class="sxs-lookup"><span data-stu-id="9ebbc-119">You can set protection requirements only for *application data* with this feature.</span></span> <span data-ttu-id="9ebbc-120">WS-Adressierungsheader sind z. B. Infrastrukturdaten und werden deshalb nicht vom `ProtectionLevel` beeinflusst.</span><span class="sxs-lookup"><span data-stu-id="9ebbc-120">For example, WS-Addressing headers are infrastructure data and, therefore, are not affected by the `ProtectionLevel`.</span></span>

- <span data-ttu-id="9ebbc-121">Wenn der Sicherheitsmodus auf `Transport` festgelegt wird, wird die ganze Nachricht vom Transportmechanismus geschützt.</span><span class="sxs-lookup"><span data-stu-id="9ebbc-121">When the security mode is set to `Transport`, the entire message is protected by the transport mechanism.</span></span> <span data-ttu-id="9ebbc-122">Deshalb hat das Festlegen einer separaten Schutzebene für andere Teile einer Nachricht keine Auswirkungen.</span><span class="sxs-lookup"><span data-stu-id="9ebbc-122">Therefore, setting a separate protection level for different parts of a message has no effect.</span></span>

- <span data-ttu-id="9ebbc-123">Die `ProtectionLevel` ist eine Möglichkeit für Entwickler zum Festlegen der *Mindestebene* , die eine Bindung mit erfüllen muss.</span><span class="sxs-lookup"><span data-stu-id="9ebbc-123">The `ProtectionLevel` is a way for the developer to set the *minimum level* that a binding must comply with.</span></span> <span data-ttu-id="9ebbc-124">Beim Bereitstellen eines Diensts kann die tatsächliche in der Konfiguration angegebene Bindung die Mindestebene unterstützen oder nicht.</span><span class="sxs-lookup"><span data-stu-id="9ebbc-124">When a service is deployed, the actual binding specified in configuration may or may not support the minimum level.</span></span> <span data-ttu-id="9ebbc-125">Standardmäßig stellt die <xref:System.ServiceModel.BasicHttpBinding>-Klasse keine Sicherheit bereit (diese kann allerdings aktiviert werden).</span><span class="sxs-lookup"><span data-stu-id="9ebbc-125">For example, by default, the <xref:System.ServiceModel.BasicHttpBinding> class does not supply security (although it can be enabled).</span></span> <span data-ttu-id="9ebbc-126">Die Verwendung dieser Klasse in Verbindung mit einem Vertrag, der eine andere Einstellung als `None` hat, löst eine Ausnahme aus.</span><span class="sxs-lookup"><span data-stu-id="9ebbc-126">Therefore, using it with a contract that has any setting other than `None` will cause an exception to be thrown.</span></span>

- <span data-ttu-id="9ebbc-127">Wenn der Dienst erfordert, dass die minimale `ProtectionLevel` ist für alle Nachrichten `Sign`, ein Client (z. B. durch eine nicht-WCF-Technologie erstellt) kann verschlüsseln und signieren Sie alle Nachrichten (Dies ist mehr als das Minimum erforderlich).</span><span class="sxs-lookup"><span data-stu-id="9ebbc-127">If the service requires that the minimum `ProtectionLevel` for all messages is `Sign`, a client (perhaps created by a non-WCF technology) can encrypt and sign all messages (which is more than the minimum required).</span></span> <span data-ttu-id="9ebbc-128">WCF in diesem Fall wird eine Ausnahme nicht ausgelöst, da der Client mehr als das Minimum durchgeführt hat.</span><span class="sxs-lookup"><span data-stu-id="9ebbc-128">In this case, WCF will not throw an exception because the client has done more than the minimum.</span></span> <span data-ttu-id="9ebbc-129">Beachten Sie jedoch, dass WCF-Anwendungen (Dienste oder Clients) nicht übermäßig, einen Teil der Nachricht, wenn möglich schützen, sondern die Mindestebene einhalten.</span><span class="sxs-lookup"><span data-stu-id="9ebbc-129">Note, however, that WCF applications (services or clients) will not over-secure a message part if possible but will comply with the minimum level.</span></span> <span data-ttu-id="9ebbc-130">Außerdem ist zu beachten, dass der Transport den Nachrichtenstrom bei Verwendung von `Transport` als Sicherheitsmodus übermäßig schützt, da in diesem Fall ein Schutz auf niedrigerer Ebene nicht möglich ist.</span><span class="sxs-lookup"><span data-stu-id="9ebbc-130">Also note that when using `Transport` as the security mode, the transport may over-secure the message stream because it is inherently unable to secure at a more granular level.</span></span>

- <span data-ttu-id="9ebbc-131">Wenn Sie `ProtectionLevel` ausdrücklich entweder auf `Sign` oder `EncryptAndSign` festlegen, müssen Sie eine Bindung mit aktivierter Sicherheit verwenden. Andernfalls wird eine Ausnahme ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="9ebbc-131">If you set the `ProtectionLevel` explicitly to either `Sign` or `EncryptAndSign`, then you must use a binding with security enabled or an exception will be thrown.</span></span>

- <span data-ttu-id="9ebbc-132">Wählen Sie eine Bindung aus, die Sicherheit aktiviert, und legen Sie im Vertrag keine `ProtectionLevel`-Eigenschaft fest, werden alle Daten verschlüsselt und signiert.</span><span class="sxs-lookup"><span data-stu-id="9ebbc-132">If you select a binding that enables security and you do not set the `ProtectionLevel` property anywhere on the contract, all application data will be encrypted and signed.</span></span>

- <span data-ttu-id="9ebbc-133">Wählen Sie eine Bindung aus, für die keine Sicherheit aktiviert wurde (für die `BasicHttpBinding`-Klasse ist die Sicherheit beispielsweise standardmäßig deaktiviert) und für die `ProtectionLevel` nicht ausdrücklich festgelegt ist, werden keine Anwendungsdaten geschützt.</span><span class="sxs-lookup"><span data-stu-id="9ebbc-133">If you select a binding that does not have security enabled (for example, the `BasicHttpBinding` class has security disabled by default), and the `ProtectionLevel` is not explicitly set, then none of the application data will be protected.</span></span>

- <span data-ttu-id="9ebbc-134">Bei Verwendung einer Bindung, die Sicherheit auf der Transportebene anwendet, werden alle Anwendungsdaten den Transportfunktionen entsprechend geschützt.</span><span class="sxs-lookup"><span data-stu-id="9ebbc-134">If you are using a binding that applies security at the transport level, all application data will be secured according to the capabilities of the transport.</span></span>

- <span data-ttu-id="9ebbc-135">Wenn Sie eine Bindung verwenden, die die Sicherheit auf der Nachrichtenebene anwendet, werden alle Anwendungsdaten den im Vertrag festgelegten Schutzebenen entsprechend geschützt.</span><span class="sxs-lookup"><span data-stu-id="9ebbc-135">If you use a binding that applies security at the message level, then application data will be secured according to the protection levels set on the contract.</span></span> <span data-ttu-id="9ebbc-136">Wenn Sie keine Schutzebene festlegen, werden alle Anwendungsdaten in den Nachrichten verschlüsselt und signiert.</span><span class="sxs-lookup"><span data-stu-id="9ebbc-136">If you do not specify a protection level, then all application data in the messages will be encrypted and signed.</span></span>

- <span data-ttu-id="9ebbc-137">`ProtectionLevel` kann auf anderen bewertenden Ebenen festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="9ebbc-137">The `ProtectionLevel` can be set at different scoping levels.</span></span> <span data-ttu-id="9ebbc-138">Dem Bewerten ist eine Hierarchie zugeordnet. Diese wird im nächsten Abschnitt erklärt.</span><span class="sxs-lookup"><span data-stu-id="9ebbc-138">There is a hierarchy associated with scoping, which is explained in the next section.</span></span>

## <a name="scoping"></a><span data-ttu-id="9ebbc-139">Bewerten</span><span class="sxs-lookup"><span data-stu-id="9ebbc-139">Scoping</span></span>

<span data-ttu-id="9ebbc-140">Durch Festlegen von `ProtectionLevel` auf der obersten API wird die Ebene für alle untergeordneten Ebenen festgelegt.</span><span class="sxs-lookup"><span data-stu-id="9ebbc-140">Setting the `ProtectionLevel` on the topmost API sets the level for all levels below it.</span></span> <span data-ttu-id="9ebbc-141">Wenn `ProtectionLevel` auf einer untergeordneten Ebene auf einen anderen Wert festgelegt ist, werden alle APIs unterhalb dieser Ebene in der Hierarchie auf die neue Ebene geändert (APIs oberhalb dieser Ebene richten sich nach wie vor nach der obersten Ebene).</span><span class="sxs-lookup"><span data-stu-id="9ebbc-141">If the `ProtectionLevel` is set to a different value at a lower level, all APIs below that level in the hierarchy will now be reset to the new level (APIs above it, however, will still be affected by the topmost level).</span></span> <span data-ttu-id="9ebbc-142">Die Hierarchie lautet wie folgt.</span><span class="sxs-lookup"><span data-stu-id="9ebbc-142">The hierarchy is as follows.</span></span> <span data-ttu-id="9ebbc-143">Attribute auf der gleichen Ebene sind Peers.</span><span class="sxs-lookup"><span data-stu-id="9ebbc-143">Attributes at the same level are peers.</span></span>

- <xref:System.ServiceModel.ServiceContractAttribute>

- <xref:System.ServiceModel.OperationContractAttribute>

- <xref:System.ServiceModel.FaultContractAttribute>

- <xref:System.ServiceModel.MessageContractAttribute>

- <xref:System.ServiceModel.MessageHeaderAttribute>

- <xref:System.ServiceModel.MessageBodyMemberAttribute>

## <a name="programming-protectionlevel"></a><span data-ttu-id="9ebbc-144">Programmieren von ProtectionLevel</span><span class="sxs-lookup"><span data-stu-id="9ebbc-144">Programming ProtectionLevel</span></span>

<span data-ttu-id="9ebbc-145">Zum Programmieren von `ProtectionLevel` an einem beliebigen Punkt der Hierarchie legen Sie die Eigenschaft beim Anwenden des Attributs einfach auf einen entsprechenden Wert fest.</span><span class="sxs-lookup"><span data-stu-id="9ebbc-145">To program the `ProtectionLevel` at any point in the hierarchy, simply set the property to an appropriate value when applying the attribute.</span></span> <span data-ttu-id="9ebbc-146">Beispiele hierzu finden Sie unter [Vorgehensweise: Legen Sie die ProtectionLevel-Eigenschaft](../../../docs/framework/wcf/how-to-set-the-protectionlevel-property.md).</span><span class="sxs-lookup"><span data-stu-id="9ebbc-146">For examples, see [How to: Set the ProtectionLevel Property](../../../docs/framework/wcf/how-to-set-the-protectionlevel-property.md).</span></span>

> [!NOTE]
> <span data-ttu-id="9ebbc-147">Um die Eigenschaft für Fehler- und Nachrichtenverträge festlegen zu können, müssen Sie die Funktionsweise dieser Funktionen verstehen.</span><span class="sxs-lookup"><span data-stu-id="9ebbc-147">Setting the property on faults and message contracts requires understanding how those features work.</span></span> <span data-ttu-id="9ebbc-148">Weitere Informationen finden Sie unter [Vorgehensweise: Legen Sie die ProtectionLevel-Eigenschaft](../../../docs/framework/wcf/how-to-set-the-protectionlevel-property.md) und [Verwenden von Nachrichtenverträgen](../../../docs/framework/wcf/feature-details/using-message-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="9ebbc-148">For more information, see [How to: Set the ProtectionLevel Property](../../../docs/framework/wcf/how-to-set-the-protectionlevel-property.md) and [Using Message Contracts](../../../docs/framework/wcf/feature-details/using-message-contracts.md).</span></span>

## <a name="ws-addressing-dependency"></a><span data-ttu-id="9ebbc-149">WS-Adressierungsabhängigkeit</span><span class="sxs-lookup"><span data-stu-id="9ebbc-149">WS-Addressing Dependency</span></span>

<span data-ttu-id="9ebbc-150">In den meisten Fällen verwenden die [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) zum Generieren eines Clients gewährleistet, dass die Client- und Dienstverträge identisch sind.</span><span class="sxs-lookup"><span data-stu-id="9ebbc-150">In most cases, using the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) to generate a client ensures that the client and service contracts are identical.</span></span> <span data-ttu-id="9ebbc-151">Scheinbar identische Verträge können jedoch den Client veranlassen, eine Ausnahme auszulösen.</span><span class="sxs-lookup"><span data-stu-id="9ebbc-151">However, seemingly identical contracts can cause the client to throw an exception.</span></span> <span data-ttu-id="9ebbc-152">Dies ist der Fall, wenn eine Bindung die WS-Adressierungsspezifikation nicht unterstützt und mehrere Schutzebenen für den Vertrag festgelegt sind.</span><span class="sxs-lookup"><span data-stu-id="9ebbc-152">This occurs whenever a binding does not support the WS-Addressing specification and multiple levels of protection are specified on the contract.</span></span> <span data-ttu-id="9ebbc-153">Beispielsweise unterstützt die <xref:System.ServiceModel.BasicHttpBinding>-Klasse die Spezifikation nicht oder wenn Sie eine benutzerdefinierte Bindung erstellen, die die WS-Adressierung nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="9ebbc-153">For example, the <xref:System.ServiceModel.BasicHttpBinding> class does not support the specification, or if you create a custom binding that does not support WS-Addressing.</span></span> <span data-ttu-id="9ebbc-154">Die `ProtectionLevel`-Funktion ist von der WS-Adressierungsspezifikation abhängig, um andere Schutzebenen für einen einzelnen Vertrag zu aktivieren.</span><span class="sxs-lookup"><span data-stu-id="9ebbc-154">The `ProtectionLevel` feature relies on the WS-Addressing specification to enable different protection levels on a single contract.</span></span> <span data-ttu-id="9ebbc-155">Wenn die Bindung die WS-Adressierungsspezifikation nicht unterstützt, werden alle Ebenen auf dieselbe Schutzebene festgelegt.</span><span class="sxs-lookup"><span data-stu-id="9ebbc-155">If the binding does not support the WS-Addressing specification, all levels will be set to the same protection level.</span></span> <span data-ttu-id="9ebbc-156">Die effektive Schutzebene für alle Bereiche des Vertrags wird auf die höchste Schutzebene festgelegt, die für den Vertrag verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="9ebbc-156">The effective protection level for all scopes on the contract will be set to the strongest protection level used on the contract.</span></span>

<span data-ttu-id="9ebbc-157">Dies verursacht möglicherweise ein Problem, das auf den ersten Blick schwer zu debuggen ist.</span><span class="sxs-lookup"><span data-stu-id="9ebbc-157">This may cause a problem that is hard to debug at first glance.</span></span> <span data-ttu-id="9ebbc-158">Es ist möglich, einen Dienstvertrag (eine Schnittstelle) zu erstellen, der Methoden für mehrere Dienste umfasst,</span><span class="sxs-lookup"><span data-stu-id="9ebbc-158">It is possible to create a client contract (an interface) that includes methods for more than one service.</span></span> <span data-ttu-id="9ebbc-159">d. h. dieselbe Schnittstelle wird zum Erstellen eines Clients verwendet, der mit vielen Diensten kommuniziert, und die einzelne Schnittstelle umfasst Methoden für alle Dienste.</span><span class="sxs-lookup"><span data-stu-id="9ebbc-159">That is, the same interface is used to create a client that communicates with many services, and the single interface contains methods for all services.</span></span> <span data-ttu-id="9ebbc-160">Der Entwickler muss in diesem seltenen Fall darauf achten, nur die Methoden aufzurufen, die für die einzelnen Dienste gelten.</span><span class="sxs-lookup"><span data-stu-id="9ebbc-160">The developer must take care in this rare scenario to invoke only those methods that are applicable for each particular service.</span></span> <span data-ttu-id="9ebbc-161">Wenn die Bindung die <xref:System.ServiceModel.BasicHttpBinding>-Klasse ist, können mehrere Schutzebenen nicht unterstützt werden.</span><span class="sxs-lookup"><span data-stu-id="9ebbc-161">If the binding is the <xref:System.ServiceModel.BasicHttpBinding> class, multiple protection levels cannot be supported.</span></span> <span data-ttu-id="9ebbc-162">Ein auf den Client antwortender Dienst kann jedoch auf einen Client mit einer niedrigeren Schutzebene als erforderlich reagieren.</span><span class="sxs-lookup"><span data-stu-id="9ebbc-162">However, a service replying to the client might respond to a client with a lower protection level than required.</span></span> <span data-ttu-id="9ebbc-163">In diesem Fall löst der Client eine Ausnahme aus, da er eine höhere Schutzebene erwartet.</span><span class="sxs-lookup"><span data-stu-id="9ebbc-163">In this case, the client will throw an exception because it expects a higher protection level.</span></span>

<span data-ttu-id="9ebbc-164">Im folgenden Codebeispiel wird dieses Problem veranschaulicht.</span><span class="sxs-lookup"><span data-stu-id="9ebbc-164">An example of the code illustrates this problem.</span></span> <span data-ttu-id="9ebbc-165">Das folgende Beispiel zeigt einen Dienst- und einen Clientvertrag.</span><span class="sxs-lookup"><span data-stu-id="9ebbc-165">The following example shows a service and a client contract.</span></span> <span data-ttu-id="9ebbc-166">Wird davon ausgegangen, dass die Bindung der [ \<BasicHttpBinding >](../../../docs/framework/configure-apps/file-schema/wcf/basichttpbinding.md) Element.</span><span class="sxs-lookup"><span data-stu-id="9ebbc-166">Assume that the binding is the [\<basicHttpBinding>](../../../docs/framework/configure-apps/file-schema/wcf/basichttpbinding.md) element.</span></span> <span data-ttu-id="9ebbc-167">Deshalb haben alle Vorgänge im Rahmen eines Vertrags die gleiche Schutzebene.</span><span class="sxs-lookup"><span data-stu-id="9ebbc-167">Therefore, all operations on a contract have the same protection level.</span></span> <span data-ttu-id="9ebbc-168">Diese einheitliche Schutzebene wird als maximale Schutzebene für alle Vorgänge bestimmt.</span><span class="sxs-lookup"><span data-stu-id="9ebbc-168">This uniform protection level is determined as the maximum protection level across all operations.</span></span>

<span data-ttu-id="9ebbc-169">Der Dienstvertrag lautet:</span><span class="sxs-lookup"><span data-stu-id="9ebbc-169">The service contract is:</span></span>

[!code-csharp[c_ProtectionLevel#7](../../../samples/snippets/csharp/VS_Snippets_CFX/c_protectionlevel/cs/source.cs#7)]
[!code-vb[c_ProtectionLevel#7](../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_protectionlevel/vb/source.vb#7)]

<span data-ttu-id="9ebbc-170">Im folgenden Codebeispiel wird die Clientvertragsschnittstelle dargestellt.</span><span class="sxs-lookup"><span data-stu-id="9ebbc-170">The following code shows the client contract interface.</span></span> <span data-ttu-id="9ebbc-171">Beachten Sie, dass eine `Tax`-Methode enthalten ist, die mit einem anderen Dienst verwendet werden sollte:</span><span class="sxs-lookup"><span data-stu-id="9ebbc-171">Note that it includes a `Tax` method that is intended to be used with a different service:</span></span>

[!code-csharp[c_ProtectionLevel#8](../../../samples/snippets/csharp/VS_Snippets_CFX/c_protectionlevel/cs/source.cs#8)]
[!code-vb[c_ProtectionLevel#8](../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_protectionlevel/vb/source.vb#8)]

<span data-ttu-id="9ebbc-172">Wenn der Client die `Price`-Methode aufruft, wird eine Ausnahme ausgelöst, sobald eine Antwort vom Dienst eingeht.</span><span class="sxs-lookup"><span data-stu-id="9ebbc-172">When the client calls the `Price` method, it throws an exception when it receives a reply from the service.</span></span> <span data-ttu-id="9ebbc-173">Der Grund hierfür liegt darin, dass der Client keine `ProtectionLevel` im `ServiceContractAttribute` angibt und daher den Standardwert (<xref:System.Net.Security.ProtectionLevel.EncryptAndSign>) für alle Methoden, einschließlich der `Price`-Methode, verwendet.</span><span class="sxs-lookup"><span data-stu-id="9ebbc-173">This occurs because the client does not specify a `ProtectionLevel` on the `ServiceContractAttribute`, and therefore the client uses the default (<xref:System.Net.Security.ProtectionLevel.EncryptAndSign>) for all methods, including the `Price` method.</span></span> <span data-ttu-id="9ebbc-174">Der Dienst gibt jedoch den Wert unter Verwendung der <xref:System.Net.Security.ProtectionLevel.Sign>-Ebene zurück, da der Dienstvertrag eine einzelne Methode definiert, deren Schutzebene auf <xref:System.Net.Security.ProtectionLevel.Sign> festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="9ebbc-174">However, the service returns the value using the <xref:System.Net.Security.ProtectionLevel.Sign> level because the service contract defines a single method that has its protection level set to <xref:System.Net.Security.ProtectionLevel.Sign>.</span></span> <span data-ttu-id="9ebbc-175">In diesem Fall löst der Client einen Fehler aus, wenn er die Antwort vom Dienst überprüft.</span><span class="sxs-lookup"><span data-stu-id="9ebbc-175">In this case, the client will throw an error when validating the response from the service.</span></span>

## <a name="see-also"></a><span data-ttu-id="9ebbc-176">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="9ebbc-176">See also</span></span>

- <xref:System.ServiceModel.ServiceContractAttribute>
- <xref:System.ServiceModel.OperationContractAttribute>
- <xref:System.ServiceModel.FaultContractAttribute>
- <xref:System.ServiceModel.MessageContractAttribute>
- <xref:System.ServiceModel.MessageHeaderAttribute>
- <xref:System.ServiceModel.MessageBodyMemberAttribute>
- <xref:System.Net.Security.ProtectionLevel>
- [<span data-ttu-id="9ebbc-177">Sichern von Diensten</span><span class="sxs-lookup"><span data-stu-id="9ebbc-177">Securing Services</span></span>](../../../docs/framework/wcf/securing-services.md)
- [<span data-ttu-id="9ebbc-178">Vorgehensweise: Legen Sie die ProtectionLevel-Eigenschaft</span><span class="sxs-lookup"><span data-stu-id="9ebbc-178">How to: Set the ProtectionLevel Property</span></span>](../../../docs/framework/wcf/how-to-set-the-protectionlevel-property.md)
- [<span data-ttu-id="9ebbc-179">Angeben und Behandeln von Fehlern in Verträgen und Diensten</span><span class="sxs-lookup"><span data-stu-id="9ebbc-179">Specifying and Handling Faults in Contracts and Services</span></span>](../../../docs/framework/wcf/specifying-and-handling-faults-in-contracts-and-services.md)
- [<span data-ttu-id="9ebbc-180">Verwenden von Nachrichtenverträgen</span><span class="sxs-lookup"><span data-stu-id="9ebbc-180">Using Message Contracts</span></span>](../../../docs/framework/wcf/feature-details/using-message-contracts.md)
