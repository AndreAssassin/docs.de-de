---
title: Erweiterbare Objekte
ms.date: 03/30/2017
helpviewer_keywords:
- extensible objects [WCF]
ms.assetid: bc88cefc-31fb-428e-9447-6d20a7d452af
ms.openlocfilehash: 682c391e7b3c68de5bf799f77a93df7539681a37
ms.sourcegitcommit: 2701302a99cafbe0d86d53d540eb0fa7e9b46b36
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 04/28/2019
ms.locfileid: "64654483"
---
# <a name="extensible-objects"></a><span data-ttu-id="22e28-102">Erweiterbare Objekte</span><span class="sxs-lookup"><span data-stu-id="22e28-102">Extensible Objects</span></span>

<span data-ttu-id="22e28-103">Das erweiterbare Objektmuster wird verwendet, um entweder vorhandene Laufzeitklassen um neue Funktionen zu erweitern oder um einem Objekt neue Zustandsfunktionen hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="22e28-103">The extensible object pattern is used to either extend existing runtime classes with new functionality or to add new state to an object.</span></span> <span data-ttu-id="22e28-104">Erweiterungen, die einem der erweiterbaren Objekte zugeordnet sind, ermöglichen es Verhalten in verschiedenen Phasen der Verarbeitung, auf gemeinsam verwendete Zustände und Funktionen zuzugreifen, die an ein zugängliches und allgemeines erweiterbares Objekt angefügt sind.</span><span class="sxs-lookup"><span data-stu-id="22e28-104">Extensions, attached to one of the extensible objects, enable behaviors at very different stages in processing to access shared state and functionality attached to a common extensible object that they can access.</span></span>

## <a name="the-iextensibleobjectt-pattern"></a><span data-ttu-id="22e28-105">Die IExtensibleObject\<T > Muster</span><span class="sxs-lookup"><span data-stu-id="22e28-105">The IExtensibleObject\<T> Pattern</span></span>

<span data-ttu-id="22e28-106">Es gibt drei Schnittstellen im erweiterbaren Objektmuster: <xref:System.ServiceModel.IExtensibleObject%601>, <xref:System.ServiceModel.IExtension%601> und <xref:System.ServiceModel.IExtensionCollection%601>.</span><span class="sxs-lookup"><span data-stu-id="22e28-106">There are three interfaces in the extensible object pattern: <xref:System.ServiceModel.IExtensibleObject%601>, <xref:System.ServiceModel.IExtension%601>, and <xref:System.ServiceModel.IExtensionCollection%601>.</span></span>

<span data-ttu-id="22e28-107">Die <xref:System.ServiceModel.IExtensibleObject%601>-Schnittstelle wird von Typen implementiert, die es <xref:System.ServiceModel.IExtension%601>-Objekten ermöglichen, ihre Funktionalität anzupassen.</span><span class="sxs-lookup"><span data-stu-id="22e28-107">The <xref:System.ServiceModel.IExtensibleObject%601> interface is implemented by types that allow <xref:System.ServiceModel.IExtension%601> objects to customize their functionality.</span></span>

<span data-ttu-id="22e28-108">Erweiterbare Objekte ermöglichen die dynamische Aggregation von <xref:System.ServiceModel.IExtension%601>-Objekten.</span><span class="sxs-lookup"><span data-stu-id="22e28-108">Extensible objects allow dynamic aggregation of <xref:System.ServiceModel.IExtension%601> objects.</span></span> <span data-ttu-id="22e28-109"><xref:System.ServiceModel.IExtension%601>-Objekte sind durch die folgende Schnittstelle gekennzeichnet:</span><span class="sxs-lookup"><span data-stu-id="22e28-109"><xref:System.ServiceModel.IExtension%601> objects are characterized by the following interface:</span></span>

```csharp
public interface IExtension<T>
where T : IExtensibleObject<T>
{
    void Attach(T owner);
    void Detach(T owner);
}
```

<span data-ttu-id="22e28-110">Die Typbeschränkung stellt sicher, dass Erweiterungen nur für Klassen definiert werden können, für die <xref:System.ServiceModel.IExtensibleObject%601> gilt.</span><span class="sxs-lookup"><span data-stu-id="22e28-110">The type restriction guarantees that extensions can only be defined for classes that are <xref:System.ServiceModel.IExtensibleObject%601>.</span></span> <span data-ttu-id="22e28-111"><xref:System.ServiceModel.IExtension%601.Attach%2A> und <xref:System.ServiceModel.IExtension%601.Detach%2A> führen die Benachrichtigung über eine Aggregation oder Disaggregation durch.</span><span class="sxs-lookup"><span data-stu-id="22e28-111"><xref:System.ServiceModel.IExtension%601.Attach%2A> and <xref:System.ServiceModel.IExtension%601.Detach%2A> provide notification of aggregation or disaggregation.</span></span>

<span data-ttu-id="22e28-112">Bei Implementierungen können Beschränkungen verwendet werden, wenn sie einem Besitzer hinzugefügt bzw. wenn sie entfernt werden.</span><span class="sxs-lookup"><span data-stu-id="22e28-112">It is valid for implementations to restrict when they may be added and removed from an owner.</span></span> <span data-ttu-id="22e28-113">Sie können zum Beispiel die Entfernung vollständig unmöglich machen, indem Sie das Hinzufügen oder Entfernen von Erweiterungen untersagen, wenn sich der Besitzer oder die Erweiterung in einem bestimmten Zustand befinden, das gleichzeitige Hinzufügen zu mehreren Besitzern untersagen oder nur eine einzelne Hinzufügung gefolgt von einer einzelnen Entfernung zulassen.</span><span class="sxs-lookup"><span data-stu-id="22e28-113">For example, you can disallow removal entirely, disallowing adding or removing extensions when the owner or extension are in a certain state, disallow adding to multiple owners concurrently, or allow only a single addition followed by a single remove.</span></span>

<span data-ttu-id="22e28-114"><xref:System.ServiceModel.IExtension%601> impliziert keine Interaktionen mit anderen standardmäßigen verwalteten Schnittstellen.</span><span class="sxs-lookup"><span data-stu-id="22e28-114"><xref:System.ServiceModel.IExtension%601> does not imply any interactions with other standard managed interfaces.</span></span> <span data-ttu-id="22e28-115">Die <xref:System.IDisposable.Dispose%2A?displayProperty=nameWithType>-Methode des Besitzerobjekts trennt ihre Erweiterungen in der Regel nicht ab.</span><span class="sxs-lookup"><span data-stu-id="22e28-115">Specifically, the <xref:System.IDisposable.Dispose%2A?displayProperty=nameWithType> method on the owner object does not normally detach its extensions.</span></span>

<span data-ttu-id="22e28-116">Wenn der Auflistung eine Erweiterung hinzugefügt wird, wird <xref:System.ServiceModel.IExtension%601.Attach%2A> aufgerufen, bevor die Erweiterung in die Auflistung aufgenommen wird.</span><span class="sxs-lookup"><span data-stu-id="22e28-116">When an extension is added to the collection, <xref:System.ServiceModel.IExtension%601.Attach%2A> is called before it goes into the collection.</span></span> <span data-ttu-id="22e28-117">Wenn eine Erweiterung aus der Auflistung entfernt wird, wird nach der Entfernung <xref:System.ServiceModel.IExtension%601.Detach%2A> aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="22e28-117">When an extension is removed from the collection, <xref:System.ServiceModel.IExtension%601.Detach%2A> is called after it is removed.</span></span> <span data-ttu-id="22e28-118">Dies bedeutet (vorausgesetzt, es erfolgt eine entsprechende Synchronisierung), dass eine Erweiterung nur dann sicher in einer Auflistung enthalten ist, wenn sie sich zwischen den Zuständen <xref:System.ServiceModel.IExtension%601.Attach%2A> und <xref:System.ServiceModel.IExtension%601.Detach%2A> befindet.</span><span class="sxs-lookup"><span data-stu-id="22e28-118">This means (assuming appropriate synchronization) an extension can count on only being found in the collection while it is between <xref:System.ServiceModel.IExtension%601.Attach%2A> and <xref:System.ServiceModel.IExtension%601.Detach%2A>.</span></span>

<span data-ttu-id="22e28-119">Für das Objekt, das an <xref:System.ServiceModel.IExtensionCollection%601.FindAll%2A> oder <xref:System.ServiceModel.IExtensionCollection%601.Find%2A> übergeben wird, muss nicht <xref:System.ServiceModel.IExtension%601> gelten (beispielsweise können Sie jedes Objekt übergeben), aber bei der zurückgegebenen Erweiterung handelt es sich um <xref:System.ServiceModel.IExtension%601>.</span><span class="sxs-lookup"><span data-stu-id="22e28-119">The object passed to <xref:System.ServiceModel.IExtensionCollection%601.FindAll%2A> or <xref:System.ServiceModel.IExtensionCollection%601.Find%2A> need not be <xref:System.ServiceModel.IExtension%601> (for example, you can pass any object), but the returned extension is an <xref:System.ServiceModel.IExtension%601>.</span></span>

<span data-ttu-id="22e28-120">Wenn keine Erweiterung in der Auflistung eine <xref:System.ServiceModel.IExtension%601>, <xref:System.ServiceModel.IExtensionCollection%601.Find%2A> null zurück, und <xref:System.ServiceModel.IExtensionCollection%601.FindAll%2A> eine leere Auflistung zurück.</span><span class="sxs-lookup"><span data-stu-id="22e28-120">If no extension in the collection is an <xref:System.ServiceModel.IExtension%601>, <xref:System.ServiceModel.IExtensionCollection%601.Find%2A> returns null, and <xref:System.ServiceModel.IExtensionCollection%601.FindAll%2A> returns an empty collection.</span></span> <span data-ttu-id="22e28-121">Wenn mehrere Erweiterungen <xref:System.ServiceModel.IExtension%601> implementieren, gibt <xref:System.ServiceModel.IExtensionCollection%601.Find%2A> eine davon zurück.</span><span class="sxs-lookup"><span data-stu-id="22e28-121">If multiple extensions implement <xref:System.ServiceModel.IExtension%601>, <xref:System.ServiceModel.IExtensionCollection%601.Find%2A> returns one of them.</span></span> <span data-ttu-id="22e28-122">Der von <xref:System.ServiceModel.IExtensionCollection%601.FindAll%2A> zurückgegebene Wert ist eine Momentaufnahme.</span><span class="sxs-lookup"><span data-stu-id="22e28-122">The value returned from <xref:System.ServiceModel.IExtensionCollection%601.FindAll%2A> is a snapshot.</span></span>

<span data-ttu-id="22e28-123">Es gibt zwei Hauptszenarios.</span><span class="sxs-lookup"><span data-stu-id="22e28-123">There are two main scenarios.</span></span> <span data-ttu-id="22e28-124">Beim ersten Szenario wird die <xref:System.ServiceModel.IExtensibleObject%601.Extensions%2A>-Eigenschaft als typbasiertes Wörterbuch verwendet, um den Zustand für ein Objekt einzufügen und auf diese Weise eine andere Komponente in die Lage zu versetzen, anhand des Typs danach zu suchen.</span><span class="sxs-lookup"><span data-stu-id="22e28-124">The first scenario uses the <xref:System.ServiceModel.IExtensibleObject%601.Extensions%2A> property as a type-based dictionary to insert state on an object to enable another component to look it up using the type.</span></span>

<span data-ttu-id="22e28-125">Beim zweiten Szenario werden die Eigenschaften <xref:System.ServiceModel.IExtension%601.Attach%2A> und <xref:System.ServiceModel.IExtension%601.Detach%2A> verwendet, um einem Objekt die Teilnahme am benutzerdefinierten Verhalten zu ermöglichen, zum Beispiel das Registrieren von Ereignissen, Beobachten von Zustandsübergängen usw.</span><span class="sxs-lookup"><span data-stu-id="22e28-125">The second scenario uses the <xref:System.ServiceModel.IExtension%601.Attach%2A> and <xref:System.ServiceModel.IExtension%601.Detach%2A> properties to enable an object to participate in custom behavior, such as registering for events, watching state transitions, and so on.</span></span>

<span data-ttu-id="22e28-126">Die <xref:System.ServiceModel.IExtensionCollection%601>-Schnittstelle ist eine Auflistung von <xref:System.ServiceModel.IExtension%601>-Objekten, für die der Abruf von <xref:System.ServiceModel.IExtension%601> anhand des Typs zulässig ist.</span><span class="sxs-lookup"><span data-stu-id="22e28-126">The <xref:System.ServiceModel.IExtensionCollection%601> interface is a collection of the <xref:System.ServiceModel.IExtension%601> objects that allow for retrieving the <xref:System.ServiceModel.IExtension%601> by its type.</span></span> <span data-ttu-id="22e28-127"><xref:System.ServiceModel.IExtensionCollection%601.Find%2A?displayProperty=nameWithType> gibt das zuletzt hinzugefügte Objekt zurück, das eine <xref:System.ServiceModel.IExtension%601> dieses Typs ist.</span><span class="sxs-lookup"><span data-stu-id="22e28-127"><xref:System.ServiceModel.IExtensionCollection%601.Find%2A?displayProperty=nameWithType> returns the most recently added object that is an <xref:System.ServiceModel.IExtension%601> of that type.</span></span>

### <a name="extensible-objects-in-windows-communication-foundation"></a><span data-ttu-id="22e28-128">Erweiterbare Objekte in Windows Communication Foundation</span><span class="sxs-lookup"><span data-stu-id="22e28-128">Extensible Objects in Windows Communication Foundation</span></span>

<span data-ttu-id="22e28-129">Es gibt vier erweiterbare Objekte in der Windows Communication Foundation (WCF):</span><span class="sxs-lookup"><span data-stu-id="22e28-129">There are four extensible objects in Windows Communication Foundation (WCF):</span></span>

- <span data-ttu-id="22e28-130"><xref:System.ServiceModel.ServiceHostBase> – Dies ist die Basisklasse für den Host des Dienstes.</span><span class="sxs-lookup"><span data-stu-id="22e28-130"><xref:System.ServiceModel.ServiceHostBase> – This is the base class for the service’s host.</span></span>  <span data-ttu-id="22e28-131">Sie können die Erweiterungen dieser Klasse verwenden, um das Verhalten von <xref:System.ServiceModel.ServiceHostBase> selbst zu erweitern oder um den Zustand für die Dienste einzeln zu speichern.</span><span class="sxs-lookup"><span data-stu-id="22e28-131">Extensions of this class can be used to extend the behavior of the <xref:System.ServiceModel.ServiceHostBase> itself or to store the state for each service.</span></span>

- <span data-ttu-id="22e28-132"><xref:System.ServiceModel.InstanceContext> – Diese Klasse verbindet eine Instanz des Diensttyps mit der Dienstlaufzeit.</span><span class="sxs-lookup"><span data-stu-id="22e28-132"><xref:System.ServiceModel.InstanceContext> – This class connects an instance of the service’s type with the service runtime.</span></span>  <span data-ttu-id="22e28-133">Sie enthält Informationen zu der Instanz sowie einen Verweis auf den <xref:System.ServiceModel.InstanceContext>, der <xref:System.ServiceModel.ServiceHostBase> enthält.</span><span class="sxs-lookup"><span data-stu-id="22e28-133">It contains information about the instance as well as a reference to the <xref:System.ServiceModel.InstanceContext>'s containing <xref:System.ServiceModel.ServiceHostBase>.</span></span> <span data-ttu-id="22e28-134">Sie können die Erweiterungen dieser Klasse verwenden, um das Verhalten von <xref:System.ServiceModel.InstanceContext> zu erweitern oder um den Zustand für die Dienste einzeln zu speichern.</span><span class="sxs-lookup"><span data-stu-id="22e28-134">Extensions of this class can be used to extend the behavior of the <xref:System.ServiceModel.InstanceContext> or to store the state for each service.</span></span>

- <span data-ttu-id="22e28-135"><xref:System.ServiceModel.OperationContext> – Diese Klasse stellt die Vorgangsinformationen dar, die die Laufzeit für jeden Vorgang aufzeichnet.</span><span class="sxs-lookup"><span data-stu-id="22e28-135"><xref:System.ServiceModel.OperationContext> – This class represents the operation information that the runtime gathers for each operation.</span></span>  <span data-ttu-id="22e28-136">Dazu gehören auch Informationen wie Header von eingehenden Nachrichten, Eigenschaften von eingehenden Nachrichten, die eingehende Sicherheitsidentität und andere Informationen.</span><span class="sxs-lookup"><span data-stu-id="22e28-136">This includes information such as the incoming message headers, the incoming message properties, the incoming security identity, and other information.</span></span>  <span data-ttu-id="22e28-137">Erweiterungen dieser Klasse können entweder das Verhalten des <xref:System.ServiceModel.OperationContext> erweitern oder den Zustand für jeden Vorgang einzeln speichern.</span><span class="sxs-lookup"><span data-stu-id="22e28-137">Extensions of this class can either extend the behavior of <xref:System.ServiceModel.OperationContext> or store the state for each operation.</span></span>

- <span data-ttu-id="22e28-138"><xref:System.ServiceModel.IContextChannel> – Diese Schnittstelle ermöglicht die Untersuchung der jeweiligen Zustand für die Kanäle und Proxys, die von den WCF-Laufzeit erstellt.</span><span class="sxs-lookup"><span data-stu-id="22e28-138"><xref:System.ServiceModel.IContextChannel> – This interface allows for the inspection of each state for the channels and proxies built by the WCF runtime.</span></span>  <span data-ttu-id="22e28-139">Erweiterungen dieser Klasse können entweder das Verhalten des <xref:System.ServiceModel.IClientChannel> erweitern oder das Verhalten verwenden, um den Zustand für jeden Kanal einzeln zu speichern.</span><span class="sxs-lookup"><span data-stu-id="22e28-139">Extensions of this class can either extend the behavior of <xref:System.ServiceModel.IClientChannel> or can use it to store the state for each channel.</span></span>

<span data-ttu-id="22e28-140">Das folgende Codebeispiel zeigt die Verwendung einer einfachen Erweiterung zum Verfolgen von <xref:System.ServiceModel.InstanceContext>-Objekten.</span><span class="sxs-lookup"><span data-stu-id="22e28-140">The following code example shows the use of a simple extension to track <xref:System.ServiceModel.InstanceContext> objects.</span></span>

[!code-csharp[IInstanceContextInitializer#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/iinstancecontextinitializer/cs/initializer.cs#1)]

## <a name="see-also"></a><span data-ttu-id="22e28-141">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="22e28-141">See also</span></span>

- <xref:System.ServiceModel.IExtensibleObject%601>
- <xref:System.ServiceModel.IExtension%601>
- <xref:System.ServiceModel.IExtensionCollection%601>
