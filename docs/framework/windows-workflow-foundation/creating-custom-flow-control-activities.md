---
title: Erstellen von benutzerdefinierten Flusssteuerungsaktivitäten
ms.date: 03/30/2017
ms.assetid: 27f409f6-2d1d-4cfb-9765-93eb2ad667d5
ms.openlocfilehash: f457e6f8cefd7183ca20cb449adf1ac15d7bde79
ms.sourcegitcommit: 2701302a99cafbe0d86d53d540eb0fa7e9b46b36
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 04/28/2019
ms.locfileid: "64647151"
---
# <a name="creating-custom-flow-control-activities"></a><span data-ttu-id="fbd31-102">Erstellen von benutzerdefinierten Flusssteuerungsaktivitäten</span><span class="sxs-lookup"><span data-stu-id="fbd31-102">Creating custom flow control activities</span></span>
<span data-ttu-id="fbd31-103">.NET Framework enthält eine Vielzahl von Flusssteuerungsaktivitäten, die auf ähnliche Weise funktionieren, abstrakte Programmierungsstrukturen (z. B. <xref:System.Activities.Statements.Flowchart>) oder standardmäßige Programmierungsstrukturen (z. B. <xref:System.Activities.Statements.If>).</span><span class="sxs-lookup"><span data-stu-id="fbd31-103">The .NET Framework contains a variety of flow-control activities that function similarly to abstract programming structures (such as <xref:System.Activities.Statements.Flowchart>)   or to standard programming statements (such as <xref:System.Activities.Statements.If>).</span></span> <span data-ttu-id="fbd31-104">In diesem Thema erläutert die Architektur von einem der Beispielprojekte, [nicht generische ForEach](./samples/non-generic-foreach.md).</span><span class="sxs-lookup"><span data-stu-id="fbd31-104">This topic discusses the architecture of one of the sample projects, [Non-Generic ForEach](./samples/non-generic-foreach.md).</span></span>  
  
## <a name="creating-the-custom-class"></a><span data-ttu-id="fbd31-105">Erstellen der benutzerdefinierten Klasse</span><span class="sxs-lookup"><span data-stu-id="fbd31-105">Creating the custom class</span></span>  
 <span data-ttu-id="fbd31-106">Da die nicht generische ForEach-Klasse untergeordnete Aktivitäten planen muss, muss sie aus <xref:System.Activities.NativeActivity> abgeleitet werden, da aus <xref:System.Workflow.Activities.CodeActivity> abgeleitete Aktivitäten diese Funktion nicht besitzen.</span><span class="sxs-lookup"><span data-stu-id="fbd31-106">Since the Non-Generic ForEach class will need to schedule child activities, it will need to derive from <xref:System.Activities.NativeActivity>, since activities that derive from <xref:System.Workflow.Activities.CodeActivity> do not have this functionality.</span></span>  
  
```  
public sealed class ForEach : NativeActivity  
    {  
```  
  
 <span data-ttu-id="fbd31-107">Die benutzerdefinierte Klasse erfordert mehrere Member, um die von der Aktivität verwendeten Daten zu speichern und die Funktionen zum Ausführen der untergeordneten Aktivitäten der Aktivität bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="fbd31-107">The custom class requires several members to store data being used by the activity, and to provide functionality to execute the activity’s child activities.</span></span> <span data-ttu-id="fbd31-108">Folgende Member sind erforderlich:</span><span class="sxs-lookup"><span data-stu-id="fbd31-108">These members include:</span></span>  
  
- <span data-ttu-id="fbd31-109">`valueEnumerator`: Die nicht öffentliche <xref:System.Activities.Variable%601> des Typs <xref:System.Collections.IEnumerator> zum Durchlaufen der Auflistung von Elementen verwendet.</span><span class="sxs-lookup"><span data-stu-id="fbd31-109">`valueEnumerator`: The non-public <xref:System.Activities.Variable%601> of type <xref:System.Collections.IEnumerator> used to iterate over the collection of items.</span></span> <span data-ttu-id="fbd31-110">Dieser Member hat den Typ <xref:System.Activities.Variable%601>, da er intern in der Aktivität verwendet wird. Es handelt sich nicht um ein Argument oder eine öffentliche Eigenschaft, die verwendet werden würden, wenn sich der Ursprung dieses Objekt außerhalb der Aktivität befinden würde.</span><span class="sxs-lookup"><span data-stu-id="fbd31-110">This member is of type <xref:System.Activities.Variable%601> because it is used internally in the activity, rather than an argument or public property, which would be used if this object were to have an origin outside the activity.</span></span>  
  
- <span data-ttu-id="fbd31-111">`OnChildComplete`: Die öffentliche <xref:System.Activities.CompletionCallback> -Eigenschaft, die ausgeführt wird, wenn jedes untergeordnete Element die Ausführung abgeschlossen ist.</span><span class="sxs-lookup"><span data-stu-id="fbd31-111">`OnChildComplete`: The public <xref:System.Activities.CompletionCallback> property that executes when each child completes execution.</span></span> <span data-ttu-id="fbd31-112">Dieser Member wird als CLR-Eigenschaft definiert, da sein Wert für verschiedene Instanzen der Aktivität unverändert bleibt.</span><span class="sxs-lookup"><span data-stu-id="fbd31-112">This member is defined as a CLR property, since its value will not change for different instances of the activity.</span></span>  
  
- <span data-ttu-id="fbd31-113">`Values`: Die Auflistung von Eingaben, die für die Iterationen der untergeordneten Aktivität verwendet werden soll.</span><span class="sxs-lookup"><span data-stu-id="fbd31-113">`Values`: The collection of inputs used for the iterations of the child activity.</span></span> <span data-ttu-id="fbd31-114">Dieser Member hat den Typ <xref:System.Activities.InArgument%601>, da der Ursprung der Daten sich zwar außerhalb der Aktivität befindet, aber der Inhalt der Auflistung während der Ausführung der Aktivität unverändert bleibt.</span><span class="sxs-lookup"><span data-stu-id="fbd31-114">This member is of type <xref:System.Activities.InArgument%601>, since the origin of the data is outside the activity, but the contents of the collection is not expected to change during the execution of the activity.</span></span> <span data-ttu-id="fbd31-115">Wenn es für die Aktivität erforderlich ist, den Inhalt dieser Auflistung beim Ausführen der Aktivität zu ändern (um beispielsweise Aktivitäten hinzuzufügen oder zu entfernen), muss dieser Member als <xref:System.Activities.ActivityAction> definiert werden. In diesem Fall findet bei jedem Zugriff eine Auswertung statt, damit Änderungen für die Aktivität zur Verfügung stehen.</span><span class="sxs-lookup"><span data-stu-id="fbd31-115">If the activity needed the functionality to change the contents of this collection while the activity was executing (to add or remove activities, for instance), this member would have been defined as an <xref:System.Activities.ActivityAction>, which then would have been evaluated every time it was accessed, so that changes would be available to the activity.</span></span>  
  
- <span data-ttu-id="fbd31-116">`Body`: Dieses Element definiert die Aktivität, die für jedes Element ausgeführt werden die `Values` Auflistung.</span><span class="sxs-lookup"><span data-stu-id="fbd31-116">`Body`: This member defines the activity to be executed for each item in the `Values` collection.</span></span> <span data-ttu-id="fbd31-117">Dieser Member wird als <xref:System.Activities.ActivityAction> definiert, damit bei jedem Zugriff eine Auswertung stattfindet.</span><span class="sxs-lookup"><span data-stu-id="fbd31-117">This member is defined as an <xref:System.Activities.ActivityAction> so that it is evaluated every time it is accessed.</span></span>  
  
- <span data-ttu-id="fbd31-118">`Execute`: Diese Methode verwendet die `InternalExecute`, `OnForEachComplete`, und `GetStateAndExecute` nicht öffentliche Member zum Planen der Ausführung und den Abschlusshandler der im textmember definierten untergeordneten Aktivität zuzuweisen.</span><span class="sxs-lookup"><span data-stu-id="fbd31-118">`Execute`: This method uses the `InternalExecute`, `OnForEachComplete`, and `GetStateAndExecute` non-public members to schedule the execution and assign the completion handler of the child activity defined in the Body member.</span></span>  
  
- <span data-ttu-id="fbd31-119">`CacheMetadata`: Dieser Member stellt der Laufzeit mit den Informationen, die sie zum Ausführen der Aktivität benötigt.</span><span class="sxs-lookup"><span data-stu-id="fbd31-119">`CacheMetadata`: This member provides the runtime with the information it needs to execute the activity.</span></span> <span data-ttu-id="fbd31-120">Standardmäßig informiert die `CacheMetadata`-Methode einer Aktivität die Laufzeit über alle öffentlichen Member der Aktivität. Da diese Aktivität aber für einige Funktionen private Member verwendet, muss die Laufzeit über deren Vorhandensein informiert werden, damit die Laufzeit sie berücksichtigen kann.</span><span class="sxs-lookup"><span data-stu-id="fbd31-120">By default, an activity’s `CacheMetadata` method will inform the runtime of all public members of the activity, but since this activity uses private members for some functionality, it needs to inform the runtime of their existence so that the runtime can be aware of them.</span></span> <span data-ttu-id="fbd31-121">In diesem Fall wird die `CacheMetadata`-Funktion überschrieben, damit auf den privaten `valueEnumerator`-Member zugegriffen werden kann.</span><span class="sxs-lookup"><span data-stu-id="fbd31-121">In this case, the `CacheMetadata` function is overridden so that the private `valueEnumerator` member can be accessed.</span></span> <span data-ttu-id="fbd31-122">Dieser Member erstellt auch ein Argument für die Werte der Aktivität, damit die Werte während der Ausführung an die Aktivität übergeben werden können.</span><span class="sxs-lookup"><span data-stu-id="fbd31-122">This member also creates an argument for the values for the activity so that they can be passed in to the activity during execution.</span></span>
