---
title: Leistungsindikatoren und prozessinterne parallele Anwendungen
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- performance counters
- performance counters,and in-process side-by-side applications
- performance,.NET Framework applications
- performance monitoring,counters
ms.assetid: 6888f9be-c65b-4b03-a07b-df7ebdee2436
author: rpetrusha
ms.author: ronpet
ms.openlocfilehash: dd3501bc74da2c9a812f9c4816b5a081b3780cd0
ms.sourcegitcommit: 155012a8a826ee8ab6aa49b1b3a3b532e7b7d9bd
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 06/04/2019
ms.locfileid: "66490033"
---
# <a name="performance-counters-and-in-process-side-by-side-applications"></a><span data-ttu-id="0fa05-102">Leistungsindikatoren und prozessinterne parallele Anwendungen</span><span class="sxs-lookup"><span data-stu-id="0fa05-102">Performance Counters and In-Process Side-By-Side Applications</span></span>
<span data-ttu-id="0fa05-103">Mithilfe des Systemmonitors (Perfmon.exe) können die Leistungsindikatoren pro Laufzeit unterschieden werden.</span><span class="sxs-lookup"><span data-stu-id="0fa05-103">Using the Performance Monitor (Perfmon.exe), it is possible to differentiate the performance counters on a per-runtime basis.</span></span> <span data-ttu-id="0fa05-104">Dieses Thema beschreibt die erforderlichen Registrierungsänderungen zur Aktivierung dieser Funktion.</span><span class="sxs-lookup"><span data-stu-id="0fa05-104">This topic describes the registry change needed to enable this functionality.</span></span>  
  
## <a name="the-default-behavior"></a><span data-ttu-id="0fa05-105">Das Standardverhalten</span><span class="sxs-lookup"><span data-stu-id="0fa05-105">The Default Behavior</span></span>  
 <span data-ttu-id="0fa05-106">Standardmäßig zeigt der Systemmonitor Leistungsindikatoren für eine einzelne Anwendung an.</span><span class="sxs-lookup"><span data-stu-id="0fa05-106">By default, the Performance Monitor displays performance counters on a per-application basis.</span></span> <span data-ttu-id="0fa05-107">Es gibt jedoch zwei Szenarios, in denen dies problematisch ist:</span><span class="sxs-lookup"><span data-stu-id="0fa05-107">However, there are two scenarios in which this is problematic:</span></span>  
  
- <span data-ttu-id="0fa05-108">Wenn Sie zwei Anwendungen überwachen, die den gleichen Namen haben.</span><span class="sxs-lookup"><span data-stu-id="0fa05-108">When you monitor two applications that have the same name.</span></span> <span data-ttu-id="0fa05-109">Wenn beispielsweise beide Anwendungen myapp.exe heißen, wird eine als **MyApp** und die andere als **MyApp#1** in der **Instanz**-Spalte angezeigt.</span><span class="sxs-lookup"><span data-stu-id="0fa05-109">For example, if both applications are named myapp.exe, one will be displayed as **myapp** and the other as **myapp#1** in the **Instance** column.</span></span> <span data-ttu-id="0fa05-110">In diesem Fall ist es schwierig, einen Leistungsindikator einer bestimmten Anwendung zuzuordnen.</span><span class="sxs-lookup"><span data-stu-id="0fa05-110">In this case, it is difficult to match a performance counter to a particular application.</span></span> <span data-ttu-id="0fa05-111">Es ist nicht klar, ob sich die Datensammlung für **MyApp#1** auf die erste oder zweite myapp.exe bezieht.</span><span class="sxs-lookup"><span data-stu-id="0fa05-111">It is not clear whether the data collected for **myapp#1** refers to the first myapp.exe or the second myapp.exe.</span></span>  
  
- <span data-ttu-id="0fa05-112">Wenn eine Anwendung mehrere Instanzen der Common Language Runtime verwendet.</span><span class="sxs-lookup"><span data-stu-id="0fa05-112">When an application uses multiple instances of the common language runtime.</span></span> <span data-ttu-id="0fa05-113">.NET Framework 4 unterstützt in-Process Side-by-Side-Hostingszenarios; d. h. kann ein einzelner Prozess oder eine Anwendung mehrere Instanzen von der common Language Runtime geladen werden.</span><span class="sxs-lookup"><span data-stu-id="0fa05-113">The .NET Framework 4 supports in-process side-by-side hosting scenarios; that is, a single process or application can load multiple instances of the common language runtime.</span></span> <span data-ttu-id="0fa05-114">Wenn eine einzelne Anwendung namens myapp.exe standardmäßig zwei Laufzeitinstanzen lädt, werden sie in der **Instanz**-Spalte als **MyApp** und **MyApp#1** festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="0fa05-114">If a single application named myapp.exe loads two runtime instances, by default, they will be designated in the **Instance** column as **myapp** and **myapp#1**.</span></span> <span data-ttu-id="0fa05-115">In diesem Fall ist es nicht klar, ob **MyApp** und **MyApp#1** auf zwei Anwendungen mit dem gleichen Namen oder auf dieselbe Anwendung mit zwei Laufzeiten verweisen.</span><span class="sxs-lookup"><span data-stu-id="0fa05-115">In this case, it is not clear whether **myapp** and **myapp#1** refer to two applications with the same name, or to the same application with two runtimes.</span></span> <span data-ttu-id="0fa05-116">Wenn mehrere Anwendungen mit dem gleichen Namen mehrere Laufzeiten laden, wird die Mehrdeutigkeit noch größer.</span><span class="sxs-lookup"><span data-stu-id="0fa05-116">If multiple applications with the same name load multiple runtimes, the ambiguity is even greater.</span></span>  
  
 <span data-ttu-id="0fa05-117">Sie können einen Registrierungsschlüssel festlegen, um diese Mehrdeutigkeit zu vermeiden.</span><span class="sxs-lookup"><span data-stu-id="0fa05-117">You can set a registry key to eliminate this ambiguity.</span></span> <span data-ttu-id="0fa05-118">Für Anwendungen mit .NET Framework 4 entwickelt wurden, fügt diese registrierungsänderung einen Prozessbezeichner, gefolgt von einer Runtime-Instanz-ID und Namen der Anwendung in der **Instanz** Spalte.</span><span class="sxs-lookup"><span data-stu-id="0fa05-118">For applications developed using the .NET Framework 4, this registry change adds a process identifier followed by a runtime instance identifier to the application name in the **Instance** column.</span></span> <span data-ttu-id="0fa05-119">Anstelle von *Anwendung* oder *Anwendung*#1 kann die Anwendung jetzt als *Anwendung*_`p`*ProcessID*\_`r`*RuntimeID* in der **Instanz**-Spalte identifiziert werden.</span><span class="sxs-lookup"><span data-stu-id="0fa05-119">Instead of *application* or *application*#1, the application is now identified as *application*_`p`*processID*\_`r`*runtimeID* in the **Instance** column.</span></span> <span data-ttu-id="0fa05-120">Wenn eine Anwendung mit einer früheren Version der common Language Runtime entwickelt wurde, wird diese Instanz als dargestellt *Anwendung\_* `p`*ProcessID* vorausgesetzt, dass die. .NET Framework 4 installiert ist.</span><span class="sxs-lookup"><span data-stu-id="0fa05-120">If an application was developed using a previous version of the common language runtime, that instance is represented as *application\_*`p`*processID* provided that the .NET Framework 4 is installed.</span></span>  
  
## <a name="performance-counters-for-in-process-side-by-side-applications"></a><span data-ttu-id="0fa05-121">Leistungsindikatoren für prozessinterne parallele Anwendungen</span><span class="sxs-lookup"><span data-stu-id="0fa05-121">Performance Counters for In-Process Side-by-Side Applications</span></span>  
 <span data-ttu-id="0fa05-122">Um die Leistungsindikatoren für mehrere Versionen der Common Language Runtime zu behandeln, die in einer einzigen Anwendung gehostet werden, müssen Sie die Einstellungen eines einzelnen Registrierungsschlüssels ändern, wie in der folgenden Tabelle gezeigt.</span><span class="sxs-lookup"><span data-stu-id="0fa05-122">To handle performance counters for multiple common language runtime versions that are hosted in a single application, you must change a single registry key setting, as shown in the following table.</span></span>  
  
|||  
|-|-|  
|<span data-ttu-id="0fa05-123">Schlüsselname</span><span class="sxs-lookup"><span data-stu-id="0fa05-123">Key name</span></span>|<span data-ttu-id="0fa05-124">HKEY_LOCAL_MACHINE\System\CurrentControlSet\Services\\.NETFramework\Performance</span><span class="sxs-lookup"><span data-stu-id="0fa05-124">HKEY_LOCAL_MACHINE\System\CurrentControlSet\Services\\.NETFramework\Performance</span></span>|  
|<span data-ttu-id="0fa05-125">Wertname</span><span class="sxs-lookup"><span data-stu-id="0fa05-125">Value name</span></span>|<span data-ttu-id="0fa05-126">ProcessNameFormat</span><span class="sxs-lookup"><span data-stu-id="0fa05-126">ProcessNameFormat</span></span>|  
|<span data-ttu-id="0fa05-127">Werttyp</span><span class="sxs-lookup"><span data-stu-id="0fa05-127">Value type</span></span>|<span data-ttu-id="0fa05-128">REG_DWORD</span><span class="sxs-lookup"><span data-stu-id="0fa05-128">REG_DWORD</span></span>|  
|<span data-ttu-id="0fa05-129">Wert</span><span class="sxs-lookup"><span data-stu-id="0fa05-129">Value</span></span>|<span data-ttu-id="0fa05-130">1 (0x00000001)</span><span class="sxs-lookup"><span data-stu-id="0fa05-130">1 (0x00000001)</span></span>|  
  
 <span data-ttu-id="0fa05-131">Der Wert 0 für `ProcessNameFormat` zeigt an, dass das Standardverhalten aktiviert ist; Perfmon.exe zeigt Leistungsindikatoren nach einzelnen Anwendungen an.</span><span class="sxs-lookup"><span data-stu-id="0fa05-131">A value of 0 for `ProcessNameFormat` indicates that the default behavior is enabled; that is, Perfmon.exe displays performance counters on a per-application basis.</span></span> <span data-ttu-id="0fa05-132">Wenn Sie diesen Wert auf 1 festlegen, unterscheidet Perfmon.exe zwischen mehreren Versionen einer Anwendung und stellt Leistungsindikatoren pro Laufzeit zur Verfügung.</span><span class="sxs-lookup"><span data-stu-id="0fa05-132">When you set this value to 1, Perfmon.exe disambiguates multiple versions of an application and provides performance counters on a per-runtime basis.</span></span> <span data-ttu-id="0fa05-133">Jeder andere Wert für die `ProcessNameFormat`-Registrierungsschlüsseleinstellung wird nicht unterstützt und für zukünftige Verwendung reserviert.</span><span class="sxs-lookup"><span data-stu-id="0fa05-133">Any other value for the `ProcessNameFormat` registry key setting is unsupported and reserved for future use.</span></span>  
  
 <span data-ttu-id="0fa05-134">Nach der Aktualisierung der `ProcessNameFormat`-Registrierungsschlüsseleinstellung müssen Sie Perfmon.exe oder andere Consumer von Leistungsindikatoren neu starten, damit die neue namensgebende Funktion der Instanz ordnungsgemäß funktioniert.</span><span class="sxs-lookup"><span data-stu-id="0fa05-134">After you update the `ProcessNameFormat` registry key setting, you must restart Perfmon.exe or any other consumers of performance counters so that the new instance naming feature works correctly.</span></span>  
  
 <span data-ttu-id="0fa05-135">Im folgenden Beispiel wird veranschaulicht, wie ein `ProcessNameFormat`-Wert programmgesteuert verändert werden kann.</span><span class="sxs-lookup"><span data-stu-id="0fa05-135">The following example shows how to change the `ProcessNameFormat` value programmatically.</span></span>  
  
 [!code-csharp[Conceptual.PerfCounters.InProSxS#1](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.perfcounters.inprosxs/cs/regsetting1.cs#1)]
 [!code-vb[Conceptual.PerfCounters.InProSxS#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.perfcounters.inprosxs/vb/regsetting1.vb#1)]  
  
 <span data-ttu-id="0fa05-136">Wenn Sie diese registrierungsänderung vornehmen, zeigt Perfmon.exe die Namen von Anwendungen, die .NET Framework 4 als Ziel *Anwendung*_`p`*ProcessID* \_ `r` *RuntimeID*, wobei *Anwendung* ist der Name der Anwendung, *ProcessID* ist der Prozess-ID der Anwendung, und  *RuntimeID* eine common Language Runtime-ID ist.</span><span class="sxs-lookup"><span data-stu-id="0fa05-136">When you make this registry change, Perfmon.exe displays the names of applications that target the .NET Framework 4 as *application*_`p`*processID*\_`r`*runtimeID*, where *application* is the name of the application, *processID* is the application's process identifier, and *runtimeID* is a common language runtime identifier.</span></span> <span data-ttu-id="0fa05-137">Wenn beispielsweise eine Anwendung namens myapp.exe zwei Instanzen der Common Language Runtime lädt, wird Perfmon.exe möglicherweise eine Instanz als myapp_p1416_r10 und eine zweite als myapp_p3160_r10 identifizieren.</span><span class="sxs-lookup"><span data-stu-id="0fa05-137">For example, if an application named myapp.exe loads two instances of the common language runtime, Perfmon.exe may identify one instance as myapp_p1416_r10 and the second as myapp_p3160_r10.</span></span> <span data-ttu-id="0fa05-138">Der Laufzeitbezeichner unterscheidet nur zwischen den Laufzeiten innerhalb eines Prozesses; er stellt keine andere Informationen über die Common Language Runtime bereit.</span><span class="sxs-lookup"><span data-stu-id="0fa05-138">The runtime identifier only disambiguates the runtimes within a process; it does not provide any other information about the runtime.</span></span> <span data-ttu-id="0fa05-139">(Die Common Language Runtime-ID hat beispielsweise keine Beziehung mit der Version oder der SKU der Laufzeit.)</span><span class="sxs-lookup"><span data-stu-id="0fa05-139">(For example, the runtime ID has no relation to the version or the SKU of the runtime.)</span></span>  
  
 <span data-ttu-id="0fa05-140">Wenn .NET Framework 4 installiert ist, betrifft die registrierungsänderung auch Anwendungen, die mit früheren Versionen von .NET Framework entwickelt wurden.</span><span class="sxs-lookup"><span data-stu-id="0fa05-140">If the .NET Framework 4 is installed, the registry change also affects applications that were developed using earlier versions of the .NET Framework.</span></span> <span data-ttu-id="0fa05-141">Diese werden in Perfmon.exe als *Application_* `p`*ProcessID* angezeigt, wobei *Anwendung* der Anwendungsname und *ProcessID* die Prozess-ID ist.</span><span class="sxs-lookup"><span data-stu-id="0fa05-141">These appear in Perfmon.exe as *application_*`p`*processID*, where *application* is the application name and *processID* is the process identifier.</span></span> <span data-ttu-id="0fa05-142">Wenn die Leistungsindikatoren von zwei Anwendungen namens myapp.exe überwacht werden, wird eine möglicherweise als myapp_p23900 und die andere als myapp_p24908 angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="0fa05-142">For example, if the performance counters of two applications named myapp.exe are monitored, one might appear as myapp_p23900 and the other as myapp_p24908.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="0fa05-143">Die Prozess-ID beseitigt die Mehrdeutigkeit der Auflösung von zwei Anwendungen mit dem gleichen Namen, die frühere Versionen der Laufzeit verwenden.</span><span class="sxs-lookup"><span data-stu-id="0fa05-143">The process identifier eliminates the ambiguity of resolving two applications with the same name that use earlier versions of the runtime.</span></span> <span data-ttu-id="0fa05-144">Ein Laufzeitbezeichner ist nicht für frühere Versionen erforderlich, da frühere Versionen der Common Language Runtime keine parallelen Szenarios unterstützen.</span><span class="sxs-lookup"><span data-stu-id="0fa05-144">A runtime identifier is not required for previous versions, because previous versions of the common language runtime do not support side-by-side scenarios.</span></span>  
  
 <span data-ttu-id="0fa05-145">Wenn .NET Framework 4 nicht vorhanden ist oder deinstalliert wurde, hat das Festlegen des Registrierungsschlüssels keine Auswirkungen.</span><span class="sxs-lookup"><span data-stu-id="0fa05-145">If the .NET Framework 4 is not present or was uninstalled, setting the registry key has no effect.</span></span> <span data-ttu-id="0fa05-146">Dies bedeutet, dass zwei Anwendungen mit dem gleichen Namen in Perfmon.exe weiterhin als *Anwendung* und *Anwendung#1* angezeigt werden (z.B. **MyApp** und **MyApp#1**).</span><span class="sxs-lookup"><span data-stu-id="0fa05-146">This means that two applications with the same name will continue to appear in Perfmon.exe as *application* and *application#1* (for example, as **myapp** and **myapp#1**).</span></span>
