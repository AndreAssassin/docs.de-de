---
title: Laufzeit-Profilerstellung
ms.date: 03/30/2017
helpviewer_keywords:
- performance counters
- common language runtime, profiling
- Perfmon.exe
- System Monitor
- profiling
- runtime, profiling
- profiling applications
- Performance Console
ms.assetid: ccd68284-f3a8-47b8-bc3f-92e5fe3a1640
author: rpetrusha
ms.author: ronpet
ms.openlocfilehash: b0c56018c61e5566043fb2b9ba8bbee042093f12
ms.sourcegitcommit: 904b98d8d706f0e2d5ceaa00ce17ffbd92adfb88
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 06/07/2019
ms.locfileid: "66758150"
---
# <a name="runtime-profiling"></a><span data-ttu-id="89736-102">Laufzeit-Profilerstellung</span><span class="sxs-lookup"><span data-stu-id="89736-102">Runtime Profiling</span></span>
<span data-ttu-id="89736-103">Die Profilerstellung ist eine Methode zum Sammeln von Leistungsdaten in einer Bereitstellung oder einem Bereitstellungsszenario.</span><span class="sxs-lookup"><span data-stu-id="89736-103">Profiling is a method of gathering performance data in any development or deployment scenario.</span></span> <span data-ttu-id="89736-104">Dieser Abschnitt ist für Entwickler und Systemadministratoren vorgesehen, die Informationen zur Leistung der Anwendung erfassen möchten.</span><span class="sxs-lookup"><span data-stu-id="89736-104">This section is for developers and system administrators who want to gather information about application performance.</span></span>  
  
## <a name="tracking-performance-using-the-performance-monitor-perfmonexe"></a><span data-ttu-id="89736-105">Verfolgen der Leistung mithilfe des Systemmonitors (Perfmon.exe)</span><span class="sxs-lookup"><span data-stu-id="89736-105">Tracking Performance Using the Performance Monitor (Perfmon.exe)</span></span>  
 <span data-ttu-id="89736-106">Der Systemmonitor ist das einfachste Tool verwenden, um Ihre .NET Framework-Anwendung ein Profil.</span><span class="sxs-lookup"><span data-stu-id="89736-106">The Performance Monitor is the easiest tool to use to profile your .NET Framework application.</span></span> <span data-ttu-id="89736-107">Der Systemmonitor stellt in den .NET Framework-Leistungsindikatoren erfasste Daten grafisch dar, die mit der Common Language Runtime und dem [!INCLUDE[winsdklong](../../../includes/winsdklong-md.md)]installiert werden.</span><span class="sxs-lookup"><span data-stu-id="89736-107">The Performance Monitor graphically represents data found in the .NET Framework performance counters that are installed with the common language runtime and the [!INCLUDE[winsdklong](../../../includes/winsdklong-md.md)].</span></span> <span data-ttu-id="89736-108">Mithilfe dieser Leistungsindikatoren können Sie von der Speicherverwaltung bis zur JIT-Compilerleistung (JIT) sämtliche Informationen überwachen.</span><span class="sxs-lookup"><span data-stu-id="89736-108">These counters can be used to monitor everything from memory management to just-in-time (JIT) compiler performance.</span></span> <span data-ttu-id="89736-109">Sie informieren Sie über die von der Anwendung verwendeten Ressourcen, die ein indirektes Maß für die Leistung der Anwendung sind.</span><span class="sxs-lookup"><span data-stu-id="89736-109">They tell you about the resources your application uses, which is an indirect measure of your application's performance.</span></span> <span data-ttu-id="89736-110">Verwenden Sie diese Leistungsindikatoren, um zu verstehen, wie die Anwendung intern funktioniert.</span><span class="sxs-lookup"><span data-stu-id="89736-110">Use these counters to understand how your application works internally.</span></span>  
  
#### <a name="to-run-perfmonexe-on-windows-vista-and-later-versions"></a><span data-ttu-id="89736-111">So führen Sie „Perfmon.exe“ unter Windows Vista und höheren Versionen aus</span><span class="sxs-lookup"><span data-stu-id="89736-111">To run Perfmon.exe on Windows Vista and later versions</span></span>  
  
1. <span data-ttu-id="89736-112">Geben Sie an der Eingabeaufforderung **perfmon**ein.</span><span class="sxs-lookup"><span data-stu-id="89736-112">At the command prompt, type **perfmon**.</span></span> <span data-ttu-id="89736-113">Die **Systemmonitor** -Konsole wird angezeigt.</span><span class="sxs-lookup"><span data-stu-id="89736-113">The **Performance Monitor** console appears.</span></span>  
  
2. <span data-ttu-id="89736-114">Klicken Sie im Ordner **Überwachungstools** auf **Systemmonitor**.</span><span class="sxs-lookup"><span data-stu-id="89736-114">In the **Monitoring Tools** folder, click **Performance Monitor**.</span></span>  
  
3. <span data-ttu-id="89736-115">Klicken Sie auf der Symbolleiste des Systemmonitors auf das Symbol **Hinzufügen** (das Pluszeichen), sofern es vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="89736-115">In the Performance Monitor toolbar, click the **Add** icon (the plus sign), if it is present.</span></span> <span data-ttu-id="89736-116">Wenn es nicht vorhanden ist, klicken Sie mit der rechten Maustaste im Überwachungsfenster, und wählen Sie dann die Option **Leistungsindikatoren hinzufügen** aus.</span><span class="sxs-lookup"><span data-stu-id="89736-116">If it is not present, right-click in the monitor window and select the **Add Counters** option.</span></span>  
  
     <span data-ttu-id="89736-117">Dadurch wird das Dialogfeld **Leistungsindikatoren hinzufügen** geöffnet.</span><span class="sxs-lookup"><span data-stu-id="89736-117">This opens the **Add Counters** dialog box.</span></span> <span data-ttu-id="89736-118">Das Listenfeld **Verfügbare Indikatoren** zeigt die verfügbaren Leistungsobjekte an.</span><span class="sxs-lookup"><span data-stu-id="89736-118">The **Available counters** list box displays the available performance objects.</span></span> <span data-ttu-id="89736-119">Es gibt eine Reihe von vordefinierten Objekten für .NET Framework-Clientanwendungen, einschließlich der Objekte für die Speicherverwaltung ( **.NET CLR-Speicher**), Interoperabilität ( **.NET CLR-Interop**), Ausnahmebehandlung ( **.NET CLR-Ausnahmen**) und für Multithreading ( **.NET CLR-Sperren und Threads**).</span><span class="sxs-lookup"><span data-stu-id="89736-119">There are a number of predefined objects for .NET Framework applications, including those for memory management (**.NET CLR Memory**), interoperability (**.NET CLR Interop**), exception handling (**.NET CLR Exceptions**), and multithreading (**.NET CLR LocksAndThreads**).</span></span> <span data-ttu-id="89736-120">Jedes Leistungsobjekt umfasst eine Reihe von einzelnen Leistungsindikatoren.</span><span class="sxs-lookup"><span data-stu-id="89736-120">Each performance object includes a number of individual performance counters.</span></span> <span data-ttu-id="89736-121">Eine Liste der im Systemmonitor verfügbaren Leistungsindikatoren finden Sie unter [Performance Counters](../../../docs/framework/debug-trace-profile/performance-counters.md)installiert werden.</span><span class="sxs-lookup"><span data-stu-id="89736-121">For a list of the performance counters available in Performance Monitor, see [Performance Counters](../../../docs/framework/debug-trace-profile/performance-counters.md).</span></span>  
  
4. <span data-ttu-id="89736-122">Aktivieren Sie das Kontrollkästchen neben dem Namen eines Leistungsobjekts, um die Liste der einzelnen Leistungsindikatoren anzuzeigen, die es unterstützt.</span><span class="sxs-lookup"><span data-stu-id="89736-122">Select the check box next to a performance object's name to view the list of individual performance counters that it supports.</span></span>  
  
5. <span data-ttu-id="89736-123">Klicken Sie auf den Leistungsindikator, den Sie anzeigen möchten.</span><span class="sxs-lookup"><span data-stu-id="89736-123">Click the performance counter you want to view.</span></span>  
  
6. <span data-ttu-id="89736-124">Klicken Sie im Listenfeld **Instanzen des ausgewählten Objekts** auf **\<Alle Instanzen>** , um anzugeben, dass Sie den Leistungsindikator für die Common Language Runtime global (d.h. systemweit) überwachen möchten.</span><span class="sxs-lookup"><span data-stu-id="89736-124">In the **Instances of selected object** list box, click **\<All instances>** to specify that you want to monitor the performance counter for the common language runtime globally (that is, on a system-wide basis).</span></span>  
  
     <span data-ttu-id="89736-125">- oder -</span><span class="sxs-lookup"><span data-stu-id="89736-125">-or-</span></span>  
  
     <span data-ttu-id="89736-126">Klicken Sie im Listenfeld **Instanzen des ausgewählten Objekts** auf einen Anwendungsnamen, um den Leistungsindikator für diese Anwendung zu überwachen.</span><span class="sxs-lookup"><span data-stu-id="89736-126">In the **Instances of selected object** list box, click an application name to monitor the performance counter for that application.</span></span>  
  
     <span data-ttu-id="89736-127">Sie müssen zudem einen Registrierungsschlüssel ändern, um verschiedene Versionen der Laufzeit oder mehrere Clientanwendungen mit dem gleichen Namen zu unterscheiden.</span><span class="sxs-lookup"><span data-stu-id="89736-127">To differentiate multiple versions of the runtime, or to disambiguate multiple applications with the same name, you must also modify a registry key.</span></span> <span data-ttu-id="89736-128">Weitere Informationen finden Sie unter [Performance Counters and In-Process Side-By-Side Applications](../../../docs/framework/debug-trace-profile/performance-counters-and-in-process-side-by-side-applications.md).</span><span class="sxs-lookup"><span data-stu-id="89736-128">For more information, see [Performance Counters and In-Process Side-By-Side Applications](../../../docs/framework/debug-trace-profile/performance-counters-and-in-process-side-by-side-applications.md).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="89736-129">Wenn neue Leistungsindikatoren installiert werden, während die Leistungskonsole ausgeführt wird, beenden Sie die Leistungskonsole und starten sie anschließend neu, damit die neuen Indikatoren angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="89736-129">When new performance counters are installed while the Performance console is running, stop and restart the Performance console to make the new counters visible.</span></span>  
  
 <span data-ttu-id="89736-130">Wenn Sie für eine Assembly ein Profil erstellen möchten, die sich in einer Zone oder auf einer Remotefreigabe befindet, stellen Sie sicher, dass die Remoteassembly auf dem Computer über volle Vertrauenswürdigkeit verfügt, auf dem die Leistungsindikatoren ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="89736-130">If you want to profile an assembly that exists in a zone or on a remote share, make sure that the remote assembly has full trust on the computer that runs the performance counters.</span></span> <span data-ttu-id="89736-131">Ist die Vertrauenswürdigkeit der Assembly zu gering bemessen, funktionieren die Leistungsindikatoren nicht.</span><span class="sxs-lookup"><span data-stu-id="89736-131">If the assembly does not have sufficient trust, the performance counters will not work.</span></span> <span data-ttu-id="89736-132">Informationen zum Gewähren von Vertrauenswürdigkeit für verschiedene Zonen finden Sie unter [Caspol.exe (Code Access Security Policy-Tool)](../../../docs/framework/tools/caspol-exe-code-access-security-policy-tool.md).</span><span class="sxs-lookup"><span data-stu-id="89736-132">For information about granting trust to different zones, see [Caspol.exe (Code Access Security Policy Tool)](../../../docs/framework/tools/caspol-exe-code-access-security-policy-tool.md).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="89736-133">Auf Systemen, die auf dem .NET Framework 4 installiert ist, zeigt der Systemmonitor möglicherweise keine Daten für Leistungsindikatoren in einigen Kategorien, z. B. **Data .NET CLR** und **.NET CLR-Netzwerk**, für die Anwendungen, die mithilfe von .NET Framework 1.1 entwickelt wurden.</span><span class="sxs-lookup"><span data-stu-id="89736-133">On systems on which the .NET Framework 4 is installed, the Performance Monitor may not display data for performance counters in some categories, such as **.NET CLR Data** and **.NET CLR Networking**, for applications that were developed using the .NET Framework 1.1.</span></span> <span data-ttu-id="89736-134">Wenn dies der Fall ist, können Sie den Systemmonitor entsprechend konfigurieren, um diese Daten durch Hinzufügen des [\<forcePerformanceCounterUniqueSharedMemoryReads>](../../../docs/framework/configure-apps/file-schema/runtime/forceperformancecounteruniquesharedmemoryreads-element.md)-Elements in der Konfigurationsdatei der Anwendung anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="89736-134">If this is the case, you can configure Performance Monitor to display this data by adding the [\<forcePerformanceCounterUniqueSharedMemoryReads>](../../../docs/framework/configure-apps/file-schema/runtime/forceperformancecounteruniquesharedmemoryreads-element.md) element to the application's configuration file.</span></span>  
  
## <a name="reading-and-creating-performance-counters-programmatically"></a><span data-ttu-id="89736-135">Programmgesteuertes Lesen und Erstellen von Leistungsindikatoren</span><span class="sxs-lookup"><span data-stu-id="89736-135">Reading and Creating Performance Counters Programmatically</span></span>  
 <span data-ttu-id="89736-136">.NET Framework bietet Klassen, die Sie verwenden können, um programmgesteuert auf dieselben Leistungsdaten zugreifen, die in der Leistungskonsole verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="89736-136">The .NET Framework provides classes you can use to programmatically access the same performance information that is available in the Performance console.</span></span> <span data-ttu-id="89736-137">Mithilfe dieser Klassen können Sie auch benutzerdefinierte Leistungsindikatoren erstellen.</span><span class="sxs-lookup"><span data-stu-id="89736-137">You can also use these classes to create custom performance counters.</span></span> <span data-ttu-id="89736-138">Die folgende Tabelle beschreibt einige der systemmonitorklassen, die in .NET Framework bereitgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="89736-138">The following table describes some of the performance monitoring classes that are provided in the .NET Framework.</span></span>  
  
|<span data-ttu-id="89736-139">Klasse</span><span class="sxs-lookup"><span data-stu-id="89736-139">Class</span></span>|<span data-ttu-id="89736-140">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="89736-140">Description</span></span>|  
|-----------|-----------------|  
|<xref:System.Diagnostics.PerformanceCounter?displayProperty=nameWithType>|<span data-ttu-id="89736-141">Stellt eine Windows NT-Leistungsindikatorkomponente dar.</span><span class="sxs-lookup"><span data-stu-id="89736-141">Represents a Windows NT performance counter component.</span></span> <span data-ttu-id="89736-142">Verwenden Sie diese Klasse, um vordefinierte oder benutzerdefinierte Leistungsindikatoren zu lesen und Leistungsdaten für benutzerdefinierte Indikatoren zu veröffentlichen (schreiben).</span><span class="sxs-lookup"><span data-stu-id="89736-142">Use this class to read existing predefined or custom counters and publish (write) performance data to custom counters.</span></span>|  
|<xref:System.Diagnostics.PerformanceCounterCategory?displayProperty=nameWithType>|<span data-ttu-id="89736-143">Bietet verschiedene Methoden für die Interaktion mit Indikatoren und Kategorien von Indikatoren auf dem Computer.</span><span class="sxs-lookup"><span data-stu-id="89736-143">Provides several methods for interacting with counters and categories of counters on the computer.</span></span>|  
|<xref:System.Diagnostics.PerformanceCounterInstaller?displayProperty=nameWithType>|<span data-ttu-id="89736-144">Gibt einen Installer für die `PerformanceCounter` -Komponente an.</span><span class="sxs-lookup"><span data-stu-id="89736-144">Specifies an installer for the `PerformanceCounter` component.</span></span>|  
|<xref:System.Diagnostics.PerformanceCounterType?displayProperty=nameWithType>|<span data-ttu-id="89736-145">Gibt die Formel zum Berechnen der `NextValue` -Methode für eine `PerformanceCounter`an.</span><span class="sxs-lookup"><span data-stu-id="89736-145">Specifies the formula to calculate the `NextValue` method for a `PerformanceCounter`.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="89736-146">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="89736-146">See also</span></span>

- [<span data-ttu-id="89736-147">Leistungsindikatoren</span><span class="sxs-lookup"><span data-stu-id="89736-147">Performance Counters</span></span>](../../../docs/framework/debug-trace-profile/performance-counters.md)
