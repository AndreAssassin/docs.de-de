---
title: invalidCERCall-MDA
ms.date: 03/30/2017
helpviewer_keywords:
- invalid CER calls
- InvalidCERCall MDA
- MDAs (managed debugging assistants), CER calls
- constrained execution regions
- CER calls
- managed debugging assistants (MDAs), CER calls
ms.assetid: c4577410-602e-44e5-9dab-fea7c55bcdfe
author: mairaw
ms.author: mairaw
ms.openlocfilehash: 1a68aac2a92a0569e288da858e4a4e4695fd5eaa
ms.sourcegitcommit: 0be8a279af6d8a43e03141e349d3efd5d35f8767
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 04/18/2019
ms.locfileid: "59193914"
---
# <a name="invalidcercall-mda"></a><span data-ttu-id="396d4-102">invalidCERCall-MDA</span><span class="sxs-lookup"><span data-stu-id="396d4-102">invalidCERCall MDA</span></span>
<span data-ttu-id="396d4-103">Der `invalidCERCall`-MDA (Assistent für verwaltetes Debuggen) wird aktiviert, wenn ein Aufruf innerhalb des Diagramms des eingeschränkten Ausführungsbereichs (CER) an eine Methode stattfindet, die keinen Zuverlässigkeitsvertrag oder einen übermäßig schwachen Vertrag besitzt.</span><span class="sxs-lookup"><span data-stu-id="396d4-103">The `invalidCERCall` managed debugging assistant (MDA) is activated when there is a call within the constrained execution region (CER) graph to a method that has no reliability contract or an excessively weak contract.</span></span> <span data-ttu-id="396d4-104">Ein schwacher Vertrag ist ein Vertrag, der deklariert, dass die schlimmste Zustandsbeschädigung einen größeren Umfang hat als die an den Aufruf übergebene Instanz. <xref:System.AppDomain> oder der Prozessstatus werden also möglicherweise beschädigt oder das Ergebnis bei einem Aufruf innerhalb eines CER kann nicht immer deterministisch berechnet werden.</span><span class="sxs-lookup"><span data-stu-id="396d4-104">A weak contract is a contract that declares that the worst case state corruption is of greater scope than the instance passed to the call, that is, the <xref:System.AppDomain> or process state may become corrupted or that its result is not always deterministically computable when called within a CER.</span></span>  
  
## <a name="symptoms"></a><span data-ttu-id="396d4-105">Symptome</span><span class="sxs-lookup"><span data-stu-id="396d4-105">Symptoms</span></span>  
 <span data-ttu-id="396d4-106">Unerwartete Ergebnisse beim Ausführen von Code in einem CER.</span><span class="sxs-lookup"><span data-stu-id="396d4-106">Unexpected results when executing code in a CER.</span></span> <span data-ttu-id="396d4-107">Die Symptome sind nicht spezifisch.</span><span class="sxs-lookup"><span data-stu-id="396d4-107">The symptoms are not specific.</span></span> <span data-ttu-id="396d4-108">Bei diesen handelt es sich möglicherweise um unerwartete <xref:System.OutOfMemoryException>-, <xref:System.Threading.ThreadAbortException>- oder andere Ausnahmen beim Aufruf der unzuverlässigen Methode, da die Common Language Runtime sie nicht rechtzeitig vorbereitet hat oder vor <xref:System.Threading.ThreadAbortException>-Ausnahmen zur Laufzeit schützt.</span><span class="sxs-lookup"><span data-stu-id="396d4-108">They could be an unexpected <xref:System.OutOfMemoryException>, a <xref:System.Threading.ThreadAbortException>, or other exceptions at the call into the unreliable method because the runtime did not prepare it ahead of time or protect it from <xref:System.Threading.ThreadAbortException> exceptions at run time.</span></span> <span data-ttu-id="396d4-109">Eine stärkere Bedrohung ist die Tatsache, dass eine Ausnahme aus der Methode zur Laufzeit <xref:System.AppDomain> oder Prozesse in einem instabilen Zustand hinterlassen könnte, was im Gegensatz zum Ziel eines CER steht.</span><span class="sxs-lookup"><span data-stu-id="396d4-109">A greater threat is that any exception resulting from the method at run time could leave the <xref:System.AppDomain> or process in an unstable state, which is contrary to the objective of a CER.</span></span> <span data-ttu-id="396d4-110">Ein CER wird erstellt, um Beschädigungen des Zustands wie diese zu vermeiden.</span><span class="sxs-lookup"><span data-stu-id="396d4-110">The reason a CER is created is to avoid state corruptions such as this.</span></span> <span data-ttu-id="396d4-111">Die Symptome des beschädigten Zustands sind anwendungsspezifisch, da die Definition des konsistenten Zustands sich zwischen den Anwendungen unterscheidet.</span><span class="sxs-lookup"><span data-stu-id="396d4-111">The symptoms of corrupt state are application specific because the definition of consistent state is different between applications.</span></span>  
  
## <a name="cause"></a><span data-ttu-id="396d4-112">Ursache</span><span class="sxs-lookup"><span data-stu-id="396d4-112">Cause</span></span>  
 <span data-ttu-id="396d4-113">Code in einem CER ruft eine Funktion ohne <xref:System.Runtime.ConstrainedExecution.ReliabilityContractAttribute> oder mit einem schwachen <xref:System.Runtime.ConstrainedExecution.ReliabilityContractAttribute> auf, die nicht für die Ausführung in einem CER kompatibel ist.</span><span class="sxs-lookup"><span data-stu-id="396d4-113">Code within a CER is calling a function with no <xref:System.Runtime.ConstrainedExecution.ReliabilityContractAttribute> or with a weak <xref:System.Runtime.ConstrainedExecution.ReliabilityContractAttribute> that is not compatible with running in a CER.</span></span>  
  
 <span data-ttu-id="396d4-114">In Bezug auf die Syntax der Zuverlässigkeitsverträge ist ein schwacher Vertrag ein Vertrag, der keinen <xref:System.Runtime.ConstrainedExecution.Consistency>-Enumerationswert oder einen <xref:System.Runtime.ConstrainedExecution.Consistency>-Wert von <xref:System.Runtime.ConstrainedExecution.Consistency.MayCorruptProcess>, <xref:System.Runtime.ConstrainedExecution.Consistency.MayCorruptAppDomain> oder <xref:System.Runtime.ConstrainedExecution.Cer.None> angibt.</span><span class="sxs-lookup"><span data-stu-id="396d4-114">In terms of reliability contract syntax, a weak contract is a contract that does not specify a <xref:System.Runtime.ConstrainedExecution.Consistency> enumeration value or specifies a <xref:System.Runtime.ConstrainedExecution.Consistency> value of <xref:System.Runtime.ConstrainedExecution.Consistency.MayCorruptProcess>, <xref:System.Runtime.ConstrainedExecution.Consistency.MayCorruptAppDomain>, or <xref:System.Runtime.ConstrainedExecution.Cer.None>.</span></span> <span data-ttu-id="396d4-115">Jede dieser Bedingungen gibt an, dass der aufgerufene Code die Anstrengungen des anderen Codes im CER beeinträchtigen kann, um einen konsistenten Zustand beizubehalten.</span><span class="sxs-lookup"><span data-stu-id="396d4-115">Any of these conditions indicates that the code called may impede the efforts of the other code in the CER to maintain consistent state.</span></span>  <span data-ttu-id="396d4-116">Durch CERs kann Code Fehler sehr deterministisch behandeln. Interne Varianten, die für die Anwendung von Bedeutung sind, werden beibehalten, und bei vorübergehenden Fehlern wie Out-of-Memory-Ausnahmen wird die Anwendung weiterhin ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="396d4-116">CERs allow code to treat errors in a very deterministic manner, maintaining internal invariants that are important to the application and allowing it to continue running in the face of transient errors such as out-of-memory exceptions.</span></span>  
  
 <span data-ttu-id="396d4-117">Die Aktivierung dieses MDAs gibt an, dass diese Methode, die im CER aufgerufen wurde, in einer Weise fehlschlagen kann, die der Aufrufer nicht erwartet hat oder die bewirkt, dass <xref:System.AppDomain> oder der Prozesszustand beschädigt oder nicht wiederherstellbar sind.</span><span class="sxs-lookup"><span data-stu-id="396d4-117">The activation of this MDA indicates a possibility the method being called in the CER can fail in a way that the caller did not expect or that leaves the <xref:System.AppDomain> or process state corrupted or unrecoverable.</span></span> <span data-ttu-id="396d4-118">Natürlich kann der aufgerufene Code ordnungsgemäß ausgeführt werden, und das Problem ist ganz einfach nur ein fehlender Vertrag.</span><span class="sxs-lookup"><span data-stu-id="396d4-118">Of course, the called code might execute correctly and the problem is simply a missing contract.</span></span> <span data-ttu-id="396d4-119">Allerdings sind die Probleme beim Schreiben von zuverlässigem Code subtil, und das Fehlen eines Vertrags ist ein guter Indikator dafür, dass der Code möglicherweise nicht ordnungsgemäß ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="396d4-119">However, the issues involved in writing reliable code are subtle and the absence of a contract is a good indicator the code might not execute correctly.</span></span> <span data-ttu-id="396d4-120">Die Verträge sind Indikatoren, die der Programmierer zuverlässig codiert hat, und diese Garantien werden zukünftige Versionen des Codes nicht ändern.</span><span class="sxs-lookup"><span data-stu-id="396d4-120">The contracts are indicators that the programmer has coded reliably and also promises that these guarantees will not change in future revisions of the code.</span></span>  <span data-ttu-id="396d4-121">Die Verträge sind also Absichtserklärungen und nicht nur Implementierungsdetails.</span><span class="sxs-lookup"><span data-stu-id="396d4-121">That is, the contracts are declarations of intent and not just implementation details.</span></span>  
  
 <span data-ttu-id="396d4-122">Da jede Methode mit einem schwachen oder nicht vorhandenen Vertrag auf unvorhersehbare Weise fehlschlagen kann, versucht die Common Language Runtime, nicht die eigenen unvorhersehbaren Fehler der Methode zu entfernen, die beispielsweise durch verzögerte JIT-Kompilierung, Generics-Wörterbuchauffüllung oder Threadabbrüche eingeführt werden.</span><span class="sxs-lookup"><span data-stu-id="396d4-122">Because any method with a weak or nonexistent contract can potentially fail in many unpredictable ways, the runtime does not attempt to remove any of its own unpredictable failures from the method  that are introduced by lazy JIT-compiling, generics dictionary population, or thread aborts, for example.</span></span> <span data-ttu-id="396d4-123">Wenn dieser MDA aktiviert wird, bedeutet dies also, dass die Runtime die aufgerufene Methode nicht in den definierten CER einschließt. Das Aufrufdiagramm wurde an diesem Knoten beendet, da die Vorbereitung dieser Teilstruktur potenzielle Fehler maskieren würde.</span><span class="sxs-lookup"><span data-stu-id="396d4-123">That is, when this MDA is activated, it indicates that the runtime did not include the called method in the CER being defined; the call graph was terminated at this node because continuing to prepare this subtree would help mask the potential error.</span></span>  
  
## <a name="resolution"></a><span data-ttu-id="396d4-124">Auflösung</span><span class="sxs-lookup"><span data-stu-id="396d4-124">Resolution</span></span>  
 <span data-ttu-id="396d4-125">Fügen Sie einen gültigen Zuverlässigkeitsvertrag zur Funktion hinzu, oder vermeiden Sie die Verwendung dieses Funktionsaufrufs.</span><span class="sxs-lookup"><span data-stu-id="396d4-125">Add a valid reliability contract to the function or avoid using that function call.</span></span>  
  
## <a name="effect-on-the-runtime"></a><span data-ttu-id="396d4-126">Auswirkungen auf die Laufzeit</span><span class="sxs-lookup"><span data-stu-id="396d4-126">Effect on the Runtime</span></span>  
 <span data-ttu-id="396d4-127">Der Aufruf eines schwachen Vertrags aus einem CER führt möglicherweise dazu, dass der CER seine Vorgänge nicht vollständig ausführen kann.</span><span class="sxs-lookup"><span data-stu-id="396d4-127">The effect of calling a weak contract from a CER could be the CER failure to complete its operations.</span></span> <span data-ttu-id="396d4-128">Dies kann zu einer Beschädigung des <xref:System.AppDomain>-Prozesszustands führen.</span><span class="sxs-lookup"><span data-stu-id="396d4-128">This could lead to corruption of the <xref:System.AppDomain> process state.</span></span>  
  
## <a name="output"></a><span data-ttu-id="396d4-129">Output</span><span class="sxs-lookup"><span data-stu-id="396d4-129">Output</span></span>  
 <span data-ttu-id="396d4-130">Im Folgenden finden Sie eine Beispielausgabe dieses MDAs.</span><span class="sxs-lookup"><span data-stu-id="396d4-130">The following is sample output from this MDA.</span></span>  
  
 `Method 'MethodWithCer', while executing within a constrained execution region, makes a call at IL offset 0x000C to 'MethodWithWeakContract', which does not have a sufficiently strong reliability contract and might cause non-deterministic results.`  
  
## <a name="configuration"></a><span data-ttu-id="396d4-131">Konfiguration</span><span class="sxs-lookup"><span data-stu-id="396d4-131">Configuration</span></span>  
  
```xml  
<mdaConfig>  
  <assistants>  
    <invalidCERCall />  
  </assistants>  
</mdaConfig>  
```  
  
## <a name="see-also"></a><span data-ttu-id="396d4-132">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="396d4-132">See also</span></span>

- <xref:System.Runtime.CompilerServices.RuntimeHelpers.PrepareMethod%2A>
- <xref:System.Runtime.ConstrainedExecution>
- [<span data-ttu-id="396d4-133">Diagnosing Errors with Managed Debugging Assistants (Diagnostizieren von Fehlern mit Assistenten für verwaltetes Debuggen)</span><span class="sxs-lookup"><span data-stu-id="396d4-133">Diagnosing Errors with Managed Debugging Assistants</span></span>](../../../docs/framework/debug-trace-profile/diagnosing-errors-with-managed-debugging-assistants.md)
