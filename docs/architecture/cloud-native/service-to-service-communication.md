---
title: Service-zu-Service-Kommunikation
description: Erfahren Sie, wie Back-End-Cloud-native Microservices mit anderen Back-End-Microservices kommunizieren.
author: robvet
ms.date: 09/09/2019
ms.openlocfilehash: a5124b8b83f62ff17b1230ead63db26e0c1f2a5b
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 03/14/2020
ms.locfileid: "79401760"
---
# <a name="service-to-service-communication"></a><span data-ttu-id="06f01-103">Service-zu-Service-Kommunikation</span><span class="sxs-lookup"><span data-stu-id="06f01-103">Service-to-service communication</span></span>

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

<span data-ttu-id="06f01-104">Vom Front-End-Client entfernt, sprechen wir nun Back-End-Microservices an, die miteinander kommunizieren.</span><span class="sxs-lookup"><span data-stu-id="06f01-104">Moving from the front-end client, we now address back-end microservices communicate with each other.</span></span>

<span data-ttu-id="06f01-105">Beim Erstellen einer cloudnativen Anwendung sollten Sie darauf achten, wie Back-End-Dienste miteinander kommunizieren.</span><span class="sxs-lookup"><span data-stu-id="06f01-105">When constructing a cloud-native application, you'll want to be sensitive to how back-end services communicate with each other.</span></span> <span data-ttu-id="06f01-106">Im Idealfall, je weniger serviceübergreifende Kommunikation, desto besser.</span><span class="sxs-lookup"><span data-stu-id="06f01-106">Ideally, the less inter-service communication, the better.</span></span> <span data-ttu-id="06f01-107">Die Vermeidung ist jedoch nicht immer möglich, da Back-End-Dienste häufig aufeinander angewiesen sind, um einen Vorgang abzuschließen.</span><span class="sxs-lookup"><span data-stu-id="06f01-107">However, avoidance isn't always possible as back-end services often rely on one another to complete an operation.</span></span>

<span data-ttu-id="06f01-108">Es gibt mehrere weithin akzeptierte Ansätze zur Implementierung einer dienstübergreifenden Kommunikation.</span><span class="sxs-lookup"><span data-stu-id="06f01-108">There are several widely accepted approaches to implementing cross-service communication.</span></span> <span data-ttu-id="06f01-109">Die *Art der Kommunikationsinteraktion* bestimmt häufig den besten Ansatz.</span><span class="sxs-lookup"><span data-stu-id="06f01-109">The *type of communication interaction* will often determine the best approach.</span></span>

<span data-ttu-id="06f01-110">Berücksichtigen Sie die folgenden Interaktionstypen:</span><span class="sxs-lookup"><span data-stu-id="06f01-110">Consider the following interaction types:</span></span>

- <span data-ttu-id="06f01-111">*Abfrage* – Wenn ein aufrufender Microservice eine Antwort von einem aufgerufenen Microservice erfordert, z. B. "Hey, gib mir die Käuferinformationen für eine bestimmte Kunden-ID."</span><span class="sxs-lookup"><span data-stu-id="06f01-111">*Query* – when a calling microservice requires a response from a called microservice, such as, "Hey, give me the buyer information for a given customer Id."</span></span>

- <span data-ttu-id="06f01-112">*Befehl* – Wenn der aufrufende Microservice einen anderen Microservice benötigt, um eine Aktion auszuführen, aber keine Antwort benötigt, z. B. "Hey, verschiffe einfach diesen Auftrag."</span><span class="sxs-lookup"><span data-stu-id="06f01-112">*Command* – when the calling microservice needs another microservice to execute an action but doesn't require a response, such as, "Hey, just ship this order."</span></span>

- <span data-ttu-id="06f01-113">*Ereignis* – Wenn ein Microservice, der als Herausgeber bezeichnet wird, ein Ereignis auslöst, das den Status geändert hat, oder wenn eine Aktion aufgetreten ist.</span><span class="sxs-lookup"><span data-stu-id="06f01-113">*Event* – when a microservice, called the publisher, raises an event that state has changed or an action has occurred.</span></span> <span data-ttu-id="06f01-114">Andere Microservices, sogenannte Abonnenten, die daran interessiert sind, können angemessen auf das Ereignis reagieren.</span><span class="sxs-lookup"><span data-stu-id="06f01-114">Other microservices, called subscribers, who are interested, can react to the event appropriately.</span></span> <span data-ttu-id="06f01-115">Der Herausgeber und die Abonnenten kennen einander nicht.</span><span class="sxs-lookup"><span data-stu-id="06f01-115">The publisher and the subscribers aren't aware of each other.</span></span>

<span data-ttu-id="06f01-116">Microservice-Systeme verwenden in der Regel eine Kombination dieser Interaktionstypen, wenn Vorgänge ausgeführt werden, die eine dienstübergreifende Interaktion erfordern.</span><span class="sxs-lookup"><span data-stu-id="06f01-116">Microservice systems typically use a combination of these interaction types when executing operations that require cross-service interaction.</span></span> <span data-ttu-id="06f01-117">Werfen wir einen genauen Blick auf jeden einzelnen und wie Sie sie implementieren können.</span><span class="sxs-lookup"><span data-stu-id="06f01-117">Let's take a close look at each and how you might implement them.</span></span>

## <a name="queries"></a><span data-ttu-id="06f01-118">Abfragen</span><span class="sxs-lookup"><span data-stu-id="06f01-118">Queries</span></span>

<span data-ttu-id="06f01-119">Häufig muss ein Microservice einen anderen *Abfragen durchführen,* sodass eine sofortige Antwort zum Abschließen eines Vorgangs erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="06f01-119">Many times, one microservice might need to *query* another, requiring an immediate response to complete an operation.</span></span> <span data-ttu-id="06f01-120">Ein Warenkorb Microservice benötigt möglicherweise Produktinformationen und einen Preis, um einen Artikel zu seinem Warenkorb hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="06f01-120">A shopping basket microservice may need product information and a price to add an item to its basket.</span></span> <span data-ttu-id="06f01-121">Es gibt eine Reihe von Ansätzen zum Implementieren von Abfragevorgängen.</span><span class="sxs-lookup"><span data-stu-id="06f01-121">There are a number of approaches for implementing query operations.</span></span>

### <a name="requestresponse-messaging"></a><span data-ttu-id="06f01-122">Messaging vom Typ 'Anforderungsantwort'</span><span class="sxs-lookup"><span data-stu-id="06f01-122">Request/Response Messaging</span></span>

<span data-ttu-id="06f01-123">Eine Option zum Implementieren dieses Szenarios besteht darin, dass der aufrufende Back-End-Microservice direkte HTTP-Anforderungen an die Microservices stellt, die er abfragen muss (siehe Abbildung 4-8).</span><span class="sxs-lookup"><span data-stu-id="06f01-123">One option for implementing this scenario is for the calling back-end microservice to make direct HTTP requests to the microservices it needs to query, shown in Figure 4-8.</span></span>

![Direkte HTTP-Kommunikation](./media/direct-http-communication.png)

<span data-ttu-id="06f01-125">**Abbildung 4-8**.</span><span class="sxs-lookup"><span data-stu-id="06f01-125">**Figure 4-8**.</span></span> <span data-ttu-id="06f01-126">Direkte HTTP-Kommunikation</span><span class="sxs-lookup"><span data-stu-id="06f01-126">Direct HTTP communication</span></span>

<span data-ttu-id="06f01-127">Während direkte HTTP-Aufrufe zwischen Microservices relativ einfach zu implementieren sind, sollte darauf geachtet werden, diese Vorgehensweise zu minimieren.</span><span class="sxs-lookup"><span data-stu-id="06f01-127">While direct HTTP calls between microservices are relatively simple to implement, care should be taken to minimize this practice.</span></span> <span data-ttu-id="06f01-128">Zum Starten sind diese Aufrufe immer *synchron* und blockieren den Vorgang, bis ein Ergebnis zurückgegeben wird oder die Anforderung sertalant.</span><span class="sxs-lookup"><span data-stu-id="06f01-128">To start, these calls are always *synchronous* and will block the operation until a result is returned or the request times outs.</span></span> <span data-ttu-id="06f01-129">Was einst eigenständige, unabhängige Dienste waren, die sich selbständig entwickeln und häufig bereitstellen konnten, wird nun miteinander gekoppelt.</span><span class="sxs-lookup"><span data-stu-id="06f01-129">What were once self-contained, independent services, able to evolve independently and deploy frequently, now become coupled to each other.</span></span> <span data-ttu-id="06f01-130">Mit zunehmender Kopplung zwischen Microservices nehmen ihre architektonischen Vorteile ab.</span><span class="sxs-lookup"><span data-stu-id="06f01-130">As coupling among microservices increase, their architectural benefits diminish.</span></span>

<span data-ttu-id="06f01-131">Das Ausführen einer seltenen Anforderung, die einen einzelnen direkten HTTP-Aufruf an einen anderen Microservice ausführt, ist für einige Systeme möglicherweise akzeptabel.</span><span class="sxs-lookup"><span data-stu-id="06f01-131">Executing an infrequent request that makes a single direct HTTP call to another microservice might be acceptable for some systems.</span></span> <span data-ttu-id="06f01-132">Aufrufe mit hohem Volumen, die direkte HTTP-Aufrufe an mehrere Microservices aufrufen, sind jedoch nicht ratsam.</span><span class="sxs-lookup"><span data-stu-id="06f01-132">However, high-volume calls that invoke direct HTTP calls to multiple microservices aren't advisable.</span></span> <span data-ttu-id="06f01-133">Sie können die Latenz erhöhen und sich negativ auf die Leistung, Skalierbarkeit und Verfügbarkeit Ihres Systems auswirken.</span><span class="sxs-lookup"><span data-stu-id="06f01-133">They can increase latency and negatively impact the performance, scalability, and availability of your system.</span></span> <span data-ttu-id="06f01-134">Schlimmer noch, eine lange Reihe direkter HTTP-Kommunikation kann zu tiefen und komplexen Ketten synchroner Microservices-Aufrufe führen, wie in Abbildung 4-9 dargestellt:</span><span class="sxs-lookup"><span data-stu-id="06f01-134">Even worse, a long series of direct HTTP communication can lead to deep and complex chains of synchronous microservices calls, shown in Figure 4-9:</span></span>

![Verketten von HTTP-Abfragen](./media/chaining-http-queries.png)

<span data-ttu-id="06f01-136">**Abbildung 4-9**.</span><span class="sxs-lookup"><span data-stu-id="06f01-136">**Figure 4-9**.</span></span> <span data-ttu-id="06f01-137">Verketten von HTTP-Abfragen</span><span class="sxs-lookup"><span data-stu-id="06f01-137">Chaining HTTP queries</span></span>

<span data-ttu-id="06f01-138">Sie können sich das Risiko in dem im vorherigen Bild gezeigten Design durchaus vorstellen.</span><span class="sxs-lookup"><span data-stu-id="06f01-138">You can certainly imagine the risk in the design shown in the previous image.</span></span> <span data-ttu-id="06f01-139">Was passiert, \#wenn Schritt 3 fehlschlägt?</span><span class="sxs-lookup"><span data-stu-id="06f01-139">What happens if Step \#3 fails?</span></span> <span data-ttu-id="06f01-140">Oder \#Tritt 8 fehlschlägt?</span><span class="sxs-lookup"><span data-stu-id="06f01-140">Or Step \#8 fails?</span></span> <span data-ttu-id="06f01-141">Wie erholen Sie sich?</span><span class="sxs-lookup"><span data-stu-id="06f01-141">How do you recover?</span></span> <span data-ttu-id="06f01-142">Was geschieht, wenn Schritt \#6 langsam ist, da der zugrunde liegende Dienst ausgelastet ist?</span><span class="sxs-lookup"><span data-stu-id="06f01-142">What if Step \#6 is slow because the underlying service is busy?</span></span> <span data-ttu-id="06f01-143">Wie geht es weiter?</span><span class="sxs-lookup"><span data-stu-id="06f01-143">How do you continue?</span></span> <span data-ttu-id="06f01-144">Selbst wenn alles richtig funktioniert, denken Sie an die Latenz, die dieser Aufruf verursachen würde, was die Summe der Latenz jedes Schritts ist.</span><span class="sxs-lookup"><span data-stu-id="06f01-144">Even if all works correctly, think of the latency this call would incur, which is the sum of the latency of each step.</span></span>

<span data-ttu-id="06f01-145">Der hohe Grad an Kopplung im vorherigen Bild deutet darauf hin, dass die Dienste nicht optimal modelliert wurden.</span><span class="sxs-lookup"><span data-stu-id="06f01-145">The large degree of coupling in the previous image suggests the services weren't optimally modeled.</span></span> <span data-ttu-id="06f01-146">Es wäre eine Aufgabe des Teams, ihr Design noch einmal zu überdenken.</span><span class="sxs-lookup"><span data-stu-id="06f01-146">It would behoove the team to revisit their design.</span></span>

### <a name="materialized-view-pattern"></a><span data-ttu-id="06f01-147">Muster für materialisierte Sichten</span><span class="sxs-lookup"><span data-stu-id="06f01-147">Materialized View pattern</span></span>

<span data-ttu-id="06f01-148">Eine beliebte Option zum Entfernen von Microservice-Kopplung ist das [Materialisierte Ansichtsmuster](https://docs.microsoft.com/azure/architecture/patterns/materialized-view).</span><span class="sxs-lookup"><span data-stu-id="06f01-148">A popular option for removing microservice coupling is the [Materialized View pattern](https://docs.microsoft.com/azure/architecture/patterns/materialized-view).</span></span> <span data-ttu-id="06f01-149">Bei diesem Muster speichert ein Microservice seine eigene lokale, denormalisierte Kopie von Daten, die anderen Diensten gehören.</span><span class="sxs-lookup"><span data-stu-id="06f01-149">With this pattern, a microservice stores its own local, denormalized copy of data that's owned by other services.</span></span> <span data-ttu-id="06f01-150">Anstatt dass der Einkaufskorb-Microservice den Produktkatalog und die Preis-Mikrodienste abfragt, verwaltet er eine eigene lokale Kopie dieser Daten.</span><span class="sxs-lookup"><span data-stu-id="06f01-150">Instead of the Shopping Basket microservice querying the Product Catalog and Pricing microservices, it maintains its own local copy of that data.</span></span> <span data-ttu-id="06f01-151">Dieses Muster eliminiert unnötige Kopplung und verbessert die Zuverlässigkeit und Reaktionszeit.</span><span class="sxs-lookup"><span data-stu-id="06f01-151">This pattern eliminates unnecessary coupling and improves reliability and response time.</span></span> <span data-ttu-id="06f01-152">Der gesamte Vorgang wird in einem einzelnen Prozess ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="06f01-152">The entire operation executes inside a single process.</span></span> <span data-ttu-id="06f01-153">Wir untersuchen dieses Muster und andere Datenbedenken in Kapitel 5.</span><span class="sxs-lookup"><span data-stu-id="06f01-153">We explore this pattern and other data concerns in Chapter 5.</span></span>

### <a name="service-aggregator-pattern"></a><span data-ttu-id="06f01-154">ServiceAggregator-Muster</span><span class="sxs-lookup"><span data-stu-id="06f01-154">Service Aggregator Pattern</span></span>

<span data-ttu-id="06f01-155">Eine weitere Option zum Entfernen von Microservice-zu-Microservice-Kopplung ist ein [Aggregator-Mikrodienst](https://devblogs.microsoft.com/cesardelatorre/designing-and-implementing-api-gateways-with-ocelot-in-a-microservices-and-container-based-architecture/), der in Abbildung 4-10 violett dargestellt ist.</span><span class="sxs-lookup"><span data-stu-id="06f01-155">Another option for eliminating microservice-to-microservice coupling is an [Aggregator microservice](https://devblogs.microsoft.com/cesardelatorre/designing-and-implementing-api-gateways-with-ocelot-in-a-microservices-and-container-based-architecture/), shown in purple in Figure 4-10.</span></span>

![Aggregator-Dienst](./media/aggregator-service.png)

<span data-ttu-id="06f01-157">**Abbildung 4-10**.</span><span class="sxs-lookup"><span data-stu-id="06f01-157">**Figure 4-10**.</span></span> <span data-ttu-id="06f01-158">Aggregator-Mikroservice</span><span class="sxs-lookup"><span data-stu-id="06f01-158">Aggregator microservice</span></span>

<span data-ttu-id="06f01-159">Das Muster isoliert einen Vorgang, der Aufrufe an mehrere Back-End-Microservices ausführt, und zentralisiert seine Logik in einen spezialisierten Microservice.</span><span class="sxs-lookup"><span data-stu-id="06f01-159">The pattern isolates an operation that makes calls to multiple back-end microservices, centralizing its logic into a specialized microservice.</span></span>  <span data-ttu-id="06f01-160">Der violette Auscheckaggregator-Microservice in der vorherigen Abbildung orchestriert den Workflow für den Auscheckvorgang.</span><span class="sxs-lookup"><span data-stu-id="06f01-160">The purple checkout aggregator microservice in the previous figure orchestrates the workflow for the Checkout operation.</span></span> <span data-ttu-id="06f01-161">Es enthält Aufrufe mehrerer Back-End-Microservices in einer sequenzierten Reihenfolge.</span><span class="sxs-lookup"><span data-stu-id="06f01-161">It includes calls to several back-end microservices in a sequenced order.</span></span> <span data-ttu-id="06f01-162">Daten aus dem Workflow werden aggregiert und an den Aufrufer zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="06f01-162">Data from the workflow is aggregated and returned to the caller.</span></span> <span data-ttu-id="06f01-163">Obwohl der Aggregator-Microservice weiterhin direkte HTTP-Aufrufe implementiert, reduziert er direkte Abhängigkeiten zwischen Back-End-Microservices.</span><span class="sxs-lookup"><span data-stu-id="06f01-163">While it still implements direct HTTP calls, the aggregator microservice reduces direct dependencies among back-end microservices.</span></span>

### <a name="requestreply-pattern"></a><span data-ttu-id="06f01-164">Anforderungs-/Antwortmuster</span><span class="sxs-lookup"><span data-stu-id="06f01-164">Request/Reply Pattern</span></span>

<span data-ttu-id="06f01-165">Ein weiterer Ansatz zum Entkoppeln synchroner HTTP-Nachrichten ist ein [Request-Reply-Muster](https://www.enterpriseintegrationpatterns.com/patterns/messaging/RequestReply.html), das Warteschlangenkommunikation verwendet.</span><span class="sxs-lookup"><span data-stu-id="06f01-165">Another approach for decoupling synchronous HTTP messages is a [Request-Reply Pattern](https://www.enterpriseintegrationpatterns.com/patterns/messaging/RequestReply.html), which uses queuing communication.</span></span> <span data-ttu-id="06f01-166">Die Kommunikation über eine Warteschlange ist immer ein einwegskanal, wobei ein Produzent die Nachricht sendet und der Consumer sie empfängt.</span><span class="sxs-lookup"><span data-stu-id="06f01-166">Communication using a queue is always a one-way channel, with a producer sending the message and consumer receiving it.</span></span> <span data-ttu-id="06f01-167">Bei diesem Muster werden sowohl eine Anforderungswarteschlange als auch eine Antwortwarteschlange implementiert, die in Abbildung 4-11 dargestellt sind.</span><span class="sxs-lookup"><span data-stu-id="06f01-167">With this pattern, both a request queue and response queue are implemented, shown in Figure 4-11.</span></span>

![Anforderungs-Antwort-Muster](./media/request-reply-pattern.png)

<span data-ttu-id="06f01-169">**Abbildung 4-11**.</span><span class="sxs-lookup"><span data-stu-id="06f01-169">**Figure 4-11**.</span></span> <span data-ttu-id="06f01-170">Anforderungs-Antwort-Muster</span><span class="sxs-lookup"><span data-stu-id="06f01-170">Request-reply pattern</span></span>

<span data-ttu-id="06f01-171">Hier erstellt der Nachrichtenproduzent eine abfragebasierte Nachricht, die eine eindeutige Korrelations-ID enthält, und platziert sie in einer Anforderungswarteschlange.</span><span class="sxs-lookup"><span data-stu-id="06f01-171">Here, the message producer creates a query-based message that contains a unique correlation ID and places it into a request queue.</span></span> <span data-ttu-id="06f01-172">Der verbrauchende Dienst entfernt die Warteschlange n-, verarbeitet sie und platziert die Antwort in der Antwortwarteschlange mit derselben Korrelations-ID.</span><span class="sxs-lookup"><span data-stu-id="06f01-172">The consuming service dequeues the messages, processes it and places the response into the response queue with the same correlation ID.</span></span> <span data-ttu-id="06f01-173">Der Producerdienst entfernt die Warteschlange der Nachricht, gleicht sie mit der Korrelations-ID ab und setzt die Verarbeitung fort.</span><span class="sxs-lookup"><span data-stu-id="06f01-173">The producer service dequeues the message, matches it with the correlation ID and continues processing.</span></span> <span data-ttu-id="06f01-174">Im nächsten Abschnitt werden Warteschlangen ausführlich behandelt.</span><span class="sxs-lookup"><span data-stu-id="06f01-174">We cover queues in detail in the next section.</span></span>

## <a name="commands"></a><span data-ttu-id="06f01-175">Befehle</span><span class="sxs-lookup"><span data-stu-id="06f01-175">Commands</span></span>

<span data-ttu-id="06f01-176">Eine andere Art der Kommunikationsinteraktion ist ein *Befehl*.</span><span class="sxs-lookup"><span data-stu-id="06f01-176">Another type of communication interaction is a *command*.</span></span> <span data-ttu-id="06f01-177">Ein Microservice benötigt möglicherweise einen anderen Microservice, um eine Aktion auszuführen.</span><span class="sxs-lookup"><span data-stu-id="06f01-177">A microservice may need another microservice to perform an action.</span></span> <span data-ttu-id="06f01-178">Der Bestell-Microservice benötigt möglicherweise den Versand-Microservice, um eine Sendung für eine genehmigte Bestellung zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="06f01-178">The Ordering microservice may need the Shipping microservice to create a shipment for an approved order.</span></span> <span data-ttu-id="06f01-179">In Abbildung 4-12 sendet ein Microservice, der als Producer bezeichnet wird, eine Nachricht an einen anderen Microservice, den Consumer, und fordert ihn auf, etwas zu tun.</span><span class="sxs-lookup"><span data-stu-id="06f01-179">In Figure 4-12, one microservice, called a Producer, sends a message to another microservice, the Consumer, commanding it to do something.</span></span>

![Befehlsinteraktion mit einer Warteschlange](./media/command-interaction-with-queue.png)

<span data-ttu-id="06f01-181">**Abbildung 4-12.**</span><span class="sxs-lookup"><span data-stu-id="06f01-181">**Figure 4-12**.</span></span> <span data-ttu-id="06f01-182">Befehlsinteraktion mit einer Warteschlange</span><span class="sxs-lookup"><span data-stu-id="06f01-182">Command interaction with a queue</span></span>

<span data-ttu-id="06f01-183">Meistens benötigt der Producer keine Antwort und kann die Nachricht *feuern und vergessen.*</span><span class="sxs-lookup"><span data-stu-id="06f01-183">Most often, the Producer doesn't require a response and can *fire-and-forget* the message.</span></span> <span data-ttu-id="06f01-184">Wenn eine Antwort erforderlich ist, sendet der Consumer eine separate Nachricht zurück an Producer auf einem anderen Kanal.</span><span class="sxs-lookup"><span data-stu-id="06f01-184">If a reply is needed, the Consumer sends a separate message back to Producer on another channel.</span></span> <span data-ttu-id="06f01-185">Eine Befehlsnachricht wird am besten asynchron mit einer Nachrichtenwarteschlange gesendet.</span><span class="sxs-lookup"><span data-stu-id="06f01-185">A command message is best sent asynchronously with a message queue.</span></span> <span data-ttu-id="06f01-186">unterstützt von einem leichten Nachrichtenbroker.</span><span class="sxs-lookup"><span data-stu-id="06f01-186">supported by a lightweight message broker.</span></span> <span data-ttu-id="06f01-187">Beachten Sie im vorherigen Diagramm, wie eine Warteschlange beide Dienste trennt und entkoppelt.</span><span class="sxs-lookup"><span data-stu-id="06f01-187">In the previous diagram, note how a queue separates and decouples both services.</span></span>

<span data-ttu-id="06f01-188">Eine Nachrichtenwarteschlange ist ein Zwischenkonstrukt, über das ein Produzent und ein Verbraucher eine Nachricht übergeben.</span><span class="sxs-lookup"><span data-stu-id="06f01-188">A message queue is an intermediary construct through which a producer and consumer pass a message.</span></span> <span data-ttu-id="06f01-189">Warteschlangen implementieren ein asynchrones Punkt-zu-Punkt-Messagingmuster.</span><span class="sxs-lookup"><span data-stu-id="06f01-189">Queues implement an asynchronous, point-to-point messaging pattern.</span></span> <span data-ttu-id="06f01-190">Der Produzent weiß, wohin ein Befehl gesendet werden muss, und leitet entsprechend weiter.</span><span class="sxs-lookup"><span data-stu-id="06f01-190">The Producer knows where a command needs to be sent and routes appropriately.</span></span> <span data-ttu-id="06f01-191">Die Warteschlange garantiert, dass eine Nachricht von genau einer der Consumerinstanzen verarbeitet wird, die vom Kanal aus lesen.</span><span class="sxs-lookup"><span data-stu-id="06f01-191">The queue guarantees that a message is processed by exactly one of the consumer instances that are reading from the channel.</span></span> <span data-ttu-id="06f01-192">In diesem Szenario kann entweder der Hersteller oder der Verbraucherdienst horizontal skaliert werden, ohne dass sich dies auf den anderen auswirkt.</span><span class="sxs-lookup"><span data-stu-id="06f01-192">In this scenario, either the producer or consumer service can scale out without affecting the other.</span></span> <span data-ttu-id="06f01-193">Außerdem können Technologien auf jeder Seite unterschiedlich sein, was bedeutet, dass wir einen Java-Microservice haben könnten, der einen [Golang-Mikrodienst](https://golang.org) aufruft.</span><span class="sxs-lookup"><span data-stu-id="06f01-193">As well, technologies can be disparate on each side, meaning that we might have a Java microservice calling a [Golang](https://golang.org) microservice.</span></span>

<span data-ttu-id="06f01-194">In Kapitel 1 sprachen wir über *Unterstützungsdienste*.</span><span class="sxs-lookup"><span data-stu-id="06f01-194">In chapter 1, we talked about *backing services*.</span></span> <span data-ttu-id="06f01-195">Backing Services sind Zusätzliche Ressourcen, von denen Cloud-native Systeme abhängen.</span><span class="sxs-lookup"><span data-stu-id="06f01-195">Backing services are ancillary resources upon which cloud-native systems depend.</span></span> <span data-ttu-id="06f01-196">Nachrichtenwarteschlangen unterstützen Dienste.</span><span class="sxs-lookup"><span data-stu-id="06f01-196">Message queues are backing services.</span></span> <span data-ttu-id="06f01-197">Die Azure-Cloud unterstützt zwei Arten von Nachrichtenwarteschlangen, die Ihre cloudnativen Systeme zum Implementieren von Befehlsnachrichten nutzen können: Azure Storage Queues und Azure Service Bus Queues.</span><span class="sxs-lookup"><span data-stu-id="06f01-197">The Azure cloud supports two types of message queues that your cloud-native systems can consume to implement command messaging: Azure Storage Queues and Azure Service Bus Queues.</span></span>

### <a name="azure-storage-queues"></a><span data-ttu-id="06f01-198">Azure Storage-Warteschlangen</span><span class="sxs-lookup"><span data-stu-id="06f01-198">Azure Storage Queues</span></span>

<span data-ttu-id="06f01-199">Azure-Speicherwarteschlangen bieten eine einfache Warteschlangeninfrastruktur, die schnell, erschwinglich und von Azure-Speicherkonten unterstützt wird.</span><span class="sxs-lookup"><span data-stu-id="06f01-199">Azure storage queues offer a simple queueing infrastructure that is fast, affordable, and backed by Azure storage accounts.</span></span>

<span data-ttu-id="06f01-200">[Azure Storage Queues](https://docs.microsoft.com/azure/storage/queues/storage-queues-introduction) verfügen über einen REST-basierten Warteschlangenmechanismus mit zuverlässigem und persistentem Messaging.</span><span class="sxs-lookup"><span data-stu-id="06f01-200">[Azure Storage Queues](https://docs.microsoft.com/azure/storage/queues/storage-queues-introduction) feature a REST-based queuing mechanism with reliable and persistent messaging.</span></span> <span data-ttu-id="06f01-201">Sie bieten ein minimales Feature-Set, sind aber kostengünstig und speichern Millionen von Nachrichten.</span><span class="sxs-lookup"><span data-stu-id="06f01-201">They provide a minimal feature set, but are inexpensive and store millions of messages.</span></span> <span data-ttu-id="06f01-202">Ihre Kapazität reicht bis zu 500 TB.</span><span class="sxs-lookup"><span data-stu-id="06f01-202">Their capacity ranges up to 500 TB.</span></span> <span data-ttu-id="06f01-203">Eine einzelne Nachricht kann bis zu 64 KB groß sein.</span><span class="sxs-lookup"><span data-stu-id="06f01-203">A single message can be up to 64 KB in size.</span></span>

<span data-ttu-id="06f01-204">Sie können über AUthentifizierte Anrufe über HTTP oder HTTPS von überall auf der Welt auf Nachrichten zugreifen.</span><span class="sxs-lookup"><span data-stu-id="06f01-204">You can access messages from anywhere in the world via authenticated calls using HTTP or HTTPS.</span></span> <span data-ttu-id="06f01-205">Speicherwarteschlangen können auf eine große Anzahl gleichzeitiger Clients skaliert werden, um Datenverkehrsspitzen zu verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="06f01-205">Storage queues can scale out to large numbers of concurrent clients to handle traffic spikes.</span></span>

<span data-ttu-id="06f01-206">Allerdings gibt es Einschränkungen beim Service:</span><span class="sxs-lookup"><span data-stu-id="06f01-206">That said, there are limitations with the service:</span></span>

- <span data-ttu-id="06f01-207">Die Nachrichtenreihenfolge ist nicht garantiert.</span><span class="sxs-lookup"><span data-stu-id="06f01-207">Message order isn't guaranteed.</span></span>

- <span data-ttu-id="06f01-208">Eine Nachricht kann nur sieben Tage lang beibehalten werden, bevor sie automatisch entfernt wird.</span><span class="sxs-lookup"><span data-stu-id="06f01-208">A message can only persist for seven days before it's automatically removed.</span></span>

- <span data-ttu-id="06f01-209">Unterstützung für Zustandsverwaltung, Duplikaterkennung oder Transaktionen ist nicht verfügbar.</span><span class="sxs-lookup"><span data-stu-id="06f01-209">Support for state management, duplicate detection, or transactions isn't available.</span></span>

<span data-ttu-id="06f01-210">Abbildung 4-13 zeigt die Hierarchie einer Azure Storage Queue.</span><span class="sxs-lookup"><span data-stu-id="06f01-210">Figure 4-13 shows the hierarchy of an Azure Storage Queue.</span></span>

![Speicherwarteschlangenhierarchie](./media/storage-queue-hierarchy.png)

<span data-ttu-id="06f01-212">**Abbildung 4-13.**</span><span class="sxs-lookup"><span data-stu-id="06f01-212">**Figure 4-13**.</span></span> <span data-ttu-id="06f01-213">Speicherwarteschlangenhierarchie</span><span class="sxs-lookup"><span data-stu-id="06f01-213">Storage queue hierarchy</span></span>

<span data-ttu-id="06f01-214">Beachten Sie in der vorherigen Abbildung, wie Speicherwarteschlangen ihre Nachrichten im zugrunde liegenden Azure Storage-Konto speichern.</span><span class="sxs-lookup"><span data-stu-id="06f01-214">In the previous figure, note how storage queues store their messages in the underlying Azure Storage account.</span></span>

<span data-ttu-id="06f01-215">Für Entwickler stellt Microsoft mehrere client- und serverseitige Bibliotheken für die Verarbeitung von Speicherwarteschlangen bereit.</span><span class="sxs-lookup"><span data-stu-id="06f01-215">For developers, Microsoft provides several client and server-side libraries for Storage queue processing.</span></span> <span data-ttu-id="06f01-216">Die meisten wichtigen Plattformen werden unterstützt, einschließlich .NET, Java, JavaScript, Ruby, Python und Go.</span><span class="sxs-lookup"><span data-stu-id="06f01-216">Most major platforms are supported including .NET, Java, JavaScript, Ruby, Python, and Go.</span></span> <span data-ttu-id="06f01-217">Entwickler sollten niemals direkt mit diesen Bibliotheken kommunizieren.</span><span class="sxs-lookup"><span data-stu-id="06f01-217">Developers should never communicate directly with these libraries.</span></span> <span data-ttu-id="06f01-218">Dadurch wird Ihr Microservice-Code eng mit dem Azure Storage Queue-Dienst verzahnt.</span><span class="sxs-lookup"><span data-stu-id="06f01-218">Doing so will tightly couple your microservice code to the Azure Storage Queue service.</span></span> <span data-ttu-id="06f01-219">Es ist eine bessere Methode, die Implementierungsdetails der API zu isolieren.</span><span class="sxs-lookup"><span data-stu-id="06f01-219">It's a better practice to insulate the implementation details of the API.</span></span> <span data-ttu-id="06f01-220">Führen Sie eine Intermediationsschicht oder Zwischen-API ein, die generische Vorgänge verfügbar macht und die Betonbibliothek kapselt.</span><span class="sxs-lookup"><span data-stu-id="06f01-220">Introduce an intermediation layer, or intermediate API, that exposes generic operations and encapsulates the concrete library.</span></span> <span data-ttu-id="06f01-221">Mit dieser losen Kopplung können Sie einen Warteschlangendienst gegen einen anderen austauschen, ohne Änderungen am Hauptleitungsdienstcode vornehmen zu müssen.</span><span class="sxs-lookup"><span data-stu-id="06f01-221">This loose coupling enables you to swap out one queuing service for another without having to make changes to the mainline service code.</span></span>

<span data-ttu-id="06f01-222">Azure Storage-Warteschlangen sind eine wirtschaftliche Option zum Implementieren von Befehlsnachrichten in Ihren cloudnativen Anwendungen.</span><span class="sxs-lookup"><span data-stu-id="06f01-222">Azure Storage queues are an economical option to implement command messaging in your cloud-native applications.</span></span> <span data-ttu-id="06f01-223">Insbesondere dann, wenn eine Warteschlangengröße 80 GB überschreitet oder ein einfacher Feature-Satz akzeptabel ist.</span><span class="sxs-lookup"><span data-stu-id="06f01-223">Especially when a queue size will exceed 80 GB, or a simple feature set is acceptable.</span></span> <span data-ttu-id="06f01-224">Sie zahlen nur für die Speicherung der Nachrichten; es gibt keine festen Stundengebühren.</span><span class="sxs-lookup"><span data-stu-id="06f01-224">You only pay for the storage of the messages; there are no fixed hourly charges.</span></span>

### <a name="azure-service-bus-queues"></a><span data-ttu-id="06f01-225">Azure Service Bus-Warteschlangen</span><span class="sxs-lookup"><span data-stu-id="06f01-225">Azure Service Bus Queues</span></span>

<span data-ttu-id="06f01-226">Für komplexere Messaginganforderungen sollten Sie Azure Service Bus-Warteschlangen in Betracht ziehen.</span><span class="sxs-lookup"><span data-stu-id="06f01-226">For more complex messaging requirements, consider Azure Service Bus queues.</span></span>

<span data-ttu-id="06f01-227">Auf einer robusten Nachrichteninfrastruktur unterstützt [Azure Service Bus](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-messaging-overview) ein *vermitteltes Messagingmodell*.</span><span class="sxs-lookup"><span data-stu-id="06f01-227">Sitting atop a robust message infrastructure, [Azure Service Bus](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-messaging-overview) supports a *brokered messaging model*.</span></span> <span data-ttu-id="06f01-228">Nachrichten werden zuverlässig in einem Broker (der Warteschlange) gespeichert, bis sie vom Consumer empfangen werden.</span><span class="sxs-lookup"><span data-stu-id="06f01-228">Messages are reliably stored in a broker (the queue) until received by the consumer.</span></span> <span data-ttu-id="06f01-229">Die Warteschlange garantiert die FIFO-Nachrichtenübermittlung (First-In/First-Out) unter Berücksichtigung der Reihenfolge, in der Nachrichten zur Warteschlange hinzugefügt wurden.</span><span class="sxs-lookup"><span data-stu-id="06f01-229">The queue guarantees First-In/First-Out (FIFO) message delivery, respecting the order in which messages were added to the queue.</span></span>

<span data-ttu-id="06f01-230">Die Größe einer Nachricht kann viel größer sein, bis zu 256 KB.</span><span class="sxs-lookup"><span data-stu-id="06f01-230">The size of a message can be much larger, up to 256 KB.</span></span> <span data-ttu-id="06f01-231">Nachrichten werden für einen unbegrenzten Zeitraum in der Warteschlange beibehalten.</span><span class="sxs-lookup"><span data-stu-id="06f01-231">Messages are persisted in the queue for an unlimited period of time.</span></span> <span data-ttu-id="06f01-232">Service Bus unterstützt nicht nur HTTP-basierte Aufrufe, sondern bietet auch vollständige Unterstützung für das [AMPQ-Protokoll](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-amqp-overview).</span><span class="sxs-lookup"><span data-stu-id="06f01-232">Service Bus supports not only HTTP-based calls, but also provides full support for the [AMPQ protocol](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-amqp-overview).</span></span> <span data-ttu-id="06f01-233">AMPQ ist ein offener Standard, der ein binäres Protokoll und ein höheres Maß an Zuverlässigkeit unterstützt.</span><span class="sxs-lookup"><span data-stu-id="06f01-233">AMPQ is an open-standard across vendors that supports a binary protocol and higher degrees of reliability.</span></span>

<span data-ttu-id="06f01-234">Service Bus bietet eine Vielzahl von Funktionen, einschließlich [Transaktionsunterstützung](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-transactions) und einer [Duplikaterkennungsfunktion](https://docs.microsoft.com/azure/service-bus-messaging/duplicate-detection).</span><span class="sxs-lookup"><span data-stu-id="06f01-234">Service Bus provides a rich set of features, including [transaction support](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-transactions) and a [duplicate detection feature](https://docs.microsoft.com/azure/service-bus-messaging/duplicate-detection).</span></span> <span data-ttu-id="06f01-235">Die Warteschlange garantiert "höchstens einmal Zustellung" pro Nachricht.</span><span class="sxs-lookup"><span data-stu-id="06f01-235">The queue guarantees "at most once delivery" per message.</span></span> <span data-ttu-id="06f01-236">Eine nachricht wird automatisch verworfen.</span><span class="sxs-lookup"><span data-stu-id="06f01-236">It automatically discards a message that has already been sent.</span></span> <span data-ttu-id="06f01-237">Wenn ein Hersteller Zweifel hat, kann er dieselbe Nachricht erneut senden, und Service Bus garantiert, dass nur eine Kopie verarbeitet wird.</span><span class="sxs-lookup"><span data-stu-id="06f01-237">If a producer is in doubt, it can resend the same message, and Service Bus guarantees that only one copy will be processed.</span></span> <span data-ttu-id="06f01-238">Die Duplikaterkennung befreit Sie davon, zusätzliche Infrastrukturinstallationen zu bauen.</span><span class="sxs-lookup"><span data-stu-id="06f01-238">Duplicate detection frees you from  having to build additional infrastructure plumbing.</span></span>

<span data-ttu-id="06f01-239">Zwei weitere Enterprise-Features sind Partitionierung und Sitzungen.</span><span class="sxs-lookup"><span data-stu-id="06f01-239">Two more enterprise features are partitioning and sessions.</span></span> <span data-ttu-id="06f01-240">Eine herkömmliche Service Bus-Warteschlange wird von einem einzelnen Nachrichtenbroker verarbeitet und in einem einzelnen Nachrichtenspeicher gespeichert.</span><span class="sxs-lookup"><span data-stu-id="06f01-240">A conventional Service Bus queue is handled by a single message broker and stored in a single message store.</span></span> <span data-ttu-id="06f01-241">Die [Service BusPartitioning](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-partitioning) verteilt die Warteschlange jedoch auf mehrere Nachrichtenbroker und Nachrichtenspeicher.</span><span class="sxs-lookup"><span data-stu-id="06f01-241">But, [Service Bus Partitioning](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-partitioning) spreads the queue across multiple message brokers and message stores.</span></span> <span data-ttu-id="06f01-242">Der Gesamtdurchsatz wird nicht mehr durch die Leistung eines einzelnen Nachrichtenbrokers oder Messagingspeichers eingeschränkt.</span><span class="sxs-lookup"><span data-stu-id="06f01-242">The overall throughput is no longer limited by the performance of a single message broker or messaging store.</span></span> <span data-ttu-id="06f01-243">Ein vorübergehender Ausfall eines Messagingspeichers macht eine partitionierte Warteschlange nicht verfügbar.</span><span class="sxs-lookup"><span data-stu-id="06f01-243">A temporary outage of a messaging store doesn't render a partitioned queue unavailable.</span></span>

<span data-ttu-id="06f01-244">[Service Bus Sitzungen](https://codingcanvas.com/azure-service-bus-sessions/) bieten eine Möglichkeit, gruppenbezogene Nachrichten zu senden.</span><span class="sxs-lookup"><span data-stu-id="06f01-244">[Service Bus Sessions](https://codingcanvas.com/azure-service-bus-sessions/) provide a way to group-related messages.</span></span> <span data-ttu-id="06f01-245">Stellen Sie sich ein Workflowszenario vor, in dem Nachrichten zusammen verarbeitet und der Vorgang am Ende abgeschlossen werden muss.</span><span class="sxs-lookup"><span data-stu-id="06f01-245">Imagine a workflow scenario where messages must be processed together and the operation completed at the end.</span></span> <span data-ttu-id="06f01-246">Um die Vorteile zu nutzen, müssen Sitzungen explizit für die Warteschlange aktiviert sein, und jede zugehörige Nachricht muss dieselbe Sitzungs-ID enthalten.</span><span class="sxs-lookup"><span data-stu-id="06f01-246">To take advantage, sessions must be explicitly enabled for the queue and each related messaged must contain the same session ID.</span></span>

<span data-ttu-id="06f01-247">Es gibt jedoch einige wichtige Einschränkungen: Die Größe der Service Bus-Warteschlangen ist auf 80 GB begrenzt, was viel kleiner ist als das, was in den Warteschlangen des Informationsspeichers verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="06f01-247">However, there are some important caveats: Service Bus queues size is limited to 80 GB, which is much smaller than what's available from store queues.</span></span> <span data-ttu-id="06f01-248">Darüber hinaus fallen für Service Bus-Warteschlangen Basiskosten und -gebühren pro Vorgang an.</span><span class="sxs-lookup"><span data-stu-id="06f01-248">Additionally, Service Bus queues incur a base cost and charge per operation.</span></span>

<span data-ttu-id="06f01-249">Abbildung 4-14 zeigt die übergeordnete Architektur einer Service Bus-Warteschlange.</span><span class="sxs-lookup"><span data-stu-id="06f01-249">Figure 4-14 outlines the high-level architecture of a Service Bus queue.</span></span>

![Service Bus-Warteschlange](./media/service-bus-queue.png)

<span data-ttu-id="06f01-251">**Abbildung 4-14.**</span><span class="sxs-lookup"><span data-stu-id="06f01-251">**Figure 4-14**.</span></span> <span data-ttu-id="06f01-252">Service Bus-Warteschlange</span><span class="sxs-lookup"><span data-stu-id="06f01-252">Service Bus queue</span></span>

<span data-ttu-id="06f01-253">Beachten Sie in der vorherigen Abbildung die Punkt-zu-Punkt-Beziehung.</span><span class="sxs-lookup"><span data-stu-id="06f01-253">In the previous figure, note the point-to-point relationship.</span></span> <span data-ttu-id="06f01-254">Zwei Instanzen desselben Anbieters stellen Nachrichten in einer einzigen Service Bus-Warteschlange auf.</span><span class="sxs-lookup"><span data-stu-id="06f01-254">Two instances of the same provider are enqueuing messages into a single Service Bus queue.</span></span> <span data-ttu-id="06f01-255">Jede Nachricht wird nur von einer von drei Consumerinstanzen auf der rechten Seite verwendet.</span><span class="sxs-lookup"><span data-stu-id="06f01-255">Each message is consumed by only one of three consumer instances on the right.</span></span> <span data-ttu-id="06f01-256">Als Nächstes besprechen wir, wie Messaging implementiert werden kann, bei dem verschiedene Verbraucher möglicherweise alle an derselben Nachricht interessiert sind.</span><span class="sxs-lookup"><span data-stu-id="06f01-256">Next, we discuss how to implement messaging where different consumers may all be interested the same message.</span></span>

## <a name="events"></a><span data-ttu-id="06f01-257">Events</span><span class="sxs-lookup"><span data-stu-id="06f01-257">Events</span></span>

<span data-ttu-id="06f01-258">Message Queuing ist eine effektive Möglichkeit, Kommunikation zu implementieren, bei der ein Produzent einem Consumer asynchron eine Nachricht senden kann.</span><span class="sxs-lookup"><span data-stu-id="06f01-258">Message queuing is an effective way to implement communication where a producer can asynchronously send a consumer a message.</span></span> <span data-ttu-id="06f01-259">Was passiert jedoch, wenn *viele verschiedene Verbraucher* an der gleichen Botschaft interessiert sind?</span><span class="sxs-lookup"><span data-stu-id="06f01-259">However, what happens when *many different consumers* are interested in the same message?</span></span> <span data-ttu-id="06f01-260">Eine dedizierte Nachrichtenwarteschlange für jeden Consumer würde nicht gut skaliert werden und wäre schwierig zu verwalten.</span><span class="sxs-lookup"><span data-stu-id="06f01-260">A dedicated message queue for each consumer wouldn't scale well and would become difficult to manage.</span></span>

<span data-ttu-id="06f01-261">Um dieses Szenario zu beheben, wechseln wir zum dritten Typ der Nachrichteninteraktion, dem *Ereignis*.</span><span class="sxs-lookup"><span data-stu-id="06f01-261">To address this scenario, we move to the third type of message interaction, the *event*.</span></span> <span data-ttu-id="06f01-262">Ein Microservice gibt bekannt, dass eine Aktion stattgefunden hat.</span><span class="sxs-lookup"><span data-stu-id="06f01-262">One microservice announces that an action had occurred.</span></span> <span data-ttu-id="06f01-263">Andere Microservices reagieren bei Interesse auf die Aktion oder das Ereignis.</span><span class="sxs-lookup"><span data-stu-id="06f01-263">Other microservices, if interested, react to the action, or event.</span></span>

<span data-ttu-id="06f01-264">Das Ereignis ist ein zweistufiger Prozess.</span><span class="sxs-lookup"><span data-stu-id="06f01-264">Eventing is a two-step process.</span></span> <span data-ttu-id="06f01-265">Für eine bestimmte Zustandsänderung veröffentlicht ein Microservice ein Ereignis an einen Nachrichtenbroker und stellt es jedem anderen interessierten Microservice zur Verfügung.</span><span class="sxs-lookup"><span data-stu-id="06f01-265">For a given state change, a microservice publishes an event to a message broker, making it available to any other interested microservice.</span></span> <span data-ttu-id="06f01-266">Der interessierte Microservice wird benachrichtigt, indem er das Ereignis im Nachrichtenbroker abonniert.</span><span class="sxs-lookup"><span data-stu-id="06f01-266">The interested microservice is notified by subscribing to the event in the message broker.</span></span> <span data-ttu-id="06f01-267">Sie verwenden das [Veröffentlichungs-/Abonnementmuster,](https://docs.microsoft.com/azure/architecture/patterns/publisher-subscriber) um [ereignisbasierte Kommunikation](https://docs.microsoft.com/dotnet/standard/microservices-architecture/multi-container-microservice-net-applications/integration-event-based-microservice-communications)zu implementieren.</span><span class="sxs-lookup"><span data-stu-id="06f01-267">You use the [Publish/Subscribe](https://docs.microsoft.com/azure/architecture/patterns/publisher-subscriber) pattern to implement [event-based communication](https://docs.microsoft.com/dotnet/standard/microservices-architecture/multi-container-microservice-net-applications/integration-event-based-microservice-communications).</span></span>

<span data-ttu-id="06f01-268">Abbildung 4-15 zeigt einen Warenkorb Microservice, der ein Ereignis veröffentlicht, wobei zwei weitere Microservices es abonnieren.</span><span class="sxs-lookup"><span data-stu-id="06f01-268">Figure 4-15 shows a shopping basket microservice publishing an event with two other microservices subscribing to it.</span></span>

![Ereignisgesteuertes Messaging](./media/event-driven-messaging.png)

<span data-ttu-id="06f01-270">**Abbildung 4-15**.</span><span class="sxs-lookup"><span data-stu-id="06f01-270">**Figure 4-15**.</span></span> <span data-ttu-id="06f01-271">Ereignisgesteuertes Messaging</span><span class="sxs-lookup"><span data-stu-id="06f01-271">Event-Driven messaging</span></span>

<span data-ttu-id="06f01-272">Beachten Sie die *Ereignisbuskomponente,* die sich in der Mitte des Kommunikationskanals befindet.</span><span class="sxs-lookup"><span data-stu-id="06f01-272">Note the *event bus* component that sits in the middle of the communication channel.</span></span> <span data-ttu-id="06f01-273">Es handelt sich um eine benutzerdefinierte Klasse, die den Nachrichtenbroker kapselt und von der zugrunde liegenden Anwendung entkoppelt.</span><span class="sxs-lookup"><span data-stu-id="06f01-273">It's a custom class that encapsulates the message broker and decouples it from the underlying application.</span></span> <span data-ttu-id="06f01-274">Die Bestell- und Inventar-Microservices betreiben die Veranstaltung unabhängig voneinander, weder der Warenkorb-Microservice.</span><span class="sxs-lookup"><span data-stu-id="06f01-274">The ordering and inventory microservices independently operate the event with no knowledge of each other, nor the shopping basket microservice.</span></span> <span data-ttu-id="06f01-275">Wenn das registrierte Ereignis im Veranstaltungsbus veröffentlicht wird, handelt es darauf.</span><span class="sxs-lookup"><span data-stu-id="06f01-275">When the registered event is published to the event bus, they act upon it.</span></span>

<span data-ttu-id="06f01-276">Mit Eventing bewegen wir uns von der Warteschlangentechnologie zu *Themen*.</span><span class="sxs-lookup"><span data-stu-id="06f01-276">With eventing, we move from queuing technology to *topics*.</span></span> <span data-ttu-id="06f01-277">Ein [Thema](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-dotnet-how-to-use-topics-subscriptions) ähnelt einer Warteschlange, unterstützt jedoch ein 1:n-Messagingmuster.</span><span class="sxs-lookup"><span data-stu-id="06f01-277">A [topic](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-dotnet-how-to-use-topics-subscriptions) is similar to a queue, but supports a one-to-many messaging pattern.</span></span> <span data-ttu-id="06f01-278">Ein Microservice veröffentlicht eine Nachricht.</span><span class="sxs-lookup"><span data-stu-id="06f01-278">One microservice publishes a message.</span></span> <span data-ttu-id="06f01-279">Mehrere abonnierende Microservices können diese Nachricht empfangen und darauf reagieren.</span><span class="sxs-lookup"><span data-stu-id="06f01-279">Multiple subscribing microservices can choose to receive and act upon that message.</span></span> <span data-ttu-id="06f01-280">Abbildung 4-16 zeigt eine Themenarchitektur.</span><span class="sxs-lookup"><span data-stu-id="06f01-280">Figure 4-16 shows a topic architecture.</span></span>

![Themenarchitektur](./media/topic-architecture.png)

<span data-ttu-id="06f01-282">**Abbildung 4-16**.</span><span class="sxs-lookup"><span data-stu-id="06f01-282">**Figure 4-16**.</span></span> <span data-ttu-id="06f01-283">Themenarchitektur</span><span class="sxs-lookup"><span data-stu-id="06f01-283">Topic architecture</span></span>

<span data-ttu-id="06f01-284">In der vorherigen Abbildung senden Herausgeber Nachrichten an das Thema.</span><span class="sxs-lookup"><span data-stu-id="06f01-284">In the previous figure, publishers send messages to the topic.</span></span> <span data-ttu-id="06f01-285">Am Ende erhalten Abonnenten Nachrichten von Abonnements.</span><span class="sxs-lookup"><span data-stu-id="06f01-285">At the end, subscribers receive messages from subscriptions.</span></span> <span data-ttu-id="06f01-286">In der Mitte leitet das Thema Nachrichten an Abonnements weiter, die auf einer Reihe von *Regeln*basieren, die in dunkelblauen Feldern angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="06f01-286">In the middle, the topic forwards messages to subscriptions based on a set of *rules*, shown in dark blue boxes.</span></span> <span data-ttu-id="06f01-287">Regeln fungieren als Filter, der bestimmte Nachrichten an ein Abonnement weiterleitet.</span><span class="sxs-lookup"><span data-stu-id="06f01-287">Rules act as a filter that forward specific messages to a subscription.</span></span> <span data-ttu-id="06f01-288">Hier wird ein "CreateOrder"-Ereignis \#an Abonnement \#1 und Abonnement \#3 gesendet, nicht jedoch an Abonnement 2.</span><span class="sxs-lookup"><span data-stu-id="06f01-288">Here, a "CreateOrder" event would be sent to Subscription \#1 and Subscription \#3, but not to Subscription \#2.</span></span> <span data-ttu-id="06f01-289">Ein "OrderCompleted"-Ereignis wird \#an Abonnement \#2 und Abonnement 3 gesendet.</span><span class="sxs-lookup"><span data-stu-id="06f01-289">An "OrderCompleted" event would be sent to Subscription \#2 and Subscription \#3.</span></span>

<span data-ttu-id="06f01-290">Die Azure-Cloud unterstützt zwei verschiedene Themendienste: Azure Service Bus Topics und Azure EventGrid.</span><span class="sxs-lookup"><span data-stu-id="06f01-290">The Azure cloud supports two different topic services: Azure Service Bus Topics and Azure EventGrid.</span></span>

### <a name="azure-service-bus-topics"></a><span data-ttu-id="06f01-291">Azure Service Bus-Themen</span><span class="sxs-lookup"><span data-stu-id="06f01-291">Azure Service Bus Topics</span></span>

<span data-ttu-id="06f01-292">Auf dem gleichen robusten vermittelten Nachrichtenmodell von Azure Service Bus-Warteschlangen sitzen [Azure Service Bus Topics](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-dotnet-how-to-use-topics-subscriptions).</span><span class="sxs-lookup"><span data-stu-id="06f01-292">Sitting on top of the same robust brokered message model of Azure Service Bus queues are [Azure Service Bus Topics](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-dotnet-how-to-use-topics-subscriptions).</span></span> <span data-ttu-id="06f01-293">Ein Thema kann Nachrichten von mehreren unabhängigen Herausgebern empfangen und Nachrichten an bis zu 2.000 Abonnenten senden.</span><span class="sxs-lookup"><span data-stu-id="06f01-293">A topic can receive messages from multiple independent publishers and send messages to up to 2,000 subscribers.</span></span> <span data-ttu-id="06f01-294">Abonnements können zur Laufzeit dynamisch hinzugefügt oder entfernt werden, ohne das System zu beenden oder das Thema neu zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="06f01-294">Subscriptions can be dynamically added or removed at runtime without stopping the system or recreating the topic.</span></span>

<span data-ttu-id="06f01-295">Viele erweiterte Funktionen aus Azure Service Bus-Warteschlangen sind auch für Themen verfügbar, einschließlich [Duplikaterkennung](https://docs.microsoft.com/azure/service-bus-messaging/duplicate-detection) und [Transaktionsunterstützung](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-transactions).</span><span class="sxs-lookup"><span data-stu-id="06f01-295">Many advanced features from Azure Service Bus queues are also available for topics, including [Duplicate Detection](https://docs.microsoft.com/azure/service-bus-messaging/duplicate-detection) and [Transaction support](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-transactions).</span></span> <span data-ttu-id="06f01-296">Standardmäßig werden Service Bus-Themen von einem einzelnen Nachrichtenbroker behandelt und in einem einzelnen Nachrichtenspeicher gespeichert.</span><span class="sxs-lookup"><span data-stu-id="06f01-296">By default, Service Bus topics are handled by a single message broker and stored in a single message store.</span></span> <span data-ttu-id="06f01-297">Aber, [Service Bus Partitionierung](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-partitioning) skaliert ein Thema, indem es über viele Nachrichtenbroker und Nachrichtenspeicher verteilt.</span><span class="sxs-lookup"><span data-stu-id="06f01-297">But, [Service Bus Partitioning](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-partitioning) scales a topic by spreading it across many message brokers and message stores.</span></span>

<span data-ttu-id="06f01-298">[Geplante Nachrichtenübermittlung](https://docs.microsoft.com/azure/service-bus-messaging/message-sequencing) tagt eine Nachricht mit einer bestimmten Zeit für die Verarbeitung.</span><span class="sxs-lookup"><span data-stu-id="06f01-298">[Scheduled Message Delivery](https://docs.microsoft.com/azure/service-bus-messaging/message-sequencing) tags a message with a specific time for processing.</span></span> <span data-ttu-id="06f01-299">Die Nachricht wird vor diesem Zeitpunkt nicht im Thema angezeigt.</span><span class="sxs-lookup"><span data-stu-id="06f01-299">The message won't appear in the topic before that time.</span></span> <span data-ttu-id="06f01-300">[Mit Message Deferral](https://docs.microsoft.com/azure/service-bus-messaging/message-deferral) können Sie den Abruf einer Nachricht auf einen späteren Zeitpunkt verschieben.</span><span class="sxs-lookup"><span data-stu-id="06f01-300">[Message Deferral](https://docs.microsoft.com/azure/service-bus-messaging/message-deferral) enables you to defer a retrieval of a message to a later time.</span></span> <span data-ttu-id="06f01-301">Beide werden häufig in Workflowverarbeitungsszenarien verwendet, in denen Vorgänge in einer bestimmten Reihenfolge verarbeitet werden.</span><span class="sxs-lookup"><span data-stu-id="06f01-301">Both are commonly used in workflow processing scenarios where operations are processed in a particular order.</span></span> <span data-ttu-id="06f01-302">Sie können die Verarbeitung empfangener Nachrichten verschieben, bis die vorherigen Arbeiten abgeschlossen sind.</span><span class="sxs-lookup"><span data-stu-id="06f01-302">You can postpone processing of received messages until prior work has been completed.</span></span>

<span data-ttu-id="06f01-303">Service Bus-Themen sind eine robuste und bewährte Technologie, um die Veröffentlichung/Abonnementkommunikation in Ihren Cloud-nativen Systemen zu ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="06f01-303">Service Bus topics are a robust and proven technology for enabling publish/subscribe communication in your cloud-native systems.</span></span>

### <a name="azure-event-grid"></a><span data-ttu-id="06f01-304">Azure Event Grid</span><span class="sxs-lookup"><span data-stu-id="06f01-304">Azure Event Grid</span></span>

<span data-ttu-id="06f01-305">Während Azure Service Bus ein kampferprobter Messagingbroker mit einem vollständigen Satz von Unternehmensfeatures ist, ist [Azure Event Grid](https://docs.microsoft.com/azure/event-grid/overview) das neue Kind auf dem Block.</span><span class="sxs-lookup"><span data-stu-id="06f01-305">While Azure Service Bus is a battle-tested messaging broker with a full set of enterprise features, [Azure Event Grid](https://docs.microsoft.com/azure/event-grid/overview) is the new kid on the block.</span></span>

<span data-ttu-id="06f01-306">Auf den ersten Blick sieht Event Grid wie ein weiteres themenbasiertes Messagingsystem aus.</span><span class="sxs-lookup"><span data-stu-id="06f01-306">At first glance, Event Grid may look like just another topic-based messaging system.</span></span> <span data-ttu-id="06f01-307">Es ist jedoch in vielerlei Hinsicht anders.</span><span class="sxs-lookup"><span data-stu-id="06f01-307">However, it's different in many ways.</span></span> <span data-ttu-id="06f01-308">Es konzentriert sich auf ereignisgesteuerte Workloads und ermöglicht die Echtzeit-Ereignisverarbeitung, eine umfassende Azure-Integration und eine offene Plattform – alles in einer serverlosen Infrastruktur.</span><span class="sxs-lookup"><span data-stu-id="06f01-308">Focused on event-driven workloads, it enables real-time event processing, deep Azure integration, and an open-platform - all on serverless infrastructure.</span></span> <span data-ttu-id="06f01-309">Es wurde für moderne Cloud-native und serverlose Anwendungen entwickelt</span><span class="sxs-lookup"><span data-stu-id="06f01-309">It's designed for contemporary cloud-native and serverless applications</span></span>

<span data-ttu-id="06f01-310">Als *zentralisierte Ereignis-Backplane*oder Pipe reagiert Event Grid auf Ereignisse innerhalb von Azure-Ressourcen und von Ihren eigenen Diensten aus.</span><span class="sxs-lookup"><span data-stu-id="06f01-310">As a centralized *eventing backplane*, or pipe, Event Grid reacts to events inside Azure resources and from your own services.</span></span>

<span data-ttu-id="06f01-311">Ereignisbenachrichtigungen werden in einem Event Grid-Thema veröffentlicht, das wiederum jedes Ereignis an ein Abonnement weiterleitet.</span><span class="sxs-lookup"><span data-stu-id="06f01-311">Event notifications are published to an Event Grid Topic, which, in turn, routes each event to a subscription.</span></span> <span data-ttu-id="06f01-312">Abonnenten ordnen Abonnements zu und nutzen die Ereignisse.</span><span class="sxs-lookup"><span data-stu-id="06f01-312">Subscribers map to subscriptions and consume the events.</span></span> <span data-ttu-id="06f01-313">Wie Service Bus unterstützt Event Grid ein *gefiltertes Abonnentenmodell,* bei dem ein Abonnement die Regel für die Ereignisse festlegt, die es empfangen möchte.</span><span class="sxs-lookup"><span data-stu-id="06f01-313">Like Service Bus, Event Grid supports a *filtered subscriber model* where a subscription sets rule for the events it wishes to receive.</span></span> <span data-ttu-id="06f01-314">Event Grid bietet einen schnellen Durchsatz mit einer Garantie von 10 Millionen Ereignissen pro Sekunde, die eine nahezu Echtzeitbereitstellung ermöglicht – weit mehr als das, was Azure Service Bus generieren kann.</span><span class="sxs-lookup"><span data-stu-id="06f01-314">Event Grid provides fast throughput with a guarantee of 10 million events per second enabling near real-time delivery - far more than what Azure Service Bus can generate.</span></span>

<span data-ttu-id="06f01-315">Ein süßer Punkt für Event Grid ist die tiefe Integration in die Struktur der Azure-Infrastruktur.</span><span class="sxs-lookup"><span data-stu-id="06f01-315">A sweet spot for Event Grid is its deep integration into the fabric of Azure infrastructure.</span></span> <span data-ttu-id="06f01-316">Eine Azure-Ressource, z. B. Cosmos DB, kann integrierte Ereignisse direkt in anderen interessierten Azure-Ressourcen veröffentlichen – ohne benutzerdefiniertem Code.</span><span class="sxs-lookup"><span data-stu-id="06f01-316">An Azure resource, such as Cosmos DB, can publish built-in events directly to other interested Azure resources - without the need for custom code.</span></span> <span data-ttu-id="06f01-317">Event Grid kann Ereignisse aus einem Azure-Abonnement, einer Ressourcengruppe oder einem Dienst veröffentlichen, sodass Entwickler den Lebenszyklus von Cloudressourcen detaillierter steuern können.</span><span class="sxs-lookup"><span data-stu-id="06f01-317">Event Grid can publish events from an Azure Subscription, Resource Group, or Service, giving developers fine-grained control over the lifecycle of cloud resources.</span></span> <span data-ttu-id="06f01-318">Event Grid ist jedoch nicht auf Azure beschränkt.</span><span class="sxs-lookup"><span data-stu-id="06f01-318">However, Event Grid isn't limited to Azure.</span></span> <span data-ttu-id="06f01-319">Es handelt sich um eine offene Plattform, die benutzerdefinierte HTTP-Ereignisse nutzen kann, die von Anwendungen oder Drittanbieterdiensten veröffentlicht wurden, und Ereignisse an externe Abonnenten weiterleiten kann.</span><span class="sxs-lookup"><span data-stu-id="06f01-319">It's an open platform that can consume custom HTTP events published from applications or third-party services and route events to external subscribers.</span></span>

<span data-ttu-id="06f01-320">Beim Veröffentlichen und Abonnieren systemeigener Ereignisse aus Azure-Ressourcen ist keine Codierung erforderlich.</span><span class="sxs-lookup"><span data-stu-id="06f01-320">When publishing and subscribing to native events from Azure resources, no coding is required.</span></span> <span data-ttu-id="06f01-321">Mit einfacher Konfiguration können Sie Ereignisse von einer Azure-Ressource in eine andere integrieren, indem Sie integrierte Installationen für Themen und Abonnements nutzen.</span><span class="sxs-lookup"><span data-stu-id="06f01-321">With simple configuration, you can integrate events from one Azure resource to another leveraging built-in plumbing for Topics and Subscriptions.</span></span> <span data-ttu-id="06f01-322">Abbildung 4-17 zeigt die Anatomie des Ereignisrasters.</span><span class="sxs-lookup"><span data-stu-id="06f01-322">Figure 4-17 shows the anatomy of Event Grid.</span></span>

![Event Grid Anatomie](./media/event-grid-anatomy.png)

<span data-ttu-id="06f01-324">**Abbildung 4-17**.</span><span class="sxs-lookup"><span data-stu-id="06f01-324">**Figure 4-17**.</span></span> <span data-ttu-id="06f01-325">Event Grid Anatomie</span><span class="sxs-lookup"><span data-stu-id="06f01-325">Event Grid anatomy</span></span>

<span data-ttu-id="06f01-326">Ein wesentlicher Unterschied zwischen EventGrid und Service Bus ist das zugrunde liegende *Nachrichtenaustauschmuster*.</span><span class="sxs-lookup"><span data-stu-id="06f01-326">A major difference between EventGrid and Service Bus is the underlying *message exchange pattern*.</span></span>

<span data-ttu-id="06f01-327">Service Bus implementiert ein *pull-Modell* mit älterem Stil, bei dem der Downstream-Abonnent das Themenabonnement aktiv für neue Nachrichten abfragt.</span><span class="sxs-lookup"><span data-stu-id="06f01-327">Service Bus implements an older style *pull model* in which the downstream subscriber actively polls the topic subscription for new messages.</span></span> <span data-ttu-id="06f01-328">Auf der anderen Seite gibt dieser Ansatz dem Abonnenten die volle Kontrolle über das Tempo, mit dem er Nachrichten verarbeitet.</span><span class="sxs-lookup"><span data-stu-id="06f01-328">On the upside, this approach gives the subscriber full control of the pace at which it processes messages.</span></span> <span data-ttu-id="06f01-329">Es steuert, wann und wie viele Nachrichten zu einem bestimmten Zeitpunkt verarbeitet werden sollen.</span><span class="sxs-lookup"><span data-stu-id="06f01-329">It controls when and how many messages to process at any given time.</span></span> <span data-ttu-id="06f01-330">Ungelesene Nachrichten verbleiben bis zur Verarbeitung im Abonnement.</span><span class="sxs-lookup"><span data-stu-id="06f01-330">Unread messages remain in the subscription until processed.</span></span> <span data-ttu-id="06f01-331">Ein erheblicher Mangel ist die Latenz zwischen dem Zeitpunkt, zu dem das Ereignis generiert wird, und dem Abrufvorgang, der diese Nachricht zur Verarbeitung an den Abonnenten abruft.</span><span class="sxs-lookup"><span data-stu-id="06f01-331">A significant shortcoming is the latency between the time the event is generated and the polling operation that pulls that message to the subscriber for processing.</span></span> <span data-ttu-id="06f01-332">Außerdem verbraucht der Overhead der ständigen Abfrage für das nächste Ereignis Ressourcen und Geld.</span><span class="sxs-lookup"><span data-stu-id="06f01-332">Also, the overhead of constant polling for the next event consumes resources and money.</span></span>

<span data-ttu-id="06f01-333">EventGrid ist jedoch anders.</span><span class="sxs-lookup"><span data-stu-id="06f01-333">EventGrid, however, is different.</span></span> <span data-ttu-id="06f01-334">Es implementiert ein *Push-Modell,* in dem Ereignisse als empfangen an die EventHandler gesendet werden, was eine nahezu Echtzeit-Ereignisbereitstellung bietet.</span><span class="sxs-lookup"><span data-stu-id="06f01-334">It implements a *push model* in which events are sent to the EventHandlers as received, giving near real-time event delivery.</span></span> <span data-ttu-id="06f01-335">Es reduziert auch die Kosten, da der Dienst nur ausgelöst wird, wenn er benötigt wird, um ein Ereignis zu verbrauchen – nicht kontinuierlich wie beim Abrufen.</span><span class="sxs-lookup"><span data-stu-id="06f01-335">It also reduces cost as the service is triggered only when it's needed to consume an event – not continually as with polling.</span></span> <span data-ttu-id="06f01-336">Allerdings muss ein Ereignishandler die eingehende Last verarbeiten und Drosselungsmechanismen bereitstellen, um sich vor Überlastung zu schützen.</span><span class="sxs-lookup"><span data-stu-id="06f01-336">That said, an event handler must handle the incoming load and provide throttling mechanisms to protect itself from becoming overwhelmed.</span></span> <span data-ttu-id="06f01-337">Viele Azure-Dienste, die diese Ereignisse nutzen, z. B. Azure Functions und Logic Apps, bieten automatische automatische Skalierungsfunktionen, um erhöhte Lasten zu bewältigen.</span><span class="sxs-lookup"><span data-stu-id="06f01-337">Many Azure services that consume these events, such as Azure Functions and Logic Apps provide automatic autoscaling capabilities to handle increased loads.</span></span>  

<span data-ttu-id="06f01-338">Event Grid ist ein vollständig verwalteter serverloser Clouddienst.</span><span class="sxs-lookup"><span data-stu-id="06f01-338">Event Grid is a fully managed serverless cloud service.</span></span> <span data-ttu-id="06f01-339">Es skaliert dynamisch basierend auf Ihrem Datenverkehr und berechnet Ihnen nur Für Ihre tatsächliche Nutzung, nicht für vorgekaufte Kapazität.</span><span class="sxs-lookup"><span data-stu-id="06f01-339">It dynamically scales based on your traffic and charges you only for your actual usage, not pre-purchased capacity.</span></span> <span data-ttu-id="06f01-340">Die ersten 100.000 Vorgänge pro Monat sind kostenlos – Vorgänge werden als Ereigniseintritt (eingehende Ereignisbenachrichtigungen), Abonnementbereitstellungsversuche, Verwaltungsaufrufe und Filtern nach Antragstellern definiert.</span><span class="sxs-lookup"><span data-stu-id="06f01-340">The first 100,000 operations per month are free – operations being defined as event ingress (incoming event notifications), subscription delivery attempts, management calls, and filtering by subject.</span></span> <span data-ttu-id="06f01-341">Mit einer Verfügbarkeit von 99,99 % garantiert EventGrid die Lieferung eines Ereignisses innerhalb von 24 Stunden, mit integrierter Wiederholungsfunktionalität für eine erfolglose Lieferung.</span><span class="sxs-lookup"><span data-stu-id="06f01-341">With 99.99% availability, EventGrid guarantees the delivery of an event within a 24-hour period, with built-in retry functionality for unsuccessful delivery.</span></span> <span data-ttu-id="06f01-342">Nicht zugestellte Nachrichten können zur Auflösung in eine Warteschlange mit "toten Buchstaben" verschoben werden.</span><span class="sxs-lookup"><span data-stu-id="06f01-342">Undelivered messages can be moved to a "dead-letter" queue for resolution.</span></span>  <span data-ttu-id="06f01-343">Im Gegensatz zu Azure Service Bus ist Event Grid auf eine schnelle Leistung eingestellt und unterstützt keine Funktionen wie geordnetes Messaging, Transaktionen und Sitzungen.</span><span class="sxs-lookup"><span data-stu-id="06f01-343">Unlike Azure Service Bus, Event Grid is tuned for fast performance and doesn't support features like ordered messaging, transactions, and sessions.</span></span>

### <a name="streaming-messages-in-the-azure-cloud"></a><span data-ttu-id="06f01-344">Streaming von Nachrichten in der Azure-Cloud</span><span class="sxs-lookup"><span data-stu-id="06f01-344">Streaming messages in the Azure cloud</span></span>

<span data-ttu-id="06f01-345">Azure Service Bus und Event Grid bieten großartige Unterstützung für Anwendungen, die einzelne, diskrete Ereignisse wie ein neues Dokument in eine Cosmos-DB einfügen.</span><span class="sxs-lookup"><span data-stu-id="06f01-345">Azure Service Bus and Event Grid provide great support for applications that expose single, discrete events like a new document has been inserted into a Cosmos DB.</span></span> <span data-ttu-id="06f01-346">Aber was ist, wenn Ihr Cloud-natives System einen *Strom verwandter Ereignisse*verarbeiten muss?</span><span class="sxs-lookup"><span data-stu-id="06f01-346">But, what if your cloud-native system needs to process a *stream of related events*?</span></span> <span data-ttu-id="06f01-347">[Ereignisstreams](https://docs.microsoft.com/archive/msdn-magazine/2015/february/microsoft-azure-the-rise-of-event-stream-oriented-systems) sind komplexer.</span><span class="sxs-lookup"><span data-stu-id="06f01-347">[Event streams](https://docs.microsoft.com/archive/msdn-magazine/2015/february/microsoft-azure-the-rise-of-event-stream-oriented-systems) are more complex.</span></span> <span data-ttu-id="06f01-348">Sie sind in der Regel zeitlich geordnet, miteinander verknüpft und müssen als Gruppe verarbeitet werden.</span><span class="sxs-lookup"><span data-stu-id="06f01-348">They're typically time-ordered, interrelated, and must be processed as a group.</span></span>

<span data-ttu-id="06f01-349">[Azure Event Hub](https://azure.microsoft.com/services/event-hubs/) ist eine Datenstreamingplattform und ein Ereigniserfassungsdienst, der Ereignisse sammelt, transformiert und speichert.</span><span class="sxs-lookup"><span data-stu-id="06f01-349">[Azure Event Hub](https://azure.microsoft.com/services/event-hubs/) is a data streaming platform and event ingestion service that collects, transforms, and stores events.</span></span> <span data-ttu-id="06f01-350">Es ist fein abgestimmt, um Streaming-Daten zu erfassen, z. B. kontinuierliche Ereignisbenachrichtigungen, die aus einem Telemetriekontext emittiert werden.</span><span class="sxs-lookup"><span data-stu-id="06f01-350">It's fine-tuned to capture streaming data, such as continuous event notifications emitted from a telemetry context.</span></span> <span data-ttu-id="06f01-351">Der Dienst ist hochgradig skalierbar und kann Millionen von Ereignissen pro Sekunde speichern und [verarbeiten.](https://docs.microsoft.com/azure/event-hubs/event-hubs-about)</span><span class="sxs-lookup"><span data-stu-id="06f01-351">The service is highly scalable and can store and [process millions of events per second](https://docs.microsoft.com/azure/event-hubs/event-hubs-about).</span></span> <span data-ttu-id="06f01-352">In Abbildung 4-18 ist es häufig eine Haustür für eine Ereignispipeline, die den Aufnahmestrom vom Ereignisverbrauch entkoppelt.</span><span class="sxs-lookup"><span data-stu-id="06f01-352">Shown in Figure 4-18, it's often a front door for an event pipeline, decoupling ingest stream from event consumption.</span></span>

![Azure Event Hub](./media/azure-event-hub.png)

<span data-ttu-id="06f01-354">**Abbildung 4-18.**</span><span class="sxs-lookup"><span data-stu-id="06f01-354">**Figure 4-18**.</span></span> <span data-ttu-id="06f01-355">Azure Event Hub</span><span class="sxs-lookup"><span data-stu-id="06f01-355">Azure Event Hub</span></span>

<span data-ttu-id="06f01-356">Event Hub unterstützt niedrige Latenz und konfigurierbare Zeitbindung.</span><span class="sxs-lookup"><span data-stu-id="06f01-356">Event Hub supports low latency and configurable time retention.</span></span> <span data-ttu-id="06f01-357">Im Gegensatz zu Warteschlangen und Themen behalten Event Hubs Ereignisdaten bei, nachdem sie von einem Consumer gelesen wurden.</span><span class="sxs-lookup"><span data-stu-id="06f01-357">Unlike queues and topics, Event Hubs keep event data after it's been read by a consumer.</span></span> <span data-ttu-id="06f01-358">Diese Funktion ermöglicht es anderen Datenanalysediensten, sowohl intern als auch extern, die Daten zur weiteren Analyse wiederzugeben.</span><span class="sxs-lookup"><span data-stu-id="06f01-358">This feature enables other data analytic services, both internal and external, to replay the data for further analysis.</span></span> <span data-ttu-id="06f01-359">Im Event Hub gespeicherte Ereignisse werden erst nach Ablauf des Aufbewahrungszeitraums gelöscht, der standardmäßig einen Tag beträgt, aber konfigurierbar.</span><span class="sxs-lookup"><span data-stu-id="06f01-359">Events stored in event hub are only deleted upon expiration of the retention period, which is one day by default, but configurable.</span></span>

<span data-ttu-id="06f01-360">Event Hub unterstützt gängige Ereignisveröffentlichungsprotokolle, einschließlich HTTPS und AMQP.</span><span class="sxs-lookup"><span data-stu-id="06f01-360">Event Hub supports common event publishing protocols including HTTPS and AMQP.</span></span> <span data-ttu-id="06f01-361">Es unterstützt auch Kafka 1.0.</span><span class="sxs-lookup"><span data-stu-id="06f01-361">It also supports Kafka 1.0.</span></span> <span data-ttu-id="06f01-362">[Vorhandene Kafka-Anwendungen können mit Event Hub kommunizieren,](https://docs.microsoft.com/azure/event-hubs/event-hubs-for-kafka-ecosystem-overview) indem sie das Kafka-Protokoll verwenden, das eine Alternative zur Verwaltung großer Kafka-Cluster bietet.</span><span class="sxs-lookup"><span data-stu-id="06f01-362">[Existing Kafka applications can communicate with Event Hub](https://docs.microsoft.com/azure/event-hubs/event-hubs-for-kafka-ecosystem-overview) using the Kafka protocol providing an alternative to managing large Kafka clusters.</span></span> <span data-ttu-id="06f01-363">Viele Open-Source-Cloud-native Systeme umarmen Kafka.</span><span class="sxs-lookup"><span data-stu-id="06f01-363">Many open-source cloud-native systems embrace Kafka.</span></span>

<span data-ttu-id="06f01-364">Event Hubs implementiert das Nachrichtenstreaming über ein [partitioniertes Consumermodell,](https://docs.microsoft.com/azure/event-hubs/event-hubs-features) in dem jeder Consumer nur eine bestimmte Teilmenge oder Partition des Nachrichtenstreams liest.</span><span class="sxs-lookup"><span data-stu-id="06f01-364">Event Hubs implements message streaming through a [partitioned consumer model](https://docs.microsoft.com/azure/event-hubs/event-hubs-features) in which each consumer only reads a specific subset, or partition, of the message stream.</span></span> <span data-ttu-id="06f01-365">Dieses Muster ermöglicht enorme horizontale Skalierung für die Ereignisverarbeitung und stellt weitere datenstromorientierte Features zur Verfügung, die in Warteschlangen und Themen nicht verfügbar sind.</span><span class="sxs-lookup"><span data-stu-id="06f01-365">This pattern enables tremendous horizontal scale for event processing and provides other stream-focused features that are unavailable in queues and topics.</span></span> <span data-ttu-id="06f01-366">Eine Partition ist eine geordnete Sequenz von Ereignissen, die in einem Event Hub besteht.</span><span class="sxs-lookup"><span data-stu-id="06f01-366">A partition is an ordered sequence of events that is held in an event hub.</span></span> <span data-ttu-id="06f01-367">Wenn neuere Ereignisse ankommen, werden sie am Ende dieser Sequenz hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="06f01-367">As newer events arrive, they're added to the end of this sequence.</span></span><span data-ttu-id="06f01-368">Abbildung 4-19 zeigt die Partitionierung in einem Event Hub.</span><span class="sxs-lookup"><span data-stu-id="06f01-368"> Figure 4-19 shows partitioning in an Event Hub.</span></span>

![Event Hub-Partitionierung](./media/event-hub-partitioning.png)

<span data-ttu-id="06f01-370">**Abbildung 4-19.**</span><span class="sxs-lookup"><span data-stu-id="06f01-370">**Figure 4-19**.</span></span> <span data-ttu-id="06f01-371">Event Hub-Partitionierung</span><span class="sxs-lookup"><span data-stu-id="06f01-371">Event Hub partitioning</span></span>

<span data-ttu-id="06f01-372">Anstatt aus derselben Ressource zu lesen, liest jede Consumergruppe über eine Teilmenge oder Partition des Nachrichtenstreams.</span><span class="sxs-lookup"><span data-stu-id="06f01-372">Instead of reading from the same resource, each consumer group reads across a subset, or partition, of the message stream.</span></span>

<span data-ttu-id="06f01-373">Für cloudnative Anwendungen, die eine große Anzahl von Ereignissen streamen müssen, kann Azure Event Hub eine robuste und erschwingliche Lösung sein.</span><span class="sxs-lookup"><span data-stu-id="06f01-373">For cloud-native applications that must stream large numbers of events, Azure Event Hub can be a robust and affordable solution.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="06f01-374">[VorherigeS](front-end-communication.md)
>[Weiter](rest-grpc.md)</span><span class="sxs-lookup"><span data-stu-id="06f01-374">[Previous](front-end-communication.md)
[Next](rest-grpc.md)</span></span>
