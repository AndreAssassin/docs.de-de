---
title: Resilienz der Azure-Plattform
description: Architektur von Cloud Native .net-apps für Azure | Resilienz der cloudinfrastruktur mit Azure
ms.date: 06/30/2019
ms.openlocfilehash: 02d661952c860da25442b0fa9fed0d5f93abe023
ms.sourcegitcommit: 4f4a32a5c16a75724920fa9627c59985c41e173c
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 10/17/2019
ms.locfileid: "73841258"
---
# <a name="azure-platform-resiliency"></a><span data-ttu-id="f5d11-103">Resilienz der Azure-Plattform</span><span class="sxs-lookup"><span data-stu-id="f5d11-103">Azure platform resiliency</span></span>

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

<span data-ttu-id="f5d11-104">Das Entwickeln einer zuverlässigen Anwendung in der Cloud unterscheidet sich von der herkömmlichen lokalen Anwendungsentwicklung.</span><span class="sxs-lookup"><span data-stu-id="f5d11-104">Building a reliable application in the cloud is different from traditional on-premises application development.</span></span> <span data-ttu-id="f5d11-105">Obwohl Sie in der Vergangenheit höhere Hardware zum zentralen hochskalieren erworben haben, können Sie in einer cloudumgebung horizontal hochskalieren. Anstatt zu versuchen, Fehler zu vermeiden, besteht das Ziel darin, die Auswirkungen zu minimieren und das System stabil zu halten.</span><span class="sxs-lookup"><span data-stu-id="f5d11-105">While historically you purchased higher-end hardware to scale up, in a cloud environment you scale out. Instead of trying to prevent failures, the goal is to minimize their effects and keep the system stable.</span></span>

<span data-ttu-id="f5d11-106">Das heißt, zuverlässige cloudanwendungen zeigen verschiedene Merkmale an:</span><span class="sxs-lookup"><span data-stu-id="f5d11-106">That said, reliable cloud applications display distinct characteristics:</span></span>

- <span data-ttu-id="f5d11-107">Sie sind robust, werden von Problemen ordnungsgemäß wieder hergestellt und funktionieren weiterhin.</span><span class="sxs-lookup"><span data-stu-id="f5d11-107">They're resilient, recover gracefully from problems, and continue to function.</span></span>
- <span data-ttu-id="f5d11-108">Sie sind hoch verfügbar (ha) und werden in einem fehlerfreien Zustand ohne erhebliche Ausfallzeiten ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="f5d11-108">They're highly available (HA) and run as designed in a healthy state with no significant downtime.</span></span>

<span data-ttu-id="f5d11-109">Wenn Sie wissen, wie diese Merkmale zusammenarbeiten und wie Sie sich auf die Kosten auswirken, ist es von entscheidender Bedeutung, eine zuverlässige, cloudbasierte Anwendung zu entwickeln.</span><span class="sxs-lookup"><span data-stu-id="f5d11-109">Understanding how these characteristics work together - and how they affect cost - is essential to building a reliable cloud-native application.</span></span> <span data-ttu-id="f5d11-110">Im nächsten Schritt betrachten wir die Möglichkeiten, wie Sie Resilienz und Verfügbarkeit in Ihre cloudbasierten Anwendungen mit Features aus der Azure-Cloud entwickeln können.</span><span class="sxs-lookup"><span data-stu-id="f5d11-110">We'll next look at ways that you can build resiliency and availability into your cloud-native applications leveraging features from the Azure cloud.</span></span>

## <a name="design-with-redundancy"></a><span data-ttu-id="f5d11-111">Entwerfen mit Redundanz</span><span class="sxs-lookup"><span data-stu-id="f5d11-111">Design with redundancy</span></span>

<span data-ttu-id="f5d11-112">Fehler unterscheiden sich im Umfang der Auswirkungen.</span><span class="sxs-lookup"><span data-stu-id="f5d11-112">Failures vary in scope of impact.</span></span> <span data-ttu-id="f5d11-113">Ein Hardwarefehler (z. b. ein fehlerhafter Datenträger) kann sich auf einen einzelnen Knoten in einem Cluster auswirken.</span><span class="sxs-lookup"><span data-stu-id="f5d11-113">A hardware failure, such as a failed disk, can affect a single node in a cluster.</span></span> <span data-ttu-id="f5d11-114">Ein fehlerhafter Netzwerk Switch kann sich auf ein gesamtes servergestell auswirken.</span><span class="sxs-lookup"><span data-stu-id="f5d11-114">A failed network switch could affect an entire server rack.</span></span> <span data-ttu-id="f5d11-115">Weniger häufige Fehler, wie z. b. Stromausfälle, könnten ein gesamtes Rechenzentrum stören.</span><span class="sxs-lookup"><span data-stu-id="f5d11-115">Less common failures, such as loss of power, could disrupt a whole datacenter.</span></span> <span data-ttu-id="f5d11-116">In seltenen Fällen steht eine gesamte Region nicht mehr zur Verfügung.</span><span class="sxs-lookup"><span data-stu-id="f5d11-116">Rarely, an entire region becomes unavailable.</span></span>

<span data-ttu-id="f5d11-117">[Redundanz](https://docs.microsoft.com/azure/architecture/guide/design-principles/redundancy) ist eine Möglichkeit zum Bereitstellen von Anwendungs Resilienz.</span><span class="sxs-lookup"><span data-stu-id="f5d11-117">[Redundancy](https://docs.microsoft.com/azure/architecture/guide/design-principles/redundancy) is one way to provide application resilience.</span></span> <span data-ttu-id="f5d11-118">Die genaue erforderliche Redundanz Ebene hängt von Ihren Geschäftsanforderungen ab und wirkt sich sowohl auf die Kosten als auch auf die Komplexität Ihres Systems aus.</span><span class="sxs-lookup"><span data-stu-id="f5d11-118">The exact level of redundancy needed depends on your business requirements and will affect both cost and complexity of your system.</span></span> <span data-ttu-id="f5d11-119">Beispielsweise ist eine Bereitstellung in mehreren Regionen teurer und komplexer zu verwalten als eine Bereitstellung in einer einzelnen Region.</span><span class="sxs-lookup"><span data-stu-id="f5d11-119">For example, a multi-region deployment is more expensive and more complex to manage than a single-region deployment.</span></span> <span data-ttu-id="f5d11-120">Sie benötigen betriebliche Verfahren zum Verwalten von Failover und Failback.</span><span class="sxs-lookup"><span data-stu-id="f5d11-120">You'll need operational procedures to manage failover and failback.</span></span> <span data-ttu-id="f5d11-121">Die zusätzlichen Kosten und die Komplexität können für einige Geschäftsszenarien und nicht für andere gerechtfertigt werden.</span><span class="sxs-lookup"><span data-stu-id="f5d11-121">The additional cost and complexity might be justified for some business scenarios and not others.</span></span>

<span data-ttu-id="f5d11-122">Um Redundanz zu entwerfen, müssen Sie die kritischen Pfade in der Anwendung identifizieren und dann bestimmen, ob an jedem Punkt im Pfad Redundanz vorliegt?</span><span class="sxs-lookup"><span data-stu-id="f5d11-122">To architect redundancy, you need to identify the critical paths in your application, and then determine if there's redundancy at each point in the path?</span></span> <span data-ttu-id="f5d11-123">Wenn bei einem Subsystem ein Fehler auftritt, führt die Anwendung ein Failover zu einem anderen aus?</span><span class="sxs-lookup"><span data-stu-id="f5d11-123">If a subsystem should fail, will the application fail over to something else?</span></span> <span data-ttu-id="f5d11-124">Schließlich benötigen Sie ein klares Verständnis der in der Azure-cloudplattform integrierten Features, die Sie nutzen können, um Ihre Redundanz Anforderungen zu erfüllen.</span><span class="sxs-lookup"><span data-stu-id="f5d11-124">Finally, you need a clear understanding of those features built into the Azure cloud platform that you can leverage to meet your redundancy requirements.</span></span> <span data-ttu-id="f5d11-125">Im folgenden finden Sie Empfehlungen für die Architektur der Redundanz:</span><span class="sxs-lookup"><span data-stu-id="f5d11-125">Here are recommendations for architecting redundancy:</span></span>

- <span data-ttu-id="f5d11-126">*Stellen Sie mehrere Instanzen von Diensten bereit.*</span><span class="sxs-lookup"><span data-stu-id="f5d11-126">*Deploy multiple instances of services.*</span></span> <span data-ttu-id="f5d11-127">Wenn Ihre Anwendung von einer einzelnen Instanz eines Dienstanbieter abhängig ist, wird ein Single Point of Failure erstellt.</span><span class="sxs-lookup"><span data-stu-id="f5d11-127">If your application depends on a single instance of a service, it creates a single point of failure.</span></span> <span data-ttu-id="f5d11-128">Durch die Bereitstellung mehrerer Instanzen wird sowohl die Resilienz als auch die Skalierbarkeit verbessert.</span><span class="sxs-lookup"><span data-stu-id="f5d11-128">Provisioning multiple instances improves both resiliency and scalability.</span></span> <span data-ttu-id="f5d11-129">Beim Hosten im Azure Kubernetes-Dienst können Sie redundante Instanzen (Replikat Gruppen) deklarativ in der Kubernetes-Manifest-Datei konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="f5d11-129">When hosting in Azure Kubernetes Service, you can declaratively configure redundant instances (replica sets) in the Kubernetes manifest file.</span></span> <span data-ttu-id="f5d11-130">Der Wert Replikat Anzahl kann Programm gesteuert, im Portal oder mithilfe der Features für die automatische Skalierung verwaltet werden, die später erläutert werden.</span><span class="sxs-lookup"><span data-stu-id="f5d11-130">The replica count value can be managed programmatically, in the portal or through autoscaling features, which will be discussed later on.</span></span>

- <span data-ttu-id="f5d11-131">*Nutzung eines Load Balancers.*</span><span class="sxs-lookup"><span data-stu-id="f5d11-131">*Leveraging a load balancer.*</span></span> <span data-ttu-id="f5d11-132">Beim Lastenausgleich werden die Anforderungen Ihrer Anwendung an fehlerfreie Dienst Instanzen verteilt, und fehlerhafte Instanzen werden automatisch aus der Rotation entfernt.</span><span class="sxs-lookup"><span data-stu-id="f5d11-132">Load-balancing distributes your application's requests to healthy service instances and automatically removes unhealthy instances from rotation.</span></span> <span data-ttu-id="f5d11-133">Beim Bereitstellen in Kubernetes kann der Lastenausgleich in der Kubernetes-Manifest-Datei im Abschnitt Dienste angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="f5d11-133">When deploying to Kubernetes, load balancing can be specified in the Kubernetes manifest file in the Services section.</span></span>

- <span data-ttu-id="f5d11-134">*Planen Sie die Bereitstellung in mehreren Regionen.*</span><span class="sxs-lookup"><span data-stu-id="f5d11-134">*Plan for multiregion deployment.*</span></span> <span data-ttu-id="f5d11-135">Wenn Ihre Anwendung in einer einzelnen Region bereitgestellt wird und die Region nicht mehr verfügbar ist, wird Ihre Anwendung ebenfalls nicht mehr verfügbar sein.</span><span class="sxs-lookup"><span data-stu-id="f5d11-135">If your application is deployed to a single region, and the region becomes unavailable, your application will also become unavailable.</span></span> <span data-ttu-id="f5d11-136">Dies ist unter den Bedingungen der Vereinbarungen zum Service Level Ihrer Anwendung möglicherweise nicht akzeptabel.</span><span class="sxs-lookup"><span data-stu-id="f5d11-136">This may be unacceptable under the terms of your application's service level agreements.</span></span> <span data-ttu-id="f5d11-137">Sie sollten stattdessen die Anwendung und die zugehörigen Dienste in mehreren Regionen bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="f5d11-137">Instead, consider deploying your application and its services across multiple regions.</span></span> <span data-ttu-id="f5d11-138">Beispielsweise wird ein Azure Kubernetes Service-Cluster (AKS) in einer einzelnen Region bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="f5d11-138">For example, an Azure Kubernetes Service (AKS) cluster is deployed to a single region.</span></span> <span data-ttu-id="f5d11-139">Um Ihr System vor einem regionalen Ausfall zu schützen, können Sie Ihre Anwendung in mehreren AKS-Clustern in unterschiedlichen Regionen bereitstellen und das Feature " [Regions](https://buildazure.com/2017/01/06/azure-region-pairs-explained/) Paare" verwenden, um Platt Form Updates zu koordinieren und den Wiederherstellungs Aufwand zu priorisieren.</span><span class="sxs-lookup"><span data-stu-id="f5d11-139">To protect your system from a regional failure, you might deploy your application to multiple AKS clusters across different regions and use the [Paired Regions](https://buildazure.com/2017/01/06/azure-region-pairs-explained/) feature to coordinate platform updates and prioritize recovery efforts.</span></span>

- <span data-ttu-id="f5d11-140">*Aktivieren Sie die [georeplikation](https://docs.microsoft.com/azure/sql-database/sql-database-active-geo-replication).*</span><span class="sxs-lookup"><span data-stu-id="f5d11-140">*Enable [geo-replication](https://docs.microsoft.com/azure/sql-database/sql-database-active-geo-replication).*</span></span> <span data-ttu-id="f5d11-141">Bei der georeplikation für Dienste wie Azure SQL-Datenbank und Cosmos DB werden sekundäre Replikate Ihrer Daten in mehreren Regionen erstellt.</span><span class="sxs-lookup"><span data-stu-id="f5d11-141">Geo-replication for services such as Azure SQL Database and Cosmos DB will create secondary replicas of your data across multiple regions.</span></span> <span data-ttu-id="f5d11-142">Obwohl beide Dienste automatisch Daten innerhalb derselben Region replizieren, schützt die georeplikation Sie vor einem regionalen Ausfall, da Sie ein Failover auf eine sekundäre Region durchführen können.</span><span class="sxs-lookup"><span data-stu-id="f5d11-142">While both services will automatically replicate data within the same region, geo-replication protects you against a regional outage by enabling you to fail over to a secondary region.</span></span> <span data-ttu-id="f5d11-143">Eine weitere bewährte Vorgehensweise für die georeplikation ist das Speichern von Container Images.</span><span class="sxs-lookup"><span data-stu-id="f5d11-143">Another best practice for geo-replication centers around storing container images.</span></span> <span data-ttu-id="f5d11-144">Zum Bereitstellen eines Diensts in AKS müssen Sie das Image speichern und aus einem Repository abrufen.</span><span class="sxs-lookup"><span data-stu-id="f5d11-144">To deploy a service in AKS, you need to store and pull the image from a repository.</span></span> <span data-ttu-id="f5d11-145">Azure Container Registry in AKS integrieren und Container Images sicher speichern können.</span><span class="sxs-lookup"><span data-stu-id="f5d11-145">Azure Container Registry integrates with AKS and can securely store container images.</span></span> <span data-ttu-id="f5d11-146">Um die Leistung und Verfügbarkeit zu verbessern, sollten Sie Ihre Images in einer Registrierung in jeder Region, in der Sie einen AKS-Cluster besitzen, georeplizieren.</span><span class="sxs-lookup"><span data-stu-id="f5d11-146">To improve performance and availability, consider geo-replicating your images to a registry in each region where you have an AKS cluster.</span></span> <span data-ttu-id="f5d11-147">Jeder AKS-Cluster ruft dann Container Images aus der lokalen Container Registrierung in seiner Region ab, wie in Abbildung 6-6 dargestellt:</span><span class="sxs-lookup"><span data-stu-id="f5d11-147">Each AKS cluster then pulls container images from the local container registry in its region as shown in Figure 6-6:</span></span>

![Regions übergreifende replizierte Ressourcen](./media/replicated-resources.png)

<span data-ttu-id="f5d11-149">**Abbildung 6-6**.</span><span class="sxs-lookup"><span data-stu-id="f5d11-149">**Figure 6-6**.</span></span> <span data-ttu-id="f5d11-150">Regions übergreifende replizierte Ressourcen</span><span class="sxs-lookup"><span data-stu-id="f5d11-150">Replicated resources across regions</span></span>

- <span data-ttu-id="f5d11-151">*Implementieren Sie einen Lastenausgleich für den DNS-Datenverkehr.*</span><span class="sxs-lookup"><span data-stu-id="f5d11-151">*Implement a DNS traffic load balancer.*</span></span> <span data-ttu-id="f5d11-152">[Azure Traffic Manager](https://docs.microsoft.com/azure/traffic-manager/traffic-manager-overview) bietet hohe Verfügbarkeit für kritische Anwendungen durch Lastenausgleich auf DNS-Ebene.</span><span class="sxs-lookup"><span data-stu-id="f5d11-152">[Azure Traffic Manager](https://docs.microsoft.com/azure/traffic-manager/traffic-manager-overview) provides high-availability for critical applications by load-balancing at the DNS level.</span></span> <span data-ttu-id="f5d11-153">Er kann Datenverkehr an verschiedene Regionen weiterleiten, basierend auf Geografie, Cluster Antwortzeit und sogar der Integrität des Anwendungs Endpunkts.</span><span class="sxs-lookup"><span data-stu-id="f5d11-153">It can route traffic to different regions based on geography, cluster response time, and even application endpoint health.</span></span> <span data-ttu-id="f5d11-154">Beispielsweise kann Azure Traffic Manager Kunden an die nächstgelegene AKS-Cluster-und Anwendungs Instanz weiterleiten.</span><span class="sxs-lookup"><span data-stu-id="f5d11-154">For example, Azure Traffic Manager can direct customers to the closest AKS cluster and application instance.</span></span> <span data-ttu-id="f5d11-155">Wenn Sie über mehrere AKS-Cluster in verschiedenen Regionen verfügen, verwenden Sie Traffic Manager, um zu steuern, wie der Datenverkehr zu den in den einzelnen Clustern betriebenen Anwendungen verläuft.</span><span class="sxs-lookup"><span data-stu-id="f5d11-155">If you have multiple AKS clusters in different regions, use Traffic Manager to control how traffic flows to the applications that run in each cluster.</span></span> <span data-ttu-id="f5d11-156">In Abbildung 6-7 wird dieses Szenario veranschaulicht.</span><span class="sxs-lookup"><span data-stu-id="f5d11-156">Figure 6-7 shows this scenario.</span></span>

![AKS und Azure-Traffic Manager](./media/aks-traffic-manager.png)

<span data-ttu-id="f5d11-158">**Abbildung 6-7**.</span><span class="sxs-lookup"><span data-stu-id="f5d11-158">**Figure 6-7**.</span></span> <span data-ttu-id="f5d11-159">AKS und Azure-Traffic Manager</span><span class="sxs-lookup"><span data-stu-id="f5d11-159">AKS and Azure Traffic Manager</span></span>

## <a name="design-for-scalability"></a><span data-ttu-id="f5d11-160">Entwurf für die Skalierbarkeit</span><span class="sxs-lookup"><span data-stu-id="f5d11-160">Design for scalability</span></span>

<span data-ttu-id="f5d11-161">Die Cloud gedeiht bei der Skalierung.</span><span class="sxs-lookup"><span data-stu-id="f5d11-161">The cloud thrives on scaling.</span></span> <span data-ttu-id="f5d11-162">Die Möglichkeit, Systemressourcen zu vergrößern oder zu verringern, um das erhöhen/verringern der System Auslastung zu beheben, ist ein wichtiger Grund Satz der Azure-Cloud.</span><span class="sxs-lookup"><span data-stu-id="f5d11-162">The ability to increase/decrease system resources to address increasing/decreasing system load is a key tenet of the Azure cloud.</span></span> <span data-ttu-id="f5d11-163">Um eine Anwendung effektiv zu skalieren, benötigen Sie jedoch ein Verständnis der Skalierungs Features der einzelnen Azure-Dienste, die Sie in Ihre Anwendung einschließen.</span><span class="sxs-lookup"><span data-stu-id="f5d11-163">But, to effectively scale an application, you need an understanding of the scaling features of each Azure service that you include in your application.</span></span>  <span data-ttu-id="f5d11-164">Hier finden Sie Empfehlungen für eine effektive Implementierung der Skalierung in Ihrem System.</span><span class="sxs-lookup"><span data-stu-id="f5d11-164">Here are recommendations for effectively implementing scaling in your system.</span></span>

- <span data-ttu-id="f5d11-165">*Entwurf für die Skalierung.*</span><span class="sxs-lookup"><span data-stu-id="f5d11-165">*Design for scaling.*</span></span> <span data-ttu-id="f5d11-166">Eine Anwendung muss für die Skalierung entworfen werden.</span><span class="sxs-lookup"><span data-stu-id="f5d11-166">An application must be designed for scaling.</span></span> <span data-ttu-id="f5d11-167">Zum Starten von sollten Dienste zustandslos sein, damit Anforderungen an eine beliebige Instanz weitergeleitet werden können.</span><span class="sxs-lookup"><span data-stu-id="f5d11-167">To start, services should be stateless so that requests can be routed to any instance.</span></span> <span data-ttu-id="f5d11-168">Die Verwendung von Zustands losen Diensten bedeutet auch, dass das Hinzufügen oder Entfernen einer Instanz die aktuellen Benutzer nicht beeinträchtigt.</span><span class="sxs-lookup"><span data-stu-id="f5d11-168">Having stateless services also means that adding or removing an instance doesn't adversely impact current users.</span></span>

- <span data-ttu-id="f5d11-169">*Partitionierungs Arbeits Auslastungen*.</span><span class="sxs-lookup"><span data-stu-id="f5d11-169">*Partition workloads*.</span></span> <span data-ttu-id="f5d11-170">Durch das Zerlegen von Domänen in unabhängige, eigenständige mikrodienste kann jeder Dienst unabhängig von anderen skaliert werden.</span><span class="sxs-lookup"><span data-stu-id="f5d11-170">Decomposing domains into independent, self-contained microservices enable each service to scale independently of others.</span></span> <span data-ttu-id="f5d11-171">In der Regel verfügen Dienste über unterschiedliche Anforderungen an die Skalierbarkeit und Anforderungen.</span><span class="sxs-lookup"><span data-stu-id="f5d11-171">Typically, services will have different scalability needs and requirements.</span></span> <span data-ttu-id="f5d11-172">Mithilfe der Partitionierung können Sie nur skalieren, was ohne unnötige Kosten der Skalierung einer gesamten Anwendung skaliert werden muss.</span><span class="sxs-lookup"><span data-stu-id="f5d11-172">Partitioning enables you to scale only what needs to be scaled without the unnecessary cost of scaling an entire application.</span></span>

- <span data-ttu-id="f5d11-173">*Bevorzugen Sie horizontales hochskalieren.* Cloudbasierte Anwendungen bevorzugen das horizontale hochskalieren von Ressourcen im Gegensatz zum horizontalen hochskalieren.</span><span class="sxs-lookup"><span data-stu-id="f5d11-173">*Favor scale-out.* Cloud-based applications favor scaling out resources as opposed to scaling up.</span></span> <span data-ttu-id="f5d11-174">Das horizontale hochskalieren (auch als horizontale Skalierung bezeichnet) umfasst das Hinzufügen von mehr Dienst Ressourcen zu einem vorhandenen System, um ein gewünschtes Leistungsniveau zu erreichen und freizugeben.</span><span class="sxs-lookup"><span data-stu-id="f5d11-174">Scaling out (also known as horizontal scaling) involves adding more service resources to an existing system to meet and share a desired level of performance.</span></span> <span data-ttu-id="f5d11-175">Das zentrale hochskalieren (auch als vertikale Skalierung bezeichnet) umfasst das Ersetzen vorhandener Ressourcen durch leistungsfähigere Hardware (mehr Datenträger-, Arbeitsspeicher-und verarbeitungskerne).</span><span class="sxs-lookup"><span data-stu-id="f5d11-175">Scaling up (also known as vertical scaling) involves replacing existing resources with more powerful hardware (more disk, memory, and processing cores).</span></span> <span data-ttu-id="f5d11-176">Das horizontale hochskalieren kann automatisch mit den Features für die automatische Skalierung aufgerufen werden</span><span class="sxs-lookup"><span data-stu-id="f5d11-176">Scaling out can be invoked automatically with the autoscaling features available in some Azure cloud resources.</span></span> <span data-ttu-id="f5d11-177">Durch horizontales hochskalieren auf mehrere Ressourcen wird dem gesamten System auch Redundanz hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="f5d11-177">Scaling out across multiple resources also adds redundancy to the overall system.</span></span> <span data-ttu-id="f5d11-178">Das horizontale hochskalieren einer einzelnen Ressource ist in der Regel teurer als das horizontale hochskalieren über viele kleinere Ressourcen.</span><span class="sxs-lookup"><span data-stu-id="f5d11-178">Finally scaling up a single resource is typically more expensive than scaling out across many smaller resources.</span></span> <span data-ttu-id="f5d11-179">In Abbildung 6-8 werden die beiden Ansätze veranschaulicht:</span><span class="sxs-lookup"><span data-stu-id="f5d11-179">Figure 6-8 shows the two approaches:</span></span>

![Zentrales hochskalieren im Vergleich](./media/scale-up-scale-out.png)

<span data-ttu-id="f5d11-181">**Abbildung 6-8.**</span><span class="sxs-lookup"><span data-stu-id="f5d11-181">**Figure 6-8.**</span></span> <span data-ttu-id="f5d11-182">Zentrales hochskalieren im Vergleich</span><span class="sxs-lookup"><span data-stu-id="f5d11-182">Scale up versus scale out</span></span>

- <span data-ttu-id="f5d11-183">*Proportional skalieren.*</span><span class="sxs-lookup"><span data-stu-id="f5d11-183">*Scale proportionally.*</span></span> <span data-ttu-id="f5d11-184">Berücksichtigen Sie beim Skalieren eines Dienstanbieter die *Ressourcen Sätze*.</span><span class="sxs-lookup"><span data-stu-id="f5d11-184">When scaling a service, think in terms of *resource sets*.</span></span> <span data-ttu-id="f5d11-185">Welche Auswirkung haben Sie auf Back-End-Datenspeicher, Caches und abhängige Dienste, wenn Sie einen bestimmten Dienst drastisch horizontal hochskalieren?</span><span class="sxs-lookup"><span data-stu-id="f5d11-185">If you were to dramatically scale out a specific service, what impact would that have on back-end data stores, caches and dependent services?</span></span> <span data-ttu-id="f5d11-186">Einige Ressourcen, z. b. Cosmos DB, können proportional horizontal hochskaliert werden, viele andere hingegen nicht.</span><span class="sxs-lookup"><span data-stu-id="f5d11-186">Some resources such as Cosmos DB can scale out proportionally, while many others can't.</span></span> <span data-ttu-id="f5d11-187">Sie möchten sicherstellen, dass Sie eine Ressource nicht auf einen Punkt horizontal hochskalieren, an dem Sie andere zugeordnete Ressourcen erschöpft.</span><span class="sxs-lookup"><span data-stu-id="f5d11-187">You want to ensure that you don't scale out a resource to a point where it will exhaust other associated resources.</span></span>

- <span data-ttu-id="f5d11-188">*Vermeiden Sie Affinität.*</span><span class="sxs-lookup"><span data-stu-id="f5d11-188">*Avoid affinity.*</span></span> <span data-ttu-id="f5d11-189">Eine bewährte Vorgehensweise besteht darin sicherzustellen, dass ein Knoten keine lokale Affinität erfordert, die *häufig als "* Kurznotiz" bezeichnet wird.</span><span class="sxs-lookup"><span data-stu-id="f5d11-189">A best practice is to ensure a node doesn't require local affinity, often referred to as a *sticky session*.</span></span> <span data-ttu-id="f5d11-190">Eine Anforderung sollte an eine beliebige Instanz weitergeleitet werden können.</span><span class="sxs-lookup"><span data-stu-id="f5d11-190">A request should be able to route to any instance.</span></span> <span data-ttu-id="f5d11-191">Wenn Sie den Zustand beibehalten müssen, sollte er in einem verteilten Cache gespeichert werden, z. b. [Azure redis Cache](https://azure.microsoft.com/services/cache/).</span><span class="sxs-lookup"><span data-stu-id="f5d11-191">If you need to persist state, it should be saved to a distributed cache, such as [Azure Redis cache](https://azure.microsoft.com/services/cache/).</span></span>

- <span data-ttu-id="f5d11-192">*Nutzen Sie Features für die automatische Skalierung von Plattformen.*</span><span class="sxs-lookup"><span data-stu-id="f5d11-192">*Take advantage of platform autoscaling features.*</span></span> <span data-ttu-id="f5d11-193">Verwenden Sie die integrierten Features für die automatische Skalierung, wann immer möglich, anstelle von benutzerdefinierten oder Drittanbieter Mechanismen.</span><span class="sxs-lookup"><span data-stu-id="f5d11-193">Use built-in autoscaling features whenever possible, rather than custom or third-party mechanisms.</span></span> <span data-ttu-id="f5d11-194">Verwenden Sie nach Möglichkeit geplante Skalierungs Regeln, um sicherzustellen, dass Ressourcen ohne Startverzögerung verfügbar sind, und fügen Sie den Regeln nach Bedarf eine reaktive automatische Skalierung hinzu, um unerwartete Änderungen an der Nachfrage zu bewältigen.</span><span class="sxs-lookup"><span data-stu-id="f5d11-194">Where possible, use scheduled scaling rules to ensure that resources are available without a startup delay, but add reactive autoscaling to the rules as appropriate, to cope with unexpected changes in demand.</span></span> <span data-ttu-id="f5d11-195">Weitere Informationen finden Sie unter [Leitfaden für die automatische Skalierung](https://docs.microsoft.com/azure/architecture/best-practices/auto-scaling).</span><span class="sxs-lookup"><span data-stu-id="f5d11-195">For more information, see [Autoscaling guidance](https://docs.microsoft.com/azure/architecture/best-practices/auto-scaling).</span></span>

- <span data-ttu-id="f5d11-196">*Horizontales hochskalieren.*</span><span class="sxs-lookup"><span data-stu-id="f5d11-196">*Scale-out aggressively.*</span></span> <span data-ttu-id="f5d11-197">Eine abschließende Vorgehensweise wäre das horizontale hochskalieren, sodass Sie schnell unmittelbare Spitzen im Datenverkehr erreichen können, ohne das Geschäft zu verlieren.</span><span class="sxs-lookup"><span data-stu-id="f5d11-197">A final practice would be to scale out aggressively so that you can quickly meet immediate spikes in traffic without losing business.</span></span> <span data-ttu-id="f5d11-198">Und dann skalieren (d. h. nicht benötigte Instanzen entfernen), um das System stabil zu halten.</span><span class="sxs-lookup"><span data-stu-id="f5d11-198">And, then scale in (that is, remove unneeded instances) conservatively to keep the system stable.</span></span> <span data-ttu-id="f5d11-199">Eine einfache Möglichkeit, dies zu implementieren, besteht darin, den kühl Zeitraum festzulegen. Dies ist die Zeit, die zwischen Skalierungs Vorgängen gewartet werden soll, auf fünf Minuten für das Hinzufügen von Ressourcen und bis zu 15 Minuten zum Entfernen von Instanzen.</span><span class="sxs-lookup"><span data-stu-id="f5d11-199">A simple way to implement this is to set the cool down period, which is the time to wait between scaling operations, to five minutes for adding resources and up to 15 minutes for removing instances.</span></span>

## <a name="built-in-retry-in-services"></a><span data-ttu-id="f5d11-200">Integrierter Wiederholungsversuch in Diensten</span><span class="sxs-lookup"><span data-stu-id="f5d11-200">Built-in retry in services</span></span>

<span data-ttu-id="f5d11-201">Wir haben empfohlen, programmatische Wiederholungs Vorgänge in einem früheren Abschnitt zu implementieren.</span><span class="sxs-lookup"><span data-stu-id="f5d11-201">We encouraged the best practice of implementing programmatic retry operations in an earlier section.</span></span> <span data-ttu-id="f5d11-202">Beachten Sie, dass viele Azure-Dienste und die zugehörigen Client-sdken auch Wiederholungs Mechanismen beinhalten.</span><span class="sxs-lookup"><span data-stu-id="f5d11-202">Keep in mind that many Azure services and their corresponding client SDKs also include retry mechanisms.</span></span> <span data-ttu-id="f5d11-203">In der folgenden Liste sind die Wiederholungs Funktionen in den vielen Azure-Diensten zusammengefasst, die in diesem Buch erläutert werden:</span><span class="sxs-lookup"><span data-stu-id="f5d11-203">The following list summarizes retry features in the many of the Azure services that are discussed in this book:</span></span>

- <span data-ttu-id="f5d11-204">*Azure Cosmos DB.*</span><span class="sxs-lookup"><span data-stu-id="f5d11-204">*Azure Cosmos DB.*</span></span> <span data-ttu-id="f5d11-205">Die <xref:Microsoft.Azure.Documents.Client.DocumentClient>-Klasse aus der Client-API gibt automatisch fehlgeschlagene Versuche zurück.</span><span class="sxs-lookup"><span data-stu-id="f5d11-205">The <xref:Microsoft.Azure.Documents.Client.DocumentClient> class from the client API automatically retires failed attempts.</span></span> <span data-ttu-id="f5d11-206">Die Anzahl der Wiederholungen und die maximale Wartezeit sind konfigurierbar.</span><span class="sxs-lookup"><span data-stu-id="f5d11-206">The number of retries and maximum wait time are configurable.</span></span> <span data-ttu-id="f5d11-207">Von der Client-API ausgelöste Ausnahmen sind entweder Anforderungen, die die Wiederholungs Richtlinie überschreiten, oder nicht vorübergehende Fehler.</span><span class="sxs-lookup"><span data-stu-id="f5d11-207">Exceptions thrown by the client API are either requests that exceed the retry policy or non-transient errors.</span></span>

- <span data-ttu-id="f5d11-208">*Azure Redis Cache.*</span><span class="sxs-lookup"><span data-stu-id="f5d11-208">*Azure Redis Cache.*</span></span> <span data-ttu-id="f5d11-209">Der redis stackexchange-Client verwendet eine Verbindungs-Manager-Klasse, die Wiederholungs Versuche für fehlgeschlagene Versuche einschließt.</span><span class="sxs-lookup"><span data-stu-id="f5d11-209">The Redis StackExchange client uses a connection manager class that includes retries on failed attempts.</span></span> <span data-ttu-id="f5d11-210">Die Anzahl der Wiederholungs Versuche, die spezifische Wiederholungs Richtlinie und die Wartezeit sind alle konfigurierbar.</span><span class="sxs-lookup"><span data-stu-id="f5d11-210">The number of retries, specific retry policy and wait time are all configurable.</span></span>

- <span data-ttu-id="f5d11-211">*Azure Service Bus.*</span><span class="sxs-lookup"><span data-stu-id="f5d11-211">*Azure Service Bus.*</span></span> <span data-ttu-id="f5d11-212">Der Service Bus Client stellt eine [retrypolicy-Klasse](xref:Microsoft.ServiceBus.RetryPolicy) zur Verfügung, die mit einem Backoff-Intervall, einer Wiederholungs Anzahl und <xref:Microsoft.ServiceBus.RetryExponential.TerminationTimeBuffer>konfiguriert werden kann, die die maximale Zeit angibt, die ein Vorgang dauern kann.</span><span class="sxs-lookup"><span data-stu-id="f5d11-212">The Service Bus client exposes a [RetryPolicy class](xref:Microsoft.ServiceBus.RetryPolicy) that can be configured with a back-off interval, retry count, and <xref:Microsoft.ServiceBus.RetryExponential.TerminationTimeBuffer>, which specifies the maximum time an operation can take.</span></span> <span data-ttu-id="f5d11-213">Die Standard Richtlinie ist neun maximale Wiederholungs Versuche mit einem Backoff-Zeitraum von 30 Sekunden zwischen den versuchen.</span><span class="sxs-lookup"><span data-stu-id="f5d11-213">The default policy is nine maximum retry attempts with a 30-second backoff period between attempts.</span></span>

- <span data-ttu-id="f5d11-214">*Azure SQL-Datenbank.*</span><span class="sxs-lookup"><span data-stu-id="f5d11-214">*Azure SQL Database.*</span></span> <span data-ttu-id="f5d11-215">Wiederholungs Unterstützung wird bei Verwendung der [Entity Framework Core](https://docs.microsoft.com/ef/core/miscellaneous/connection-resiliency) Bibliothek bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="f5d11-215">Retry support is provided when using the [Entity Framework Core](https://docs.microsoft.com/ef/core/miscellaneous/connection-resiliency) library.</span></span>

- <span data-ttu-id="f5d11-216">*Azure Storage.*</span><span class="sxs-lookup"><span data-stu-id="f5d11-216">*Azure Storage.*</span></span> <span data-ttu-id="f5d11-217">Die Speicher Client Bibliothek unterstützt Wiederholungs Vorgänge.</span><span class="sxs-lookup"><span data-stu-id="f5d11-217">The storage client library support retry operations.</span></span> <span data-ttu-id="f5d11-218">Die Strategien variieren in Azure Storage-Tabellen,-BLOB-und-Warteschlangen.</span><span class="sxs-lookup"><span data-stu-id="f5d11-218">The strategies vary across Azure storage tables, blobs, and queues.</span></span> <span data-ttu-id="f5d11-219">Außerdem wechseln Alternative Wiederholungen zwischen primären und sekundären Speicherdienst Standorten, wenn das Feature für die georedundanz aktiviert ist.</span><span class="sxs-lookup"><span data-stu-id="f5d11-219">As well, alternate retries switch between primary and secondary storage services locations when the geo-redundancy feature is enabled.</span></span>

- <span data-ttu-id="f5d11-220">*Azure-Event Hubs.*</span><span class="sxs-lookup"><span data-stu-id="f5d11-220">*Azure Event Hubs.*</span></span> <span data-ttu-id="f5d11-221">Die Event Hub-Client Bibliothek verfügt über eine retrypolicy-Eigenschaft, die eine konfigurierbare exponentielle Backoff-Funktion enthält.</span><span class="sxs-lookup"><span data-stu-id="f5d11-221">The Event Hub client library features a RetryPolicy property, which includes a configurable exponential backoff feature.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="f5d11-222">[Zurück](application-resiliency-patterns.md)
>[Weiter](resilient-communications.md)</span><span class="sxs-lookup"><span data-stu-id="f5d11-222">[Previous](application-resiliency-patterns.md)
[Next](resilient-communications.md)</span></span>
