---
title: Azure-Sicherheit für cloudnative Apps
description: Architektur von Cloud Native .NET-Apps für Azure | Azure Security für native Cloud-Apps
ms.date: 06/30/2019
ms.openlocfilehash: 13b5ad7a883a83014913fa0a6a020610c28c524f
ms.sourcegitcommit: e3cbf26d67f7e9286c7108a2752804050762d02d
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 04/09/2020
ms.locfileid: "80989141"
---
# <a name="azure-security-for-cloud-native-apps"></a><span data-ttu-id="9ec09-103">Azure-Sicherheit für cloudnative Apps</span><span class="sxs-lookup"><span data-stu-id="9ec09-103">Azure security for cloud-native apps</span></span>

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

<span data-ttu-id="9ec09-104">Cloud-native Anwendungen können einfacher und schwieriger zu sichern sein als herkömmliche Anwendungen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-104">Cloud-native applications can be both easier and more difficult to secure than traditional applications.</span></span> <span data-ttu-id="9ec09-105">Auf der anderen Seite müssen Sie mehr kleinere Anwendungen sichern und mehr Energie für den Aufbau der Sicherheitsinfrastruktur aufwenden.</span><span class="sxs-lookup"><span data-stu-id="9ec09-105">On the downside, you need to secure more smaller applications and dedicate more energy to build out the security infrastructure.</span></span> <span data-ttu-id="9ec09-106">Die Heterogenität der Programmiersprachen und -stile in den meisten Dienstbereitstellungen bedeutet auch, dass Sie den Security Bulletins vieler verschiedener Anbieter mehr Aufmerksamkeit schenken müssen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-106">The heterogeneous nature of programming languages and styles in most service deployments also means you need to pay more attention to security bulletins from many different providers.</span></span>

<span data-ttu-id="9ec09-107">Auf der anderen Seite begrenzen kleinere Dienste, die jeweils über einen eigenen Datenspeicher verfügen, den Umfang eines Angriffs.</span><span class="sxs-lookup"><span data-stu-id="9ec09-107">On the flip side, smaller services, each with their own data store, limit the scope of an attack.</span></span> <span data-ttu-id="9ec09-108">Wenn ein Angreifer ein System kompromittiert, ist es für den Angreifer wahrscheinlich schwieriger, den Sprung zu einem anderen System zu machen, als es in einer monolithischen Anwendung der Fall ist.</span><span class="sxs-lookup"><span data-stu-id="9ec09-108">If an attacker compromises one system, it's probably more difficult for the attacker to make the jump to another system than it is in a monolithic application.</span></span> <span data-ttu-id="9ec09-109">Prozessgrenzen sind starke Grenzen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-109">Process boundaries are strong boundaries.</span></span> <span data-ttu-id="9ec09-110">Wenn eine Datenbanksicherung ausläuft, ist der Schaden außerdem begrenzter, da diese Datenbank nur eine Teilmenge von Daten enthält und wahrscheinlich keine personenbezogenen Daten enthält.</span><span class="sxs-lookup"><span data-stu-id="9ec09-110">Also, if a database backup leaks, then the damage is more limited, as that database contains only a subset of data and is unlikely to contain personal data.</span></span>

## <a name="threat-modeling"></a><span data-ttu-id="9ec09-111">Bedrohungsmodellierung</span><span class="sxs-lookup"><span data-stu-id="9ec09-111">Threat modeling</span></span>

<span data-ttu-id="9ec09-112">Egal, ob die Vorteile die Nachteile von Cloud-nativen Anwendungen überwiegen, die gleiche ganzheitliche Sicherheitsmentalität muss beachtet werden.</span><span class="sxs-lookup"><span data-stu-id="9ec09-112">No matter if the advantages outweigh the disadvantages of cloud-native applications, the same holistic security mindset must be followed.</span></span> <span data-ttu-id="9ec09-113">Sicherheit und sicheres Denken müssen Teil jedes Schritts der Entwicklungs- und Betriebsgeschichte sein.</span><span class="sxs-lookup"><span data-stu-id="9ec09-113">Security and secure thinking must be part of every step of the development and operations story.</span></span> <span data-ttu-id="9ec09-114">Bei der Planung einer Anwendung stellen Sie Fragen wie:</span><span class="sxs-lookup"><span data-stu-id="9ec09-114">When planning an application ask questions like:</span></span>

- <span data-ttu-id="9ec09-115">Welche Auswirkungen würde der Verlust dieser Daten haben?</span><span class="sxs-lookup"><span data-stu-id="9ec09-115">What would be the impact of this data being lost?</span></span>
- <span data-ttu-id="9ec09-116">Wie können wir den Schaden begrenzen, der durch fehlerhafte Daten verursacht wird, die in diesen Dienst injiziert werden?</span><span class="sxs-lookup"><span data-stu-id="9ec09-116">How can we limit the damage from bad data being injected into this service?</span></span>
- <span data-ttu-id="9ec09-117">Wer sollte Zugriff auf diese Daten haben?</span><span class="sxs-lookup"><span data-stu-id="9ec09-117">Who should have access to this data?</span></span>
- <span data-ttu-id="9ec09-118">Gibt es Prüfungsrichtlinien rund um den Entwicklungs- und Freigabeprozess?</span><span class="sxs-lookup"><span data-stu-id="9ec09-118">Are there auditing policies in place around the development and release process?</span></span>

<span data-ttu-id="9ec09-119">Alle diese Fragen sind Teil eines Prozesses namens [Bedrohungsmodellierung](https://docs.microsoft.com/azure/security/azure-security-threat-modeling-tool).</span><span class="sxs-lookup"><span data-stu-id="9ec09-119">All these questions are part of a process called [threat modeling](https://docs.microsoft.com/azure/security/azure-security-threat-modeling-tool).</span></span> <span data-ttu-id="9ec09-120">Dieser Prozess versucht, die Frage zu beantworten, welche Bedrohungen es für das System gibt, wie wahrscheinlich die Bedrohungen sind und welche potenziellen Schäden dadurch entstehen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-120">This process tries to answer the question of what threats there are to the system, how likely the threats are, and the potential damage from them.</span></span>

<span data-ttu-id="9ec09-121">Sobald die Liste der Bedrohungen erstellt wurde, müssen Sie entscheiden, ob sie es wert sind, zu mildern.</span><span class="sxs-lookup"><span data-stu-id="9ec09-121">Once the list of threats has been established, you need to decide whether they're worth mitigating.</span></span> <span data-ttu-id="9ec09-122">Manchmal ist eine Bedrohung so unwahrscheinlich und teuer zu planen, dass es sich nicht lohnt, Energie dafür auszugeben.</span><span class="sxs-lookup"><span data-stu-id="9ec09-122">Sometimes a threat is so unlikely and expensive to plan for that it isn't worth spending energy on it.</span></span> <span data-ttu-id="9ec09-123">Beispielsweise könnte ein Akteur auf staatlicher Ebene Änderungen in das Design eines Prozesses einfügen, der von Millionen von Geräten verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="9ec09-123">For instance, some state level actor could inject changes into the design of a process that is used by millions of devices.</span></span> <span data-ttu-id="9ec09-124">Anstatt nun einen bestimmten Codeinder in [Ring 3](https://en.wikipedia.org/wiki/Protection_ring)auszuführen, wird dieser Code in Ring 0 ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="9ec09-124">Now, instead of running a certain piece of code in [Ring 3](https://en.wikipedia.org/wiki/Protection_ring), that code is run in Ring 0.</span></span> <span data-ttu-id="9ec09-125">Dies ermöglicht einen Exploit, der den Hypervisor umgehen und den Angriffscode auf den Bare-Metal-Computern ausführen kann, und ermöglicht Angriffe auf alle virtuellen Maschinen, die auf dieser Hardware ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="9ec09-125">This allows an exploit that can bypass the hypervisor and run the attack code on the bare metal machines, allowing attacks on all the virtual machines that are running on that hardware.</span></span>

<span data-ttu-id="9ec09-126">Die veränderten Prozessoren sind ohne Mikroskop und fortgeschrittene Kenntnisse über das Silizium-Design dieses Prozessors schwer zu erkennen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-126">The altered processors are difficult to detect without a microscope and advanced knowledge of the on silicon design of that processor.</span></span> <span data-ttu-id="9ec09-127">Dieses Szenario ist unwahrscheinlich und teuer zu mildern, so dass wahrscheinlich kein Bedrohungsmodell würde empfehlen, Exploit-Schutz für sie zu bauen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-127">This scenario is unlikely to happen and expensive to mitigate, so probably no threat model would recommend building exploit protection for it.</span></span>

<span data-ttu-id="9ec09-128">Wahrscheinlichere Bedrohungen, wie z. `Id` B. fehlerhafte Zugriffskontrollen, die inkrementelle Angriffe (ersetzen `Id=2` durch `Id=3` in der URL) oder SQL-Injektion ermöglichen, sind attraktiver, um Schutz zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-128">More likely threats, such as broken access controls permitting `Id` incrementing attacks (replacing `Id=2` with `Id=3` in the URL) or SQL injection, are more attractive to build protections against.</span></span> <span data-ttu-id="9ec09-129">Die Abschwächungen für diese Bedrohungen sind durchaus vernünftig zu bauen und zu verhindern peinliche Sicherheitslücken, die den Ruf des Unternehmens zu schmieren.</span><span class="sxs-lookup"><span data-stu-id="9ec09-129">The mitigations for these threats are quite reasonable to build and prevent embarrassing security holes that smear the company's reputation.</span></span>

## <a name="principle-of-least-privilege"></a><span data-ttu-id="9ec09-130">Prinzip der geringsten Rechte</span><span class="sxs-lookup"><span data-stu-id="9ec09-130">Principle of least privilege</span></span>

<span data-ttu-id="9ec09-131">Eine der Gründungsideen in der Computersicherheit ist das Prinzip des geringsten Privilegs (POLP).</span><span class="sxs-lookup"><span data-stu-id="9ec09-131">One of the founding ideas in computer security is the Principle of Least Privilege (POLP).</span></span> <span data-ttu-id="9ec09-132">Es ist eigentlich eine grundlegende Idee in den meisten jede Form von Sicherheit, sei es digital oder physisch.</span><span class="sxs-lookup"><span data-stu-id="9ec09-132">It's actually a foundational idea in most any form of security be it digital or physical.</span></span> <span data-ttu-id="9ec09-133">Kurz gesagt, das Prinzip ist, dass jeder Benutzer oder Prozess über die geringste Anzahl von Rechten verfügen sollte, die für die Ausführung seiner Aufgabe möglich sind.</span><span class="sxs-lookup"><span data-stu-id="9ec09-133">In short, the principle is that any user or process should have the smallest number of rights possible to execute its task.</span></span>

<span data-ttu-id="9ec09-134">Denken Sie beispielsweise an die Kassenprüfer einer Bank: Der Zugang zum Tresor ist eine ungewöhnliche Aktivität.</span><span class="sxs-lookup"><span data-stu-id="9ec09-134">As an example, think of the tellers at a bank: accessing the safe is an uncommon activity.</span></span> <span data-ttu-id="9ec09-135">Also, der durchschnittliche Erzähler kann den Safe nicht selbst öffnen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-135">So, the average teller can't open the safe themselves.</span></span> <span data-ttu-id="9ec09-136">Um Zugriff zu erhalten, müssen sie ihre Anforderung über einen Bankmanager eskalieren, der zusätzliche Sicherheitsüberprüfungen durchführt.</span><span class="sxs-lookup"><span data-stu-id="9ec09-136">To gain access, they need to escalate their request through a bank manager, who performs additional security checks.</span></span>

<span data-ttu-id="9ec09-137">In einem Computersystem sind ein fantastisches Beispiel die Rechte eines Benutzers, der eine Verbindung zu einer Datenbank herstellt.</span><span class="sxs-lookup"><span data-stu-id="9ec09-137">In a computer system, a fantastic example is the rights of a user connecting to a database.</span></span> <span data-ttu-id="9ec09-138">In vielen Fällen gibt es ein einzelnes Benutzerkonto, das sowohl zum Erstellen der Datenbankstruktur als auch zum Ausführen der Anwendung verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="9ec09-138">In many cases, there's a single user account used to both build the database structure and run the application.</span></span> <span data-ttu-id="9ec09-139">Außer in extremen Fällen benötigt das Konto, auf dem die Anwendung ausgeführt wird, nicht die Möglichkeit, Schemainformationen zu aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="9ec09-139">Except in extreme cases, the account running the application doesn't need the ability to update schema information.</span></span> <span data-ttu-id="9ec09-140">Es sollten mehrere Konten vorhanden sein, die unterschiedliche Berechtigungsebenen bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-140">There should be several accounts that provide different levels of privilege.</span></span> <span data-ttu-id="9ec09-141">Die Anwendung sollte nur die Berechtigungsstufe verwenden, die Lese- und Schreibzugriff auf die Daten in den Tabellen gewährt.</span><span class="sxs-lookup"><span data-stu-id="9ec09-141">The application should only use the permission level that grants read and write access to the data in the tables.</span></span> <span data-ttu-id="9ec09-142">Diese Art von Schutz würde Angriffe eliminieren, die darauf abzielten, Datenbanktabellen zu löschen oder böswillige Trigger einzuführen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-142">This kind of protection would eliminate attacks that aimed to drop database tables or introduce malicious triggers.</span></span>

<span data-ttu-id="9ec09-143">Fast jeder Teil des Erstellens einer Cloud-nativen Anwendung kann davon profitieren, sich an das Prinzip der geringsten Berechtigungen zu erinnern.</span><span class="sxs-lookup"><span data-stu-id="9ec09-143">Almost every part of building a cloud-native application can benefit from remembering the principle of least privilege.</span></span> <span data-ttu-id="9ec09-144">Sie finden es im Spiel beim Einrichten von Firewalls, Netzwerksicherheitsgruppen, Rollen und Bereichen in der rollenbasierten Zugriffssteuerung (RBAC).</span><span class="sxs-lookup"><span data-stu-id="9ec09-144">You can find it at play when setting up firewalls, network security groups, roles, and scopes in Role-based access control (RBAC).</span></span>

## <a name="penetration-testing"></a><span data-ttu-id="9ec09-145">Penetrationstests</span><span class="sxs-lookup"><span data-stu-id="9ec09-145">Penetration testing</span></span>

<span data-ttu-id="9ec09-146">Mit zunehmender Geschwindigkeit von Anwendungen steigt die Anzahl der Angriffsvektoren.</span><span class="sxs-lookup"><span data-stu-id="9ec09-146">As applications become more complicated the number of attack vectors increases at an alarming rate.</span></span> <span data-ttu-id="9ec09-147">Die Bedrohungsmodellierung ist insofern fehlerhaft, als sie tendenziell von denselben Personen ausgeführt wird, die das System erstellen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-147">Threat modeling is flawed in that it tends to be executed by the same people building the system.</span></span> <span data-ttu-id="9ec09-148">Auf die gleiche Weise, wie viele Entwickler Schwierigkeiten haben, sich Benutzerinteraktionen vorzustellen und dann unbrauchbare Benutzeroberflächen zu erstellen, haben die meisten Entwickler Schwierigkeiten, jeden Angriffsvektor zu sehen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-148">In the same way that many developers have trouble envisioning user interactions and then build unusable user interfaces, most developers have difficulty seeing every attack vector.</span></span> <span data-ttu-id="9ec09-149">Es ist auch möglich, dass die Entwickler, die das System bauen, nicht gut in Angriffsmethoden versiert sind und etwas Entscheidendes verpassen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-149">It's also possible that the developers building the system aren't well versed in attack methodologies and miss something crucial.</span></span>

<span data-ttu-id="9ec09-150">Penetrationstests oder "Stifttests" beinhalten das Einziehen externer Akteure, um zu versuchen, das System anzugreifen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-150">Penetration testing or "pen testing" involves bringing in external actors to attempt to attack the system.</span></span> <span data-ttu-id="9ec09-151">Bei diesen Angreifern kann es sich um ein externes Beratungsunternehmen oder andere Entwickler mit guten Sicherheitskenntnissen aus einem anderen Teil des Unternehmens handeln.</span><span class="sxs-lookup"><span data-stu-id="9ec09-151">These attackers may be an external consulting company or other developers with good security knowledge from another part of the business.</span></span> <span data-ttu-id="9ec09-152">Sie erhalten einen Freibrief, um zu versuchen, das System zu untergraben.</span><span class="sxs-lookup"><span data-stu-id="9ec09-152">They're given carte blanche to attempt to subvert the system.</span></span> <span data-ttu-id="9ec09-153">Häufig finden sie umfangreiche Sicherheitslücken, die gepatcht werden müssen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-153">Frequently, they'll find extensive security holes that need to be patched.</span></span> <span data-ttu-id="9ec09-154">Manchmal ist der Angriffsvektor etwas völlig Unerwartetes wie die Ausnutzung eines Phishing-Angriffs gegen den CEO.</span><span class="sxs-lookup"><span data-stu-id="9ec09-154">Sometimes the attack vector will be something totally unexpected like exploiting a phishing attack against the CEO.</span></span>

<span data-ttu-id="9ec09-155">Azure selbst wird ständig von einem [Hackerteam innerhalb von Microsoft](https://azure.microsoft.com/resources/videos/red-vs-blue-internal-security-penetration-testing-of-microsoft-azure/)angegriffen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-155">Azure itself is constantly undergoing attacks from a [team of hackers inside Microsoft](https://azure.microsoft.com/resources/videos/red-vs-blue-internal-security-penetration-testing-of-microsoft-azure/).</span></span> <span data-ttu-id="9ec09-156">Im Laufe der Jahre waren sie die ersten, die Dutzende potenziell katastrophaler Angriffsvektoren gefunden und geschlossen haben, bevor sie extern ausgenutzt werden können.</span><span class="sxs-lookup"><span data-stu-id="9ec09-156">Over the years, they've been the first to find dozens of potentially catastrophic attack vectors, closing them before they can be exploited externally.</span></span> <span data-ttu-id="9ec09-157">Je verlockender ein Ziel ist, desto wahrscheinlicher ist es, dass ewige Akteure versuchen, es auszunutzen, und es gibt ein paar Ziele auf der Welt, die verlockender sind als Azure.</span><span class="sxs-lookup"><span data-stu-id="9ec09-157">The more tempting a target, the more likely that eternal actors will attempt to exploit it and there are a few targets in the world more tempting than Azure.</span></span>

## <a name="monitoring"></a><span data-ttu-id="9ec09-158">Überwachung</span><span class="sxs-lookup"><span data-stu-id="9ec09-158">Monitoring</span></span>

<span data-ttu-id="9ec09-159">Sollte ein Angreifer versuchen, in eine Anwendung einzudringen, sollte davor gewarnt werden.</span><span class="sxs-lookup"><span data-stu-id="9ec09-159">Should an attacker attempt to penetrate an application, there should be some warning of it.</span></span> <span data-ttu-id="9ec09-160">Häufig können Angriffe erkannt werden, indem die Protokolle von Diensten untersucht werden.</span><span class="sxs-lookup"><span data-stu-id="9ec09-160">Frequently, attacks can be spotted by examining the logs from services.</span></span> <span data-ttu-id="9ec09-161">Angriffe hinterlassen verräterische Zeichen, die entdeckt werden können, bevor sie erfolgreich sind.</span><span class="sxs-lookup"><span data-stu-id="9ec09-161">Attacks leave telltale signs that can be spotted before they succeed.</span></span> <span data-ttu-id="9ec09-162">Beispielsweise stellt ein Angreifer, der versucht, ein Kennwort zu erraten, viele Anforderungen an ein Anmeldesystem.</span><span class="sxs-lookup"><span data-stu-id="9ec09-162">For instance, an attacker attempting to guess a password will make many requests to a login system.</span></span> <span data-ttu-id="9ec09-163">Die Überwachung rund um das Anmeldesystem kann seltsame Muster erkennen, die nicht mit dem typischen Zugriffsmuster in Einklang stehen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-163">Monitoring around the login system can detect weird patterns that are out of line with the typical access pattern.</span></span> <span data-ttu-id="9ec09-164">Diese Überwachung kann in eine Warnung umgewandelt werden, die wiederum eine Betriebsperson warnen kann, eine Art Gegenmaßnahme zu aktivieren.</span><span class="sxs-lookup"><span data-stu-id="9ec09-164">This monitoring can be turned into an alert that can, in turn, alert an operations person to activate some sort of countermeasure.</span></span> <span data-ttu-id="9ec09-165">Ein ausgereiftes Überwachungssystem kann sogar auf der Grundlage dieser Abweichungen maßnahmen, um proaktiv Regeln hinzuzufügen, um Anforderungen zu blockieren oder Antworten zu drosseln.</span><span class="sxs-lookup"><span data-stu-id="9ec09-165">A highly mature monitoring system might even take action based on these deviations proactively adding rules to block requests or throttle responses.</span></span>

## <a name="securing-the-build"></a><span data-ttu-id="9ec09-166">Sicherung des Builds</span><span class="sxs-lookup"><span data-stu-id="9ec09-166">Securing the build</span></span>

<span data-ttu-id="9ec09-167">Ein Ort, an dem Sicherheit oft übersehen wird, ist der Buildprozess.</span><span class="sxs-lookup"><span data-stu-id="9ec09-167">One place where security is often overlooked is around the build process.</span></span> <span data-ttu-id="9ec09-168">Der Build sollte nicht nur Sicherheitsüberprüfungen ausführen, z. B. das Scannen nach unsicherem Code oder eingecheckten Anmeldeinformationen, sondern auch der Build selbst sollte sicher sein.</span><span class="sxs-lookup"><span data-stu-id="9ec09-168">Not only should the build run security checks, such as scanning for insecure code or checked-in credentials, but the build itself should be secure.</span></span> <span data-ttu-id="9ec09-169">Wenn der Buildserver kompromittiert ist, bietet er einen fantastischen Vektor für die Einführung von beliebigem Code in das Produkt.</span><span class="sxs-lookup"><span data-stu-id="9ec09-169">If the build server is compromised, then it provides a fantastic vector for introducing arbitrary code into the product.</span></span>

<span data-ttu-id="9ec09-170">Stellen Sie sich vor, ein Angreifer möchte die Passwörter von Personen stehlen, die sich bei einer Webanwendung anmelden.</span><span class="sxs-lookup"><span data-stu-id="9ec09-170">Imagine that an attacker is looking to steal the passwords of people signing into a web application.</span></span> <span data-ttu-id="9ec09-171">Sie könnten einen Buildschritt einführen, der den ausgecheckten Code ändert, um jede Anmeldeanforderung auf einem anderen Server zu spiegeln.</span><span class="sxs-lookup"><span data-stu-id="9ec09-171">They could introduce a build step that modifies the checked-out code to mirror any login request to another server.</span></span> <span data-ttu-id="9ec09-172">Wenn der Code das nächste Mal den Build durchläuft, wird er im Hintergrund aktualisiert.</span><span class="sxs-lookup"><span data-stu-id="9ec09-172">The next time code goes through the build, it's silently updated.</span></span> <span data-ttu-id="9ec09-173">Das Scannen der Quellcode-Sicherheitsanfälligkeit wird dies nicht abfangen, da er vor dem Build ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="9ec09-173">The source code vulnerability scanning won't catch this as it runs before the build.</span></span> <span data-ttu-id="9ec09-174">Ebenso wird es niemand in einer Codeüberprüfung abfangen, da die Buildschritte auf dem Buildserver leben.</span><span class="sxs-lookup"><span data-stu-id="9ec09-174">Equally, nobody will catch it in a code review because the build steps live on the build server.</span></span> <span data-ttu-id="9ec09-175">Der ausgenutzte Code wird in die Produktion gehen, wo er Passwörter ernten kann.</span><span class="sxs-lookup"><span data-stu-id="9ec09-175">The exploited code will go to production where it can harvest passwords.</span></span> <span data-ttu-id="9ec09-176">Wahrscheinlich gibt es kein Überwachungsprotokoll für die Änderungen des Buildprozesses oder zumindest niemanden, der die Überwachung überwacht.</span><span class="sxs-lookup"><span data-stu-id="9ec09-176">Probably there's no audit log of the build process changes, or at least nobody monitoring the audit.</span></span>

<span data-ttu-id="9ec09-177">Dies ist ein perfektes Beispiel für ein scheinbar niedriges Wertziel, das verwendet werden kann, um in das System einzubrechen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-177">This is a perfect example of a seemingly low value target that can be used to break into the system.</span></span> <span data-ttu-id="9ec09-178">Sobald ein Angreifer den Umfang des Systems durchbricht, kann er damit beginnen, Wege zu finden, um seine Berechtigungen so zu erhöhen, dass er überall, wo er möchte, echten Schaden anrichten kann.</span><span class="sxs-lookup"><span data-stu-id="9ec09-178">Once an attacker breaches the perimeter of the system, they can start working on finding ways to elevate their permissions to the point that they can cause real harm anywhere they like.</span></span>

## <a name="building-secure-code"></a><span data-ttu-id="9ec09-179">Erstellen sicherer Code</span><span class="sxs-lookup"><span data-stu-id="9ec09-179">Building secure code</span></span>

<span data-ttu-id="9ec09-180">.NET Framework ist bereits ein ziemlich sicheres Framework.</span><span class="sxs-lookup"><span data-stu-id="9ec09-180">.NET Framework is already a quite secure framework.</span></span> <span data-ttu-id="9ec09-181">Es vermeidet einige der Fallstricke von nicht verwaltetem Code, z. B. das Gehen von den Enden von Arrays.</span><span class="sxs-lookup"><span data-stu-id="9ec09-181">It avoids some of the pitfalls of unmanaged code, such as walking off the ends of arrays.</span></span> <span data-ttu-id="9ec09-182">Es wird aktiv daran gearbeitet, Sicherheitslücken zu beheben, wenn sie entdeckt werden.</span><span class="sxs-lookup"><span data-stu-id="9ec09-182">Work is actively done to fix security holes as they're discovered.</span></span> <span data-ttu-id="9ec09-183">Es gibt sogar ein [Bug-Bounty-Programm,](https://www.microsoft.com/msrc/bounty) das Forscher bezahlt, Probleme im Framework zu finden und sie zu melden, anstatt sie auszunutzen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-183">There's even a [bug bounty program](https://www.microsoft.com/msrc/bounty) that pays researchers to find issues in the framework and report them instead of exploiting them.</span></span>

<span data-ttu-id="9ec09-184">Es gibt viele Möglichkeiten, .NET-Code sicherer zu machen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-184">There are many ways to make .NET code more secure.</span></span> <span data-ttu-id="9ec09-185">Die Beachtung der Richtlinien, wie z. B. die Richtlinien für die [sichere Codierung für .NET,](https://docs.microsoft.com/dotnet/standard/security/secure-coding-guidelines) ist ein angemessener Schritt, um sicherzustellen, dass der Code von Grund auf sicher ist.</span><span class="sxs-lookup"><span data-stu-id="9ec09-185">Following guidelines such as the [Secure coding guidelines for .NET](https://docs.microsoft.com/dotnet/standard/security/secure-coding-guidelines) article is a reasonable step to take to ensure that the code is secure from the ground up.</span></span> <span data-ttu-id="9ec09-186">Die [OWASP Top 10](https://owasp.org/www-project-top-ten/) ist ein weiterer unschätzbarer Leitfaden zum Erstellen von sicherem Code.</span><span class="sxs-lookup"><span data-stu-id="9ec09-186">The [OWASP top 10](https://owasp.org/www-project-top-ten/) is another invaluable guide to build secure code.</span></span>

<span data-ttu-id="9ec09-187">Der Buildprozess ist ein guter Ort, um Scan-Tools zu setzen, um Probleme im Quellcode zu erkennen, bevor sie in die Produktion gelangen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-187">The build process is a good place to put scanning tools to detect problems in source code before they make it into production.</span></span> <span data-ttu-id="9ec09-188">Die meisten Projekte hängen von einigen anderen Paketen ab.</span><span class="sxs-lookup"><span data-stu-id="9ec09-188">Most every project has dependencies on some other packages.</span></span> <span data-ttu-id="9ec09-189">Ein Tool, das nach veralteten Paketen suchen kann, wird Probleme in einem nächtlichen Build fangen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-189">A tool that can scan for outdated packages will catch problems in a nightly build.</span></span> <span data-ttu-id="9ec09-190">Selbst beim Erstellen von Docker-Images ist es nützlich, zu überprüfen und sicherzustellen, dass das Basisabbild keine bekannten Schwachstellen aufweist.</span><span class="sxs-lookup"><span data-stu-id="9ec09-190">Even when building Docker images, it's useful to check and make sure that the base image doesn't have known vulnerabilities.</span></span> <span data-ttu-id="9ec09-191">Eine andere Sache zu überprüfen ist, dass niemand versehentlich Anmeldeinformationen eingecheckt hat.</span><span class="sxs-lookup"><span data-stu-id="9ec09-191">Another thing to check is that nobody has accidentally checked in credentials.</span></span>

## <a name="built-in-security"></a><span data-ttu-id="9ec09-192">Integrierte Sicherheit</span><span class="sxs-lookup"><span data-stu-id="9ec09-192">Built-in security</span></span>

<span data-ttu-id="9ec09-193">Azure wurde entwickelt, um die Benutzerfreundlichkeit und Sicherheit für die Mehrheit der Benutzer in Einklang zu bringen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-193">Azure is designed to balance usability and security for the majority of users.</span></span> <span data-ttu-id="9ec09-194">Verschiedene Benutzer haben unterschiedliche Sicherheitsanforderungen, daher müssen sie ihren Ansatz für die Cloudsicherheit optimieren.</span><span class="sxs-lookup"><span data-stu-id="9ec09-194">Different users are going to have different security requirements, so they need to fine-tune their approach to cloud security.</span></span> <span data-ttu-id="9ec09-195">Microsoft veröffentlicht viele Sicherheitsinformationen im [Trust Center](https://azure.microsoft.com/support/trust-center/).</span><span class="sxs-lookup"><span data-stu-id="9ec09-195">Microsoft publishes a great deal of security information in the [Trust Center](https://azure.microsoft.com/support/trust-center/).</span></span> <span data-ttu-id="9ec09-196">Diese Ressource sollte die erste Anlaufstelle für Fachleute sein, die wissen möchten, wie die integrierten Technologien zur Eindämmung von Angriffen funktionieren.</span><span class="sxs-lookup"><span data-stu-id="9ec09-196">This resource should be the first stop for those professionals interested in understanding how the built-in attack mitigation technologies work.</span></span>

<span data-ttu-id="9ec09-197">Innerhalb des Azure-Portals ist der [Azure Advisor](https://azure.microsoft.com/services/advisor/) ein System, das ständig eine Umgebung scannt und Empfehlungen gibt.</span><span class="sxs-lookup"><span data-stu-id="9ec09-197">Within the Azure portal, the [Azure Advisor](https://azure.microsoft.com/services/advisor/) is a system that is constantly scanning an environment and making recommendations.</span></span> <span data-ttu-id="9ec09-198">Einige dieser Empfehlungen sollen Benutzern Geld sparen, andere sind jedoch dazu gedacht, potenziell unsichere Konfigurationen zu identifizieren, z. B. einen Speichercontainer für die Welt offen zu haben und nicht durch ein virtuelles Netzwerk geschützt zu sein.</span><span class="sxs-lookup"><span data-stu-id="9ec09-198">Some of these recommendations are designed to save users money, but others are designed to identify potentially insecure configurations, such as having a storage container open to the world and not protected by a Virtual Network.</span></span>

## <a name="azure-network-infrastructure"></a><span data-ttu-id="9ec09-199">Azure-Netzwerkinfrastruktur</span><span class="sxs-lookup"><span data-stu-id="9ec09-199">Azure network infrastructure</span></span>

<span data-ttu-id="9ec09-200">In einer lokalen Bereitstellungsumgebung wird viel Energie für den Aufbau von Netzwerken verwendet.</span><span class="sxs-lookup"><span data-stu-id="9ec09-200">In an on-premises deployment environment, a great deal of energy is dedicated to setting up networking.</span></span> <span data-ttu-id="9ec09-201">Das Einrichten von Routern, Switches und dergleichen ist eine komplizierte Arbeit.</span><span class="sxs-lookup"><span data-stu-id="9ec09-201">Setting up routers, switches, and the such is complicated work.</span></span> <span data-ttu-id="9ec09-202">Netzwerke ermöglichen es bestimmten Ressourcen, mit anderen Ressourcen zu sprechen und in einigen Fällen den Zugriff zu verhindern.</span><span class="sxs-lookup"><span data-stu-id="9ec09-202">Networks allow certain resources to talk to other resources and prevent access in some cases.</span></span> <span data-ttu-id="9ec09-203">Eine häufige Netzwerkregel besteht darin, den Zugriff auf die Produktionsumgebung aus der Entwicklungsumgebung zu beschränken, da ein halb entwickelter Codevorgang fehlerhaft ausgeführt wird und einen Datenbereich löscht.</span><span class="sxs-lookup"><span data-stu-id="9ec09-203">A frequent network rule is to restrict access to the production environment from the development environment on the off chance that a half-developed piece of code runs awry and deletes a swath of data.</span></span>

<span data-ttu-id="9ec09-204">Die meisten PaaS Azure-Ressourcen verfügen sofort nur über die einfachste und freizügigste Netzwerkeinrichtung.</span><span class="sxs-lookup"><span data-stu-id="9ec09-204">Out of the box, most PaaS Azure resources have only the most basic and permissive networking setup.</span></span> <span data-ttu-id="9ec09-205">Beispielsweise kann jeder im Internet auf einen App-Dienst zugreifen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-205">For instance, anybody on the Internet can access an app service.</span></span> <span data-ttu-id="9ec09-206">Neue SQL Server-Instanzen werden in der Regel eingeschränkt, sodass externe Parteien nicht darauf zugreifen können, aber die von Azure selbst verwendeten IP-Adressbereiche sind durch zulässig.</span><span class="sxs-lookup"><span data-stu-id="9ec09-206">New SQL Server instances typically come restricted, so that external parties can't access them, but the IP address ranges used by Azure itself are permitted through.</span></span> <span data-ttu-id="9ec09-207">Während der SQL-Server also vor externen Bedrohungen geschützt ist, muss ein Angreifer nur einen Azure-Bridgehead einrichten, von dem aus er Angriffe auf alle SQL-Instanzen in Azure starten kann.</span><span class="sxs-lookup"><span data-stu-id="9ec09-207">So, while the SQL server is protected from external threats, an attacker only needs to set up an Azure bridgehead from where they can launch attacks against all SQL instances on Azure.</span></span>

<span data-ttu-id="9ec09-208">Glücklicherweise können die meisten Azure-Ressourcen in einem virtuellen Azure-Netzwerk platziert werden, das eine detailliertere Zugriffssteuerung ermöglicht.</span><span class="sxs-lookup"><span data-stu-id="9ec09-208">Fortunately, most Azure resources can be placed into an Azure Virtual Network that allows finer grained access control.</span></span> <span data-ttu-id="9ec09-209">Ähnlich wie lokale Netzwerke private Netzwerke einrichten, die vor der weiteren Welt geschützt sind, sind virtuelle Netzwerke Inseln mit privaten IP-Adressen, die sich innerhalb des Azure-Netzwerks befinden.</span><span class="sxs-lookup"><span data-stu-id="9ec09-209">Similar to the way that on-premises networks establish private networks that are protected from the wider world, virtual networks are islands of private IP addresses that are located within the Azure network.</span></span>

<span data-ttu-id="9ec09-210">![Abbildung 10-1 Ein virtuelles Netzwerk in Azure](./media/virtual-network.png)
Abbildung**10-1**.</span><span class="sxs-lookup"><span data-stu-id="9ec09-210">![Figure 10-1 A virtual network in Azure](./media/virtual-network.png)
**Figure 10-1**.</span></span> <span data-ttu-id="9ec09-211">Ein virtuelles Netzwerk in Azure.</span><span class="sxs-lookup"><span data-stu-id="9ec09-211">A virtual network in Azure.</span></span>

<span data-ttu-id="9ec09-212">Auf die gleiche Weise, wie lokale Netzwerke über eine Firewall verfügen, die den Zugriff auf das Netzwerk regelt, können Sie eine ähnliche Firewall an der Grenze des virtuellen Netzwerks einrichten.</span><span class="sxs-lookup"><span data-stu-id="9ec09-212">In the same way that on-premises networks have a firewall governing access to the network, you can establish a similar firewall at the boundary of the virtual network.</span></span> <span data-ttu-id="9ec09-213">Standardmäßig können alle Ressourcen in einem virtuellen Netzwerk weiterhin mit dem Internet sprechen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-213">By default, all the resources on a virtual network can still talk to the Internet.</span></span> <span data-ttu-id="9ec09-214">Nur eingehende Verbindungen erfordern eine Art explizite Firewallausnahme.</span><span class="sxs-lookup"><span data-stu-id="9ec09-214">It's only incoming connections that require some form of explicit firewall exception.</span></span>

<span data-ttu-id="9ec09-215">Wenn das Netzwerk eingerichtet ist, können interne Ressourcen wie Speicherkonten so eingerichtet werden, dass nur Ressourcen, die sich ebenfalls im virtuellen Netzwerk befinden, auf den Zugriff zugreifen können.</span><span class="sxs-lookup"><span data-stu-id="9ec09-215">With the network established, internal resources like storage accounts can be set up to only allow for access by resources that are also on the Virtual Network.</span></span> <span data-ttu-id="9ec09-216">Diese Firewall bietet ein zusätzliches Maß an Sicherheit, wenn die Schlüssel für dieses Speicherkonto durchgesickert sind, könnten Angreifer keine Verbindung zu ihr herstellen, um die durchgesickerten Schlüssel auszunutzen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-216">This firewall provides an extra level of security, should the keys for that storage account be leaked, attackers wouldn't be able to connect to it to exploit the leaked keys.</span></span> <span data-ttu-id="9ec09-217">Dies ist ein weiteres Beispiel für das Prinzip der geringsten Privilegien.</span><span class="sxs-lookup"><span data-stu-id="9ec09-217">This is another example of the principle of least privilege.</span></span>

<span data-ttu-id="9ec09-218">Die Knoten in einem Azure Kubernetes-Cluster können wie andere Ressourcen, die mehr in Azure nativ sind, an einem virtuellen Netzwerk teilnehmen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-218">The nodes in an Azure Kubernetes cluster can participate in a virtual network just like other resources that are more native to Azure.</span></span> <span data-ttu-id="9ec09-219">Diese Funktionalität wird als [Azure Container Networking Interface](https://github.com/Azure/azure-container-networking/blob/master/docs/cni.md)bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="9ec09-219">This functionality is called [Azure Container Networking Interface](https://github.com/Azure/azure-container-networking/blob/master/docs/cni.md).</span></span> <span data-ttu-id="9ec09-220">Tatsächlich wird ein Subnetz innerhalb des virtuellen Netzwerks zugewiesen, dem virtuelle Maschinen und Containerabbilder zugeordnet sind.</span><span class="sxs-lookup"><span data-stu-id="9ec09-220">In effect, it allocates a subnet within the virtual network on which virtual machines and container images are allocated.</span></span>

<span data-ttu-id="9ec09-221">Wenn Sie den Weg der Veranschaulichung des Prinzips der geringsten Berechtigungen fortsetzen, muss nicht jede Ressource innerhalb eines virtuellen Netzwerks mit jeder anderen Ressource sprechen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-221">Continuing down the path of illustrating the principle of least privilege, not every resource within a Virtual Network needs to talk to every other resource.</span></span> <span data-ttu-id="9ec09-222">In einer Anwendung, die eine Web-API über ein Speicherkonto und eine SQL-Datenbank bereitstellt, ist es beispielsweise unwahrscheinlich, dass die Datenbank und das Speicherkonto miteinander sprechen müssen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-222">For instance, in an application that provides a web API over a storage account and a SQL database, it's unlikely that the database and the storage account need to talk to one another.</span></span> <span data-ttu-id="9ec09-223">Jede gemeinsame Nutzung von Daten zwischen ihnen würde über die Webanwendung gehen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-223">Any data sharing between them would go through the web application.</span></span> <span data-ttu-id="9ec09-224">Daher könnte eine [Netzwerksicherheitsgruppe (Network Security Group, NSG)](https://docs.microsoft.com/azure/virtual-network/security-overview) verwendet werden, um den Datenverkehr zwischen den beiden Diensten zu verweigern.</span><span class="sxs-lookup"><span data-stu-id="9ec09-224">So, a [network security group (NSG)](https://docs.microsoft.com/azure/virtual-network/security-overview) could be used to deny traffic between the two services.</span></span>

<span data-ttu-id="9ec09-225">Eine Richtlinie zum Verweigern der Kommunikation zwischen Ressourcen kann bei der Implementierung ärgerlich sein, insbesondere aus dem Hintergrund der Verwendung von Azure ohne Verkehrseinschränkungen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-225">A policy of denying communication between resources can be annoying to implement, especially coming from a background of using Azure without traffic restrictions.</span></span> <span data-ttu-id="9ec09-226">Auf einigen anderen Clouds ist das Konzept der Netzwerksicherheitsgruppen viel häufiger.</span><span class="sxs-lookup"><span data-stu-id="9ec09-226">On some other clouds, the concept of network security groups is much more prevalent.</span></span> <span data-ttu-id="9ec09-227">Die Standardrichtlinie für AWS besteht beispielsweise darin, dass Ressourcen erst dann untereinander kommunizieren können, wenn sie durch Regeln in einer NSG aktiviert sind.</span><span class="sxs-lookup"><span data-stu-id="9ec09-227">For instance, the default policy on AWS is that resources can't communicate among themselves until enabled by rules in an NSG.</span></span> <span data-ttu-id="9ec09-228">Die Entwicklung ist zwar langsamer, aber eine restriktivere Umgebung bietet einen sichereren Standardwert.</span><span class="sxs-lookup"><span data-stu-id="9ec09-228">While slower to develop this, more restrictive environment provides a more secure default.</span></span> <span data-ttu-id="9ec09-229">Die Verwendung geeigneter DevOps-Praktiken, insbesondere die Verwendung von [Azure Resource Manager oder Terraform](infrastructure-as-code.md) zum Verwalten von Berechtigungen, kann die Steuerung der Regeln vereinfachen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-229">Making use of proper DevOps practices, especially using [Azure Resource Manager or Terraform](infrastructure-as-code.md) to manage permissions can make controlling the rules easier.</span></span>

<span data-ttu-id="9ec09-230">Virtuelle Netzwerke können auch nützlich sein, wenn Sie die Kommunikation zwischen lokalen und Cloud-Ressourcen einrichten.</span><span class="sxs-lookup"><span data-stu-id="9ec09-230">Virtual Networks can also be useful when setting up communication between on-premises and cloud resources.</span></span> <span data-ttu-id="9ec09-231">Ein virtuelles privates Netzwerk kann verwendet werden, um die beiden Netzwerke nahtlos miteinander zu verbinden.</span><span class="sxs-lookup"><span data-stu-id="9ec09-231">A virtual private network can be used to seamlessly attach the two networks together.</span></span> <span data-ttu-id="9ec09-232">Dies ermöglicht die Ausführung eines virtuellen Netzwerks ohne jede Art von Gateway für Szenarien, in denen alle Benutzer vor Ort sind.</span><span class="sxs-lookup"><span data-stu-id="9ec09-232">This allows running a virtual network without any sort of gateway for scenarios where all the users are on-site.</span></span> <span data-ttu-id="9ec09-233">Es gibt eine Reihe von Technologien, die zum Aufbau dieses Netzwerks verwendet werden können.</span><span class="sxs-lookup"><span data-stu-id="9ec09-233">There are a number of technologies that can be used to establish this network.</span></span> <span data-ttu-id="9ec09-234">Am einfachsten ist es, ein [Standort-zu-Standort-VPN](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-about-vpngateways?toc=%2fazure%2fvirtual-network%2ftoc.json#s2smulti) zu verwenden, das zwischen vielen Routern und Azure eingerichtet werden kann.</span><span class="sxs-lookup"><span data-stu-id="9ec09-234">The simplest is to use a [site-to-site VPN](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-about-vpngateways?toc=%2fazure%2fvirtual-network%2ftoc.json#s2smulti) that can be established between many routers and Azure.</span></span> <span data-ttu-id="9ec09-235">Der Datenverkehr wird verschlüsselt und über das Internet zu den gleichen Kosten pro Byte wie jeder andere Datenverkehr getunnelt.</span><span class="sxs-lookup"><span data-stu-id="9ec09-235">Traffic is encrypted and tunneled over the Internet at the same cost per byte as any other traffic.</span></span> <span data-ttu-id="9ec09-236">Für Szenarien, in denen mehr Bandbreite oder mehr Sicherheit wünschenswert ist, bietet Azure einen Dienst namens [Express Route,](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-about-vpngateways?toc=%2fazure%2fvirtual-network%2ftoc.json#ExpressRoute) der eine private Verbindung zwischen einem lokalen Netzwerk und Azure verwendet.</span><span class="sxs-lookup"><span data-stu-id="9ec09-236">For scenarios where more bandwidth or more security is desirable, Azure offers a service called [Express Route](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-about-vpngateways?toc=%2fazure%2fvirtual-network%2ftoc.json#ExpressRoute) that uses a private circuit between an on-premises network and Azure.</span></span> <span data-ttu-id="9ec09-237">Es ist teurer und schwieriger zu etablieren, aber auch sicherer.</span><span class="sxs-lookup"><span data-stu-id="9ec09-237">It's more costly and difficult to establish but also more secure.</span></span>

## <a name="role-based-access-control-for-restricting-access-to-azure-resources"></a><span data-ttu-id="9ec09-238">Rollenbasierte Zugriffssteuerung zum Einschränken des Zugriffs auf Azure-Ressourcen</span><span class="sxs-lookup"><span data-stu-id="9ec09-238">Role-based access control for restricting access to Azure resources</span></span>

<span data-ttu-id="9ec09-239">RBAC ist ein System, das eine Identität für Anwendungen bereitstellt, die in Azure ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="9ec09-239">RBAC is a system that provides an identity to applications running in Azure.</span></span> <span data-ttu-id="9ec09-240">Anwendungen können auf Ressourcen zugreifen, die diese Identität anstelle oder zusätzlich zur Verwendung von Schlüsseln oder Kennwörtern verwenden.</span><span class="sxs-lookup"><span data-stu-id="9ec09-240">Applications can access resources using this identity instead of or in addition to using keys or passwords.</span></span>

## <a name="security-principals"></a><span data-ttu-id="9ec09-241">Sicherheitsprinzipale</span><span class="sxs-lookup"><span data-stu-id="9ec09-241">Security Principals</span></span>

<span data-ttu-id="9ec09-242">Die erste Komponente in RBAC ist ein Sicherheitsprinzipal.</span><span class="sxs-lookup"><span data-stu-id="9ec09-242">The first component in RBAC is a security principal.</span></span> <span data-ttu-id="9ec09-243">Ein Sicherheitsprinzipal kann ein Benutzer, eine Gruppe, ein Dienstprinzipal oder eine verwaltete Identität sein.</span><span class="sxs-lookup"><span data-stu-id="9ec09-243">A security principal can be a user, group, service principal, or managed identity.</span></span>

<span data-ttu-id="9ec09-244">![Abbildung 10-2 Verschiedene Arten](./media/rbac-security-principal.png)
von Sicherheitsprinzipalen**Abbildung 10-2**.</span><span class="sxs-lookup"><span data-stu-id="9ec09-244">![Figure 10-2 Different types of security principals](./media/rbac-security-principal.png)
**Figure 10-2**.</span></span> <span data-ttu-id="9ec09-245">Verschiedene Arten von Sicherheitsprinzipalen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-245">Different types of security principals.</span></span>

- <span data-ttu-id="9ec09-246">Benutzer – Jeder Benutzer, der über ein Konto in Azure Active Directory verfügt, ist ein Benutzer.</span><span class="sxs-lookup"><span data-stu-id="9ec09-246">User - Any user who has an account in Azure Active Directory is a user.</span></span>
- <span data-ttu-id="9ec09-247">Gruppe – Eine Sammlung von Benutzern aus Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="9ec09-247">Group - A collection of users from Azure Active Directory.</span></span> <span data-ttu-id="9ec09-248">Als Mitglied einer Gruppe übernimmt ein Benutzer zusätzlich zu seiner eigenen Gruppe die Rollen dieser Gruppe.</span><span class="sxs-lookup"><span data-stu-id="9ec09-248">As a member of a group, a user takes on the roles of that group in addition to their own.</span></span>
- <span data-ttu-id="9ec09-249">Dienstprinzipal – Eine Sicherheitsidentität, unter der Dienste oder Anwendungen ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="9ec09-249">Service principal - A security identity under which services or applications run.</span></span>
- <span data-ttu-id="9ec09-250">Verwaltete Identität – Eine Azure Active Directory-Identität, die von Azure verwaltet wird.</span><span class="sxs-lookup"><span data-stu-id="9ec09-250">Managed identity - An Azure Active Directory identity managed by Azure.</span></span> <span data-ttu-id="9ec09-251">Verwaltete Identitäten werden in der Regel beim Entwickeln von Cloudanwendungen verwendet, die die Anmeldeinformationen für die Authentifizierung bei Azure-Diensten verwalten.</span><span class="sxs-lookup"><span data-stu-id="9ec09-251">Managed identities are typically used when developing cloud applications that manage the credentials for authenticating to Azure services.</span></span>

<span data-ttu-id="9ec09-252">Der Sicherheitsprinzipal kann auf die meisten Ressourcen angewendet werden.</span><span class="sxs-lookup"><span data-stu-id="9ec09-252">The security principal can be applied to most any resource.</span></span> <span data-ttu-id="9ec09-253">Dies bedeutet, dass es möglich ist, einem Container, der in Azure Kubernetes ausgeführt wird, einen Sicherheitsprinzipal zuzuweisen, sodass er auf in Key Vault gespeicherte Geheimnisse zugreifen kann.</span><span class="sxs-lookup"><span data-stu-id="9ec09-253">This means that it's possible to assign a security principal to a container running within Azure Kubernetes, allowing it to access secrets stored in Key Vault.</span></span> <span data-ttu-id="9ec09-254">Eine Azure-Funktion kann eine Berechtigung annehmen, die es ihr ermöglicht, mit einer Active Directory-Instanz zu sprechen, um ein JWT für einen aufrufenden Benutzer zu überprüfen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-254">An Azure Function could take on a permission allowing it to talk to an Active Directory instance to validate a JWT for a calling user.</span></span> <span data-ttu-id="9ec09-255">Sobald Dienste mit einem Dienstprinzipal aktiviert sind, können ihre Berechtigungen mithilfe von Rollen und Bereichen granular verwaltet werden.</span><span class="sxs-lookup"><span data-stu-id="9ec09-255">Once services are enabled with a service principal, their permissions can be managed granularly using roles and scopes.</span></span>

## <a name="roles"></a><span data-ttu-id="9ec09-256">Rollen</span><span class="sxs-lookup"><span data-stu-id="9ec09-256">Roles</span></span>

<span data-ttu-id="9ec09-257">Ein Sicherheitsprinzipal kann viele Rollen übernehmen oder mit einer sartorialeren Analogie viele Hüte tragen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-257">A security principal can take on many roles or, using a more sartorial analogy, wear many hats.</span></span> <span data-ttu-id="9ec09-258">Jede Rolle definiert eine Reihe von Berechtigungen, z. B. "Nachrichten vom Azure Service Bus-Endpunkt lesen".</span><span class="sxs-lookup"><span data-stu-id="9ec09-258">Each role defines a series of permissions such as "Read messages from Azure Service Bus endpoint".</span></span> <span data-ttu-id="9ec09-259">Der effektive Berechtigungssatz eines Sicherheitsprinzipals ist die Kombination aller Berechtigungen, die allen Rollen zugewiesen sind, über die der Sicherheitsprinzipal verfügt.</span><span class="sxs-lookup"><span data-stu-id="9ec09-259">The effective permission set of a security principal is the combination of all the permissions assigned to all the roles that security principal has.</span></span> <span data-ttu-id="9ec09-260">Azure verfügt über eine große Anzahl integrierter Rollen, und Benutzer können ihre eigenen Rollen definieren.</span><span class="sxs-lookup"><span data-stu-id="9ec09-260">Azure has a large number of built-in roles and users can define their own roles.</span></span>

<span data-ttu-id="9ec09-261">![Abbildung 10-3 RBAC-Rollendefinitionen](./media/rbac-role-definition.png)
Abbildung**10-3**.</span><span class="sxs-lookup"><span data-stu-id="9ec09-261">![Figure 10-3 RBAC role definitions](./media/rbac-role-definition.png)
**Figure 10-3**.</span></span> <span data-ttu-id="9ec09-262">RBAC-Rollendefinitionen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-262">RBAC role definitions.</span></span>

<span data-ttu-id="9ec09-263">In Azure sind auch eine Reihe von übergeordneten Rollen wie Besitzer, Mitwirkender, Leser und Benutzerkontoadministrator integriert.</span><span class="sxs-lookup"><span data-stu-id="9ec09-263">Built into Azure are also a number of high-level roles such as Owner, Contributor, Reader, and User Account Administrator.</span></span> <span data-ttu-id="9ec09-264">Mit der Rolle "Besitzer" kann ein Sicherheitsprinzipal auf alle Ressourcen zugreifen und anderen Berechtigungen zuweisen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-264">With the Owner role, a security principal can access all resources and assign permissions to others.</span></span> <span data-ttu-id="9ec09-265">Ein Mitwirkender hat die gleiche Zugriffsebene auf alle Ressourcen, kann jedoch keine Berechtigungen zuweisen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-265">A contributor has the same level of access to all resources but they can't assign permissions.</span></span> <span data-ttu-id="9ec09-266">Ein Reader kann nur vorhandene Azure-Ressourcen anzeigen, und ein Benutzerkontoadministrator kann den Zugriff auf Azure-Ressourcen verwalten.</span><span class="sxs-lookup"><span data-stu-id="9ec09-266">A Reader can only view existing Azure resources and a User Account Administrator can manage access to Azure resources.</span></span>

<span data-ttu-id="9ec09-267">Detailliertere integrierte Rollen wie [DNS Zone Contributor](https://docs.microsoft.com/azure/role-based-access-control/built-in-roles#dns-zone-contributor) verfügen über Rechte, die auf einen einzelnen Dienst beschränkt sind.</span><span class="sxs-lookup"><span data-stu-id="9ec09-267">More granular built-in roles such as [DNS Zone Contributor](https://docs.microsoft.com/azure/role-based-access-control/built-in-roles#dns-zone-contributor) have rights limited to a single service.</span></span> <span data-ttu-id="9ec09-268">Sicherheitsprinzipale können eine beliebige Anzahl von Rollen übernehmen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-268">Security principals can take on any number of roles.</span></span>

## <a name="scopes"></a><span data-ttu-id="9ec09-269">Bereiche</span><span class="sxs-lookup"><span data-stu-id="9ec09-269">Scopes</span></span>

<span data-ttu-id="9ec09-270">Rollen können auf einen eingeschränkten Satz von Ressourcen in Azure angewendet werden.</span><span class="sxs-lookup"><span data-stu-id="9ec09-270">Roles can be applied to a restricted set of resources within Azure.</span></span> <span data-ttu-id="9ec09-271">Wenn Sie z. B. den Bereich auf das vorherige Beispiel zum Lesen aus einer Service Bus-Warteschlange `blah.servicebus.windows.net/queue1`anwenden, können Sie die Berechtigung auf eine einzelne Warteschlange beschränken: "Nachrichten vom Azure Service Bus-Endpunkt lesen "</span><span class="sxs-lookup"><span data-stu-id="9ec09-271">For instance, applying scope to the previous example of reading from a Service Bus queue, you can narrow the permission to a single queue: "Read messages from Azure Service Bus endpoint `blah.servicebus.windows.net/queue1`"</span></span>

<span data-ttu-id="9ec09-272">Der Bereich kann so schmal sein wie eine einzelne Ressource oder kann auf eine gesamte Ressourcengruppe, ein Abonnement oder sogar eine Verwaltungsgruppe angewendet werden.</span><span class="sxs-lookup"><span data-stu-id="9ec09-272">The scope can be as narrow as a single resource or it can be applied to an entire resource group, subscription, or even management group.</span></span>

<span data-ttu-id="9ec09-273">Beim Testen, ob ein Sicherheitsprinzipal über eine bestimmte Berechtigung verfügt, wird die Kombination von Rolle und Umfang berücksichtigt.</span><span class="sxs-lookup"><span data-stu-id="9ec09-273">When testing if a security principal has a certain permission, the combination of role and scope are taken into account.</span></span> <span data-ttu-id="9ec09-274">Diese Kombination bietet einen leistungsstarken Autorisierungsmechanismus.</span><span class="sxs-lookup"><span data-stu-id="9ec09-274">This combination provides a powerful authorization mechanism.</span></span>

## <a name="deny"></a><span data-ttu-id="9ec09-275">Verweigern</span><span class="sxs-lookup"><span data-stu-id="9ec09-275">Deny</span></span>

<span data-ttu-id="9ec09-276">Bisher waren nur "Zulassen"-Regeln für RBAC zulässig.</span><span class="sxs-lookup"><span data-stu-id="9ec09-276">Previously, only "allow" rules were permitted for RBAC.</span></span> <span data-ttu-id="9ec09-277">Dieses Verhalten erschwerte die Erstellung einiger Bereiche.</span><span class="sxs-lookup"><span data-stu-id="9ec09-277">This behavior made some scopes complicated to build.</span></span> <span data-ttu-id="9ec09-278">Beispielsweise kann ein Sicherheitsprinzipal Zugriff auf alle Speicherkonten gewähren, mit Ausnahme eines erforderlichen Zugriffs auf eine potenziell endlose Liste von Speicherkonten.</span><span class="sxs-lookup"><span data-stu-id="9ec09-278">For instance, allowing a security principal access to all storage accounts except one required granting explicit permission to a potentially endless list of storage accounts.</span></span> <span data-ttu-id="9ec09-279">Jedes Mal, wenn ein neues Speicherkonto erstellt wird, muss es dieser Kontenliste hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="9ec09-279">Every time a new storage account was created, it would have to be added to this list of accounts.</span></span> <span data-ttu-id="9ec09-280">Dies zusätzliche Management-Overhead, die sicherlich nicht wünschenswert war.</span><span class="sxs-lookup"><span data-stu-id="9ec09-280">This added management overhead that certainly wasn't desirable.</span></span>

<span data-ttu-id="9ec09-281">Verweigern von Regeln hat Vorrang vor Zulassungsregeln.</span><span class="sxs-lookup"><span data-stu-id="9ec09-281">Deny rules take precedence over allow rules.</span></span> <span data-ttu-id="9ec09-282">Nun könnte der gleiche Bereich "Alle außer einem zulassen" als zwei Regeln "alle zulassen" und "diese eine bestimmte" "verweigern" dargestellt werden.</span><span class="sxs-lookup"><span data-stu-id="9ec09-282">Now representing the same "allow all but one" scope could be represented as two rules "allow all" and "deny this one specific one".</span></span> <span data-ttu-id="9ec09-283">Verweigern von Regeln erleichtert nicht nur die Verwaltung, sondern ermöglicht auch Ressourcen, die besonders sicher sind, indem sie allen den Zugriff verweigern.</span><span class="sxs-lookup"><span data-stu-id="9ec09-283">Deny rules not only ease management but allow for resources that are extra secure by denying access to everybody.</span></span>

## <a name="checking-access"></a><span data-ttu-id="9ec09-284">Überprüfen des Zugriffs</span><span class="sxs-lookup"><span data-stu-id="9ec09-284">Checking access</span></span>

<span data-ttu-id="9ec09-285">Wie Sie sich vorstellen können, kann es mit einer großen Anzahl von Rollen und Bereichen schwierig sein, die effektive Berechtigung eines Dienstprinzipals herauszuarbeiten.</span><span class="sxs-lookup"><span data-stu-id="9ec09-285">As you can imagine, having a large number of roles and scopes can make figuring out the effective permission of a service principal quite difficult.</span></span> <span data-ttu-id="9ec09-286">Piling leugnet obendrein Regeln, dient nur dazu, die Komplexität zu erhöhen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-286">Piling deny rules on top of that, only serves to increase the complexity.</span></span> <span data-ttu-id="9ec09-287">Glücklicherweise gibt es einen Berechtigungsrechner, der die effektiven Berechtigungen für jeden Dienstprinzipal anzeigen kann.</span><span class="sxs-lookup"><span data-stu-id="9ec09-287">Fortunately, there's a permissions calculator that can show the effective permissions for any service principal.</span></span> <span data-ttu-id="9ec09-288">Sie befindet sich in der Regel unter der Registerkarte IAM im Portal, wie in Abbildung 10-3 dargestellt.</span><span class="sxs-lookup"><span data-stu-id="9ec09-288">It's typically found under the IAM tab in the portal, as shown in Figure 10-3.</span></span>

<span data-ttu-id="9ec09-289">![Abbildung 10-4 Berechtigungsrechner](./media/check-rbac.png)
für einen**App-Dienst Abbildung 10-4**.</span><span class="sxs-lookup"><span data-stu-id="9ec09-289">![Figure 10-4 Permission calculator for an app service](./media/check-rbac.png)
**Figure 10-4**.</span></span> <span data-ttu-id="9ec09-290">Berechtigungsrechner für einen App-Dienst.</span><span class="sxs-lookup"><span data-stu-id="9ec09-290">Permission calculator for an app service.</span></span>

## <a name="securing-secrets"></a><span data-ttu-id="9ec09-291">Sichern von Geheimnissen</span><span class="sxs-lookup"><span data-stu-id="9ec09-291">Securing secrets</span></span>

<span data-ttu-id="9ec09-292">Kennwörter und Zertifikate sind ein gängiger Angriffsvektor für Angreifer.</span><span class="sxs-lookup"><span data-stu-id="9ec09-292">Passwords and certificates are a common attack vector for attackers.</span></span> <span data-ttu-id="9ec09-293">Kennwort-Cracking-Hardware kann einen Brute-Force-Angriff begehen und versuchen, Milliarden von Passwörtern pro Sekunde zu erraten.</span><span class="sxs-lookup"><span data-stu-id="9ec09-293">Password-cracking hardware can do a  brute-force attack and try to guess billions of passwords per second.</span></span> <span data-ttu-id="9ec09-294">Daher ist es wichtig, dass die Kennwörter, die für den Zugriff auf Ressourcen verwendet werden, stark sind, mit einer Vielzahl von Zeichen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-294">So it's important that the passwords that are used to access resources are strong, with a large variety of characters.</span></span> <span data-ttu-id="9ec09-295">Diese Kennwörter sind genau die Art von Kennwörtern, die fast unmöglich zu merken sind.</span><span class="sxs-lookup"><span data-stu-id="9ec09-295">These passwords are exactly the kind of passwords that are near impossible to remember.</span></span> <span data-ttu-id="9ec09-296">Glücklicherweise müssen die Kennwörter in Azure eigentlich keinem Menschen bekannt sein.</span><span class="sxs-lookup"><span data-stu-id="9ec09-296">Fortunately, the passwords in Azure don't actually need to be known by any human.</span></span>

<span data-ttu-id="9ec09-297">Viele [Sicherheitsexperten schlagen vor,](https://www.troyhunt.com/password-managers-dont-have-to-be-perfect-they-just-have-to-be-better-than-not-having-one/) dass die Verwendung eines Passwort-Managers, um Ihre eigenen Passwörter zu behalten, der beste Ansatz ist.</span><span class="sxs-lookup"><span data-stu-id="9ec09-297">Many security [experts suggest](https://www.troyhunt.com/password-managers-dont-have-to-be-perfect-they-just-have-to-be-better-than-not-having-one/) that using a password manager to keep your own passwords is the best approach.</span></span> <span data-ttu-id="9ec09-298">Während es Ihre Kennwörter an einem Ort zentralisiert, ermöglicht es auch die Verwendung hochkomplexer Kennwörter und stellt sicher, dass sie für jedes Konto eindeutig sind.</span><span class="sxs-lookup"><span data-stu-id="9ec09-298">While it centralizes your passwords in one location, it also allows using highly complex passwords and ensuring they're unique for each account.</span></span> <span data-ttu-id="9ec09-299">Das gleiche System existiert in Azure: ein zentraler Speicher für Geheimnisse.</span><span class="sxs-lookup"><span data-stu-id="9ec09-299">The same system exists within Azure: a central store for secrets.</span></span>

## <a name="azure-key-vault"></a><span data-ttu-id="9ec09-300">Azure-Schlüsseltresor</span><span class="sxs-lookup"><span data-stu-id="9ec09-300">Azure Key Vault</span></span>

<span data-ttu-id="9ec09-301">Azure Key Vault bietet einen zentralen Speicherort zum Speichern von Kennwörtern für Z. B. Datenbanken, API-Schlüssel und Zertifikate.</span><span class="sxs-lookup"><span data-stu-id="9ec09-301">Azure Key Vault provides a centralized location to store passwords for things such as databases, API keys, and certificates.</span></span> <span data-ttu-id="9ec09-302">Sobald ein Geheimnis in den Tresor eingegeben wurde, wird es nie wieder angezeigt und die Befehle zum Extrahieren und Anzeigen sind absichtlich kompliziert.</span><span class="sxs-lookup"><span data-stu-id="9ec09-302">Once a secret is entered into the Vault, it's never shown again and the commands to extract and view it are purposefully complicated.</span></span> <span data-ttu-id="9ec09-303">Die Informationen im Safe werden entweder durch Softwareverschlüsselung oder FIPS 140-2 Level 2 validierte Hardware-Sicherheitsmodule geschützt.</span><span class="sxs-lookup"><span data-stu-id="9ec09-303">The information in the safe is protected using either software encryption or FIPS 140-2 Level 2 validated Hardware Security Modules.</span></span>

<span data-ttu-id="9ec09-304">Der Zugriff auf den Schlüsseltresor erfolgt über RBACs, was bedeutet, dass nicht nur jeder Benutzer auf die Informationen im Tresor zugreifen kann.</span><span class="sxs-lookup"><span data-stu-id="9ec09-304">Access to the key vault is provided through RBACs, meaning that not just any user can access the information in the vault.</span></span> <span data-ttu-id="9ec09-305">Angenommen, eine Webanwendung möchte auf die in Azure Key Vault gespeicherte Datenbankverbindungszeichenfolge zugreifen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-305">Say a web application wishes to access the database connection string stored in Azure Key Vault.</span></span> <span data-ttu-id="9ec09-306">Um Zugriff zu erhalten, müssen Anwendungen mit einem Dienstprinzipal ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="9ec09-306">To gain access, applications need to run using a service principal.</span></span> <span data-ttu-id="9ec09-307">Unter dieser übernommenen Rolle können sie die Geheimnisse aus dem Tresor lesen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-307">Under this assumed role, they can read the secrets from the safe.</span></span> <span data-ttu-id="9ec09-308">Es gibt eine Reihe von verschiedenen Sicherheitseinstellungen, die den Zugriff einer Anwendung auf den Tresor weiter einschränken können, sodass sie keine Geheimnisse aktualisieren, sondern nur lesen kann.</span><span class="sxs-lookup"><span data-stu-id="9ec09-308">There are a number of different security settings that can further limit the access that an application has to the vault, so that it can't update secrets but only read them.</span></span>

<span data-ttu-id="9ec09-309">Der Zugriff auf den Schlüsseltresor kann überwacht werden, um sicherzustellen, dass nur die erwarteten Anwendungen auf den Tresor zugreifen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-309">Access to the key vault can be monitored to ensure that only the expected applications are accessing the vault.</span></span> <span data-ttu-id="9ec09-310">Die Protokolle können wieder in Azure Monitor integriert werden, wodurch Warnungen eingerichtet werden können, wenn unerwartete Bedingungen auftreten.</span><span class="sxs-lookup"><span data-stu-id="9ec09-310">The logs can be integrated back into Azure Monitor, unlocking the ability to set up alerts when unexpected conditions are encountered.</span></span>

## <a name="kubernetes"></a><span data-ttu-id="9ec09-311">Kubernetes</span><span class="sxs-lookup"><span data-stu-id="9ec09-311">Kubernetes</span></span>

<span data-ttu-id="9ec09-312">Innerhalb von Kubernetes gibt es einen ähnlichen Service für die Pflege kleiner geheimer Informationen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-312">Within Kubernetes, there's a similar service for maintaining small pieces of secret information.</span></span> <span data-ttu-id="9ec09-313">Kubernetes Secrets kann über `kubectl` die typische ausführbare Datei eingestellt werden.</span><span class="sxs-lookup"><span data-stu-id="9ec09-313">Kubernetes Secrets can be set via the typical `kubectl` executable.</span></span>

<span data-ttu-id="9ec09-314">Das Erstellen eines Geheimen ist so einfach wie das Suchen der base64-Version der zu speichernden Werte:</span><span class="sxs-lookup"><span data-stu-id="9ec09-314">Creating a secret is as simple as finding the base64 version of the values to be stored:</span></span>

```console
echo -n 'admin' | base64
YWRtaW4=
echo -n '1f2d1e2e67df' | base64
MWYyZDFlMmU2N2Rm
```

<span data-ttu-id="9ec09-315">Fügen Sie sie dann `secret.yml` einer geheimen Datei mit dem Namen hinzu, die dem folgenden Beispiel ähnelt:</span><span class="sxs-lookup"><span data-stu-id="9ec09-315">Then adding it to a secrets file named `secret.yml` for example that looks similar to the following example:</span></span>

```yml
apiVersion: v1
kind: Secret
metadata:
  name: mysecret
type: Opaque
data:
  username: YWRtaW4=
  password: MWYyZDFlMmU2N2Rm
```

<span data-ttu-id="9ec09-316">Schließlich kann diese Datei in Kubernetes geladen werden, indem Sie den folgenden Befehl ausführen:</span><span class="sxs-lookup"><span data-stu-id="9ec09-316">Finally, this file can be loaded into Kubernetes by running the following command:</span></span>

```console
kubectl apply -f ./secret.yaml
```

<span data-ttu-id="9ec09-317">Diese Geheimnisse können dann in Volumes eingehängt oder über Umgebungsvariablen Containerprozessen ausgesetzt werden.</span><span class="sxs-lookup"><span data-stu-id="9ec09-317">These secrets can then be mounted into volumes or exposed to container processes through environment variables.</span></span> <span data-ttu-id="9ec09-318">Der [Zwölf-Faktor-App-Ansatz](https://12factor.net/) zum Erstellen von Anwendungen schlägt vor, den kleinsten gemeinsamen Nenner zu verwenden, um Einstellungen an eine Anwendung zu übertragen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-318">The [Twelve-factor app](https://12factor.net/) approach to building applications suggests using the lowest common denominator to transmit settings to an application.</span></span> <span data-ttu-id="9ec09-319">Umgebungsvariablen sind der kleinste gemeinsame Nenner, da sie unabhängig vom Betriebssystem oder der Anwendung unterstützt werden.</span><span class="sxs-lookup"><span data-stu-id="9ec09-319">Environment variables are the lowest common denominator, because they're supported no matter the operating system or application.</span></span>

<span data-ttu-id="9ec09-320">Eine Alternative zur Verwendung der integrierten Kubernetes-Geheimnisse besteht darin, von Kubernetes aus auf die Geheimnisse in Azure Key Vault zuzugreifen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-320">An alternative to use the built-in Kubernetes secrets is to access the secrets in Azure Key Vault from within Kubernetes.</span></span> <span data-ttu-id="9ec09-321">Die einfachste Möglichkeit besteht darin, dem Container eine RBAC-Rolle zuzuweisen, die Geheimnisse laden möchte.</span><span class="sxs-lookup"><span data-stu-id="9ec09-321">The simplest way to do this is to assign an RBAC role to the container looking to load secrets.</span></span> <span data-ttu-id="9ec09-322">Die Anwendung kann dann die Azure Key Vault-APIs verwenden, um auf die Geheimnisse zuzugreifen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-322">The application can then use the Azure Key Vault APIs to access the secrets.</span></span> <span data-ttu-id="9ec09-323">Dieser Ansatz erfordert jedoch Änderungen am Code und folgt nicht dem Muster der Verwendung von Umgebungsvariablen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-323">However, this approach requires modifications to the code and doesn't follow the pattern of using environment variables.</span></span> <span data-ttu-id="9ec09-324">Stattdessen ist es möglich, Werte mithilfe des Azure [Key Vault Injektors](https://mrdevops.io/introducing-azure-key-vault-to-kubernetes-931f82364354)in einen Container einzuschleusen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-324">Instead, it's possible to inject values into a container through the use of the [Azure Key Vault Injector](https://mrdevops.io/introducing-azure-key-vault-to-kubernetes-931f82364354).</span></span> <span data-ttu-id="9ec09-325">Dieser Ansatz ist tatsächlich sicherer als die Verwendung der Kubernetes-Geheimnisse direkt, da Benutzer im Cluster darauf zugreifen können.</span><span class="sxs-lookup"><span data-stu-id="9ec09-325">This approach is actually more secure than using the Kubernetes secrets directly, as they can be accessed by users on the cluster.</span></span>

## <a name="encryption-in-transit-and-at-rest"></a><span data-ttu-id="9ec09-326">Verschlüsselung während der Übertragung und im Ruhezustand</span><span class="sxs-lookup"><span data-stu-id="9ec09-326">Encryption in transit and at rest</span></span>

<span data-ttu-id="9ec09-327">Die Sicherheit der Daten ist wichtig, egal ob auf der Festplatte oder beim Transit zwischen verschiedenen Diensten.</span><span class="sxs-lookup"><span data-stu-id="9ec09-327">Keeping data safe is important whether it's on disk or transiting between various different services.</span></span> <span data-ttu-id="9ec09-328">Der effektivste Weg, um Daten vor Dementaucharbeiten zu bewahren, besteht darin, sie in ein Format zu verschlüsseln, das von anderen nicht leicht gelesen werden kann.</span><span class="sxs-lookup"><span data-stu-id="9ec09-328">The most effective way to keep data from leaking is to encrypt it into a format that can't be easily read by others.</span></span> <span data-ttu-id="9ec09-329">Azure unterstützt eine Vielzahl von Verschlüsselungsoptionen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-329">Azure supports a wide range of encryption options.</span></span>

### <a name="in-transit"></a><span data-ttu-id="9ec09-330">Während der Übertragung</span><span class="sxs-lookup"><span data-stu-id="9ec09-330">In transit</span></span>

<span data-ttu-id="9ec09-331">Es gibt mehrere Möglichkeiten, den Datenverkehr im Netzwerk in Azure zu verschlüsseln.</span><span class="sxs-lookup"><span data-stu-id="9ec09-331">There are several ways to encrypt traffic on the network in Azure.</span></span> <span data-ttu-id="9ec09-332">Der Zugriff auf Azure-Dienste erfolgt in der Regel über Verbindungen, die Transport Layer Security (TLS) verwenden.</span><span class="sxs-lookup"><span data-stu-id="9ec09-332">The access to Azure services is typically done over connections that use Transport Layer Security (TLS).</span></span> <span data-ttu-id="9ec09-333">Beispielsweise erfordern alle Verbindungen zu den Azure-APIs TLS-Verbindungen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-333">For instance, all the connections to the Azure APIs require TLS connections.</span></span> <span data-ttu-id="9ec09-334">Ebenso können Verbindungen zu Endpunkten im Azure-Speicher auf die Arbeit nur über TLS-verschlüsselte Verbindungen beschränkt werden.</span><span class="sxs-lookup"><span data-stu-id="9ec09-334">Equally, connections to endpoints in Azure storage can be restricted to work only over TLS encrypted connections.</span></span>

<span data-ttu-id="9ec09-335">TLS ist ein kompliziertes Protokoll und einfach zu wissen, dass die Verbindung TLS verwendet, reicht nicht aus, um die Sicherheit zu gewährleisten.</span><span class="sxs-lookup"><span data-stu-id="9ec09-335">TLS is a complicated protocol and simply knowing that the connection is using TLS isn't sufficient to ensure security.</span></span> <span data-ttu-id="9ec09-336">Zum Beispiel ist TLS 1.0 chronisch unsicher, und TLS 1.1 ist nicht viel besser.</span><span class="sxs-lookup"><span data-stu-id="9ec09-336">For instance, TLS 1.0 is chronically insecure, and TLS 1.1 isn't much better.</span></span> <span data-ttu-id="9ec09-337">Selbst innerhalb der Versionen von TLS gibt es verschiedene Einstellungen, die die Verbindung einfacher zu entschlüsseln machen können.</span><span class="sxs-lookup"><span data-stu-id="9ec09-337">Even within the versions of TLS, there are various settings that can make the connections easier to decrypt.</span></span> <span data-ttu-id="9ec09-338">Am besten prüfen sie, ob die Serververbindung aktuelle und gut konfigurierte Protokolle verwendet.</span><span class="sxs-lookup"><span data-stu-id="9ec09-338">The best course of action is to check and see if the server connection is using up-to-date and well configured protocols.</span></span>

<span data-ttu-id="9ec09-339">Diese Prüfung kann von einem externen Dienst wie SSL Labs SSL-Servertest durchgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="9ec09-339">This check can be done by an external service such as SSL labs' SSL Server Test.</span></span> <span data-ttu-id="9ec09-340">Ein Testlauf gegen einen typischen Azure-Endpunkt, in diesem Fall ein Dienstbusendpunkt, ergibt eine nahezu perfekte Punktzahl von A.</span><span class="sxs-lookup"><span data-stu-id="9ec09-340">A test run against a typical Azure endpoint, in this case a service bus endpoint, yields a near perfect score of A.</span></span>

<span data-ttu-id="9ec09-341">Selbst Dienste wie Azure SQL-Datenbanken verwenden TLS-Verschlüsselung, um Daten ausgeblendet zu halten.</span><span class="sxs-lookup"><span data-stu-id="9ec09-341">Even services like Azure SQL databases use TLS encryption to keep data hidden.</span></span> <span data-ttu-id="9ec09-342">Der interessante Teil über die Verschlüsselung der Daten während der Übertragung mit TLS ist, dass es nicht möglich ist, auch für Microsoft, auf die Verbindung zwischen Computern mit TLS zu hören.</span><span class="sxs-lookup"><span data-stu-id="9ec09-342">The interesting part about encrypting the data in transit using TLS is that it isn't possible, even for Microsoft, to listen in on the connection between computers running TLS.</span></span> <span data-ttu-id="9ec09-343">Dies sollte Unternehmen, die betroffen sind, Trost spenden, dass ihre Daten von Microsoft selbst oder sogar einem staatlichen Akteur mit mehr Ressourcen als dem Standardangreifer gefährdet sein könnten.</span><span class="sxs-lookup"><span data-stu-id="9ec09-343">This should provide comfort for companies concerned that their data may be at risk from Microsoft proper or even a state actor with more resources than the standard attacker.</span></span>

<span data-ttu-id="9ec09-344">![Abbildung 10-5 SSL-Labors-Bericht mit der Punktzahl A für einen Service Bus-Endpunkt. ](./media/ssl-report.png)
 **Abbildung 10-5**.</span><span class="sxs-lookup"><span data-stu-id="9ec09-344">![Figure 10-5 SSL labs report showing a score of A for a Service Bus endpoint.](./media/ssl-report.png)
**Figure 10-5**.</span></span> <span data-ttu-id="9ec09-345">SSL-Laborberichte mit der Punktzahl A für einen Service Bus-Endpunkt.</span><span class="sxs-lookup"><span data-stu-id="9ec09-345">SSL labs report showing a score of A for a Service Bus endpoint.</span></span>

<span data-ttu-id="9ec09-346">Obwohl diese Verschlüsselungsstufe nicht für alle Zeiten ausreicht, sollte sie die Zuversicht wecken, dass Azure TLS-Verbindungen ziemlich sicher sind.</span><span class="sxs-lookup"><span data-stu-id="9ec09-346">While this level of encryption isn't going to be sufficient for all time, it should inspire confidence that Azure TLS connections are quite secure.</span></span> <span data-ttu-id="9ec09-347">Azure wird seine Sicherheitsstandards weiterentwickeln, wenn die Verschlüsselung verbessert wird.</span><span class="sxs-lookup"><span data-stu-id="9ec09-347">Azure will continue to evolve its security standards as encryption improves.</span></span> <span data-ttu-id="9ec09-348">Es ist schön zu wissen, dass es jemanden gibt, der die Sicherheitsstandards beobachtet und Azure aktualisiert, während sie sich verbessern.</span><span class="sxs-lookup"><span data-stu-id="9ec09-348">It's nice to know that there's somebody watching the security standards and updating Azure as they improve.</span></span>

### <a name="at-rest"></a><span data-ttu-id="9ec09-349">Im Ruhezustand</span><span class="sxs-lookup"><span data-stu-id="9ec09-349">At rest</span></span>

<span data-ttu-id="9ec09-350">In jeder Anwendung gibt es eine Reihe von Stellen, an denen Daten auf dem Datenträger gespeichert sind.</span><span class="sxs-lookup"><span data-stu-id="9ec09-350">In any application, there are a number of places where data rests on disk.</span></span> <span data-ttu-id="9ec09-351">Der Anwendungscode selbst wird von einem Speichermechanismus geladen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-351">The application code itself is loaded from some storage mechanism.</span></span> <span data-ttu-id="9ec09-352">Die meisten Anwendungen verwenden auch eine Art von Datenbank wie SQL Server, Cosmos DB oder sogar den erstaunlich preiseffizienten Tabellenspeicher.</span><span class="sxs-lookup"><span data-stu-id="9ec09-352">Most applications also use some kind of database such as SQL Server, Cosmos DB, or even the amazingly price-efficient Table Storage.</span></span> <span data-ttu-id="9ec09-353">Diese Datenbanken verwenden alle stark verschlüsselten Speicher, um sicherzustellen, dass niemand anderes als die Anwendungen mit den entsprechenden Berechtigungen Ihre Daten lesen kann.</span><span class="sxs-lookup"><span data-stu-id="9ec09-353">These databases all use heavily encrypted storage to ensure that nobody other than the applications with proper permissions can read your data.</span></span> <span data-ttu-id="9ec09-354">Selbst die Systembetreiber können verschlüsselte Daten nicht lesen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-354">Even the system operators can't read data that has been encrypted.</span></span> <span data-ttu-id="9ec09-355">So können Kunden sicher bleiben, dass ihre geheimen Informationen geheim bleiben.</span><span class="sxs-lookup"><span data-stu-id="9ec09-355">So customers can remain confident their secret information remains secret.</span></span>

### <a name="storage"></a><span data-ttu-id="9ec09-356">Storage</span><span class="sxs-lookup"><span data-stu-id="9ec09-356">Storage</span></span>

<span data-ttu-id="9ec09-357">Die Grundlage eines Großteils von Azure ist das Azure Storage-Modul.</span><span class="sxs-lookup"><span data-stu-id="9ec09-357">The underpinning of much of Azure is the Azure Storage engine.</span></span> <span data-ttu-id="9ec09-358">Festplatten virtueller Computer werden über Azure Storage bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="9ec09-358">Virtual machine disks are mounted on top of Azure Storage.</span></span> <span data-ttu-id="9ec09-359">Azure Kubernetes Services werden auf virtuellen Computern ausgeführt, die selbst in Azure Storage gehostet werden.</span><span class="sxs-lookup"><span data-stu-id="9ec09-359">Azure Kubernetes Services run on virtual machines that, themselves, are hosted on Azure Storage.</span></span> <span data-ttu-id="9ec09-360">Selbst serverlose Technologien, wie Azure Functions Apps und Azure Container Instances, verfügen nicht mehr über den Datenträger, der Teil von Azure Storage ist.</span><span class="sxs-lookup"><span data-stu-id="9ec09-360">Even serverless technologies, such as Azure Functions Apps and Azure Container Instances, run out of disk that is part of Azure Storage.</span></span>

<span data-ttu-id="9ec09-361">Wenn Azure Storage gut verschlüsselt ist, bietet es eine Grundlage für die meisten anderen, um auch verschlüsselt zu werden.</span><span class="sxs-lookup"><span data-stu-id="9ec09-361">If Azure Storage is well encrypted, then it provides for a foundation for most everything else to also be encrypted.</span></span> <span data-ttu-id="9ec09-362">Azure Storage ist mit [FIPS 140-2-kompatiblem](https://en.wikipedia.org/wiki/FIPS_140) [256-Bit-AES](https://en.wikipedia.org/wiki/Advanced_Encryption_Standard) [verschlüsselt.](https://docs.microsoft.com/azure/storage/common/storage-service-encryption)</span><span class="sxs-lookup"><span data-stu-id="9ec09-362">Azure Storage [is encrypted](https://docs.microsoft.com/azure/storage/common/storage-service-encryption) with [FIPS 140-2](https://en.wikipedia.org/wiki/FIPS_140) compliant [256-bit AES](https://en.wikipedia.org/wiki/Advanced_Encryption_Standard).</span></span> <span data-ttu-id="9ec09-363">Dies ist eine angesehene Verschlüsselungstechnologie, die in den letzten 20 Jahren einer umfassenden wissenschaftlichen Prüfung unterzogen wurde.</span><span class="sxs-lookup"><span data-stu-id="9ec09-363">This is a well-regarded encryption technology having been the subject of extensive academic scrutiny over the last 20 or so years.</span></span> <span data-ttu-id="9ec09-364">Derzeit gibt es keinen bekannten praktischen Angriff, der es jemandem ohne Kenntnis des Schlüssels ermöglichen würde, von AES verschlüsselte Daten zu lesen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-364">At present, there's no known practical attack that would allow someone without knowledge of the key to read data encrypted by AES.</span></span>

<span data-ttu-id="9ec09-365">Standardmäßig werden die Schlüssel, die zum Verschlüsseln von Azure Storage verwendet werden, von Microsoft verwaltet.</span><span class="sxs-lookup"><span data-stu-id="9ec09-365">By default, the keys used for encrypting Azure Storage are managed by Microsoft.</span></span> <span data-ttu-id="9ec09-366">Es gibt umfangreiche Schutzmaßnahmen, um böswilligen Zugriff auf diese Schlüssel zu verhindern.</span><span class="sxs-lookup"><span data-stu-id="9ec09-366">There are extensive protections in place to ensure to prevent malicious access to these keys.</span></span> <span data-ttu-id="9ec09-367">Benutzer mit bestimmten Verschlüsselungsanforderungen können jedoch auch [eigene Speicherschlüssel bereitstellen,](https://docs.microsoft.com/azure/storage/common/storage-encryption-keys-powershell) die in Azure Key Vault verwaltet werden.</span><span class="sxs-lookup"><span data-stu-id="9ec09-367">However, users with particular encryption requirements can also [provide their own storage keys](https://docs.microsoft.com/azure/storage/common/storage-encryption-keys-powershell) that are managed in Azure Key Vault.</span></span> <span data-ttu-id="9ec09-368">Diese Schlüssel können jederzeit widerrufen werden, wodurch der Inhalt des Speicherkontos, das sie verwendet, effektiv nicht mehr zugänglich wäre.</span><span class="sxs-lookup"><span data-stu-id="9ec09-368">These keys can be revoked at any time, which would effectively render the contents of the Storage account using them inaccessible.</span></span>

<span data-ttu-id="9ec09-369">Virtuelle Maschinen verwenden verschlüsselten Speicher, aber es ist möglich, eine weitere Verschlüsselungsebene bereitzustellen, indem Technologien wie BitLocker unter Windows oder DM-Crypt unter Linux verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="9ec09-369">Virtual machines use encrypted storage, but it's possible to provide another layer of encryption by using technologies like BitLocker on Windows or DM-Crypt on Linux.</span></span> <span data-ttu-id="9ec09-370">Diese Technologien bedeuten, dass selbst wenn das Festplattenabbild aus dem Speicher ausgetreten wäre, es nahezu unmöglich wäre, es zu lesen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-370">These technologies mean that even if the disk image was leaked off of storage, it would remain near impossible to read it.</span></span>

### <a name="azure-sql"></a><span data-ttu-id="9ec09-371">Azure SQL</span><span class="sxs-lookup"><span data-stu-id="9ec09-371">Azure SQL</span></span>

<span data-ttu-id="9ec09-372">In Azure SQL gehostete Datenbanken verwenden eine Technologie namens [Transparente Datenverschlüsselung (Transparent Data Encryption, TDE),](/sql/relational-databases/security/encryption/transparent-data-encryption) um sicherzustellen, dass Daten verschlüsselt bleiben.</span><span class="sxs-lookup"><span data-stu-id="9ec09-372">Databases hosted on Azure SQL use a technology called [Transparent Data Encryption (TDE)](/sql/relational-databases/security/encryption/transparent-data-encryption) to ensure data remains encrypted.</span></span> <span data-ttu-id="9ec09-373">Sie ist standardmäßig für alle neu erstellten SQL-Datenbanken aktiviert, muss jedoch manuell für ältere Datenbanken aktiviert werden.</span><span class="sxs-lookup"><span data-stu-id="9ec09-373">It's enabled by default on all newly created SQL databases, but must be enabled manually for legacy databases.</span></span> <span data-ttu-id="9ec09-374">TDE führt die Echtzeitverschlüsselung und -entschlüsselung nicht nur der Datenbank, sondern auch der Backups und Transaktionsprotokolle durch.</span><span class="sxs-lookup"><span data-stu-id="9ec09-374">TDE executes real-time encryption and decryption of not just the database, but also the backups and transaction logs.</span></span>

<span data-ttu-id="9ec09-375">Die Verschlüsselungsparameter werden `master` in der Datenbank gespeichert und beim Start für die verbleibenden Vorgänge in den Arbeitsspeicher eingelesen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-375">The encryption parameters are stored in the `master` database and, on startup, are read into memory for the remaining operations.</span></span> <span data-ttu-id="9ec09-376">Dies bedeutet, dass die `master` Datenbank unverschlüsselt bleiben muss.</span><span class="sxs-lookup"><span data-stu-id="9ec09-376">This means that the `master` database must remain unencrypted.</span></span> <span data-ttu-id="9ec09-377">Der tatsächliche Schlüssel wird von Microsoft verwaltet.</span><span class="sxs-lookup"><span data-stu-id="9ec09-377">The actual key is managed by Microsoft.</span></span> <span data-ttu-id="9ec09-378">Benutzer mit hohen Sicherheitsanforderungen können jedoch ihren eigenen Schlüssel in Key Vault auf die gleiche Weise bereitstellen, wie dies bei Azure Storage der Vorgesehen ist.</span><span class="sxs-lookup"><span data-stu-id="9ec09-378">However, users with exacting security requirements may provide their own key in Key Vault in much the same way as is done for Azure Storage.</span></span> <span data-ttu-id="9ec09-379">Der Schlüsseltresor bietet Dienste wie Schlüsselrotation und Widerruf.</span><span class="sxs-lookup"><span data-stu-id="9ec09-379">The Key Vault provides for such services as key rotation and revocation.</span></span>

<span data-ttu-id="9ec09-380">Der "Transparente" Teil von TDS stammt aus der Tatsache, dass keine Clientänderungen erforderlich sind, um eine verschlüsselte Datenbank zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="9ec09-380">The "Transparent" part of TDS comes from the fact that there aren't client changes needed to use an encrypted database.</span></span> <span data-ttu-id="9ec09-381">Obwohl dieser Ansatz für eine gute Sicherheit sorgt, reicht das Durchsickern des Datenbankkennworts aus, damit Benutzer die Daten entschlüsseln können.</span><span class="sxs-lookup"><span data-stu-id="9ec09-381">While this approach provides for good security, leaking the database password is enough for users to be able to decrypt the data.</span></span> <span data-ttu-id="9ec09-382">Es gibt einen anderen Ansatz, der einzelne Spalten oder Tabellen in einer Datenbank verschlüsselt.</span><span class="sxs-lookup"><span data-stu-id="9ec09-382">There's another approach that encrypts individual columns or tables in a database.</span></span> <span data-ttu-id="9ec09-383">[Always Encrypted](https://docs.microsoft.com/azure/sql-database/sql-database-always-encrypted-azure-key-vault) stellt sicher, dass die verschlüsselten Daten zu keinem Zeitpunkt im Klartext in der Datenbank angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="9ec09-383">[Always Encrypted](https://docs.microsoft.com/azure/sql-database/sql-database-always-encrypted-azure-key-vault) ensures that at no point the encrypted data appears in plain text inside the database.</span></span>

<span data-ttu-id="9ec09-384">Das Einrichten dieser Verschlüsselungsstufe erfordert die Ausführung über einen Assistenten in SQL Server Management Studio, um die Art der Verschlüsselung auszuwählen und wo in Key Vault die zugehörigen Schlüssel gespeichert werden sollen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-384">Setting up this tier of encryption requires running through a wizard in SQL Server Management Studio to select the sort of encryption and where in Key Vault to store the associated keys.</span></span>

<span data-ttu-id="9ec09-385">![Abbildung 10-6 Auswählen von Spalten in einer Tabelle, die mit Always Encrypted](./media/always-encrypted.png)
Abbildung**10-6**verschlüsselt werden soll.</span><span class="sxs-lookup"><span data-stu-id="9ec09-385">![Figure 10-6 Selecting columns in a table to be encrypted using Always Encrypted](./media/always-encrypted.png)
**Figure 10-6**.</span></span> <span data-ttu-id="9ec09-386">Auswählen von Spalten in einer Tabelle, die mit Always Encrypted verschlüsselt werden sollen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-386">Selecting columns in a table to be encrypted using Always Encrypted.</span></span>

<span data-ttu-id="9ec09-387">Clientanwendungen, die Informationen aus diesen verschlüsselten Spalten lesen, müssen dem Lesen verschlüsselter Daten besondere Zulagen einteilen.</span><span class="sxs-lookup"><span data-stu-id="9ec09-387">Client applications that read information from these encrypted columns need to make special allowances to read encrypted data.</span></span> <span data-ttu-id="9ec09-388">Verbindungszeichenfolgen müssen mit `Column Encryption Setting=Enabled` aktualisiert werden, und Clientanmeldeinformationen müssen aus dem Schlüsseltresor abgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="9ec09-388">Connection strings need to be updated with `Column Encryption Setting=Enabled` and client credentials must be retrieved from the Key Vault.</span></span> <span data-ttu-id="9ec09-389">Der SQL Server-Client muss dann mit den Spaltenverschlüsselungsschlüsseln grundiert werden.</span><span class="sxs-lookup"><span data-stu-id="9ec09-389">The SQL Server client must then be primed with the column encryption keys.</span></span> <span data-ttu-id="9ec09-390">Sobald dies geschehen ist, verwenden die verbleibenden Aktionen die Standardschnittstellen zu SQL Client.</span><span class="sxs-lookup"><span data-stu-id="9ec09-390">Once that is done, the remaining actions use the standard interfaces to SQL Client.</span></span> <span data-ttu-id="9ec09-391">Das heißt, Tools wie Dapper und Entity Framework, die auf SQL Client basieren, werden weiterhin ohne Änderungen funktionieren.</span><span class="sxs-lookup"><span data-stu-id="9ec09-391">That is, tools like Dapper and Entity Framework, which are built on top of SQL Client, will continue to work without changes.</span></span> <span data-ttu-id="9ec09-392">Always Encrypted ist möglicherweise noch nicht für jeden SQL Server-Treiber in jeder Sprache verfügbar.</span><span class="sxs-lookup"><span data-stu-id="9ec09-392">Always Encrypted may not yet be available for every SQL Server driver on every language.</span></span>

<span data-ttu-id="9ec09-393">Die Kombination von TDE und Always Encrypted, die beide mit clientspezifischen Schlüsseln verwendet werden können, stellt sicher, dass selbst die anspruchsvollsten Verschlüsselungsanforderungen unterstützt werden.</span><span class="sxs-lookup"><span data-stu-id="9ec09-393">The combination of TDE and Always Encrypted, both of which can be used with client-specific keys, ensures that even the most exacting encryption requirements are supported.</span></span>

### <a name="cosmos-db"></a><span data-ttu-id="9ec09-394">Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="9ec09-394">Cosmos DB</span></span>

<span data-ttu-id="9ec09-395">Cosmos DB ist die neueste Datenbank, die von Microsoft in Azure bereitgestellt wird.</span><span class="sxs-lookup"><span data-stu-id="9ec09-395">Cosmos DB is the newest database provided by Microsoft in Azure.</span></span> <span data-ttu-id="9ec09-396">Es wurde von Grund auf mit Sicherheit und Kryptographie im Hinterkopf gebaut.</span><span class="sxs-lookup"><span data-stu-id="9ec09-396">It has been built from the ground up with security and cryptography in mind.</span></span> <span data-ttu-id="9ec09-397">Die AES-256bit-Verschlüsselung ist Standard für alle Cosmos DB-Datenbanken und kann nicht deaktiviert werden.</span><span class="sxs-lookup"><span data-stu-id="9ec09-397">AES-256bit encryption is standard for all Cosmos DB databases and can't be disabled.</span></span> <span data-ttu-id="9ec09-398">In Verbindung mit der TLS 1.2-Anforderung für die Kommunikation wird die gesamte Speicherlösung verschlüsselt.</span><span class="sxs-lookup"><span data-stu-id="9ec09-398">Coupled with the TLS 1.2 requirement for communication, the entire storage solution is encrypted.</span></span>

<span data-ttu-id="9ec09-399">![Abbildung 10-7 Der Fluss der Datenverschlüsselung innerhalb von Cosmos DB](./media/cosmos-encryption.png)
Abbildung**10-7**.</span><span class="sxs-lookup"><span data-stu-id="9ec09-399">![Figure 10-7 The flow of data encryption within Cosmos DB](./media/cosmos-encryption.png)
**Figure 10-7**.</span></span> <span data-ttu-id="9ec09-400">Der Fluss der Datenverschlüsselung innerhalb von Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="9ec09-400">The flow of data encryption within Cosmos DB.</span></span>

<span data-ttu-id="9ec09-401">Cosmos DB bietet zwar keine Kundenverschlüsselungsschlüssel an, aber das Team hat erhebliche Arbeit geleistet, um sicherzustellen, dass es PCI-DSS-kompatibel bleibt, ohne dies nicht zu tun.</span><span class="sxs-lookup"><span data-stu-id="9ec09-401">While Cosmos DB doesn't provide for supplying customer encryption keys, there has been significant work done by the team to ensure it remains PCI-DSS compliant without that.</span></span> <span data-ttu-id="9ec09-402">Cosmos DB unterstützt auch keine Einzelnespaltenverschlüsselung, die Der Azure SQL-Verschlüsselung s.</span><span class="sxs-lookup"><span data-stu-id="9ec09-402">Cosmos DB also doesn't support any sort of single column encryption similar to Azure SQL's Always Encrypted yet.</span></span>

## <a name="keeping-secure"></a><span data-ttu-id="9ec09-403">Sicherheit</span><span class="sxs-lookup"><span data-stu-id="9ec09-403">Keeping secure</span></span>

<span data-ttu-id="9ec09-404">Azure verfügt über alle Tools, die zum Veröffentlichen eines hochsicheren Produkts erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="9ec09-404">Azure has all the tools necessary to release a highly secure product.</span></span> <span data-ttu-id="9ec09-405">Eine Kette ist jedoch nur so stark wie ihr schwächstes Glied.</span><span class="sxs-lookup"><span data-stu-id="9ec09-405">However, a chain is only as strong as its weakest link.</span></span> <span data-ttu-id="9ec09-406">Wenn die zusätzlich zu Azure bereitgestellten Anwendungen nicht mit einer angemessenen Sicherheitseinstellung und guten Sicherheitsüberwachungen entwickelt werden, werden sie zum schwachen Glied in der Kette.</span><span class="sxs-lookup"><span data-stu-id="9ec09-406">If the applications deployed on top of Azure aren't developed with a proper security mindset and good security audits, then they become the weak link in the chain.</span></span> <span data-ttu-id="9ec09-407">Es gibt viele großartige statische Analysetools, Verschlüsselungsbibliotheken und Sicherheitspraktiken, die verwendet werden können, um sicherzustellen, dass die in Azure installierte Software so sicher ist wie Azure selbst.</span><span class="sxs-lookup"><span data-stu-id="9ec09-407">There are many great static analysis tools, encryption libraries, and security practices that can be used to ensure that the software installed on Azure is as secure as Azure itself.</span></span> <span data-ttu-id="9ec09-408">Beispiele hierfür sind [statische Analysetools](https://www.whitesourcesoftware.com/), [Verschlüsselungsbibliotheken](https://www.libressl.org/)und [Sicherheitspraktiken](https://azure.microsoft.com/resources/videos/red-vs-blue-internal-security-penetration-testing-of-microsoft-azure/).</span><span class="sxs-lookup"><span data-stu-id="9ec09-408">Examples include [static analysis tools](https://www.whitesourcesoftware.com/), [encryption libraries](https://www.libressl.org/), and [security practices](https://azure.microsoft.com/resources/videos/red-vs-blue-internal-security-penetration-testing-of-microsoft-azure/).</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="9ec09-409">[Zurück](security.md)
>[Weiter](devops.md)</span><span class="sxs-lookup"><span data-stu-id="9ec09-409">[Previous](security.md)
[Next](devops.md)</span></span>
