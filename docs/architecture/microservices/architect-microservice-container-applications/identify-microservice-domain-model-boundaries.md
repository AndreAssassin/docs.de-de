---
title: Identifizieren von Domänenmodellgrenzen für Microservices
description: Lernen Sie die wesentlichen Grundlagen der Partitionierung einer großen Anwendung in Microservices kennen, um eine stabile Architektur zu erzielen.
ms.date: 09/20/2018
ms.openlocfilehash: 9c433066dd8e93dbb09b15e58c9c85617775723d
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 03/14/2020
ms.locfileid: "71834420"
---
# <a name="identify-domain-model-boundaries-for-each-microservice"></a><span data-ttu-id="60192-103">Identifizieren von Domänenmodellgrenzen für Microservices</span><span class="sxs-lookup"><span data-stu-id="60192-103">Identify domain-model boundaries for each microservice</span></span>

<span data-ttu-id="60192-104">Beim Identifizieren von Modellgrenzen und -größen für die einzelnen Microservices geht es nicht so sehr darum, eine möglichst kleinteilige Gliederung zu finden, wenngleich Sie sich um möglichst kleine Microservices bemühen sollten.</span><span class="sxs-lookup"><span data-stu-id="60192-104">The goal when identifying model boundaries and size for each microservice isn't to get to the most granular separation possible, although you should tend toward small microservices if possible.</span></span> <span data-ttu-id="60192-105">Vielmehr geht es darum, dass Sie geleitet von Ihrem Wissen über die Domäne eine möglichst sinnvolle Gliederung vornehmen.</span><span class="sxs-lookup"><span data-stu-id="60192-105">Instead, your goal should be to get to the most meaningful separation guided by your domain knowledge.</span></span> <span data-ttu-id="60192-106">Der Schwerpunkt liegt nicht auf der Größe, sondern auf den geschäftlichen Funktionen.</span><span class="sxs-lookup"><span data-stu-id="60192-106">The emphasis isn't on the size, but instead on business capabilities.</span></span> <span data-ttu-id="60192-107">Ferner ist für einen bestimmten Bereich der Anwendung aufgrund einer großen Anzahl von Abhängigkeiten möglicherweise eine klare Kohäsion gefordert, sodass nur ein einziger Microservice erstellt werden sollte.</span><span class="sxs-lookup"><span data-stu-id="60192-107">In addition, if there's clear cohesion needed for a certain area of the application based on a high number of dependencies, that indicates the need for a single microservice, too.</span></span> <span data-ttu-id="60192-108">Kohäsion stellt eine Möglichkeit der Gliederung oder Gruppierung von Microservices dar.</span><span class="sxs-lookup"><span data-stu-id="60192-108">Cohesion is a way to identify how to break apart or group together microservices.</span></span> <span data-ttu-id="60192-109">Letztlich sollten Sie die Größe Ihres Microservices immer wieder anpassen, je mehr Wissen über die Domäne Sie erlangen.</span><span class="sxs-lookup"><span data-stu-id="60192-109">Ultimately, while you gain more knowledge about the domain, you should adapt the size of your microservice, iteratively.</span></span> <span data-ttu-id="60192-110">Die Suche nach der richtigen Größe ist kein einmaliger Vorgang.</span><span class="sxs-lookup"><span data-stu-id="60192-110">Finding the right size isn't a one-shot process.</span></span>

<span data-ttu-id="60192-111">[Sam Newman](https://samnewman.io/), ein anerkannter Befürworter von Microservices und Autor von [Microservices: Konzeption und Design](https://samnewman.io/books/building_microservices/), weist darauf hin, dass Microservices auf Basis des bereits vorgestellten Konzepts von Kontextgrenzen (Teil des domänengesteuertes Designs) konzipiert und entworfen werden sollten.</span><span class="sxs-lookup"><span data-stu-id="60192-111">[Sam Newman](https://samnewman.io/), a recognized promoter of microservices and author of the book [Building Microservices](https://samnewman.io/books/building_microservices/), highlights that you should design your microservices based on the Bounded Context (BC) pattern (part of domain-driven design), as introduced earlier.</span></span> <span data-ttu-id="60192-112">Eine Kontextgrenze kann aus mehreren physischen Diensten bestehen, aber nicht umgekehrt.</span><span class="sxs-lookup"><span data-stu-id="60192-112">Sometimes, a BC could be composed of several physical services, but not vice versa.</span></span>

<span data-ttu-id="60192-113">Ein Domänenmodell mit bestimmten Domänenentitäten kommt in einer konkreten Kontextgrenze oder in einem konkreten Microservice zum Tragen.</span><span class="sxs-lookup"><span data-stu-id="60192-113">A domain model with specific domain entities applies within a concrete BC or microservice.</span></span> <span data-ttu-id="60192-114">Eine Kontextgrenze schränkt die Anwendbarkeit eines Domänenmodells ein und vermittelt den Mitgliedern des Entwicklerteams ein klares und einheitliches Verständnis davon, welche Teile kohäsiv sein müssen und welche unabhängig voneinander entwickelt werden können.</span><span class="sxs-lookup"><span data-stu-id="60192-114">A BC delimits the applicability of a domain model and gives developer team members a clear and shared understanding of what must be cohesive and what can be developed independently.</span></span> <span data-ttu-id="60192-115">Dieselben Ziele gelten für Microservices.</span><span class="sxs-lookup"><span data-stu-id="60192-115">These are the same goals for microservices.</span></span>

<span data-ttu-id="60192-116">Ein weiterer Faktor, der Ihre Entwurfsentscheidung beeinflusst, ist das [Gesetz von Conway](https://en.wikipedia.org/wiki/Conway%27s_law), das besagt, dass eine Anwendung die sozialen Grenzen der Organisation widerspiegelt, die sie erstellt.</span><span class="sxs-lookup"><span data-stu-id="60192-116">Another tool that informs your design choice is [Conway's law](https://en.wikipedia.org/wiki/Conway%27s_law), which states that an application will reflect the social boundaries of the organization that produced it.</span></span> <span data-ttu-id="60192-117">Manchmal verhält es sich jedoch genau umgekehrt: Die Organisation eines Unternehmens wird durch die Software bestimmt.</span><span class="sxs-lookup"><span data-stu-id="60192-117">But sometimes the opposite is true -the company's organization is formed by the software.</span></span> <span data-ttu-id="60192-118">Möglicherweise müssen Sie das Gesetz von Conway umkehren und die Grenzen, in Anlehnung an Beratungsergebnisse hinsichtlich der Geschäftsprozesse, entsprechend der gewünschten Organisation Ihres Unternehmens definieren.</span><span class="sxs-lookup"><span data-stu-id="60192-118">You might need to reverse Conway's law and build the boundaries the way you want the company to be organized, leaning toward business process consulting.</span></span>

<span data-ttu-id="60192-119">Um Kontextgrenzen zu identifizieren, können Sie ein DDD-Muster (Domain Driven Design) verwenden, das als [Kontextzuordnungsmuster](https://www.infoq.com/articles/ddd-contextmapping) bezeichnet wird.</span><span class="sxs-lookup"><span data-stu-id="60192-119">To identify bounded contexts, you can use a DDD pattern called the [Context Mapping pattern](https://www.infoq.com/articles/ddd-contextmapping).</span></span> <span data-ttu-id="60192-120">Bei der Kontextzuordnung geht es um die Identifizierung von verschiedenen Kontexten und deren Grenzen in der Anwendung.</span><span class="sxs-lookup"><span data-stu-id="60192-120">With Context Mapping, you identify the various contexts in the application and their boundaries.</span></span> <span data-ttu-id="60192-121">Üblicherweise werden für jedes kleine Subsystem ein eigener Kontext und eine eigene Grenze definiert.</span><span class="sxs-lookup"><span data-stu-id="60192-121">It's common to have a different context and boundary for each small subsystem, for instance.</span></span> <span data-ttu-id="60192-122">Dabei stellt die Kontextzuordnung ein Mittel zum Definieren und Verdeutlichen der Grenzen zwischen Domänen dar.</span><span class="sxs-lookup"><span data-stu-id="60192-122">The Context Map is a way to define and make explicit those boundaries between domains.</span></span> <span data-ttu-id="60192-123">Eine Kontextgrenze ist autonom, enthält die Details einer einzelnen Domäne, wie etwa die Domänenentitäten, und definiert Integrationsverträge mit anderen Kontextgrenzen.</span><span class="sxs-lookup"><span data-stu-id="60192-123">A BC is autonomous and includes the details of a single domain -details like the domain entities- and defines integration contracts with other BCs.</span></span> <span data-ttu-id="60192-124">Dies ist mit der Definition eines Microservice vergleichbar: Ein Microservice ist autonom, implementiert bestimmte Domänenfunktionen und muss Schnittstellen bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="60192-124">This is similar to the definition of a microservice: it's autonomous, it implements certain domain capability, and it must provide interfaces.</span></span> <span data-ttu-id="60192-125">Daher sind Kontextzuordnung und das Konzept der Kontextgrenze gute Methoden für die Identifizierung der Domänenmodellgrenzen von Microservices.</span><span class="sxs-lookup"><span data-stu-id="60192-125">This is why Context Mapping and the Bounded Context pattern are good approaches for identifying the domain model boundaries of your microservices.</span></span>

<span data-ttu-id="60192-126">Beim Entwickeln einer großen Anwendung werden Sie erkennen, wie das Domänenmodell fragmentiert werden kann – ein Domänenexperte aus der Katalogdomäne wird Entitäten in Katalog- und Bestandsdomänen anders nennen als beispielsweise ein Versanddomänenexperte.</span><span class="sxs-lookup"><span data-stu-id="60192-126">When designing a large application, you'll see how its domain model can be fragmented - a domain expert from the catalog domain will name entities differently in the catalog and inventory domains than a shipping domain expert, for instance.</span></span> <span data-ttu-id="60192-127">Die Benutzerdomänenentität weist beispielsweise bei einem CRM-Experten, der alle Details zum Kunden speichern möchte, eine andere Größe und Attributzahl auf, als bei einem Bestelldomänenexperten, der nur bestimmte Kundendaten benötigt.</span><span class="sxs-lookup"><span data-stu-id="60192-127">Or the user domain entity might be different in size and number of attributes when dealing with a CRM expert who wants to store every detail about the customer than for an ordering domain expert who just needs partial data about the customer.</span></span> <span data-ttu-id="60192-128">Es ist sehr schwierig, alle Domänenbegriffe über alle Domänen in einer großen Anwendung hinweg eindeutig zu definieren.</span><span class="sxs-lookup"><span data-stu-id="60192-128">It's very hard to disambiguate all domain terms across all the domains related to a large application.</span></span> <span data-ttu-id="60192-129">Das Wichtigste ist jedoch, dass Sie nicht versuchen sollten, die Begriffe zu vereinheitlichen.</span><span class="sxs-lookup"><span data-stu-id="60192-129">But the most important thing is that you shouldn't try to unify the terms.</span></span> <span data-ttu-id="60192-130">Akzeptieren Sie die Unterschiede und die Vielfalt, die jede Domäne einbringt.</span><span class="sxs-lookup"><span data-stu-id="60192-130">Instead, accept the differences and richness provided by each domain.</span></span> <span data-ttu-id="60192-131">Wenn Sie versuchen, für die gesamte Anwendung eine einheitliche Datenbank zu entwickeln, führt der Versuch, ein einheitliches Vokabular zu erstellen, zu merkwürdigen Begriffen, die für keinen der vielen Domänenexperten richtig klingen.</span><span class="sxs-lookup"><span data-stu-id="60192-131">If you try to have a unified database for the whole application, attempts at a unified vocabulary will be awkward and won't sound right to any of the multiple domain experts.</span></span> <span data-ttu-id="60192-132">Daher helfen (in Form von Microservices implementierte) Kontextgrenzen bei der Klärung, an welchen Stellen bestimmte Domänenbegriffe verwendet werden können und an welchen Stellen das System aufgeteilt und zusätzliche Kontextgrenzen mit anderen Domänen erstellt werden müssen.</span><span class="sxs-lookup"><span data-stu-id="60192-132">Therefore, BCs (implemented as microservices) will help you to clarify where you can use certain domain terms and where you'll need to split the system and create additional BCs with different domains.</span></span>

<span data-ttu-id="60192-133">Sie wissen, dass Sie die richtigen Grenzen und Größen für die einzelnen Kontextgrenzen und Domänenmodelle gefunden haben, wenn wenige starke Beziehungen zwischen Domänenmodellen vorhanden sind und Sie beim Durchführen typischer Anwendungsvorgänge keine Informationen aus mehreren Domänenmodellen zusammenführen müssen.</span><span class="sxs-lookup"><span data-stu-id="60192-133">You'll know that you got the right boundaries and sizes of each BC and domain model if you have few strong relationships between domain models, and you do not usually need to merge information from multiple domain models when performing typical application operations.</span></span>

<span data-ttu-id="60192-134">Die vielleicht beste Antwort auf die Frage, wie groß ein Domänenmodell für einzelne Microservices sein muss, ist folgende: Es sollte autonome, möglichst isolierte Kontextgrenzen aufweisen und Ihnen die Arbeit ohne ständiges Wechseln zu anderen Kontexten (Modellen anderer Microservices) ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="60192-134">Perhaps the best answer to the question of how large a domain model for each microservice should be is the following: it should have an autonomous BC, as isolated as possible, that enables you to work without having to constantly switch to other contexts (other microservice's models).</span></span> <span data-ttu-id="60192-135">Abbildung 4-10 zeigt, wie für mehrere Microservices (mehrere Kontextgrenzen) je nach Anforderungen der einzelnen, in Ihrer Anwendung identifizierten Domänen eigene Modelle und Entitäten definiert werden können.</span><span class="sxs-lookup"><span data-stu-id="60192-135">In Figure 4-10, you can see how multiple microservices (multiple BCs) each has their own model and how their entities can be defined, depending on the specific requirements for each of the identified domains in your application.</span></span>

![Das Diagramm zeigt Entitäten in verschiedenen Modellgrenzen.](./media/identify-microservice-domain-model-boundaries/identify-entities-microservice-model-boundries.png)

<span data-ttu-id="60192-137">**Abbildung 4-10**.</span><span class="sxs-lookup"><span data-stu-id="60192-137">**Figure 4-10**.</span></span> <span data-ttu-id="60192-138">Identifizieren von Entitäten und Microservice-Modellgrenzen</span><span class="sxs-lookup"><span data-stu-id="60192-138">Identifying entities and microservice model boundaries</span></span>

<span data-ttu-id="60192-139">In Abbildung 4-10 ist ein Beispielszenario für ein System zur Verwaltung von Onlinekonferenzen dargestellt.</span><span class="sxs-lookup"><span data-stu-id="60192-139">Figure 4-10 illustrates a sample scenario related to an online conference management system.</span></span> <span data-ttu-id="60192-140">Die gleiche Entität wird je nach Kontextgrenze als „Benutzer“, „Käufer“, „Zahler“ und „Kunden“ angezeigt.</span><span class="sxs-lookup"><span data-stu-id="60192-140">The same entity appears as "Users", "Buyers", "Payers", and "Customers" depending on the bounded context.</span></span> <span data-ttu-id="60192-141">Basierend auf Domänen, die Domänenexperten für Sie definiert haben, haben Sie verschiedene Kontextgrenzen identifiziert, die als Microservices implementiert werden können.</span><span class="sxs-lookup"><span data-stu-id="60192-141">You've identified several BCs that could be implemented as microservices, based on domains that domain experts defined for you.</span></span> <span data-ttu-id="60192-142">Wie Sie sehen, sind einige Entitäten nur in einem Microservicemodell vorhanden, wie etwa „Zahlungen“ im Microservice „Zahlungen“.</span><span class="sxs-lookup"><span data-stu-id="60192-142">As you can see, there are entities that are present just in a single microservice model, like Payments in the Payment microservice.</span></span> <span data-ttu-id="60192-143">Diese lassen sich einfach implementieren.</span><span class="sxs-lookup"><span data-stu-id="60192-143">Those will be easy to implement.</span></span>

<span data-ttu-id="60192-144">Es können jedoch auch Entitäten vorhanden sein, die eine andere Form aufweisen, jedoch dieselbe Identität über die verschiedenen Domänenmodelle aus den verschiedenen Microservices hinweg teilen.</span><span class="sxs-lookup"><span data-stu-id="60192-144">However, you might also have entities that have a different shape but share the same identity across the multiple domain models from the multiple microservices.</span></span> <span data-ttu-id="60192-145">So lässt sich beispielsweise die Entität „Benutzer“ im Microservice „Konferenzenmanagement“ identifizieren.</span><span class="sxs-lookup"><span data-stu-id="60192-145">For example, the User entity is identified in the Conferences Management microservice.</span></span> <span data-ttu-id="60192-146">Dieser Benutzer mit dieser Identität wird im Microservice „Bestellungen“ als „Käufer“ bzw. im Microservice „Zahlung“ als „Zahlender“ und im Microservice „Kundenservice“ als „Kunde“ bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="60192-146">That same user, with the same identity, is the one named Buyers in the Ordering microservice, or the one named Payer in the Payment microservice, and even the one named Customer in the Customer Service microservice.</span></span> <span data-ttu-id="60192-147">Grund dafür ist, dass ein Benutzer je nach der von den einzelnen Domänenexperten verwendeten [ubiquitären Sprache](https://martinfowler.com/bliki/UbiquitousLanguage.html) eine unterschiedliche Perspektive mit unterschiedlichen Attributen aufweisen kann.</span><span class="sxs-lookup"><span data-stu-id="60192-147">This is because, depending on the [ubiquitous language](https://martinfowler.com/bliki/UbiquitousLanguage.html) that each domain expert is using, a user might have a different perspective even with different attributes.</span></span> <span data-ttu-id="60192-148">Die Benutzerentität im Microservicemodell „Konferenzenmanagement“ enthält möglicherweise die meisten der Attribute mit persönlichen Daten.</span><span class="sxs-lookup"><span data-stu-id="60192-148">The user entity in the microservice model named Conferences Management might have most of its personal data attributes.</span></span> <span data-ttu-id="60192-149">Dieser Benutzer benötigt als „Zahlender“ im Microservice „Zahlung“ oder als „Kunde“ im Microservice „Kundenservice“ möglicherweise nicht dieselben Attribute.</span><span class="sxs-lookup"><span data-stu-id="60192-149">However, that same user in the shape of Payer in the microservice Payment or in the shape of Customer in the microservice Customer Service might not need the same list of attributes.</span></span>

<span data-ttu-id="60192-150">Ein ähnliches Konzept ist in Abbildung 4-11 dargestellt.</span><span class="sxs-lookup"><span data-stu-id="60192-150">A similar approach is illustrated in Figure 4-11.</span></span>

![Das Diagramm zeigt die Zerlegung eines Datenmodells in mehrere Domänenmodelle.](./media/identify-microservice-domain-model-boundaries/decompose-traditional-data-models.png)

<span data-ttu-id="60192-152">**Abbildung 4-11**.</span><span class="sxs-lookup"><span data-stu-id="60192-152">**Figure 4-11**.</span></span> <span data-ttu-id="60192-153">Zerlegen von herkömmlichen Datenmodellen in mehrere Domänenmodelle</span><span class="sxs-lookup"><span data-stu-id="60192-153">Decomposing traditional data models into multiple domain models</span></span>

<span data-ttu-id="60192-154">Wenn Sie in herkömmliches Datenmodell auf verschiedene Kontextgrenzen aufteilen, können Sie verschiedene Entitäten mit der gleichen Identität einrichten (ein Käufer ist gleichzeitig ein Benutzer), die in den einzelnen Kontextgrenzen unterschiedliche Attribute aufweisen.</span><span class="sxs-lookup"><span data-stu-id="60192-154">When decomposing a traditional data model between bounded contexts, you can have different entities that share the same identity (a buyer is also a user) with different attributes in each bounded context.</span></span> <span data-ttu-id="60192-155">Wie Sie sehen, ist der Benutzer im Microservicemodell „Konferenzenmanagement“ als Entität „Benutzer“ und im Microservice „Preise“ als Entität „Käufer“ mit jeweils anderen Attributen oder Details vorhanden.</span><span class="sxs-lookup"><span data-stu-id="60192-155">You can see how the user is present in the Conferences Management microservice model as the User entity and is also present in the form of the Buyer entity in the Pricing microservice, with alternate attributes or details about the user when it's actually a buyer.</span></span> <span data-ttu-id="60192-156">Nicht für jeden Microservice bzw. für jede Kontextgrenze sind alle Daten einer Benutzerentität erforderlich. Welche Daten erforderlich sind, hängt von dem zu lösenden Problem oder vom Kontext ab.</span><span class="sxs-lookup"><span data-stu-id="60192-156">Each microservice or BC might not need all the data related to a User entity, just part of it, depending on the problem to solve or the context.</span></span> <span data-ttu-id="60192-157">Im Microservicemodell „Preise“ werden beispielsweise Adresse und Name des Benutzers nicht benötigt, sondern nur die ID (als Identität) und der Status, was sich bei der Preisgestaltung für die Lizenzen pro Käufer auf Rabatte auswirkt.</span><span class="sxs-lookup"><span data-stu-id="60192-157">For instance, in the Pricing microservice model, you do not need the address or the name of the user, just the ID (as identity) and Status, which will have an impact on discounts when pricing the seats per buyer.</span></span>

<span data-ttu-id="60192-158">Die Entität „Lizenz“ hat zwar in allen Domänenmodellen denselben Namen, weist jedoch unterschiedliche Attribute auf.</span><span class="sxs-lookup"><span data-stu-id="60192-158">The Seat entity has the same name but different attributes in each domain model.</span></span> <span data-ttu-id="60192-159">„Lizenz“ nutzt „Identität“ basierend auf derselben ID wie „Benutzer“ und „Käufer“.</span><span class="sxs-lookup"><span data-stu-id="60192-159">However, Seat shares identity based on the same ID, as happens with User and Buyer.</span></span>

<span data-ttu-id="60192-160">Grundsätzlich gibt es in verschiedenen Diensten (Domänen), die alle die Identität eines Benutzers gemeinsam verwenden, ein gemeinsames Konzept eines Benutzers.</span><span class="sxs-lookup"><span data-stu-id="60192-160">Basically, there's a shared concept of a user that exists in multiple services (domains), which all share the identity of that user.</span></span> <span data-ttu-id="60192-161">In den einzelnen Domänenmodellen werden jedoch möglicherweise zusätzliche oder andere Details zur Benutzerentität verwendet.</span><span class="sxs-lookup"><span data-stu-id="60192-161">But in each domain model there might be additional or different details about the user entity.</span></span> <span data-ttu-id="60192-162">Daher muss es eine Möglichkeit geben, eine Benutzerentität aus einer Domäne (einem Microservice) einer anderen zuzuordnen.</span><span class="sxs-lookup"><span data-stu-id="60192-162">Therefore, there needs to be a way to map a user entity from one domain (microservice) to another.</span></span>

<span data-ttu-id="60192-163">Es hat verschiedene Vorteile, eine Benutzerentität nicht mit derselben Anzahl von Attributen in allen Domänen zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="60192-163">There are several benefits to not sharing the same user entity with the same number of attributes across domains.</span></span> <span data-ttu-id="60192-164">Ein Vorteil ist der, dass weniger Duplikate vorhanden sind, sodass Microservicemodelle nur über die tatsächlich benötigten Daten verfügen.</span><span class="sxs-lookup"><span data-stu-id="60192-164">One benefit is to reduce duplication, so that microservice models do not have any data that they do not need.</span></span> <span data-ttu-id="60192-165">Ein weiterer Vorteil besteht darin, dass ein Mastermicroservice vorhanden ist, der pro Entität einen bestimmten Datentyp aufweist, sodass Updates und Abfragen für diesen Datentyp nur von diesem Microservice unterstützt werden.</span><span class="sxs-lookup"><span data-stu-id="60192-165">Another benefit is having a master microservice that owns a certain type of data per entity so that updates and queries for that type of data are driven only by that microservice.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="60192-166">[Zurück](distributed-data-management.md)
>[Weiter](direct-client-to-microservice-communication-versus-the-api-gateway-pattern.md)</span><span class="sxs-lookup"><span data-stu-id="60192-166">[Previous](distributed-data-management.md)
[Next](direct-client-to-microservice-communication-versus-the-api-gateway-pattern.md)</span></span>
