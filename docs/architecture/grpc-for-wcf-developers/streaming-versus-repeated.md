---
title: Streaming-Dienste vs. wiederholte Felder - gRPC für WCF-Entwickler
description: Vergleichen Sie wiederholte Felder mit Streamingdiensten als Möglichkeiten zum Übergeben von Datensammlungen mithilfe von gRPC.
ms.date: 09/02/2019
ms.openlocfilehash: 542ebc393f9c9c1ad717d02d01fab33d85c18917
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 03/12/2020
ms.locfileid: "79147749"
---
# <a name="grpc-streaming-services-vs-repeated-fields"></a><span data-ttu-id="de836-103">gRPC-Streamingdienste im Vergleich zu wiederholten Feldern</span><span class="sxs-lookup"><span data-stu-id="de836-103">gRPC streaming services vs. repeated fields</span></span>

<span data-ttu-id="de836-104">gRPC-Dienste bieten zwei Möglichkeiten zum Zurückgeben von Datasets oder Objektlisten.</span><span class="sxs-lookup"><span data-stu-id="de836-104">gRPC services provide two ways of returning datasets, or lists of objects.</span></span> <span data-ttu-id="de836-105">Die Protokollpuffer-Nachrichtenspezifikation `repeated` verwendet das Schlüsselwort zum Deklarieren von Listen oder Arrays von Nachrichten in einer anderen Nachricht.</span><span class="sxs-lookup"><span data-stu-id="de836-105">The Protocol Buffers message specification uses the `repeated` keyword for declaring lists or arrays of messages within another message.</span></span> <span data-ttu-id="de836-106">Die gRPC-Dienstspezifikation `stream` verwendet das Schlüsselwort, um eine lang andauernde persistente Verbindung zu deklarieren.</span><span class="sxs-lookup"><span data-stu-id="de836-106">The gRPC service specification uses the `stream` keyword to declare a long-running persistent connection.</span></span> <span data-ttu-id="de836-107">Über diese Verbindung werden mehrere Nachrichten gesendet und können einzeln verarbeitet werden.</span><span class="sxs-lookup"><span data-stu-id="de836-107">Over that connection, multiple messages are sent, and can be processed, individually.</span></span>

<span data-ttu-id="de836-108">Sie können die `stream` Funktion auch für lang andauernde Zeitdaten wie Benachrichtigungen oder Protokollnachrichten verwenden.</span><span class="sxs-lookup"><span data-stu-id="de836-108">You can also use the `stream` feature for long-running temporal data such as notifications or log messages.</span></span> <span data-ttu-id="de836-109">In diesem Kapitel wird jedoch die Verwendung für die Rückgabe eines einzelnen Datasets betrachtet.</span><span class="sxs-lookup"><span data-stu-id="de836-109">But this chapter will consider its use for returning a single dataset.</span></span>

<span data-ttu-id="de836-110">Welche Sie verwenden sollten, hängt von Faktoren wie:</span><span class="sxs-lookup"><span data-stu-id="de836-110">Which you should use depends on factors such as:</span></span>

- <span data-ttu-id="de836-111">Die Gesamtgröße des Datasets.</span><span class="sxs-lookup"><span data-stu-id="de836-111">The overall size of the dataset.</span></span>
- <span data-ttu-id="de836-112">Die Zeit, die zum Erstellen des Datasets am Client- oder Serverende erforderlich war.</span><span class="sxs-lookup"><span data-stu-id="de836-112">The time it took to create the dataset at either the client or server end.</span></span>
- <span data-ttu-id="de836-113">Gibt an, ob der Consumer des Datasets damit beginnen kann, darauf zu reagieren, sobald das erste Element verfügbar ist, oder ob er das vollständige Dataset benötigt, um etwas Nützliches zu tun.</span><span class="sxs-lookup"><span data-stu-id="de836-113">Whether the consumer of the dataset can start acting on it as soon as the first item is available, or needs the complete dataset to do anything useful.</span></span>

## <a name="when-to-use-repeated-fields"></a><span data-ttu-id="de836-114">Verwendung von `repeated` Feldern</span><span class="sxs-lookup"><span data-stu-id="de836-114">When to use `repeated` fields</span></span>

<span data-ttu-id="de836-115">Für jedes Dataset, das in der Größe eingeschränkt ist und in kurzer Zeit vollständig generiert werden `repeated` kann ( z. B. unter einer Sekunde – sollten Sie ein Feld in einer regulären Protobuf-Nachricht verwenden.</span><span class="sxs-lookup"><span data-stu-id="de836-115">For any dataset that's constrained in size and that can be generated in its entirety in a short time—say, under one second—you should use a `repeated` field in a regular Protobuf message.</span></span> <span data-ttu-id="de836-116">In einem E-Commerce-System ist das Erstellen einer Liste von Elementen innerhalb eines Auftrags wahrscheinlich schnell und die Liste wird nicht sehr groß sein.</span><span class="sxs-lookup"><span data-stu-id="de836-116">For example, in an e-commerce system, to build a list of items within an order is probably quick and the list won't be very large.</span></span> <span data-ttu-id="de836-117">Das Zurückgeben einer `repeated` einzelnen Nachricht mit einem Feld `stream` ist eine Größenordnung schneller als die Verwendung und verursacht weniger Netzwerkaufwand.</span><span class="sxs-lookup"><span data-stu-id="de836-117">Returning a single message with a `repeated` field is an order of magnitude faster than using `stream` and incurs less network overhead.</span></span>

<span data-ttu-id="de836-118">Wenn der Client alle Daten benötigt, bevor er mit der Verarbeitung beginnt, und `repeated` das Dataset klein genug ist, um es im Arbeitsspeicher zu erstellen, sollten Sie ein Feld verwenden.</span><span class="sxs-lookup"><span data-stu-id="de836-118">If the client needs all the data before starting to process it and the dataset is small enough to construct in memory, then consider using a `repeated` field.</span></span> <span data-ttu-id="de836-119">Betrachten Sie dies auch dann, wenn die Erstellung des Datasets im Arbeitsspeicher auf dem Server langsamer ist.</span><span class="sxs-lookup"><span data-stu-id="de836-119">Consider it even if the creation of the dataset in memory on the server is slower.</span></span>

## <a name="when-to-use-stream-methods"></a><span data-ttu-id="de836-120">Verwendung von `stream` Methoden</span><span class="sxs-lookup"><span data-stu-id="de836-120">When to use `stream` methods</span></span>

<span data-ttu-id="de836-121">Wenn die Nachrichtenobjekte in Ihren Datasets potenziell sehr groß sind, ist es am besten, wenn Sie sie mithilfe von Streaminganforderungen oder Antworten übertragen.</span><span class="sxs-lookup"><span data-stu-id="de836-121">When the message objects in your datasets are potentially very large, it's best for you transfer them by using streaming requests or responses.</span></span> <span data-ttu-id="de836-122">Effizienter ist es, ein großes Objekt im Arbeitsspeicher zu erstellen, es in das Netzwerk zu schreiben und dann die Ressourcen freizugeben.</span><span class="sxs-lookup"><span data-stu-id="de836-122">It's more efficient to construct a large object in memory, write it to the network, and then free up the resources.</span></span> <span data-ttu-id="de836-123">Dieser Ansatz verbessert die Skalierbarkeit Ihres Dienstes.</span><span class="sxs-lookup"><span data-stu-id="de836-123">This approach will improve the scalability of your service.</span></span>

<span data-ttu-id="de836-124">Ebenso sollten Sie Datasets von eingeschränkter Größe über Streams senden, um zu vermeiden, dass beim Erstellen nicht mehr Arbeitsspeicher zur Verfügung steht.</span><span class="sxs-lookup"><span data-stu-id="de836-124">Similarly, you should send datasets of unconstrained size over streams to avoid running out of memory while constructing them.</span></span>

<span data-ttu-id="de836-125">Bei Datasets, bei denen der Consumer jedes Element separat verarbeiten kann, sollten Sie die Verwendung eines Streams in Betracht ziehen, wenn der Fortschritt dem Benutzer angezeigt werden kann.</span><span class="sxs-lookup"><span data-stu-id="de836-125">For datasets where the consumer can separately process each item, you should consider using a stream if it means that progress can be indicated to the user.</span></span> <span data-ttu-id="de836-126">Die Verwendung eines Streams kann die Reaktionsfähigkeit einer Anwendung verbessern, aber Sie sollten sie gegen die Gesamtleistung der Anwendung abwägen.</span><span class="sxs-lookup"><span data-stu-id="de836-126">Using a stream can improve the responsiveness of an application, but you should balance it against the overall performance of the application.</span></span>

<span data-ttu-id="de836-127">Ein weiteres Szenario, in dem Streams nützlich sein können, ist, wenn eine Nachricht über mehrere Dienste hinweg verarbeitet wird.</span><span class="sxs-lookup"><span data-stu-id="de836-127">Another scenario where streams can be useful is where a message is being processed across multiple services.</span></span> <span data-ttu-id="de836-128">Wenn jeder Dienst in einer Kette einen Stream zurückgibt, kann der Terminaldienst (d. h. der letzte in der Kette) mit der Rückgabe von Nachrichten beginnen.</span><span class="sxs-lookup"><span data-stu-id="de836-128">If each service in a chain returns a stream, then the terminal service (that is, the last one in the chain) can start returning messages.</span></span> <span data-ttu-id="de836-129">Diese Nachrichten können verarbeitet und entlang der Kette an den ursprünglichen Anforderer zurückgesendet werden.</span><span class="sxs-lookup"><span data-stu-id="de836-129">These messages can be processed and passed back along the chain to the original requestor.</span></span> <span data-ttu-id="de836-130">Der Anforderer kann entweder einen Stream zurückgeben oder die Ergebnisse in einer einzelnen Antwortnachricht aggregieren.</span><span class="sxs-lookup"><span data-stu-id="de836-130">The requestor can either return a stream or aggregate the results into a single response message.</span></span> <span data-ttu-id="de836-131">Dieser Ansatz eignet sich gut für Muster wie MapReduce.</span><span class="sxs-lookup"><span data-stu-id="de836-131">This approach lends itself well to patterns like MapReduce.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="de836-132">[VorherigeS](migrate-duplex-services.md)
>[Weiter](client-libraries.md)</span><span class="sxs-lookup"><span data-stu-id="de836-132">[Previous](migrate-duplex-services.md)
[Next](client-libraries.md)</span></span>
