---
title: 'GrpC-Streamingdienste im Vergleich zu wiederholten Feldern: GrpC für WCF-Entwickler'
description: Vergleichen von wiederholten Feldern mit Streamingdiensten als Methoden zum Übergeben von Datensammlungen mit GrpC.
ms.date: 09/02/2019
ms.openlocfilehash: f2f13776586607ed489c45ebb324c0c5713bed99
ms.sourcegitcommit: f348c84443380a1959294cdf12babcb804cfa987
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 11/12/2019
ms.locfileid: "73966925"
---
# <a name="grpc-streaming-services-versus-repeated-fields"></a><span data-ttu-id="dac1c-103">GrpC-Streamingdienste im Vergleich zu wiederholten Feldern</span><span class="sxs-lookup"><span data-stu-id="dac1c-103">gRPC streaming services versus repeated fields</span></span>

<span data-ttu-id="dac1c-104">GrpC-Dienste bieten zwei Möglichkeiten, Datasets oder Listen von Objekten zurückzugeben.</span><span class="sxs-lookup"><span data-stu-id="dac1c-104">gRPC services provide two ways of returning datasets, or lists of objects.</span></span> <span data-ttu-id="dac1c-105">Die Protokollpuffer-Nachrichten Spezifikation verwendet das `repeated`-Schlüsselwort zum Deklarieren von Listen oder Arrays von Nachrichten in einer anderen Nachricht.</span><span class="sxs-lookup"><span data-stu-id="dac1c-105">The Protocol Buffers message specification uses the `repeated` keyword for declaring lists or arrays of messages within another message.</span></span> <span data-ttu-id="dac1c-106">Die GrpC-Dienst Spezifikation verwendet das `stream`-Schlüsselwort, um eine persistente Verbindung mit langer Laufzeit zu deklarieren, über die mehrere Nachrichten gesendet und einzeln verarbeitet werden können.</span><span class="sxs-lookup"><span data-stu-id="dac1c-106">The gRPC service specification uses the `stream` keyword to declare a long-running persistent connection over which multiple messages are sent, and can be processed, individually.</span></span> <span data-ttu-id="dac1c-107">Die `stream` Funktion kann auch für temporale Daten mit langer Ausführungszeit verwendet werden, wie z. b. Benachrichtigungen oder Protokollmeldungen, aber in diesem Kapitel wird die Verwendung für das Zurückgeben eines einzelnen Datasets in Erwägung gezogen.</span><span class="sxs-lookup"><span data-stu-id="dac1c-107">The `stream` feature can also be used for long-running temporal data such as notifications or log messages, but this chapter will consider its use for returning a single dataset.</span></span>

<span data-ttu-id="dac1c-108">Welche Informationen Sie verwenden sollten, hängt von verschiedenen Faktoren ab, wie z. b. der Gesamtgröße des Datasets, der Zeit, die zum Erstellen des Datasets auf dem Client-oder Server Ende benötigt wurde, und ob der Consumer des Datasets mit der Transaktion beginnen kann, sobald das erste Element verfügbar ist. oder benötigt das komplette DataSet, um etwas Nützliches auszuführen.</span><span class="sxs-lookup"><span data-stu-id="dac1c-108">Which you should use depends on various factors, such as the overall size of the dataset, the time it took to create the dataset at either the client or server end, and whether the consumer of the dataset can start acting on it as soon as the first item is available, or needs the complete dataset to do anything useful.</span></span>

## <a name="when-to-use-repeated-fields"></a><span data-ttu-id="dac1c-109">Verwendung `repeated` Felder</span><span class="sxs-lookup"><span data-stu-id="dac1c-109">When to use `repeated` fields</span></span>

<span data-ttu-id="dac1c-110">Für jedes Dataset, das in der Größe eingeschränkt ist und in einem kurzen Zeitraum vollständig generiert werden kann – beispielsweise unter einer Sekunde – sollten Sie ein `repeated` Feld in einer regulären protobuf-Nachricht verwenden.</span><span class="sxs-lookup"><span data-stu-id="dac1c-110">For any dataset that is constrained in size and that can be generated in its entirety in a short time—say, under one second—you should use a `repeated` field in a regular Protobuf message.</span></span> <span data-ttu-id="dac1c-111">Beispielsweise ist in einem e-Commerce-System das Erstellen einer Liste von Elementen innerhalb einer Bestellung wahrscheinlich schnell und die Liste ist nicht sehr groß.</span><span class="sxs-lookup"><span data-stu-id="dac1c-111">For example, in an e-commerce system, to build a list of items within an order is probably quick and the list won't be very large.</span></span> <span data-ttu-id="dac1c-112">Das Zurückgeben einer einzelnen Nachricht mit einem `repeated` Feld ist eine höhere Reihenfolge als die Verwendung eines `stream` und verursacht weniger Netzwerk Mehraufwand.</span><span class="sxs-lookup"><span data-stu-id="dac1c-112">Returning a single message with a `repeated` field is an order of magnitude faster than using a `stream` and incurs less network overhead.</span></span>

<span data-ttu-id="dac1c-113">Wenn der Client alle Daten benötigt, bevor er mit der Verarbeitung beginnt, und das DataSet klein genug ist, um im Arbeitsspeicher zu erstellen, sollten Sie die Verwendung eines `repeated` Felds in Erwägung gezogen, auch wenn die tatsächliche Erstellung des Datasets im Arbeitsspeicher auf dem Server langsamer ist.</span><span class="sxs-lookup"><span data-stu-id="dac1c-113">If the client needs all the data before starting to process it and the dataset is small enough to construct in memory, then consider using a `repeated` field even if the actual creation of the dataset in memory on the server is slower.</span></span>

## <a name="when-to-use-stream-methods"></a><span data-ttu-id="dac1c-114">Verwendungsmöglichkeiten von `stream` Methoden</span><span class="sxs-lookup"><span data-stu-id="dac1c-114">When to use `stream` methods</span></span>

<span data-ttu-id="dac1c-115">Datasets, in denen die Nachrichten Objekte potenziell sehr groß sind, werden am besten mithilfe von Streaminganforderungen oder Antworten übertragen.</span><span class="sxs-lookup"><span data-stu-id="dac1c-115">Datasets where the message objects are potentially very large are best transferred using streaming requests or responses.</span></span> <span data-ttu-id="dac1c-116">Es ist effizienter, ein großes Objekt im Speicher zu erstellen, es in das Netzwerk zu schreiben und dann die Ressourcen freizugeben.</span><span class="sxs-lookup"><span data-stu-id="dac1c-116">It's more efficient to construct a large object in memory, write it to the network and then free up the resources.</span></span> <span data-ttu-id="dac1c-117">Diese Vorgehensweise verbessert die Skalierbarkeit ihres Dienstanbieter.</span><span class="sxs-lookup"><span data-stu-id="dac1c-117">This approach will improve the scalability of your service.</span></span>

<span data-ttu-id="dac1c-118">Ebenso sollten Datasets mit eingeschränkter Größe über Datenströme gesendet werden, um zu vermeiden, dass beim Erstellen der Arbeitsspeicher nicht mehr genügend Arbeitsspeicher verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="dac1c-118">Similarly, datasets of unconstrained size should be sent over streams to avoid running out of memory while constructing them.</span></span>

<span data-ttu-id="dac1c-119">Bei Datasets, in denen jedes einzelne Element separat vom Consumer verarbeitet werden kann, sollten Sie die Verwendung eines Streams in Erwägung gezogen, wenn dies bedeutet, dass der Fortschritt für den Endbenutzer angezeigt werden kann.</span><span class="sxs-lookup"><span data-stu-id="dac1c-119">For datasets where each individual item can be processed separately by the consumer, you should consider using a stream if it means that progress can be indicated to the end user.</span></span> <span data-ttu-id="dac1c-120">Dies kann die offensichtliche Reaktionsfähigkeit einer Anwendung verbessern, obwohl dies gegen die Gesamtleistung der Anwendung ausgeglichen werden sollte.</span><span class="sxs-lookup"><span data-stu-id="dac1c-120">This could improve the apparent responsiveness of an application, although this should be balanced against the overall performance of the application.</span></span>

<span data-ttu-id="dac1c-121">Ein anderes Szenario, in dem Datenströme nützlich sein können, ist die Verarbeitung einer Nachricht über mehrere Dienste hinweg.</span><span class="sxs-lookup"><span data-stu-id="dac1c-121">Another scenario where streams can be useful is where a message is being processed across multiple services.</span></span> <span data-ttu-id="dac1c-122">Wenn jeder Dienst in einer Kette einen Stream zurückgibt, kann der Terminaldienst (d. h. der letzte in der Kette) Nachrichten zurückgeben, die verarbeitet und an den ursprünglichen Anforderer zurückgegeben werden können, wodurch entweder ein Stream zurückgegeben oder das führt zu einer einzelnen Antwortnachricht.</span><span class="sxs-lookup"><span data-stu-id="dac1c-122">If each service in a chain returns a stream, then the terminal service (that is, the last one in the chain) can start returning messages that can be processed and passed back along the chain to the original requestor, which can either return a stream or aggregate the results into a single response message.</span></span> <span data-ttu-id="dac1c-123">Diese Vorgehensweise eignet sich gut für Muster wie Map/Reduce.</span><span class="sxs-lookup"><span data-stu-id="dac1c-123">This approach lends itself well to patterns like Map/Reduce.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="dac1c-124">[Zurück](migrate-duplex-services.md)
>[Weiter](client-libraries.md)</span><span class="sxs-lookup"><span data-stu-id="dac1c-124">[Previous](migrate-duplex-services.md)
[Next](client-libraries.md)</span></span>
