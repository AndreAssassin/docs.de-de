---
title: Runtimebereitstellung für eigenständige .NET Core-App-Bereitstellungen.
description: Erfahren Sie mehr über die Änderungen an „dotnet publish“ für eigenständige Bereitstellungen.
author: KathleenDollard
ms.date: 05/31/2018
ms.custom: seodec18
ms.openlocfilehash: 6a0cdfb34973822c2f40cdb37d4038d3b7ad8e2a
ms.sourcegitcommit: 4f4a32a5c16a75724920fa9627c59985c41e173c
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 10/17/2019
ms.locfileid: "72522092"
---
# <a name="self-contained-deployment-runtime-roll-forward"></a><span data-ttu-id="ff6bc-103">Rollforward der eigenständigen Runtimebereitstellung</span><span class="sxs-lookup"><span data-stu-id="ff6bc-103">Self-contained deployment runtime roll forward</span></span>

<span data-ttu-id="ff6bc-104">[Eigenständige Anwendungsbereitstellungen](index.md) von .NET Core enthalten sowohl die .NET Core-Bibliotheken als auch die .NET Core-Runtime.</span><span class="sxs-lookup"><span data-stu-id="ff6bc-104">.NET Core [self-contained application deployments](index.md) include both the .NET Core libraries and the .NET Core runtime.</span></span> <span data-ttu-id="ff6bc-105">Beginnend mit .NET Core SDK 2.1 (Version 2.1.300) veröffentlicht eine eigenständige Anwendungsbereitstellung [die höchste Patch-Runtime auf Ihrem Computer](https://github.com/dotnet/designs/pull/36).</span><span class="sxs-lookup"><span data-stu-id="ff6bc-105">Starting in .NET Core 2.1 SDK (version 2.1.300), a self-contained application deployment [publishes the highest patch runtime on your machine](https://github.com/dotnet/designs/pull/36).</span></span> <span data-ttu-id="ff6bc-106">[`dotnet publish`](../tools/dotnet-publish.md) wählt für eine eigenständige Bereitstellung standardmäßig die aktuellste installierte Version als Teil des SDK auf dem veröffentlichenden Computer aus.</span><span class="sxs-lookup"><span data-stu-id="ff6bc-106">By default, [`dotnet publish`](../tools/dotnet-publish.md) for a self-contained deployment selects the latest version installed as part of the SDK on the publishing machine.</span></span> <span data-ttu-id="ff6bc-107">Dadurch kann Ihre bereitgestellte Anwendung während `publish` mit Problembehebungen der Sicherheit (und anderen Problembehebungen) ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="ff6bc-107">This enables your deployed application to run with security fixes (and other fixes) available during `publish`.</span></span> <span data-ttu-id="ff6bc-108">Die Anwendung muss neu veröffentlicht werden, um einen neuen Patch abzurufen.</span><span class="sxs-lookup"><span data-stu-id="ff6bc-108">The application must be re-published to obtain a new patch.</span></span> <span data-ttu-id="ff6bc-109">Eigenständige Anwendungen werden durch Angabe von `-r <RID>` auf dem Befehl `dotnet publish` oder durch Angabe des [Runtime-Bezeichners (RID)](../rid-catalog.md) in der Projektdatei (CSPROJ/VBPROJ) oder der Befehlszeile erstellt.</span><span class="sxs-lookup"><span data-stu-id="ff6bc-109">Self-contained applications are created by specifying `-r <RID>` on the `dotnet publish` command or by specifying the [runtime identifier (RID)](../rid-catalog.md) in the project file (csproj / vbproj) or on the command line.</span></span>

## <a name="patch-version-roll-forward-overview"></a><span data-ttu-id="ff6bc-110">Übersicht über Rollforward der Patchversion</span><span class="sxs-lookup"><span data-stu-id="ff6bc-110">Patch version roll forward overview</span></span>

<span data-ttu-id="ff6bc-111">[`restore`](../tools/dotnet-restore.md), [`build`](../tools/dotnet-build.md) und [`publish`](../tools/dotnet-publish.md) sind `dotnet`-Befehle, die separat ausgeführt werden können.</span><span class="sxs-lookup"><span data-stu-id="ff6bc-111">[`restore`](../tools/dotnet-restore.md), [`build`](../tools/dotnet-build.md) and [`publish`](../tools/dotnet-publish.md) are `dotnet` commands that can run separately.</span></span> <span data-ttu-id="ff6bc-112">Die Auswahl der Runtime ist Teil des Vorgangs `restore`, nicht `publish` oder `build`.</span><span class="sxs-lookup"><span data-stu-id="ff6bc-112">The runtime choice is part of the `restore` operation, not `publish` or `build`.</span></span> <span data-ttu-id="ff6bc-113">Wenn Sie `publish` aufrufen, wird die neueste Patchversion ausgewählt.</span><span class="sxs-lookup"><span data-stu-id="ff6bc-113">If you call `publish`, the latest patch version will be chosen.</span></span> <span data-ttu-id="ff6bc-114">Wenn Sie `publish` mit dem Argument `--no-restore` aufrufen, erhalten Sie möglicherweise nicht die gewünschte Patchversion, da ein vorheriger `restore`-Vorgang möglicherweise nicht mit der neuen Richtlinie für die Veröffentlichung eigenständiger Anwendungen ausgeführt wurde.</span><span class="sxs-lookup"><span data-stu-id="ff6bc-114">If you call `publish` with the `--no-restore` argument, then you may not get the desired patch version because a prior `restore` may not have been executed with the new self-contained application publishing policy.</span></span> <span data-ttu-id="ff6bc-115">In diesem Fall wird ein Buildfehler mit einem Text generiert, der dem Folgenden ähnelt:</span><span class="sxs-lookup"><span data-stu-id="ff6bc-115">In this case, a build error is generated with text similar to the following:</span></span>

  <span data-ttu-id="ff6bc-116">„Das Projekt wurde mit Microsoft.NETCore.App-Version 2.0.0 wiederhergestellt. Jedoch wird aufgrund der aktuellen Einstellungen stattdessen Version 2.0.6 verwendet.</span><span class="sxs-lookup"><span data-stu-id="ff6bc-116">"The project was restored using Microsoft.NETCore.App version 2.0.0, but with current settings, version 2.0.6 would be used instead.</span></span> <span data-ttu-id="ff6bc-117">Stellen Sie sicher, dass die gleichen Einstellungen für „restore“ und nachfolgende Vorgänge wie „build“ oder „publish“ verwendet werden, um dieses Problem zu beheben.</span><span class="sxs-lookup"><span data-stu-id="ff6bc-117">To resolve this issue, make sure the same settings are used for restore and for subsequent operations such as build or publish.</span></span> <span data-ttu-id="ff6bc-118">Dieser Fehler tritt in der Regel auf, wenn die Eigenschaft RuntimeIdentifier während den Vorgängen „build“ oder „publish“ festgelegt wird, jedoch nicht während „restore“.</span><span class="sxs-lookup"><span data-stu-id="ff6bc-118">Typically this issue can occur if the RuntimeIdentifier property is set during build or publish but not during restore."</span></span>

> [!NOTE]
> <span data-ttu-id="ff6bc-119">`restore` und `build` können implizit als Teil eines anderen Befehls ausgeführt werden, z.B. `publish`.</span><span class="sxs-lookup"><span data-stu-id="ff6bc-119">`restore` and `build` can be run implicitly as part of another command, like `publish`.</span></span> <span data-ttu-id="ff6bc-120">Wenn sie implizit als Teil eines anderen Befehls ausgeführt werden, wird zusätzlicher Kontext bereitgestellt, sodass die richtigen Artefakte erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="ff6bc-120">When run implicitly as part of another command, they are provided with additional context so that the right artifacts are produced.</span></span> <span data-ttu-id="ff6bc-121">Wenn Sie `publish` mit einer Runtime ausführen (z.B. `dotnet publish -r linux-x64`), stellt `restore` Pakete implizit für die Linux-x64-Runtime wieder her.</span><span class="sxs-lookup"><span data-stu-id="ff6bc-121">When you `publish` with a runtime (for example, `dotnet publish -r linux-x64`), the implicit `restore` restores packages for the linux-x64 runtime.</span></span> <span data-ttu-id="ff6bc-122">Wenn Sie `restore` explizit aufrufen, werden Runtime-Pakete nicht standardmäßig wiederhergestellt, da dieser Kontext nicht besteht.</span><span class="sxs-lookup"><span data-stu-id="ff6bc-122">If you call `restore` explicitly, it does not restore runtime packages by default, because it doesn't have that context.</span></span>

## <a name="how-to-avoid-restore-during-publish"></a><span data-ttu-id="ff6bc-123">Umgehen von restore während publish</span><span class="sxs-lookup"><span data-stu-id="ff6bc-123">How to avoid restore during publish</span></span>

<span data-ttu-id="ff6bc-124">Das Ausführen von `restore` als Teil des `publish`-Vorgangs kann für Ihr Szenario unangebracht sein.</span><span class="sxs-lookup"><span data-stu-id="ff6bc-124">Running `restore` as part of the `publish` operation may be undesirable for your scenario.</span></span> <span data-ttu-id="ff6bc-125">Führen Sie die folgenden Schritte aus, um `restore` während `publish` beim Erstellen eigenständiger Anwendungen zu vermeiden:</span><span class="sxs-lookup"><span data-stu-id="ff6bc-125">To avoid `restore` during `publish` while creating self-contained applications, do the following:</span></span>

- <span data-ttu-id="ff6bc-126">Legen Sie die Eigenschaft `RuntimeIdentifiers` auf eine durch Semikolons getrennte Liste aller zu veröffentlichenden [RIDs](../rid-catalog.md) fest.</span><span class="sxs-lookup"><span data-stu-id="ff6bc-126">Set the `RuntimeIdentifiers` property to a semicolon-separated list of all the [RIDs](../rid-catalog.md) to be published.</span></span>
- <span data-ttu-id="ff6bc-127">Legen Sie die `TargetLatestRuntimePatch` -Eigenschaft auf `true`fest.</span><span class="sxs-lookup"><span data-stu-id="ff6bc-127">Set the `TargetLatestRuntimePatch` property to `true`.</span></span>

## <a name="no-restore-argument-with-dotnet-publish-options"></a><span data-ttu-id="ff6bc-128">No-restore-Argument mit dotnet publish-Optionen</span><span class="sxs-lookup"><span data-stu-id="ff6bc-128">No-restore argument with dotnet publish options</span></span>

<span data-ttu-id="ff6bc-129">Wenn Sie sowohl eigenständige Anwendungen und [Framework-abhängige Anwendungen](index.md) mit derselben Projektdatei erstellen und das Argument `--no-restore` mit `dotnet publish` verwenden möchten, wählen Sie eine der folgenden Optionen aus:</span><span class="sxs-lookup"><span data-stu-id="ff6bc-129">If you want to create both self-contained applications and [framework-dependent applications](index.md) with the same project file, and you want to use the `--no-restore` argument with `dotnet publish`, then choose one of the following:</span></span>

1. <span data-ttu-id="ff6bc-130">Framework-abhängiges Verhalten bevorzugen.</span><span class="sxs-lookup"><span data-stu-id="ff6bc-130">Prefer the framework-dependent behavior.</span></span> <span data-ttu-id="ff6bc-131">Wenn die Anwendung Framework-abhängig ist, ist dies das Standardverhalten.</span><span class="sxs-lookup"><span data-stu-id="ff6bc-131">If the application is framework-dependent, this is the default behavior.</span></span> <span data-ttu-id="ff6bc-132">Wenn die Anwendung eigenständig ist und eine nicht gepatchte lokale Runtime (2.1.0) verwenden kann, legen Sie `false` für `TargetLatestRuntimePatch` in der Projektdatei fest.</span><span class="sxs-lookup"><span data-stu-id="ff6bc-132">If the application is self-contained, and can use an unpatched 2.1.0 local runtime, set the `TargetLatestRuntimePatch` to `false` in the project file.</span></span>

2. <span data-ttu-id="ff6bc-133">Eigenständiges Verhalten bevorzugen.</span><span class="sxs-lookup"><span data-stu-id="ff6bc-133">Prefer the self-contained behavior.</span></span> <span data-ttu-id="ff6bc-134">Wenn die Anwendung eigenständig ist, ist dies das Standardverhalten.</span><span class="sxs-lookup"><span data-stu-id="ff6bc-134">If the application is self-contained, this is the default behavior.</span></span> <span data-ttu-id="ff6bc-135">Wenn die Anwendung Framework-abhängig ist und den neuesten Patch erfordert, legen Sie `true` für `TargetLatestRuntimePatch` in der Projektdatei fest.</span><span class="sxs-lookup"><span data-stu-id="ff6bc-135">If the application is framework-dependent, and requires the latest patch installed, set `TargetLatestRuntimePatch` to `true` in the project file.</span></span>

3. <span data-ttu-id="ff6bc-136">Übernehmen Sie die explizite Kontrolle über die Runtime-Framework-Version, indem Sie für `RuntimeFrameworkVersion` die spezifische Patchversion in der Projektdatei festlegen.</span><span class="sxs-lookup"><span data-stu-id="ff6bc-136">Take explicit control of the runtime framework version by setting `RuntimeFrameworkVersion` to the specific patch version in the project file.</span></span>
