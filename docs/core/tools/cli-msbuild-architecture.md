---
title: Architektur der .NET Core-Befehlszeilentools
description: Informationen zu .NET Core-Toolschichten und Änderungen der neuesten Versionen.
ms.date: 03/06/2017
ms.openlocfilehash: 05183a9edc26615e00d6383043fd10d8bec06f2b
ms.sourcegitcommit: 4f4a32a5c16a75724920fa9627c59985c41e173c
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 10/17/2019
ms.locfileid: "72521309"
---
# <a name="high-level-overview-of-changes-in-the-net-core-tools"></a><span data-ttu-id="ac5f4-103">Allgemeine Übersicht über Änderungen in .NET Core-Tools</span><span class="sxs-lookup"><span data-stu-id="ac5f4-103">High-level overview of changes in the .NET Core tools</span></span>

<span data-ttu-id="ac5f4-104">Dieses Dokument beschreibt die Änderungen im Zusammenhang mit dem Verschieben von *project.json* nach MSBuild und das Projektsystem *csproj* mit Informationen zu den Änderungen an den Schichten der .NET Core-Tools und die Implementierung der CLI-Befehle.</span><span class="sxs-lookup"><span data-stu-id="ac5f4-104">This document describes the changes associated with moving from *project.json* to MSBuild and the *csproj* project system with information on the changes to the layering of the .NET Core tooling and the implementation of the CLI commands.</span></span> <span data-ttu-id="ac5f4-105">Diese Änderungen sind mit der Version von .NET Core SDK 1.0 und Visual Studio 2017 am 7. März 2017 aufgetreten (weitere Informationen finden Sie in der [Ankündigung](https://devblogs.microsoft.com/dotnet/announcing-net-core-tools-1-0/)), aber sie wurden zuerst mit der Version von .NET Core SDK Preview 3 implementiert.</span><span class="sxs-lookup"><span data-stu-id="ac5f4-105">These changes occurred with the release of .NET Core SDK 1.0 and Visual Studio 2017 on March 7, 2017 (see the [announcement](https://devblogs.microsoft.com/dotnet/announcing-net-core-tools-1-0/)) but were initially implemented with the release of the .NET Core SDK Preview 3.</span></span>

## <a name="moving-away-from-projectjson"></a><span data-ttu-id="ac5f4-106">Abkehr von „project.json“</span><span class="sxs-lookup"><span data-stu-id="ac5f4-106">Moving away from project.json</span></span>

<span data-ttu-id="ac5f4-107">Die größte Änderung in den Tools für .NET Core ist sicherlich die [Abkehr von „project.json“ hin zu „csproj“](https://devblogs.microsoft.com/dotnet/changes-to-project-json/) als Projektsystem.</span><span class="sxs-lookup"><span data-stu-id="ac5f4-107">The biggest change in the tooling for .NET Core is certainly the [move away from project.json to csproj](https://devblogs.microsoft.com/dotnet/changes-to-project-json/) as the project system.</span></span> <span data-ttu-id="ac5f4-108">Die neuesten Versionen der Befehlszeilentools unterstützen keine *project.json*-Dateien.</span><span class="sxs-lookup"><span data-stu-id="ac5f4-108">The latest versions of the command-line tools don't support *project.json* files.</span></span> <span data-ttu-id="ac5f4-109">Das heißt, dass diese Version nicht zum Erstellen, Ausführen und Veröffentlichen von auf „project.json“ basierenden Anwendungen und Bibliotheken verwendet werden kann.</span><span class="sxs-lookup"><span data-stu-id="ac5f4-109">That means that it cannot be used to build, run or publish project.json based applications and libraries.</span></span> <span data-ttu-id="ac5f4-110">Um diese Version der Tools verwenden zu können, müssen Sie Ihre vorhandenen Projekte migrieren oder neue beginnen.</span><span class="sxs-lookup"><span data-stu-id="ac5f4-110">In order to use this version of the tools, you will need to migrate your existing projects or start new ones.</span></span> 

<span data-ttu-id="ac5f4-111">Im Rahmen dieses Wechsels wurde die benutzerdefinierte Build-Engine, das zum Erstellen von „project.json“-Projekten entwickelt wurde, durch eine ausgereifte und vollausgestattete Build-Engine namens [MSBuild](https://github.com/Microsoft/msbuild) ersetzt.</span><span class="sxs-lookup"><span data-stu-id="ac5f4-111">As part of this move, the custom build engine that was developed to build project.json projects was replaced with a mature and fully capable build engine called [MSBuild](https://github.com/Microsoft/msbuild).</span></span> <span data-ttu-id="ac5f4-112">MSBuild ist eine bekannte Engine in der .NET-Community, da sie seit der ersten Version der Plattform eine wichtige Technologie darstellt.</span><span class="sxs-lookup"><span data-stu-id="ac5f4-112">MSBuild is a well-known engine in the .NET community, since it has been a key technology since the platform's first release.</span></span> <span data-ttu-id="ac5f4-113">Da mit MSBuild .NET Core-Anwendungen erstellt werden müssen, wurde MSBuild zu .NET Core portiert und kann auf allen Plattformen genutzt werden, auf denen .NET Core ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="ac5f4-113">Of course, because it needs to build .NET Core applications, MSBuild has been ported to .NET Core and can be used on any platform that .NET Core runs on.</span></span> <span data-ttu-id="ac5f4-114">Eines der wichtigsten Ziele von .NET Core ist ein plattformübergreifender Entwicklungsstapel, und wir haben dafür gesorgt, dass auch nach diesem Wechsel dieses Ziel erfüllt wird.</span><span class="sxs-lookup"><span data-stu-id="ac5f4-114">One of the main promises of .NET Core is that of a cross-platform development stack, and we have made sure that this move does not break that promise.</span></span>

> [!NOTE]
> <span data-ttu-id="ac5f4-115">Wenn Sie noch nicht mit MSBuild vertraut sind und mehr darüber erfahren möchten, lesen Sie zum Einstieg den Artikel [MSBuild Concepts](/visualstudio/msbuild/msbuild-concepts) (MSBuild-Konzepte).</span><span class="sxs-lookup"><span data-stu-id="ac5f4-115">If you are new to MSBuild and would like to learn more about it, you can start by reading the [MSBuild Concepts](/visualstudio/msbuild/msbuild-concepts) article.</span></span> 

## <a name="the-tooling-layers"></a><span data-ttu-id="ac5f4-116">Die Toolschichten</span><span class="sxs-lookup"><span data-stu-id="ac5f4-116">The tooling layers</span></span>

<span data-ttu-id="ac5f4-117">Die Frage, die sich nach der Abkehr vom vorhandenen Projektsystem und aufgrund des Wechsels der Build-Engine zwangsläufig stellt, ist, ob sich durch diese Änderungen die allgemeinen Schichten des gesamten Ökosystems von .NET Core-Tools ändern?</span><span class="sxs-lookup"><span data-stu-id="ac5f4-117">With the move away from the existing project system as well as with building engine switches, the question that naturally follows is do any of these changes change the overall "layering" of the whole .NET Core tooling ecosystem?</span></span> <span data-ttu-id="ac5f4-118">Gibt es neue Bits und Komponenten?</span><span class="sxs-lookup"><span data-stu-id="ac5f4-118">Are there new bits and components?</span></span>

<span data-ttu-id="ac5f4-119">Lassen Sie uns als schnelle Auffrischung mit den Schichten in Preview 2 beginnen, die die folgende Abbildung zeigt:</span><span class="sxs-lookup"><span data-stu-id="ac5f4-119">Let's start with a quick refresher on Preview 2 layering as shown in the following picture:</span></span>

![Allgemeine Architektur der Preview 2-Tools](media/cli-msbuild-architecture/p2-arch.png)

<span data-ttu-id="ac5f4-121">Die Schichtung der Tools ist recht einfach.</span><span class="sxs-lookup"><span data-stu-id="ac5f4-121">The layering of the tools is quite simple.</span></span> <span data-ttu-id="ac5f4-122">Ganz unten haben wir die .NET Core-Befehlszeilentools als Fundament.</span><span class="sxs-lookup"><span data-stu-id="ac5f4-122">At the bottom we have the .NET Core Command Line tools as a foundation.</span></span> <span data-ttu-id="ac5f4-123">Alle weiteren Tools auf höherer Ebene, z.B. Visual Studio oder Visual Studio Code, hängen zum Erstellen von Projekten, Wiederherstellen von Abhängigkeiten usw. von der CLI ab.</span><span class="sxs-lookup"><span data-stu-id="ac5f4-123">All other, higher-level tools such as Visual Studio or Visual Studio Code, depend and rely on the CLI to build projects, restore dependencies and so on.</span></span> <span data-ttu-id="ac5f4-124">Dies bedeutete, dass z.B. für einen Wiederherstellungsvorgang in Visual Studio der Befehl `dotnet restore` ([siehe Hinweis](#dotnet-restore-note)) in der CLI aufgerufen werden musste.</span><span class="sxs-lookup"><span data-stu-id="ac5f4-124">This meant that, for example, if Visual Studio wanted to perform a restore operation, it would call into `dotnet restore` ([see note](#dotnet-restore-note)) command in the CLI.</span></span> 

<span data-ttu-id="ac5f4-125">Durch den Wechsel zum neuen Projektsystem ändert sich die vorherige Abbildung:</span><span class="sxs-lookup"><span data-stu-id="ac5f4-125">With the move to the new project system, the previous diagram changes:</span></span> 

![Grundlegende Architektur von .NET Core SDK 1.0.0](media/cli-msbuild-architecture/p3-arch.png)

<span data-ttu-id="ac5f4-127">Der Hauptunterschied besteht darin, dass die CLI nicht mehr die Fundamentschicht darstellt. Diese Rolle wird jetzt von der „freigegebenen SDK-Komponente“ übernommen.</span><span class="sxs-lookup"><span data-stu-id="ac5f4-127">The main difference is that the CLI is not the foundational layer anymore; this role is now filled by the "shared SDK component".</span></span> <span data-ttu-id="ac5f4-128">Diese freigegebene SDK-Komponente ist eine Gruppe von Zielen und zugehörigen Aufgaben, die für das Kompilieren Ihres Codes, seine Veröffentlichung, das Packen von NuGet-Paketen usw. verantwortlich sind. Das SDK selbst ist Open Source und auf GitHub im Repository [SDK](https://github.com/dotnet/sdk) verfügbar.</span><span class="sxs-lookup"><span data-stu-id="ac5f4-128">This shared SDK component is a set of targets and associated tasks that are responsible for compiling your code, publishing it, packing NuGet packages etc. The SDK itself is open-source and is available on GitHub on the [SDK repo](https://github.com/dotnet/sdk).</span></span> 

> [!NOTE]
> <span data-ttu-id="ac5f4-129">Ein „Ziel“ ist ein MSBuild-Ausdruck, der einen benannten Vorgang angibt, den MSBuild aufrufen kann.</span><span class="sxs-lookup"><span data-stu-id="ac5f4-129">A "target" is a MSBuild term that indicates a named operation that MSBuild can invoke.</span></span> <span data-ttu-id="ac5f4-130">Es ist in der Regel an eine oder mehrere Aufgaben gekoppelt, die dem Ziel entsprechende Logik ausführen.</span><span class="sxs-lookup"><span data-stu-id="ac5f4-130">It is usually coupled with one or more tasks that execute some logic that the target is supposed to do.</span></span> <span data-ttu-id="ac5f4-131">MSBuild unterstützt viele vorgefertigte Ziele, z.B. `Copy` oder `Execute`. Außerdem können Benutzer mithilfe von verwaltetem Code eigene Aufgaben schreiben und Ziele definieren, um diese Aufgaben ausführen.</span><span class="sxs-lookup"><span data-stu-id="ac5f4-131">MSBuild supports many ready-made targets such as `Copy` or `Execute`; it also allows users to write their own tasks using managed code and define targets to execute those tasks.</span></span> <span data-ttu-id="ac5f4-132">Weitere Informationen finden Sie unter [MSBuild-Aufgaben](/visualstudio/msbuild/msbuild-tasks).</span><span class="sxs-lookup"><span data-stu-id="ac5f4-132">For more information, see [MSBuild tasks](/visualstudio/msbuild/msbuild-tasks).</span></span> 

<span data-ttu-id="ac5f4-133">Alle Toolsets nutzen nun die freigegebene SDK-Komponente und ihre Ziele. Das gibt auch für die CLI.</span><span class="sxs-lookup"><span data-stu-id="ac5f4-133">All the toolsets now consume the shared SDK component and its targets, CLI included.</span></span> <span data-ttu-id="ac5f4-134">Beispielsweise ruft die nächste Version von Visual Studio nicht den Befehl `dotnet restore` ([siehe Hinweis](#dotnet-restore-note)) auf, um die Abhängigkeiten für .NET Core-Projekte wiederherzustellen, sondern direkt das Ziel von „restore“.</span><span class="sxs-lookup"><span data-stu-id="ac5f4-134">For example, the next version of Visual Studio will not call into `dotnet restore` ([see note](#dotnet-restore-note)) command to restore dependencies for .NET Core projects, it will use the "Restore" target directly.</span></span> <span data-ttu-id="ac5f4-135">Da es sich MSBuild-Ziele handelt, können Sie MSBuild auch „roh“ verwenden, um sie mit dem Befehl [dotnet msbuild](dotnet-msbuild.md) auszuführen.</span><span class="sxs-lookup"><span data-stu-id="ac5f4-135">Since these are MSBuild targets, you can also use raw MSBuild to execute them using the [dotnet msbuild](dotnet-msbuild.md) command.</span></span> 

### <a name="cli-commands"></a><span data-ttu-id="ac5f4-136">CLI-Befehle</span><span class="sxs-lookup"><span data-stu-id="ac5f4-136">CLI commands</span></span>
<span data-ttu-id="ac5f4-137">Die freigegebene SDK-Komponente bedeutet, dass die meisten vorhandenen CLI-Befehle als MSBuild-Aufgaben und -Ziele neu implementiert wurden.</span><span class="sxs-lookup"><span data-stu-id="ac5f4-137">The shared SDK component means that the majority of existing CLI commands have been re-implemented as MSBuild tasks and targets.</span></span> <span data-ttu-id="ac5f4-138">Was bedeutet dies für die CLI-Befehle und Ihre Nutzung des Toolsets?</span><span class="sxs-lookup"><span data-stu-id="ac5f4-138">What does this mean for the CLI commands and your usage of the toolset?</span></span> 

<span data-ttu-id="ac5f4-139">Aus Benutzersicht ändert sich nicht die Art der Verwendung der CLI.</span><span class="sxs-lookup"><span data-stu-id="ac5f4-139">From an usage perspective, it doesn't change the way you use the CLI.</span></span> <span data-ttu-id="ac5f4-140">Die CLI weist noch immer die Hauptbefehle auf, die in der Preview 2-Version vorhanden sind:</span><span class="sxs-lookup"><span data-stu-id="ac5f4-140">The CLI still has the core commands that exist in Preview 2 release:</span></span>

- `new`
- `restore`
- `run` 
- `build`
- `publish`
- `test`
- `pack` 

<span data-ttu-id="ac5f4-141">Diese Befehle werden weiter wie erwartet ausgeführt (Erstellen, Veröffentlichen, Packen eines Projekts usw.).</span><span class="sxs-lookup"><span data-stu-id="ac5f4-141">These commands still do what you expect them to do (new up a project, build it, publish it, pack it and so on).</span></span> <span data-ttu-id="ac5f4-142">Die meisten Optionen haben sich nicht geändert und sind weiterhin vorhanden. Um sich mit den Änderungen vertraut zu machen, können Sie entweder die Hilfebildschirme der Befehle (über `dotnet <command> --help`) oder die Dokumentation auf dieser Website konsultieren.</span><span class="sxs-lookup"><span data-stu-id="ac5f4-142">Majority of the options are not changed, and are still there, and you can consult either the commands' help screens (using `dotnet <command> --help`) or documentation on this site to get familiar with any changes.</span></span> 

<span data-ttu-id="ac5f4-143">Aus Sicht der Ausführung verwenden die CLI-Befehle ihre Parameter und erstellen einen Aufruf an „rohes“ MSBuild, woraufhin das Modul die benötigten Eigenschaften festlegt und das gewünschte Ziel ausführt.</span><span class="sxs-lookup"><span data-stu-id="ac5f4-143">From an execution perspective, the CLI commands will take their parameters and construct a call to "raw" MSBuild that will set the needed properties and run the desired target.</span></span> <span data-ttu-id="ac5f4-144">Um dies besser zu veranschaulichen, betrachten Sie den folgenden Befehl:</span><span class="sxs-lookup"><span data-stu-id="ac5f4-144">To better illustrate this, consider the following command:</span></span> 

   ```dotnetcli
   dotnet publish -o pub -c Release
   ```
    
<span data-ttu-id="ac5f4-145">Mit diesem Befehl wird eine Anwendung im Ordner `pub` mithilfe der Konfiguration „Release“ veröffentlicht.</span><span class="sxs-lookup"><span data-stu-id="ac5f4-145">This command is publishing an application into a `pub` folder using the "Release" configuration.</span></span> <span data-ttu-id="ac5f4-146">Intern wird dieser Befehl in den folgenden MSBuild-Aufruf übersetzt:</span><span class="sxs-lookup"><span data-stu-id="ac5f4-146">Internally, this command gets translated into the following MSBuild invocation:</span></span> 

   ```dotnetcli
   dotnet msbuild -t:Publish -p:OutputPath=pub -p:Configuration=Release
   ```

<span data-ttu-id="ac5f4-147">Die wichtige Ausnahme dieser Regel sind die Befehle `new` und `run`, da sie nicht als MSBuild-Ziele implementiert wurden.</span><span class="sxs-lookup"><span data-stu-id="ac5f4-147">The notable exception to this rule are `new` and `run` commands, as they have not been implemented as MSBuild targets.</span></span>

<a name="dotnet-restore-note"></a>  
[!INCLUDE[DotNet Restore Note](~/includes/dotnet-restore-note.md)]
