---
title: Sichere Codierungsrichtlinien für .NET
description: Entwerfen Sie Code, mit dem gearbeitet werden soll. NET-erzwungene Berechtigungen und andere Erzwingung, um zu verhindern, dass bösartiger Code auf Daten zugreift oder andere Aktionen ausführt.
ms.date: 06/28/2018
helpviewer_keywords:
- managed wrapper to native code implementation
- secure coding
- reusable components
- library code that exposes protected resources
- code, security
- code security
- secure coding, options
- components [.NET], security
- code security, options
- security-neutral code
- security [.NET], coding guidelines
ms.assetid: 4f882d94-262b-4494-b0a6-ba9ba1f5f177
ms.openlocfilehash: 05f7e039ecdc0cd33baa015872924fb9e1f078aa
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 03/12/2020
ms.locfileid: "79187729"
---
# <a name="secure-coding-guidelines"></a><span data-ttu-id="b81f4-103">Sichere Codierungsrichtlinien</span><span class="sxs-lookup"><span data-stu-id="b81f4-103">Secure coding guidelines</span></span>

<span data-ttu-id="b81f4-104">Die nachweisbasierte Sicherheit und die Codezugriffssicherheit bieten sehr leistungsstarke, explizite Mechanismen zum Implementieren der Sicherheit.</span><span class="sxs-lookup"><span data-stu-id="b81f4-104">Evidence-based security and code access security provide very powerful, explicit mechanisms to implement security.</span></span> <span data-ttu-id="b81f4-105">Die meisten Anwendungscodes können einfach die von .NET implementierte Infrastruktur verwenden.</span><span class="sxs-lookup"><span data-stu-id="b81f4-105">Most application code can simply use the infrastructure implemented by .NET.</span></span> <span data-ttu-id="b81f4-106">In einigen Fällen ist eine zusätzliche anwendungsspezifische Sicherheit erforderlich, die entweder durch Erweitern des Sicherheitssystems oder mithilfe neuer Ad-hoc-Methoden erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="b81f4-106">In some cases, additional application-specific security is required, built either by extending the security system or by using new ad hoc methods.</span></span>

<span data-ttu-id="b81f4-107">Mithilfe von .NET erzwungenen Berechtigungen und anderer Erzwingung in Ihrem Code sollten Sie Barrieren errichten, um zu verhindern, dass böswilliger Code auf Informationen zugreift, die sie nicht haben sollen, oder andere unerwünschte Aktionen ausführen.</span><span class="sxs-lookup"><span data-stu-id="b81f4-107">Using .NET enforced permissions and other enforcement in your code, you should erect barriers to prevent malicious code from accessing information that you don't want it to have or performing other undesirable actions.</span></span> <span data-ttu-id="b81f4-108">Darüber hinaus müssen Sie mithilfe von vertrauenswürdigem Code ein Gleichgewicht zwischen Sicherheit und Nutzbarkeit herstellen.</span><span class="sxs-lookup"><span data-stu-id="b81f4-108">Additionally, you must strike a balance between security and usability in all the expected scenarios using trusted code.</span></span>

<span data-ttu-id="b81f4-109">In dieser Übersicht werden die verschiedenen Methoden zum Entwerfen von Code beschrieben, damit dieser mit dem Sicherheitssystem funktioniert.</span><span class="sxs-lookup"><span data-stu-id="b81f4-109">This overview describes the different ways code can be designed to work with the security system.</span></span>

## <a name="securing-resource-access"></a><span data-ttu-id="b81f4-110">Sichern des Ressourcenzugriffs</span><span class="sxs-lookup"><span data-stu-id="b81f4-110">Securing resource access</span></span>

<span data-ttu-id="b81f4-111">Beim Entwerfen und Schreiben von Code müssen Sie den Zugriff, den Code auf Ressourcen hat, schützen und einschränken. Dies gilt insbesondere, wenn Code mit unbekannter Herkunft verwendet oder aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="b81f4-111">When designing and writing your code, you need to protect and limit the access that code has to resources, especially when using or invoking code of unknown origin.</span></span> <span data-ttu-id="b81f4-112">Daher sollten Sie die folgenden Aspekte beachten, um sicherzustellen, dass Ihr Code sicher ist:</span><span class="sxs-lookup"><span data-stu-id="b81f4-112">So, keep in mind the following techniques to ensure your code is secure:</span></span>

- <span data-ttu-id="b81f4-113">Verwenden Sie nicht die Codezugriffssicherheit (Code Access Security, CAS).</span><span class="sxs-lookup"><span data-stu-id="b81f4-113">Do not use Code Access Security (CAS).</span></span>

- <span data-ttu-id="b81f4-114">Verwenden Sie keinen teilweise vertrauenswürdigen Code.</span><span class="sxs-lookup"><span data-stu-id="b81f4-114">Do not use partial trusted code.</span></span>

- <span data-ttu-id="b81f4-115">Verwenden Sie nicht das [AllowPartiallyTrustedCaller-Attribut](xref:System.Security.AllowPartiallyTrustedCallersAttribute) (APTCA).</span><span class="sxs-lookup"><span data-stu-id="b81f4-115">Do not use the [AllowPartiallyTrustedCaller](xref:System.Security.AllowPartiallyTrustedCallersAttribute) attribute (APTCA).</span></span>

- <span data-ttu-id="b81f4-116">Verwenden Sie nicht .NET-Remoting.</span><span class="sxs-lookup"><span data-stu-id="b81f4-116">Do not use .NET Remoting.</span></span>

- <span data-ttu-id="b81f4-117">Verwenden Sie nicht DCOM (Distributed Component Object Model).</span><span class="sxs-lookup"><span data-stu-id="b81f4-117">Do not use Distributed Component Object Model (DCOM).</span></span>

- <span data-ttu-id="b81f4-118">Verwenden Sie keine binären Formatierungsprogramme.</span><span class="sxs-lookup"><span data-stu-id="b81f4-118">Do not use binary formatters.</span></span>

<span data-ttu-id="b81f4-119">Codezugriffssicherheit und sicherheitstransparenter Code werden nicht als Sicherheitsgrenze mit teilweise vertrauenswürdigem Code unterstützt.</span><span class="sxs-lookup"><span data-stu-id="b81f4-119">Code Access Security and Security-Transparent Code are not supported as a security boundary with partially trusted code.</span></span> <span data-ttu-id="b81f4-120">Wir raten davon ab, Code unbekannter Herkunft zu laden und auszuführen, ohne alternative Sicherheitsmaßnahmen zu treffen.</span><span class="sxs-lookup"><span data-stu-id="b81f4-120">We advise against loading and executing code of unknown origins without putting alternative security measures in place.</span></span> <span data-ttu-id="b81f4-121">Die alternativen Sicherheitsmaßnahmen sind:</span><span class="sxs-lookup"><span data-stu-id="b81f4-121">The alternative security measures are:</span></span>

- <span data-ttu-id="b81f4-122">Virtualisierung</span><span class="sxs-lookup"><span data-stu-id="b81f4-122">Virtualization</span></span>

- <span data-ttu-id="b81f4-123">AppContainer</span><span class="sxs-lookup"><span data-stu-id="b81f4-123">AppContainers</span></span>

- <span data-ttu-id="b81f4-124">Betriebssystembenutzer und -berechtigungen</span><span class="sxs-lookup"><span data-stu-id="b81f4-124">Operating system (OS) users and permissions</span></span>

- <span data-ttu-id="b81f4-125">Hyper-V-Container</span><span class="sxs-lookup"><span data-stu-id="b81f4-125">Hyper-V containers</span></span>

## <a name="security-neutral-code"></a><span data-ttu-id="b81f4-126">Sicherheitsneutraler Code</span><span class="sxs-lookup"><span data-stu-id="b81f4-126">Security-neutral code</span></span>

<span data-ttu-id="b81f4-127">Sicherheitsneutraler Code wirkt sich nicht explizit auf das Sicherheitssystem aus.</span><span class="sxs-lookup"><span data-stu-id="b81f4-127">Security-neutral code does nothing explicit with the security system.</span></span> <span data-ttu-id="b81f4-128">Er wird mit den jeweiligen Berechtigungen ausgeführt, die er erhält.</span><span class="sxs-lookup"><span data-stu-id="b81f4-128">It runs with whatever permissions it receives.</span></span> <span data-ttu-id="b81f4-129">Obwohl Anwendungen, die Sicherheitsausnahmen im Zusammenhang mit geschützten Vorgängen nicht abfangen (z. B. die Verwendung von Dateien, Netzwerken usw.), zu einer nicht behandelten Ausnahme führen können, nutzt sicherheitsneutraler Code weiterhin die Sicherheitstechnologien in .NET .</span><span class="sxs-lookup"><span data-stu-id="b81f4-129">Although applications that fail to catch security exceptions associated with protected operations (such as using files, networking, and so on) can result in an unhandled exception, security-neutral code still takes advantage of the security technologies in .NET.</span></span>

<span data-ttu-id="b81f4-130">Eine sicherheitsneutrale Bibliothek weist besondere Merkmale auf, die Sie kennen sollten.</span><span class="sxs-lookup"><span data-stu-id="b81f4-130">A security-neutral library has special characteristics that you should understand.</span></span> <span data-ttu-id="b81f4-131">Angenommen, Ihre Bibliothek stellt API-Elemente bereit, die Dateien verwenden oder nicht verwalteten Code aufrufen.</span><span class="sxs-lookup"><span data-stu-id="b81f4-131">Suppose your library provides API elements that use files or call unmanaged code.</span></span> <span data-ttu-id="b81f4-132">Wenn Ihr Code nicht über die entsprechende Berechtigung verfügt, wird er nicht wie beschrieben ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="b81f4-132">If your code doesn't have the corresponding permission, it won't run as described.</span></span> <span data-ttu-id="b81f4-133">Auch wenn der Code über die Berechtigung verfügt, muss jeder ihn aufrufende Anwendungscode über dieselbe Berechtigung verfügen, damit er funktioniert.</span><span class="sxs-lookup"><span data-stu-id="b81f4-133">However, even if the code has the permission, any application code that calls it must have the same permission in order to work.</span></span> <span data-ttu-id="b81f4-134">Wenn der aufrufende Code nicht über <xref:System.Security.SecurityException> die richtige Berechtigung verfügt, wird als Ergebnis des Codezugriffs-Sicherheitsstapels eine angezeigt.</span><span class="sxs-lookup"><span data-stu-id="b81f4-134">If the calling code doesn't have the right permission, a <xref:System.Security.SecurityException> appears as a result of the code access security stack walk.</span></span>

## <a name="application-code-that-isnt-a-reusable-component"></a><span data-ttu-id="b81f4-135">Anwendungscode, der keine wiederverwendbare Komponente ist</span><span class="sxs-lookup"><span data-stu-id="b81f4-135">Application code that isn't a reusable component</span></span>

<span data-ttu-id="b81f4-136">Wenn Ihr Code Teil einer Anwendung ist, die nicht von anderem Code aufgerufen wird, ist die Sicherheit einfach, und eine spezielle Codierung ist möglicherweise nicht erforderlich.</span><span class="sxs-lookup"><span data-stu-id="b81f4-136">If your code is part of an application that won't be called by other code, security is simple and special coding might not be required.</span></span> <span data-ttu-id="b81f4-137">Beachten Sie jedoch, dass Ihr Code von schädlichem Code aufgerufen werden kann.</span><span class="sxs-lookup"><span data-stu-id="b81f4-137">However, remember that malicious code can call your code.</span></span> <span data-ttu-id="b81f4-138">Obwohl die Codezugriffssicherheit möglicherweise den Zugriff auf Ressourcen durch schädlichen Code beenden kann, könnte dieser Code weiterhin Werte Ihrer Felder oder Eigenschaften lesen, die möglicherweise vertrauliche Informationen enthalten.</span><span class="sxs-lookup"><span data-stu-id="b81f4-138">While code access security might stop malicious code from accessing resources, such code could still read values of your fields or properties that might contain sensitive information.</span></span>

<span data-ttu-id="b81f4-139">Darüber hinaus müssen Sie hinsichtlich schädlicher Eingaben vorsichtig sein, wenn Ihr Code Benutzereingaben aus dem Internet oder anderen unzuverlässigen Quellen akzeptiert.</span><span class="sxs-lookup"><span data-stu-id="b81f4-139">Additionally, if your code accepts user input from the Internet or other unreliable sources, you must be careful about malicious input.</span></span>

## <a name="managed-wrapper-to-native-code-implementation"></a><span data-ttu-id="b81f4-140">Verwalteter Wrapper für die implementierung von systemeigenem Code</span><span class="sxs-lookup"><span data-stu-id="b81f4-140">Managed wrapper to native code implementation</span></span>

<span data-ttu-id="b81f4-141">In diesem Szenario werden in der Regel einige nützliche Funktionen in systemeigenem Code implementiert, die Sie für verwalteten Code verfügbar machen können.</span><span class="sxs-lookup"><span data-stu-id="b81f4-141">Typically in this scenario, some useful functionality is implemented in native code that you want to make available to managed code.</span></span> <span data-ttu-id="b81f4-142">Verwaltete Wrapper sind mithilfe von Plattformaufrufen oder COM-Interops einfach zu schreiben.</span><span class="sxs-lookup"><span data-stu-id="b81f4-142">Managed wrappers are easy to write using either platform invoke or COM interop.</span></span> <span data-ttu-id="b81f4-143">Wenn Sie auf diese Weise vorgehen, müssen die Aufrufer der Wrapper über Berechtigungen für nicht verwalteten Code verfügen, um erfolgreich agieren zu können.</span><span class="sxs-lookup"><span data-stu-id="b81f4-143">However, if you do this, callers of your wrappers must have unmanaged code rights in order to succeed.</span></span> <span data-ttu-id="b81f4-144">Unter der Standardrichtlinie bedeutet dies, dass Code, der aus einem Intranet oder dem Internet heruntergeladen wurde, nicht mit den Wrappern funktioniert.</span><span class="sxs-lookup"><span data-stu-id="b81f4-144">Under default policy, this means that code downloaded from an intranet or the Internet won't work with the wrappers.</span></span>

<span data-ttu-id="b81f4-145">Anstatt nicht verwalteten Coderechten allen Anwendungen zu gewähren, die diese Wrapper verwenden, ist es besser, diese Rechte nur dem Wrappercode zu gewähren.</span><span class="sxs-lookup"><span data-stu-id="b81f4-145">Instead of giving unmanaged code rights to all applications that use these wrappers, it's better to give these rights only to the wrapper code.</span></span> <span data-ttu-id="b81f4-146">Wenn die zugrunde liegenden Funktionen keine Ressourcen verfügbar machen und die Implementierung entsprechend sicher ist, muss der Wrapper nur seine Rechte bestätigen, wodurch Aufrufe von beliebigem Code über den Wrapper ermöglicht werden.</span><span class="sxs-lookup"><span data-stu-id="b81f4-146">If the underlying functionality exposes no resources and the implementation is likewise safe, the wrapper only needs to assert its rights, which enables any code to call through it.</span></span> <span data-ttu-id="b81f4-147">Wenn Ressourcen einbezogen sind, sollte die Codierung der Sicherheit mit der im Bibliothekscodefall verwendeten Codierung identisch sein, der im nächsten Abschnitt beschrieben wird.</span><span class="sxs-lookup"><span data-stu-id="b81f4-147">When resources are involved, security coding should be the same as the library code case described in the next section.</span></span> <span data-ttu-id="b81f4-148">Da der Wrapper Aufrufer dieser Ressourcen potenziell verfügbar macht, ist eine sorgfältige Überprüfung der Sicherheit des systemeigenen Codes erforderlich, für die der Wrapper zuständig ist.</span><span class="sxs-lookup"><span data-stu-id="b81f4-148">Because the wrapper is potentially exposing callers to these resources, careful verification of the safety of the native code is necessary and is the wrapper's responsibility.</span></span>

## <a name="library-code-that-exposes-protected-resources"></a><span data-ttu-id="b81f4-149">Bibliothekscode, der geschützte Ressourcen verfügbar macht</span><span class="sxs-lookup"><span data-stu-id="b81f4-149">Library code that exposes protected resources</span></span>

<span data-ttu-id="b81f4-150">Der folgende Ansatz ist der leistungsstärkste und daher potenziell gefährlich (wenn falsch durchgeführt) für die Sicherheitscodierung: Ihre Bibliothek dient als Schnittstelle für anderen Code, um auf bestimmte Ressourcen zuzugreifen, die sonst nicht verfügbar sind, so wie die .NET-Klassen erzwingen. Berechtigungen für die Ressourcen, die sie verwenden.</span><span class="sxs-lookup"><span data-stu-id="b81f4-150">The following approach is the most powerful and hence potentially dangerous (if done incorrectly) for security coding: your library serves as an interface for other code to access certain resources that aren't otherwise available, just as the .NET classes enforce permissions for the resources they use.</span></span> <span data-ttu-id="b81f4-151">Überall dort, wo Sie eine Ressource verfügbar machen, muss der Code zunächst die für die Ressource geeignete Berechtigung anfordern (d. h. er muss eine Sicherheitsüberprüfung durchführen) und seine Rechte dann in der Regel bestätigen, um den eigentlichen Vorgang ausführen zu können.</span><span class="sxs-lookup"><span data-stu-id="b81f4-151">Wherever you expose a resource, your code must first demand the permission appropriate to the resource (that is, it must perform a security check) and then typically assert its rights to perform the actual operation.</span></span>

## <a name="related-topics"></a><span data-ttu-id="b81f4-152">Verwandte Themen</span><span class="sxs-lookup"><span data-stu-id="b81f4-152">Related topics</span></span>

|<span data-ttu-id="b81f4-153">Titel</span><span class="sxs-lookup"><span data-stu-id="b81f4-153">Title</span></span>|<span data-ttu-id="b81f4-154">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="b81f4-154">Description</span></span>|
|-----------|-----------------|
|[<span data-ttu-id="b81f4-155">Sichern von Statusdaten</span><span class="sxs-lookup"><span data-stu-id="b81f4-155">Securing State Data</span></span>](securing-state-data.md)|<span data-ttu-id="b81f4-156">Beschreibt, wie private Member geschützt werden.</span><span class="sxs-lookup"><span data-stu-id="b81f4-156">Describes how to protect private members.</span></span>|
|[<span data-ttu-id="b81f4-157">Sicherheit und Benutzereingaben</span><span class="sxs-lookup"><span data-stu-id="b81f4-157">Security and User Input</span></span>](security-and-user-input.md)|<span data-ttu-id="b81f4-158">Beschreibt die Sicherheitsrisiken für Anwendungen, die Benutzereingaben akzeptieren.</span><span class="sxs-lookup"><span data-stu-id="b81f4-158">Describes security concerns for applications that accept user input.</span></span>|
|[<span data-ttu-id="b81f4-159">Sicherheit und Racebedingungen</span><span class="sxs-lookup"><span data-stu-id="b81f4-159">Security and Race Conditions</span></span>](security-and-race-conditions.md)|<span data-ttu-id="b81f4-160">Beschreibt, wie Racebedingungen im Code vermieden werden.</span><span class="sxs-lookup"><span data-stu-id="b81f4-160">Describes how to avoid race conditions in your code.</span></span>|
|[<span data-ttu-id="b81f4-161">Sicherheit und dynamische Codegenerierung</span><span class="sxs-lookup"><span data-stu-id="b81f4-161">Security and On-the-Fly Code Generation</span></span>](security-and-on-the-fly-code-generation.md)|<span data-ttu-id="b81f4-162">Beschreibt die Sicherheitsrisiken für Anwendungen, die dynamischen Code generieren.</span><span class="sxs-lookup"><span data-stu-id="b81f4-162">Describes security concerns for applications that generate dynamic code.</span></span>|
|[<span data-ttu-id="b81f4-163">Rollenbasierte Sicherheit</span><span class="sxs-lookup"><span data-stu-id="b81f4-163">Role-Based Security</span></span>](role-based-security.md)|<span data-ttu-id="b81f4-164">Beschreibt die rollenbasierte Sicherheit von .NET im Detail und enthält Anweisungen für die Verwendung in Ihrem Code.</span><span class="sxs-lookup"><span data-stu-id="b81f4-164">Describes .NET role-based security in detail and provides instructions for using it in your code.</span></span>|
