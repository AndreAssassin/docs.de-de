---
title: Transaktionen
ms.date: 12/13/2019
description: Erfahren Sie, wie Sie Transaktionen verwenden.
ms.openlocfilehash: 4b72a1573a560ffd1bfd0f54d46ab3b135280976
ms.sourcegitcommit: 30a558d23e3ac5a52071121a52c305c85fe15726
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 12/25/2019
ms.locfileid: "75450381"
---
# <a name="transactions"></a><span data-ttu-id="b224b-103">Transaktionen</span><span class="sxs-lookup"><span data-stu-id="b224b-103">Transactions</span></span>

<span data-ttu-id="b224b-104">Mit Transaktionen können Sie mehrere SQL-Anweisungen in einer einzelnen Arbeitseinheit gruppieren, die als eine atomarische Einheit an die Datenbank übergeben wird.</span><span class="sxs-lookup"><span data-stu-id="b224b-104">Transactions let you group multiple SQL statements into a single unit of work that is committed to the database as one atomic unit.</span></span> <span data-ttu-id="b224b-105">Wenn eine Anweisung in der Transaktion fehlschlägt, können die von den vorherigen Anweisungen vorgenommenen Änderungen rückgängig gemacht werden.</span><span class="sxs-lookup"><span data-stu-id="b224b-105">If any statement in the transaction fails, changes made by the previous statements can be rolled back.</span></span> <span data-ttu-id="b224b-106">Der anfängliche Status der Datenbank, in dem die Transaktion gestartet wurde, wird beibehalten.</span><span class="sxs-lookup"><span data-stu-id="b224b-106">The initial state of the database when the transaction was started is preserved.</span></span> <span data-ttu-id="b224b-107">Die Verwendung einer Transaktion kann auch die Leistung von SQLite verbessern, wenn Sie zahlreiche Änderungen an der Datenbank gleichzeitig durchführen.</span><span class="sxs-lookup"><span data-stu-id="b224b-107">Using a transaction can also improve performance on SQLite when making numerous changes to the database at once.</span></span>

## <a name="concurrency"></a><span data-ttu-id="b224b-108">Nebenläufigkeit</span><span class="sxs-lookup"><span data-stu-id="b224b-108">Concurrency</span></span>

<span data-ttu-id="b224b-109">In SQLite darf jeweils nur eine Transaktion die Änderungen in der Datenbank ausstehend haben.</span><span class="sxs-lookup"><span data-stu-id="b224b-109">In SQLite, only one transaction is allowed to have changes pending in the database at a time.</span></span> <span data-ttu-id="b224b-110">Aus diesem Grund kann bei Aufrufen von <xref:Microsoft.Data.Sqlite.SqliteConnection.BeginTransaction%2A> und den `Execute` Methoden auf <xref:Microsoft.Data.Sqlite.SqliteCommand> ein Timeout auftreten, wenn eine andere Transaktion zu lange dauert.</span><span class="sxs-lookup"><span data-stu-id="b224b-110">Because of this, calls to <xref:Microsoft.Data.Sqlite.SqliteConnection.BeginTransaction%2A> and the `Execute` methods on <xref:Microsoft.Data.Sqlite.SqliteCommand> may time out if another transaction takes too long to complete.</span></span>

<span data-ttu-id="b224b-111">Weitere Informationen zu sperren, Wiederholungen und Timeouts finden Sie unter [Datenbankfehler](database-errors.md).</span><span class="sxs-lookup"><span data-stu-id="b224b-111">For more information about locking, retries, and timeouts, see [Database errors](database-errors.md).</span></span>

## <a name="isolation-levels"></a><span data-ttu-id="b224b-112">Isolationsgrade</span><span class="sxs-lookup"><span data-stu-id="b224b-112">Isolation levels</span></span>

<span data-ttu-id="b224b-113">Transaktionen sind standardmäßig in SQLite **serialisierbar** .</span><span class="sxs-lookup"><span data-stu-id="b224b-113">Transactions are **serializable** by default in SQLite.</span></span> <span data-ttu-id="b224b-114">Diese Isolationsstufe gewährleistet, dass alle innerhalb einer Transaktion vorgenommenen Änderungen vollständig isoliert sind.</span><span class="sxs-lookup"><span data-stu-id="b224b-114">This isolation level guarantees that any changes made within a transaction are completely isolated.</span></span> <span data-ttu-id="b224b-115">Andere Anweisungen, die außerhalb der Transaktion ausgeführt werden, sind von den Änderungen der Transaktion nicht betroffen.</span><span class="sxs-lookup"><span data-stu-id="b224b-115">Other statements executed outside of the transaction aren't affected by the transaction's changes.</span></span>

<span data-ttu-id="b224b-116">SQLite unterstützt bei Verwendung eines freigegebenen Caches auch **Lesevorgänge ohne** Commit.</span><span class="sxs-lookup"><span data-stu-id="b224b-116">SQLite also supports **read uncommitted** when using a shared cache.</span></span> <span data-ttu-id="b224b-117">Diese Ebene ermöglicht Dirty Reads, nicht wiederholbare Lesevorgänge und Phantom Werte:</span><span class="sxs-lookup"><span data-stu-id="b224b-117">This level allows dirty reads, nonrepeatable reads, and phantoms:</span></span>

- <span data-ttu-id="b224b-118">Eine *Dirty Read* tritt auf, wenn Änderungen, die in einer Transaktion ausstehen, von einer Abfrage außerhalb der Transaktion zurückgegeben werden, für die Änderungen in der Transaktion wird jedoch ein Rollback ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="b224b-118">A *dirty read* occurs when changes pending in one transaction are returned by a query outside of the transaction, but the changes in the transaction are rolled back.</span></span> <span data-ttu-id="b224b-119">Die Ergebnisse enthalten Daten, die niemals tatsächlich an die Datenbank übertragen wurden.</span><span class="sxs-lookup"><span data-stu-id="b224b-119">The results contain data that was never actually committed to the database.</span></span>

- <span data-ttu-id="b224b-120">Ein *nicht wiederholbarer Lese* Vorgang tritt auf, wenn eine Transaktion die gleiche Zeile zweimal abfragt. die Ergebnisse unterscheiden sich jedoch, weil Sie von einer anderen Transaktion zwischen den beiden Abfragen geändert wurden.</span><span class="sxs-lookup"><span data-stu-id="b224b-120">A *nonrepeatable read* occurs when a transaction queries same row twice, but the results are different because it was changed between the two queries by another transaction.</span></span>

- <span data-ttu-id="b224b-121">*Phantoms* sind Zeilen, die geändert oder hinzugefügt werden, um die WHERE-Klausel einer Abfrage während einer Transaktion zu erfüllen.</span><span class="sxs-lookup"><span data-stu-id="b224b-121">*Phantoms* are rows that get changed or added to meet the where clause of a query during a transaction.</span></span> <span data-ttu-id="b224b-122">Wenn dies zulässig ist, kann dieselbe Abfrage andere Zeilen zurückgeben, wenn Sie zweimal in derselben Transaktion ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="b224b-122">If allowed, the same query could return different rows when executed twice in the same transaction.</span></span>

<span data-ttu-id="b224b-123">Microsoft. Data. sqlite behandelt den IsolationLevel, der an <xref:Microsoft.Data.Sqlite.SqliteConnection.BeginTransaction%2A> als minimale Ebene übertragen wird.</span><span class="sxs-lookup"><span data-stu-id="b224b-123">Microsoft.Data.Sqlite treats the IsolationLevel passed to <xref:Microsoft.Data.Sqlite.SqliteConnection.BeginTransaction%2A> as a minimum level.</span></span> <span data-ttu-id="b224b-124">Die tatsächliche Isolationsstufe wird entweder als Lese-oder serialisierbar herauf gestuft.</span><span class="sxs-lookup"><span data-stu-id="b224b-124">The actual isolation level will be promoted to either read uncommitted or serializable.</span></span>

<span data-ttu-id="b224b-125">Der folgende Code simuliert eine Dirty Read.</span><span class="sxs-lookup"><span data-stu-id="b224b-125">The following code simulates a dirty read.</span></span> <span data-ttu-id="b224b-126">Beachten Sie, dass die Verbindungs Zeichenfolge `Cache=Shared`enthalten muss.</span><span class="sxs-lookup"><span data-stu-id="b224b-126">Note, the connection string must include `Cache=Shared`.</span></span>

[!code-csharp[](../../../../samples/snippets/standard/data/sqlite/DirtyReadSample/Program.cs?name=snippet_DirtyRead)]
