---
title: 'Vorgehensweise: Anzeigen lokalisierter Datums- und Uhrzeitangaben für Webbenutzer'
ms.date: 03/30/2017
ms.technology: dotnet-standard
helpviewer_keywords:
- formatting [.NET Framework], dates
- parsing strings [.NET Framework], date and time strings
- localization [.NET Framework], date and time displays
- formatting [.NET Framework], localized data
- displaying date and time data
- localized date displays [.NET Framework]
ms.assetid: 377fe93c-32be-421a-a30a-be639a46ede8
dev_langs:
- csharp
- vb
ms.openlocfilehash: 51142a168aba4408e6ce550a032960c4df6c3ae7
ms.sourcegitcommit: 559fcfbe4871636494870a8b716bf7325df34ac5
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 10/30/2019
ms.locfileid: "73138734"
---
# <a name="how-to-display-localized-date-and-time-information-to-web-users"></a><span data-ttu-id="59996-102">Vorgehensweise: Anzeigen lokalisierter Datums- und Uhrzeitangaben für Webbenutzer</span><span class="sxs-lookup"><span data-stu-id="59996-102">How to: Display Localized Date and Time Information to Web Users</span></span>
<span data-ttu-id="59996-103">Da eine Webseite überall in der Welt angezeigt werden kann, sollten Vorgänge, die Datums- und Uhrzeitwerte analysieren und formatieren, bei der Interaktion mit dem Benutzer nicht von einem Standardformat (am häufigsten das Format der lokalen Kultur des Webservers) abhängen.</span><span class="sxs-lookup"><span data-stu-id="59996-103">Because a Web page can be displayed anywhere in the world, operations that parse and format date and time values should not rely on a default format (which most often is the format of the Web server's local culture) when interacting with the user.</span></span> <span data-ttu-id="59996-104">Stattdessen sollten Webformulare, die vom Benutzer eingegebene Datums- und Uhrzeitzeichenfolgen behandeln, die Zeichenfolgen gemäß der bevorzugten Kultur des Benutzers analysieren.</span><span class="sxs-lookup"><span data-stu-id="59996-104">Instead, Web forms that handle date and time strings input by the user should parse the strings using the user's preferred culture.</span></span> <span data-ttu-id="59996-105">Entsprechend sollten Datums- und Uhrzeitdaten dem Benutzer in einem Format angezeigt werden, das seiner Kultur entspricht.</span><span class="sxs-lookup"><span data-stu-id="59996-105">Similarly, date and time data should be displayed to the user in a format that conforms to the user's culture.</span></span> <span data-ttu-id="59996-106">In diesem Thema wird gezeigt, wie Sie dazu vorgehen müssen.</span><span class="sxs-lookup"><span data-stu-id="59996-106">This topic shows how to do this.</span></span>  
  
## <a name="to-parse-date-and-time-strings-input-by-the-user"></a><span data-ttu-id="59996-107">So analysieren Sie vom Benutzer eingegebene Datums- und Uhrzeitzeichenfolgen</span><span class="sxs-lookup"><span data-stu-id="59996-107">To parse date and time strings input by the user</span></span>  
  
1. <span data-ttu-id="59996-108">Bestimmen Sie, ob das von der <xref:System.Web.HttpRequest.UserLanguages%2A?displayProperty=nameWithType>-Eigenschaft zurückgegebene Zeichenfolgenarray gefüllt ist.</span><span class="sxs-lookup"><span data-stu-id="59996-108">Determine whether the string array returned by the <xref:System.Web.HttpRequest.UserLanguages%2A?displayProperty=nameWithType> property is populated.</span></span> <span data-ttu-id="59996-109">Wenn dies nicht der Fall ist, fahren Sie mit Schritt 6 fort.</span><span class="sxs-lookup"><span data-stu-id="59996-109">If it is not, continue to step 6.</span></span>  
  
2. <span data-ttu-id="59996-110">Wenn das von der <xref:System.Web.HttpRequest.UserLanguages%2A>-Eigenschaft zurückgegebene Zeichenfolgenarray aufgefüllt ist, rufen Sie sein erstes Element ab.</span><span class="sxs-lookup"><span data-stu-id="59996-110">If the string array returned by the <xref:System.Web.HttpRequest.UserLanguages%2A> property is populated, retrieve its first element.</span></span> <span data-ttu-id="59996-111">Das erste Element gibt die Standardeinstellung des Benutzers oder seine bevorzugte Sprache und Region an.</span><span class="sxs-lookup"><span data-stu-id="59996-111">The first element indicates the user's default or preferred language and region.</span></span>  
  
3. <span data-ttu-id="59996-112">Instanziieren Sie ein <xref:System.Globalization.CultureInfo>-Objekt durch Aufrufen des <xref:System.Globalization.CultureInfo.%23ctor%28System.String%2CSystem.Boolean%29?displayProperty=nameWithType>-Konstruktors, das die bevorzugte Kultur des Benutzers darstellt.</span><span class="sxs-lookup"><span data-stu-id="59996-112">Instantiate a <xref:System.Globalization.CultureInfo> object that represents the user's preferred culture by calling the <xref:System.Globalization.CultureInfo.%23ctor%28System.String%2CSystem.Boolean%29?displayProperty=nameWithType> constructor.</span></span>  
  
4. <span data-ttu-id="59996-113">Rufen Sie entweder die `TryParse`- oder `Parse`-Methode des <xref:System.DateTime>- oder <xref:System.DateTimeOffset>-Typs ab, um die Konvertierung zu versuchen.</span><span class="sxs-lookup"><span data-stu-id="59996-113">Call either the `TryParse` or the `Parse` method of the <xref:System.DateTime> or <xref:System.DateTimeOffset> type to try the conversion.</span></span> <span data-ttu-id="59996-114">Verwenden Sie eine Überladung der `TryParse`- oder `Parse`-Methode mit einem `provider`-Parameter, und übergeben Sie sie an eines der folgenden Objekte:</span><span class="sxs-lookup"><span data-stu-id="59996-114">Use an overload of the `TryParse` or the `Parse` method with a `provider` parameter, and pass it either of the following:</span></span>  
  
    - <span data-ttu-id="59996-115">Das in Schritt 3 erstellte <xref:System.Globalization.CultureInfo>-Objekt</span><span class="sxs-lookup"><span data-stu-id="59996-115">The <xref:System.Globalization.CultureInfo> object created in step 3.</span></span>  
  
    - <span data-ttu-id="59996-116">Das von der <xref:System.Globalization.CultureInfo.DateTimeFormat%2A>-Eigenschaft zurückgegebene <xref:System.Globalization.DateTimeFormatInfo>-Objekt des in Schritt 3 erstellten <xref:System.Globalization.CultureInfo>-Objekts</span><span class="sxs-lookup"><span data-stu-id="59996-116">The <xref:System.Globalization.DateTimeFormatInfo> object that is returned by the <xref:System.Globalization.CultureInfo.DateTimeFormat%2A> property of the <xref:System.Globalization.CultureInfo> object created in step 3.</span></span>  
  
5. <span data-ttu-id="59996-117">Wenn bei der Konvertierung ein Fehler auftritt, wiederholen Sie die Schritte 2 bis 4 für jedes verbleibende Element im von der <xref:System.Web.HttpRequest.UserLanguages%2A>-Eigenschaft zurückgegebenen Zeichenfolgenarray.</span><span class="sxs-lookup"><span data-stu-id="59996-117">If the conversion fails, repeat steps 2 through 4 for each remaining element in the string array returned by the <xref:System.Web.HttpRequest.UserLanguages%2A> property.</span></span>  
  
6. <span data-ttu-id="59996-118">Wenn bei der Konvertierung weiterhin ein Fehler auftritt, oder das von der <xref:System.Web.HttpRequest.UserLanguages%2A>-Eigenschaft zurückgegebene Zeichenfolgenarray leer ist, analysieren Sie die Zeichenfolge mit der invarianten Kultur, die durch die <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType>-Eigenschaft zurückgegeben wird.</span><span class="sxs-lookup"><span data-stu-id="59996-118">If the conversion still fails or if the string array returned by the <xref:System.Web.HttpRequest.UserLanguages%2A> property is empty, parse the string by using the invariant culture, which is returned by the <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType> property.</span></span>  
  
## <a name="to-parse-the-local-date-and-time-of-the-users-request"></a><span data-ttu-id="59996-119">So analysieren Sie lokales Datum und Ortszeit der Anforderung des Benutzers</span><span class="sxs-lookup"><span data-stu-id="59996-119">To parse the local date and time of the user's request</span></span>  
  
1. <span data-ttu-id="59996-120">Fügen Sie einem Webformular ein <xref:System.Web.UI.WebControls.HiddenField>-Steuerelement hinzu.</span><span class="sxs-lookup"><span data-stu-id="59996-120">Add a <xref:System.Web.UI.WebControls.HiddenField> control to a Web form.</span></span>  
  
2. <span data-ttu-id="59996-121">Erstellen Sie eine JavaScript-Funktion, die das `onClick`-Ereignis einer `Submit`-Schaltfläche behandelt, indem sie aktuelles Datum und aktuelle Uhrzeit sowie den Offset zwischen der lokalen Zeitzone und der koordinierten Weltzeit (UTC) in die <xref:System.Web.UI.WebControls.HiddenField.Value%2A>-Eigenschaft schreibt.</span><span class="sxs-lookup"><span data-stu-id="59996-121">Create a JavaScript function that handles the `onClick` event of a `Submit` button by writing the current date and time and the local time zone's offset from Coordinated Universal Time (UTC) to the <xref:System.Web.UI.WebControls.HiddenField.Value%2A> property.</span></span> <span data-ttu-id="59996-122">Verwenden Sie ein Trennzeichen (z.B. ein Semikolon), um die beiden Komponenten der Zeichenfolge zu trennen.</span><span class="sxs-lookup"><span data-stu-id="59996-122">Use a delimiter (such as a semicolon) to separate the two components of the string.</span></span>  
  
3. <span data-ttu-id="59996-123">Verwenden Sie das <xref:System.Web.UI.Control.PreRender>-Ereignis des Webformulars, um die Funktion durch Übergeben des Skripttexts an die <xref:System.Web.UI.ClientScriptManager.RegisterClientScriptBlock%28System.Type%2CSystem.String%2CSystem.String%2CSystem.Boolean%29?displayProperty=nameWithType>-Methode in den HTML-Ausgabestream einzufügen.</span><span class="sxs-lookup"><span data-stu-id="59996-123">Use the Web form's <xref:System.Web.UI.Control.PreRender> event to inject the function into the HTML output stream by passing the text of the script to the <xref:System.Web.UI.ClientScriptManager.RegisterClientScriptBlock%28System.Type%2CSystem.String%2CSystem.String%2CSystem.Boolean%29?displayProperty=nameWithType> method.</span></span>  
  
4. <span data-ttu-id="59996-124">Verbinden Sie den Ereignishandler durch Übergabe des Namens der JavaScript-Funktion an das `OnClientClick`-Attribut der `Submit`-Schaltfläche mit dem `onClick`-Ereignis der `Submit`-Schaltfläche.</span><span class="sxs-lookup"><span data-stu-id="59996-124">Connect the event handler to the `Submit` button's `onClick` event by providing the name of the JavaScript function to the `OnClientClick` attribute of the `Submit` button.</span></span>  
  
5. <span data-ttu-id="59996-125">Erstellen Sie einen Ereignishandler für das <xref:System.Web.UI.WebControls.Button.Click>-Ereignis der `Submit`-Schaltfläche.</span><span class="sxs-lookup"><span data-stu-id="59996-125">Create a handler for the `Submit` button's <xref:System.Web.UI.WebControls.Button.Click> event.</span></span>  
  
6. <span data-ttu-id="59996-126">Bestimmen Sie im Ereignishandler, ob das von der <xref:System.Web.HttpRequest.UserLanguages%2A?displayProperty=nameWithType>-Eigenschaft zurückgegebene Zeichenfolgenarray gefüllt ist.</span><span class="sxs-lookup"><span data-stu-id="59996-126">In the event handler, determine whether the string array returned by the <xref:System.Web.HttpRequest.UserLanguages%2A?displayProperty=nameWithType> property is populated.</span></span> <span data-ttu-id="59996-127">Wenn dies nicht der Fall ist, fahren Sie mit Schritt 14 fort.</span><span class="sxs-lookup"><span data-stu-id="59996-127">If it is not, continue to step 14.</span></span>  
  
7. <span data-ttu-id="59996-128">Wenn das von der <xref:System.Web.HttpRequest.UserLanguages%2A>-Eigenschaft zurückgegebene Zeichenfolgenarray gefüllt ist, rufen Sie sein erstes Element ab.</span><span class="sxs-lookup"><span data-stu-id="59996-128">If the string array returned by the <xref:System.Web.HttpRequest.UserLanguages%2A> property is populated, retrieve its first element.</span></span> <span data-ttu-id="59996-129">Das erste Element gibt die Standardeinstellung des Benutzers oder seine bevorzugte Sprache und Region an.</span><span class="sxs-lookup"><span data-stu-id="59996-129">The first element indicates the user's default or preferred language and region.</span></span>  
  
8. <span data-ttu-id="59996-130">Instanziieren Sie ein <xref:System.Globalization.CultureInfo>-Objekt durch Aufrufen des <xref:System.Globalization.CultureInfo.%23ctor%28System.String%2CSystem.Boolean%29?displayProperty=nameWithType>-Konstruktors, das die bevorzugte Kultur des Benutzers darstellt.</span><span class="sxs-lookup"><span data-stu-id="59996-130">Instantiate a <xref:System.Globalization.CultureInfo> object that represents the user's preferred culture by calling the <xref:System.Globalization.CultureInfo.%23ctor%28System.String%2CSystem.Boolean%29?displayProperty=nameWithType> constructor.</span></span>  
  
9. <span data-ttu-id="59996-131">Übergeben Sie die Zeichenfolge, die der <xref:System.Web.UI.WebControls.HiddenField.Value%2A>-Eigenschaft zugewiesen ist, der <xref:System.String.Split%2A>-Methode, um die Zeichenfolgendarstellung des lokalen Datums und der Ortszeit des Benutzers und die Zeichenfolgendarstellung des Offsets der lokalen Zeitzone des Benutzers in separaten Arrayelementen zu speichern.</span><span class="sxs-lookup"><span data-stu-id="59996-131">Pass the string assigned to the <xref:System.Web.UI.WebControls.HiddenField.Value%2A> property to the <xref:System.String.Split%2A> method to store the string representation of the user's local date and time and the string representation of the user's local time zone offset in separate array elements.</span></span>  
  
10. <span data-ttu-id="59996-132">Rufen Sie entweder die <xref:System.DateTime.Parse%2A?displayProperty=nameWithType>- oder <xref:System.DateTime.TryParse%28System.String%2CSystem.IFormatProvider%2CSystem.Globalization.DateTimeStyles%2CSystem.DateTime%40%29?displayProperty=nameWithType>-Methode zum Konvertieren von Datum und Uhrzeit der Anforderung des Benutzers in einen <xref:System.DateTime>-Wert auf.</span><span class="sxs-lookup"><span data-stu-id="59996-132">Call either the <xref:System.DateTime.Parse%2A?displayProperty=nameWithType> or <xref:System.DateTime.TryParse%28System.String%2CSystem.IFormatProvider%2CSystem.Globalization.DateTimeStyles%2CSystem.DateTime%40%29?displayProperty=nameWithType> method to convert the date and time of the user's request to a <xref:System.DateTime> value.</span></span> <span data-ttu-id="59996-133">Verwenden Sie eine Überladung der Methode mit einem `provider`-Parameter, und übergeben Sie sie an eines der folgenden Objekte:</span><span class="sxs-lookup"><span data-stu-id="59996-133">Use an overload of the method with a `provider` parameter, and pass it either of the following:</span></span>  
  
    - <span data-ttu-id="59996-134">Das in Schritt 8 erstellte <xref:System.Globalization.CultureInfo>-Objekt.</span><span class="sxs-lookup"><span data-stu-id="59996-134">The <xref:System.Globalization.CultureInfo> object created in step 8.</span></span>  
  
    - <span data-ttu-id="59996-135">Das von der <xref:System.Globalization.CultureInfo.DateTimeFormat%2A>-Eigenschaft zurückgegebene <xref:System.Globalization.DateTimeFormatInfo>-Objekt des in Schritt 8 erstellten <xref:System.Globalization.CultureInfo>-Objekts.</span><span class="sxs-lookup"><span data-stu-id="59996-135">The <xref:System.Globalization.DateTimeFormatInfo> object that is returned by the <xref:System.Globalization.CultureInfo.DateTimeFormat%2A> property of the <xref:System.Globalization.CultureInfo> object created in step 8.</span></span>  
  
11. <span data-ttu-id="59996-136">Wenn beim Analysevorgang in Schritt 10 ein Fehler auftritt, fahren Sie mit Schritt 13 fort.</span><span class="sxs-lookup"><span data-stu-id="59996-136">If the parse operation in step 10 fails, go to step 13.</span></span> <span data-ttu-id="59996-137">Rufen Sie andernfalls die <xref:System.UInt32.Parse%28System.String%29?displayProperty=nameWithType>-Methode auf, um die Zeichenfolgendarstellung des Offsets der Zeitzone des Benutzers in eine ganze Zahl zu konvertieren.</span><span class="sxs-lookup"><span data-stu-id="59996-137">Otherwise, call the <xref:System.UInt32.Parse%28System.String%29?displayProperty=nameWithType> method to convert the string representation of the user's time zone offset to an integer.</span></span>  
  
12. <span data-ttu-id="59996-138">Instanziieren Sie ein <xref:System.DateTimeOffset>-Objekt durch Aufrufen des <xref:System.DateTimeOffset.%23ctor%28System.DateTime%2CSystem.TimeSpan%29?displayProperty=nameWithType>-Konstruktors, das die Ortszeit des Benutzers darstellt.</span><span class="sxs-lookup"><span data-stu-id="59996-138">Instantiate a <xref:System.DateTimeOffset> that represents the user's local time by calling the <xref:System.DateTimeOffset.%23ctor%28System.DateTime%2CSystem.TimeSpan%29?displayProperty=nameWithType> constructor.</span></span>  
  
13. <span data-ttu-id="59996-139">Wenn bei der Konvertierung in Schritt 10 ein Fehler auftritt, wiederholen Sie die Schritte 7 bis 12 für jedes verbleibende Element im von der <xref:System.Web.HttpRequest.UserLanguages%2A>-Eigenschaft zurückgegebenen Zeichenfolgenarray.</span><span class="sxs-lookup"><span data-stu-id="59996-139">If the conversion in step 10 fails, repeat steps 7 through 12 for each remaining element in the string array returned by the <xref:System.Web.HttpRequest.UserLanguages%2A> property.</span></span>  
  
14. <span data-ttu-id="59996-140">Wenn bei der Konvertierung weiterhin ein Fehler auftritt, oder das von der <xref:System.Web.HttpRequest.UserLanguages%2A>-Eigenschaft zurückgegebene Zeichenfolgenarray leer ist, analysieren Sie die Zeichenfolge mit der invarianten Kultur, die durch die <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType>-Eigenschaft zurückgegeben wird.</span><span class="sxs-lookup"><span data-stu-id="59996-140">If the conversion still fails or if the string array returned by the <xref:System.Web.HttpRequest.UserLanguages%2A> property is empty, parse the string by using the invariant culture, which is returned by the <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="59996-141">Wiederholen Sie dann die Schritte 7 bis 12.</span><span class="sxs-lookup"><span data-stu-id="59996-141">Then repeat steps 7 through 12.</span></span>  
  
 <span data-ttu-id="59996-142">Das Ergebnis ist ein <xref:System.DateTimeOffset>-Objekt, das die Ortszeit des Benutzers auf Ihrer Webseite darstellt.</span><span class="sxs-lookup"><span data-stu-id="59996-142">The result is a <xref:System.DateTimeOffset> object that represents the local time of the user of your Web page.</span></span> <span data-ttu-id="59996-143">Sie können dann die entsprechende UTC durch Aufrufen der <xref:System.DateTimeOffset.ToUniversalTime%2A>-Methode bestimmen.</span><span class="sxs-lookup"><span data-stu-id="59996-143">You can then determine the equivalent UTC by calling the <xref:System.DateTimeOffset.ToUniversalTime%2A> method.</span></span> <span data-ttu-id="59996-144">Sie können das entsprechende Datum und die Uhrzeit auch durch Aufrufen der <xref:System.TimeZoneInfo.ConvertTime%28System.DateTimeOffset%2CSystem.TimeZoneInfo%29?displayProperty=nameWithType>-Methode und Übergabe eines Werts von <xref:System.TimeZoneInfo.Local%2A?displayProperty=nameWithType> als Zeitzone, in die die Uhrzeit konvertiert werden soll, auf dem Webserver bestimmen.</span><span class="sxs-lookup"><span data-stu-id="59996-144">You can also determine the equivalent date and time on your Web server by calling the <xref:System.TimeZoneInfo.ConvertTime%28System.DateTimeOffset%2CSystem.TimeZoneInfo%29?displayProperty=nameWithType> method and passing a value of <xref:System.TimeZoneInfo.Local%2A?displayProperty=nameWithType> as the time zone to convert the time to.</span></span>  
  
## <a name="example"></a><span data-ttu-id="59996-145">Beispiel</span><span class="sxs-lookup"><span data-stu-id="59996-145">Example</span></span>  
 <span data-ttu-id="59996-146">Das folgende Beispiel enthält die HTML-Quelle und den Code für ein ASP.NET-Webformular, das den Benutzer auffordert, einen Wert für Datum und Uhrzeit einzugeben.</span><span class="sxs-lookup"><span data-stu-id="59996-146">The following example contains both the HTML source and the code for an ASP.NET Web form that asks the user to input a date and time value.</span></span> <span data-ttu-id="59996-147">Ein clientseitiges Skript schreibt auch Informationen über das lokale Datum und die Uhrzeit der Anforderung des Benutzers sowie den Offset zwischen der Zeitzone des Benutzers und UTC in ein ausgeblendetes Feld.</span><span class="sxs-lookup"><span data-stu-id="59996-147">A client-side script also writes information on the local date and time of the user's request and the offset of the user's time zone from UTC to a hidden field.</span></span> <span data-ttu-id="59996-148">Diese Informationen werden dann durch den Server analysiert, der eine Webseite zurückgibt, die die Eingabe des Benutzers angezeigt.</span><span class="sxs-lookup"><span data-stu-id="59996-148">This information is then parsed by the server, which returns a Web page that displays the user's input.</span></span> <span data-ttu-id="59996-149">Es werden auch Datum und Uhrzeit der Anforderung des Benutzers unter Verwendung von Ortszeit des Benutzers, Uhrzeit auf dem Server und UTC angezeigt.</span><span class="sxs-lookup"><span data-stu-id="59996-149">It also displays the date and time of the user's request using the user's local time, the time on the server, and UTC.</span></span>  
  
 [!code-aspx-csharp[Formatting.HowTo.ParseDateInput#1](../../../samples/snippets/csharp/VS_Snippets_CLR/Formatting.HowTo.ParseDateInput/cs/GetDateInfo.aspx#1)]
 [!code-aspx-vb[Formatting.HowTo.ParseDateInput#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/Formatting.HowTo.ParseDateInput/vb/GetDateInfo.aspx#1)]
  
 <span data-ttu-id="59996-150">Das clientseitige Skript ruft die JavaScript-Methode `toLocaleString` auf.</span><span class="sxs-lookup"><span data-stu-id="59996-150">The client-side script calls the JavaScript `toLocaleString` method.</span></span> <span data-ttu-id="59996-151">Dies erzeugt eine Zeichenfolge, die den Formatierungskonventionen des Gebietsschemas des Benutzers entspricht, das eher erfolgreich auf dem Server analysiert werden kann.</span><span class="sxs-lookup"><span data-stu-id="59996-151">This produces a string that follows the formatting conventions of the user's locale, which is more likely to be successfully parsed on the server.</span></span>  
  
 <span data-ttu-id="59996-152">Zum Füllen der <xref:System.Web.HttpRequest.UserLanguages%2A?displayProperty=nameWithType>-Eigenschaft kommen die Kulturnamen infrage, die sich in den `Accept-Language`-Headern befinden, die in einer HTTP-Anforderung enthalten sind.</span><span class="sxs-lookup"><span data-stu-id="59996-152">The <xref:System.Web.HttpRequest.UserLanguages%2A?displayProperty=nameWithType> property is populated from the culture names that are contained in `Accept-Language` headers included in an HTTP request.</span></span> <span data-ttu-id="59996-153">Allerdings sind nicht in den Anforderungen aller Browser `Accept-Language`-Header enthalten, und die Benutzer können die Header auch vollständig unterdrücken.</span><span class="sxs-lookup"><span data-stu-id="59996-153">However, not all browsers include `Accept-Language` headers in their requests, and users can also suppress the headers completely.</span></span> <span data-ttu-id="59996-154">Daher ist es wichtig, dass bei der Analyse der Benutzereingabe eine Fallbackkultur verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="59996-154">This makes it important to have a fallback culture when parsing user input.</span></span> <span data-ttu-id="59996-155">In der Regel ist die Fallbackkultur die von <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType> zurückgegebene invariante Kultur.</span><span class="sxs-lookup"><span data-stu-id="59996-155">Typically the fallback culture is the invariant culture returned by <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType>.</span></span> <span data-ttu-id="59996-156">Benutzer können für den Internet Explorer auch Kulturnamen bereitstellen, die sie in ein Textfeld eingeben, was die Gefahr mit sich bringt, dass die Kulturnamen möglicherweise nicht gültig sind.</span><span class="sxs-lookup"><span data-stu-id="59996-156">Users can also provide Internet Explorer with culture names that they input in a text box, which creates the possibility that the culture names may not be valid.</span></span> <span data-ttu-id="59996-157">Daher ist es wichtig, bei der Instanziierung eines <xref:System.Globalization.CultureInfo>-Objekts eine Ausnahmebehandlung zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="59996-157">This makes it important to use exception handling when instantiating a <xref:System.Globalization.CultureInfo> object.</span></span>  
  
 <span data-ttu-id="59996-158">Beim Abrufen durch eine vom Internet Explorer übermittelte HTTP-Anforderung wird das <xref:System.Web.HttpRequest.UserLanguages%2A?displayProperty=nameWithType>-Array in der durch die Benutzervoreinstellung vorgegebenen Reihenfolge aufgefüllt.</span><span class="sxs-lookup"><span data-stu-id="59996-158">When retrieved from an HTTP request submitted by Internet Explorer, the <xref:System.Web.HttpRequest.UserLanguages%2A?displayProperty=nameWithType> array is populated in order of user preference.</span></span> <span data-ttu-id="59996-159">Das erste Element im Array enthält den Namen der primären Kultur/Region des Benutzers.</span><span class="sxs-lookup"><span data-stu-id="59996-159">The first element in the array contains the name of the user's primary culture/region.</span></span> <span data-ttu-id="59996-160">Wenn das Array zusätzliche Elemente enthält, weist der Internet Explorer ihnen nach dem Zufallsprinzip einen Qualitätsspezifizierer zu, der durch ein Semikolon vom Namen der Kultur getrennt wird.</span><span class="sxs-lookup"><span data-stu-id="59996-160">If the array contains any additional items, Internet Explorer arbitrarily assigns them a quality specifier, which is delimited from the culture name by a semicolon.</span></span> <span data-ttu-id="59996-161">Beispielsweise kann ein Eintrag für die Kultur „fr-FR“ das Format `fr-FR;q=0.7` aufweisen.</span><span class="sxs-lookup"><span data-stu-id="59996-161">For example, an entry for the fr-FR culture might take the form `fr-FR;q=0.7`.</span></span>  
  
 <span data-ttu-id="59996-162">Im Beispiel wird der <xref:System.Globalization.CultureInfo.%23ctor%2A>-Konstruktor mit seinem auf `false` festgelegten `useUserOverride`-Parametersatz zum Erstellen eines neuen <xref:System.Globalization.CultureInfo>-Objekts aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="59996-162">The example calls the <xref:System.Globalization.CultureInfo.%23ctor%2A> constructor with its `useUserOverride` parameter set to `false` to create a new <xref:System.Globalization.CultureInfo> object.</span></span> <span data-ttu-id="59996-163">Wenn der Kulturname der Standardkulturname auf dem Server ist, wird dadurch sichergestellt, dass das vom Klassenkonstruktor erstellte neue <xref:System.Globalization.CultureInfo>-Objekt die Standardeinstellungen einer Kultur enthält und keine mit der Anwendung **Regions- und Sprachoptionen** des Servers überschriebenen Einstellungen widerspiegelt.</span><span class="sxs-lookup"><span data-stu-id="59996-163">This ensures that, if the culture name is the default culture name on the server, the new <xref:System.Globalization.CultureInfo> object created by the class constructor contains a culture's default settings and does not reflect any settings overridden by using the server's **Regional and Language Options** application.</span></span> <span data-ttu-id="59996-164">Es ist unwahrscheinlich, dass die Werte überschriebener Einstellungen auf dem Server auf dem System des Benutzers vorhanden sind oder in der Eingabe des Benutzers widergespiegelt werden.</span><span class="sxs-lookup"><span data-stu-id="59996-164">The values from any overridden settings on the server are unlikely to exist on the user's system or to be reflected in the user's input.</span></span>  
  
 <span data-ttu-id="59996-165">Da in diesem Beispiel zwei Zeichenfolgendarstellungen eines Datums und einer Uhrzeit (eine Eingabe vom Benutzer, die andere im ausgeblendeten Feld gespeichert) analysiert werden, werden die <xref:System.Globalization.CultureInfo>-Objekte definiert, die möglicherweise im voraus erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="59996-165">Because this example parses two string representations of a date and time (one input by the user, the other stored to the hidden field), it defines the possible <xref:System.Globalization.CultureInfo> objects that may be required in advance.</span></span> <span data-ttu-id="59996-166">Es wird ein Array von <xref:System.Globalization.CultureInfo>-Objekten erstellt, das um eins größer ist als die Anzahl der von der <xref:System.Web.HttpRequest.UserLanguages%2A?displayProperty=nameWithType>-Eigenschaft zurückgegebenen Elemente.</span><span class="sxs-lookup"><span data-stu-id="59996-166">It creates an array of <xref:System.Globalization.CultureInfo> objects that is one greater than the number of elements returned by the <xref:System.Web.HttpRequest.UserLanguages%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="59996-167">Dann wird für jede Sprachen-/Regionszeichenfolge ein <xref:System.Globalization.CultureInfo>-Objekt instanziiert und darüber hinaus ein <xref:System.Globalization.CultureInfo>-Objekt, das <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType> darstellt.</span><span class="sxs-lookup"><span data-stu-id="59996-167">It then instantiates a <xref:System.Globalization.CultureInfo> object for each language/region string, and also instantiates a <xref:System.Globalization.CultureInfo> object that represents <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType>.</span></span>  
  
 <span data-ttu-id="59996-168">Ihr Code kann entweder die <xref:System.DateTime.Parse%2A>- oder <xref:System.DateTime.TryParse%2A>-Methode zum Konvertieren der Zeichenfolgendarstellung eines Datums und einer Uhrzeit des Benutzers in einen <xref:System.DateTime>-Wert aufrufen.</span><span class="sxs-lookup"><span data-stu-id="59996-168">Your code can call either the <xref:System.DateTime.Parse%2A> or the <xref:System.DateTime.TryParse%2A> method to convert the user's string representation of a date and time to a <xref:System.DateTime> value.</span></span> <span data-ttu-id="59996-169">Wiederholte an eine Analysemethode gerichtete Aufrufe können für einen einzelnen Analysevorgang erforderlich sein.</span><span class="sxs-lookup"><span data-stu-id="59996-169">Repeated calls to a parse method may be required for a single parsing operation.</span></span> <span data-ttu-id="59996-170">Daher ist die <xref:System.DateTime.TryParse%2A>-Methode besser, weil sie `false` zurückgibt, wenn bei einem Analysevorgang ein Fehler auftritt.</span><span class="sxs-lookup"><span data-stu-id="59996-170">As a result, the <xref:System.DateTime.TryParse%2A> method is better because it returns `false` if a parse operation fails.</span></span> <span data-ttu-id="59996-171">Im Gegensatz dazu kann das Behandeln wiederholter Ausnahmen, die ggf. von der <xref:System.DateTime.Parse%2A>-Methode ausgelöst werden, ein sehr ressourcenintensiver Vorgang in einer Webanwendung sein.</span><span class="sxs-lookup"><span data-stu-id="59996-171">In contrast, handling the repeated exceptions that may be thrown by the <xref:System.DateTime.Parse%2A> method can be a very expensive proposition in a Web application.</span></span>  
  
## <a name="compiling-the-code"></a><span data-ttu-id="59996-172">Kompilieren des Codes</span><span class="sxs-lookup"><span data-stu-id="59996-172">Compiling the Code</span></span>  
 <span data-ttu-id="59996-173">Um den Code zu kompilieren, erstellen Sie eine ASP.NET-Webseite ohne CodeBehind.</span><span class="sxs-lookup"><span data-stu-id="59996-173">To compile the code, create an ASP.NET Web page without a code-behind.</span></span> <span data-ttu-id="59996-174">Anschließend kopieren Sie das Beispiel in die Webseite, damit es den vorhandenen Code ersetzt.</span><span class="sxs-lookup"><span data-stu-id="59996-174">Then copy the example into the Web page so that it replaces all the existing code.</span></span> <span data-ttu-id="59996-175">Die ASP.NET-Webseite sollte folgende Steuerelemente enthalten:</span><span class="sxs-lookup"><span data-stu-id="59996-175">The ASP.NET Web page should contain the following controls:</span></span>  
  
- <span data-ttu-id="59996-176">Ein <xref:System.Web.UI.WebControls.Label>-Steuerelement, auf das nicht im Code verwiesen wird.</span><span class="sxs-lookup"><span data-stu-id="59996-176">A <xref:System.Web.UI.WebControls.Label> control, which is not referenced in code.</span></span> <span data-ttu-id="59996-177">Legen Sie seine <xref:System.Web.UI.WebControls.TextBox.Text%2A>-Eigenschaft auf „Geben Sie eine Zahl ein:“ fest.</span><span class="sxs-lookup"><span data-stu-id="59996-177">Set its <xref:System.Web.UI.WebControls.TextBox.Text%2A> property to "Enter a Number:".</span></span>  
  
- <span data-ttu-id="59996-178">Ein <xref:System.Web.UI.WebControls.TextBox>-Steuerelement namens `DateString`.</span><span class="sxs-lookup"><span data-stu-id="59996-178">A <xref:System.Web.UI.WebControls.TextBox> control named `DateString`.</span></span>  
  
- <span data-ttu-id="59996-179">Ein <xref:System.Web.UI.WebControls.Button>-Steuerelement namens `OKButton`.</span><span class="sxs-lookup"><span data-stu-id="59996-179">A <xref:System.Web.UI.WebControls.Button> control named `OKButton`.</span></span> <span data-ttu-id="59996-180">Legen Sie seine <xref:System.Web.UI.WebControls.Button.Text%2A>-Eigenschaft auf „OK“ fest.</span><span class="sxs-lookup"><span data-stu-id="59996-180">Set its <xref:System.Web.UI.WebControls.Button.Text%2A> property to "OK".</span></span>  
  
- <span data-ttu-id="59996-181">Ein <xref:System.Web.UI.WebControls.HiddenField>-Steuerelement namens `DateInfo`.</span><span class="sxs-lookup"><span data-stu-id="59996-181">A <xref:System.Web.UI.WebControls.HiddenField> control named `DateInfo`.</span></span>  
  
## <a name="net-framework-security"></a><span data-ttu-id="59996-182">.NET Framework-Sicherheit</span><span class="sxs-lookup"><span data-stu-id="59996-182">.NET Framework Security</span></span>  
 <span data-ttu-id="59996-183">Um zu verhindern, dass ein Benutzer ein Skript in den HTML-Stream einfügt, sollte eine Benutzereingabe nie direkt in der Antwort des Servers wiederholt werden.</span><span class="sxs-lookup"><span data-stu-id="59996-183">To prevent a user from injecting script into the HTML stream, user input should never be directly echoed back in the server response.</span></span> <span data-ttu-id="59996-184">Sie sollte stattdessen mithilfe der <xref:System.Web.HttpServerUtility.HtmlEncode%2A?displayProperty=nameWithType>-Methode codiert werden.</span><span class="sxs-lookup"><span data-stu-id="59996-184">Instead, it should be encoded by using the <xref:System.Web.HttpServerUtility.HtmlEncode%2A?displayProperty=nameWithType> method.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="59996-185">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="59996-185">See also</span></span>

- [<span data-ttu-id="59996-186">Durchführen von Formatierungsvorgängen</span><span class="sxs-lookup"><span data-stu-id="59996-186">Performing Formatting Operations</span></span>](../../../docs/standard/base-types/performing-formatting-operations.md)
- [<span data-ttu-id="59996-187">Standard Date and Time Format Strings</span><span class="sxs-lookup"><span data-stu-id="59996-187">Standard Date and Time Format Strings</span></span>](../../../docs/standard/base-types/standard-date-and-time-format-strings.md)
- [<span data-ttu-id="59996-188">Custom Date and Time Format Strings</span><span class="sxs-lookup"><span data-stu-id="59996-188">Custom Date and Time Format Strings</span></span>](../../../docs/standard/base-types/custom-date-and-time-format-strings.md)
- [<span data-ttu-id="59996-189">Verarbeiten von Zeichenfolgen für Datum und Uhrzeit</span><span class="sxs-lookup"><span data-stu-id="59996-189">Parsing Date and Time Strings</span></span>](../../../docs/standard/base-types/parsing-datetime.md)
