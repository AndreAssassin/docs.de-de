---
title: 'Ressourcenverwaltung: Das Use-Schlüsselwort'
description: Erfahren Sie mehr über die F# 'verwendet'-Schlüsselwort und die "using"-Funktion, die die Initialisierung und Freigabe von Ressourcen steuern kann.
ms.date: 05/16/2016
ms.openlocfilehash: 3389f84713ec7cf5459dd0132249970f0e2ef3e0
ms.sourcegitcommit: 8699383914c24a0df033393f55db3369db728a7b
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 05/15/2019
ms.locfileid: "65641708"
---
# <a name="resource-management-the-use-keyword"></a><span data-ttu-id="465e0-103">Ressourcenverwaltung: Das Use-Schlüsselwort</span><span class="sxs-lookup"><span data-stu-id="465e0-103">Resource Management: The use Keyword</span></span>

<span data-ttu-id="465e0-104">In diesem Thema wird beschrieben, das Schlüsselwort `use` und `using` -Funktion, die die Initialisierung und Freigabe von Ressourcen steuern kann.</span><span class="sxs-lookup"><span data-stu-id="465e0-104">This topic describes the keyword `use` and the `using` function, which can control the initialization and release of resources.</span></span>

## <a name="resources"></a><span data-ttu-id="465e0-105">Ressourcen</span><span class="sxs-lookup"><span data-stu-id="465e0-105">Resources</span></span>

<span data-ttu-id="465e0-106">Der Begriff *Ressource* auf mehr als eine Weise verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="465e0-106">The term *resource* is used in more than one way.</span></span> <span data-ttu-id="465e0-107">Ja, Ressourcen können Daten, die eine Anwendung, z. B. Zeichenfolgen, Grafiken und ähnliches, aber in diesem Kontext verwendet werden *Ressourcen* bezieht sich auf Software oder Betriebssystem der Ressourcen, z. B. Grafiken Gerätekontexte, Dateihandles, Netzwerk und Verbindungen, Concurrency-Objekte, z. B. Wait-Handles und So weiter.</span><span class="sxs-lookup"><span data-stu-id="465e0-107">Yes, resources can be data that an application uses, such as strings, graphics, and the like, but in this context, *resources* refers to software or operating system resources, such as graphics device contexts, file handles, network and database connections, concurrency objects such as wait handles, and so on.</span></span> <span data-ttu-id="465e0-108">Die Verwendung dieser Ressourcen durch Anwendungen beinhaltet die Übernahme des von der Ressource mit dem das Betriebssystem oder anderen Ressourcenanbieter, gefolgt von die höhere Version der Ressource, an den Pool, sodass es zu einer anderen Anwendung bereitgestellt werden kann.</span><span class="sxs-lookup"><span data-stu-id="465e0-108">The use of these resources by applications involves the acquisition of the resource from the operating system or other resource provider, followed by the later release of the resource to the pool so that it can be provided to another application.</span></span> <span data-ttu-id="465e0-109">Probleme auftreten, wenn Anwendungen nicht die Ressourcen für den gemeinsamen Pool freigeben.</span><span class="sxs-lookup"><span data-stu-id="465e0-109">Problems occur when applications do not release resources back to the common pool.</span></span>

## <a name="managing-resources"></a><span data-ttu-id="465e0-110">Verwalten von Ressourcen</span><span class="sxs-lookup"><span data-stu-id="465e0-110">Managing Resources</span></span>

<span data-ttu-id="465e0-111">Um effizient und bittet um Ressourcen in einer Anwendung verwalten, müssen Sie Ressourcen umgehend und in einer vorhersagbaren Weise freigeben.</span><span class="sxs-lookup"><span data-stu-id="465e0-111">To efficiently and responsibly manage resources in an application, you must release resources promptly and in a predictable manner.</span></span> <span data-ttu-id="465e0-112">.NET Framework unterstützt dies durch die Bereitstellung der `System.IDisposable` Schnittstelle.</span><span class="sxs-lookup"><span data-stu-id="465e0-112">The .NET Framework helps you do this by providing the `System.IDisposable` interface.</span></span> <span data-ttu-id="465e0-113">Ein Typ, der implementiert `System.IDisposable` hat die `System.IDisposable.Dispose` -Methode, die korrekt Ressourcen freigibt.</span><span class="sxs-lookup"><span data-stu-id="465e0-113">A type that implements `System.IDisposable` has the `System.IDisposable.Dispose` method, which correctly frees resources.</span></span> <span data-ttu-id="465e0-114">Gut geschriebene Anwendungen zu garantieren, dass `System.IDisposable.Dispose` wird sofort aufgerufen, wenn ein Objekt, das eine eingeschränkte Ressource enthält, nicht mehr benötigt wird.</span><span class="sxs-lookup"><span data-stu-id="465e0-114">Well-written applications guarantee that `System.IDisposable.Dispose` is called promptly when any object that holds a limited resource is no longer needed.</span></span> <span data-ttu-id="465e0-115">Glücklicherweise unterstützen die meisten zur Vereinfachung und F# ist keine Ausnahme.</span><span class="sxs-lookup"><span data-stu-id="465e0-115">Fortunately, most .NET languages provide support to make this easier, and F# is no exception.</span></span> <span data-ttu-id="465e0-116">Es gibt zwei hilfreiche Sprachkonstrukte, die das Dispose-Muster unterstützen: die `use` Bindung und die `using` Funktion.</span><span class="sxs-lookup"><span data-stu-id="465e0-116">There are two useful language constructs that support the dispose pattern: the `use` binding and the `using` function.</span></span>

## <a name="use-binding"></a><span data-ttu-id="465e0-117">Verwenden der Bindung</span><span class="sxs-lookup"><span data-stu-id="465e0-117">use Binding</span></span>

<span data-ttu-id="465e0-118">Die `use` -Schlüsselwort enthält ein Formular, das der ähnelt der `let` Bindung:</span><span class="sxs-lookup"><span data-stu-id="465e0-118">The `use` keyword has a form that resembles that of the `let` binding:</span></span>

<span data-ttu-id="465e0-119">Verwenden Sie *Wert* = *Ausdruck*</span><span class="sxs-lookup"><span data-stu-id="465e0-119">use *value* = *expression*</span></span>

<span data-ttu-id="465e0-120">Es bietet die gleiche Funktionalität wie eine `let` binden, aber Fügt einen Aufruf von `Dispose` auf dem Wert, wenn der Wert den Gültigkeitsbereich verlässt.</span><span class="sxs-lookup"><span data-stu-id="465e0-120">It provides the same functionality as a `let` binding but adds a call to `Dispose` on the value when the value goes out of scope.</span></span> <span data-ttu-id="465e0-121">Beachten Sie, dass der Compiler eine null-Überprüfung für den Wert und fügt, auch wenn der Wert lautet `null`, den Aufruf von `Dispose` nicht versucht wird.</span><span class="sxs-lookup"><span data-stu-id="465e0-121">Note that the compiler inserts a null check on the value, so that if the value is `null`, the call to `Dispose` is not attempted.</span></span>

<span data-ttu-id="465e0-122">Das folgende Beispiel zeigt, wie Sie eine Datei automatisch mit schließen die `use` Schlüsselwort.</span><span class="sxs-lookup"><span data-stu-id="465e0-122">The following example shows how to close a file automatically by using the `use` keyword.</span></span>

[!code-fsharp[Main](../../../samples/snippets/fsharp/lang-ref-2/snippet6301.fs)]

> [!NOTE]
> <span data-ttu-id="465e0-123">Können Sie `use` in Berechnungsausdrücken, in diesem Fall, dass eine angepasste Version von der `use` Ausdruck wird verwendet.</span><span class="sxs-lookup"><span data-stu-id="465e0-123">You can use `use` in computation expressions, in which case a customized version of the `use` expression is used.</span></span> <span data-ttu-id="465e0-124">Weitere Informationen finden Sie unter [Sequenzen](sequences.md), [asynchrone Workflows](asynchronous-workflows.md), und [Berechnungsausdrücke](computation-expressions.md).</span><span class="sxs-lookup"><span data-stu-id="465e0-124">For more information, see [Sequences](sequences.md), [Asynchronous Workflows](asynchronous-workflows.md), and [Computation Expressions](computation-expressions.md).</span></span>

## <a name="using-function"></a><span data-ttu-id="465e0-125">Mithilfe der Funktion</span><span class="sxs-lookup"><span data-stu-id="465e0-125">using Function</span></span>

<span data-ttu-id="465e0-126">Die `using` Funktion hat folgende Form:</span><span class="sxs-lookup"><span data-stu-id="465e0-126">The `using` function has the following form:</span></span>

<span data-ttu-id="465e0-127">`using` (*expression1*) *-Funktion oder Lambda*</span><span class="sxs-lookup"><span data-stu-id="465e0-127">`using` (*expression1*) *function-or-lambda*</span></span>

<span data-ttu-id="465e0-128">In einem `using` Ausdruck *expression1* erstellt das Objekt, das freigegeben werden muss.</span><span class="sxs-lookup"><span data-stu-id="465e0-128">In a `using` expression, *expression1* creates the object that must be disposed.</span></span> <span data-ttu-id="465e0-129">Das Ergebnis des *expression1* (das Objekt, das freigegeben werden muss), wird ein Argument, *Wert*zu *-Funktion oder Lambda*, dies ist entweder eine Funktion, die eine einzelne erwartet Verbleibende Argument des Typs, der den Wert entspricht erzeugten *expression1*, oder einen Lambda-Ausdruck, der ein Argument des Typs erwartet.</span><span class="sxs-lookup"><span data-stu-id="465e0-129">The result of *expression1* (the object that must be disposed) becomes an argument, *value*, to *function-or-lambda*, which is either a function that expects a single remaining argument of a type that matches the value produced by *expression1*, or a lambda expression that expects an argument of that type.</span></span> <span data-ttu-id="465e0-130">Am Ende der Ausführung der Funktion, die Runtime ruft `Dispose` und die Ressourcen freigegeben werden (es sei denn, der Wert ist `null`, in diesem Fall der Aufruf von Dispose nicht versucht wird).</span><span class="sxs-lookup"><span data-stu-id="465e0-130">At the end of the execution of the function, the runtime calls `Dispose` and frees the resources (unless the value is `null`, in which case the call to Dispose is not attempted).</span></span>

<span data-ttu-id="465e0-131">Das folgende Beispiel zeigt die `using` Ausdruck mit einem Lambda-Ausdruck.</span><span class="sxs-lookup"><span data-stu-id="465e0-131">The following example demonstrates the `using` expression with a lambda expression.</span></span>

[!code-fsharp[Main](../../../samples/snippets/fsharp/lang-ref-2/snippet6302.fs)]

<span data-ttu-id="465e0-132">Das folgende Beispiel zeigt die `using` Ausdruck mit einer Funktion.</span><span class="sxs-lookup"><span data-stu-id="465e0-132">The next example shows the `using` expression with a function.</span></span>

[!code-fsharp[Main](../../../samples/snippets/fsharp/lang-ref-2/snippet6303.fs)]

<span data-ttu-id="465e0-133">Beachten Sie, dass die Funktion eine Funktion handeln, die bereits einige Argumente angewendet wurde.</span><span class="sxs-lookup"><span data-stu-id="465e0-133">Note that the function could be a function that has some arguments applied already.</span></span> <span data-ttu-id="465e0-134">Dies wird im folgenden Codebeispiel veranschaulicht.</span><span class="sxs-lookup"><span data-stu-id="465e0-134">The following code example demonstrates this.</span></span> <span data-ttu-id="465e0-135">Er erstellt eine Datei, die die Zeichenfolge enthält `XYZ`.</span><span class="sxs-lookup"><span data-stu-id="465e0-135">It creates a file that contains the string `XYZ`.</span></span>

[!code-fsharp[Main](../../../samples/snippets/fsharp/lang-ref-2/snippet6304.fs)]

<span data-ttu-id="465e0-136">Die `using` Funktion und die `use` Bindung gibt nahezu gleichwertig Möglichkeiten, die den gleichen Zweck erfüllen.</span><span class="sxs-lookup"><span data-stu-id="465e0-136">The `using` function and the `use` binding are nearly equivalent ways to accomplish the same thing.</span></span> <span data-ttu-id="465e0-137">Die `using` Schlüsselwort bietet mehr Kontrolle darüber, wann `Dispose` aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="465e0-137">The `using` keyword provides more control over when `Dispose` is called.</span></span> <span data-ttu-id="465e0-138">Bei Verwendung von `using`, `Dispose` wird am Ende der Funktion oder einen Lambda-Ausdruck aufgerufen, bei der Verwendung der `use` Schlüsselwort `Dispose` am Ende des enthaltenden Codeblocks aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="465e0-138">When you use `using`, `Dispose` is called at the end of the function or lambda expression; when you use the `use` keyword, `Dispose` is called at the end of the containing code block.</span></span> <span data-ttu-id="465e0-139">Im Allgemeinen sollten Sie lieber mit `use` statt der `using` Funktion.</span><span class="sxs-lookup"><span data-stu-id="465e0-139">In general, you should prefer to use `use` instead of the `using` function.</span></span>

## <a name="see-also"></a><span data-ttu-id="465e0-140">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="465e0-140">See also</span></span>

- [<span data-ttu-id="465e0-141">F#-Sprachreferenz</span><span class="sxs-lookup"><span data-stu-id="465e0-141">F# Language Reference</span></span>](index.md)
