---
title: 'Ressourcenverwaltung: Das use-Schlüsselwort'
description: Erfahren Sie mehr F# über das Schlüsselwort "Use" und die Funktion "using", die die Initialisierung und Freigabe von Ressourcen steuern können.
ms.date: 05/16/2016
ms.openlocfilehash: 5e0838401bee02050343b2f6dcc646a8dc8b4dc0
ms.sourcegitcommit: f20dd18dbcf2275513281f5d9ad7ece6a62644b4
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 07/30/2019
ms.locfileid: "68627260"
---
# <a name="resource-management-the-use-keyword"></a><span data-ttu-id="8c595-103">Ressourcenverwaltung: Das use-Schlüsselwort</span><span class="sxs-lookup"><span data-stu-id="8c595-103">Resource Management: The use Keyword</span></span>

<span data-ttu-id="8c595-104">In diesem Thema werden das `use` -Schlüssel `using` Wort und die-Funktion beschrieben, die die Initialisierung und Freigabe von Ressourcen steuern können.</span><span class="sxs-lookup"><span data-stu-id="8c595-104">This topic describes the keyword `use` and the `using` function, which can control the initialization and release of resources.</span></span>

## <a name="resources"></a><span data-ttu-id="8c595-105">Ressourcen</span><span class="sxs-lookup"><span data-stu-id="8c595-105">Resources</span></span>

<span data-ttu-id="8c595-106">Der Begriff " *Resource* " wird auf mehr als eine Weise verwendet.</span><span class="sxs-lookup"><span data-stu-id="8c595-106">The term *resource* is used in more than one way.</span></span> <span data-ttu-id="8c595-107">Ja, Ressourcen können Daten sein, die von einer Anwendung verwendet werden, z. b. Zeichen folgen, Grafiken und ähnliches, aber in diesem Kontext bezieht sich der *Ressourcen* auf Software-oder Betriebssystemressourcen, z. b. Grafikgeräte Kontexte, Datei Handles, Netzwerk und Datenbank. Verbindungen, Parallelitäts Objekte, wie z. b. Wait-Handles, usw.</span><span class="sxs-lookup"><span data-stu-id="8c595-107">Yes, resources can be data that an application uses, such as strings, graphics, and the like, but in this context, *resources* refers to software or operating system resources, such as graphics device contexts, file handles, network and database connections, concurrency objects such as wait handles, and so on.</span></span> <span data-ttu-id="8c595-108">Die Verwendung dieser Ressourcen durch Anwendungen umfasst die Beschaffung der Ressource vom Betriebssystem oder von einem anderen Ressourcenanbieter, gefolgt von der späteren Freigabe der Ressource zum Pool, damit Sie für eine andere Anwendung bereitgestellt werden kann.</span><span class="sxs-lookup"><span data-stu-id="8c595-108">The use of these resources by applications involves the acquisition of the resource from the operating system or other resource provider, followed by the later release of the resource to the pool so that it can be provided to another application.</span></span> <span data-ttu-id="8c595-109">Es treten Probleme auf, wenn Anwendungen Ressourcen nicht wieder in den gemeinsamen Pool freigeben.</span><span class="sxs-lookup"><span data-stu-id="8c595-109">Problems occur when applications do not release resources back to the common pool.</span></span>

## <a name="managing-resources"></a><span data-ttu-id="8c595-110">Verwalten von Ressourcen</span><span class="sxs-lookup"><span data-stu-id="8c595-110">Managing Resources</span></span>

<span data-ttu-id="8c595-111">Zur effizienten und verantwortungsvollen Verwaltung von Ressourcen in einer Anwendung müssen Sie Ressourcen umgehend und auf vorhersagbare Weise freigeben.</span><span class="sxs-lookup"><span data-stu-id="8c595-111">To efficiently and responsibly manage resources in an application, you must release resources promptly and in a predictable manner.</span></span> <span data-ttu-id="8c595-112">Der .NET Framework unterstützt Sie durch die Bereitstellung `System.IDisposable` der-Schnittstelle.</span><span class="sxs-lookup"><span data-stu-id="8c595-112">The .NET Framework helps you do this by providing the `System.IDisposable` interface.</span></span> <span data-ttu-id="8c595-113">Ein Typ, der `System.IDisposable` implementiert, `System.IDisposable.Dispose` verfügt über die-Methode, die Ressourcen ordnungsgemäß freigibt.</span><span class="sxs-lookup"><span data-stu-id="8c595-113">A type that implements `System.IDisposable` has the `System.IDisposable.Dispose` method, which correctly frees resources.</span></span> <span data-ttu-id="8c595-114">Gut geschriebene Anwendungen garantieren, dass `System.IDisposable.Dispose` umgehend aufgerufen wird, wenn ein Objekt, das eine begrenzte Ressource enthält, nicht mehr benötigt wird.</span><span class="sxs-lookup"><span data-stu-id="8c595-114">Well-written applications guarantee that `System.IDisposable.Dispose` is called promptly when any object that holds a limited resource is no longer needed.</span></span> <span data-ttu-id="8c595-115">Glücklicherweise unterstützen die meisten zur Vereinfachung und F# ist keine Ausnahme.</span><span class="sxs-lookup"><span data-stu-id="8c595-115">Fortunately, most .NET languages provide support to make this easier, and F# is no exception.</span></span> <span data-ttu-id="8c595-116">Es gibt zwei nützliche Sprachkonstrukte, die das Lösch Muster unter `use` stützen: die `using` -Bindung und die-Funktion.</span><span class="sxs-lookup"><span data-stu-id="8c595-116">There are two useful language constructs that support the dispose pattern: the `use` binding and the `using` function.</span></span>

## <a name="use-binding"></a><span data-ttu-id="8c595-117">Bindung verwenden</span><span class="sxs-lookup"><span data-stu-id="8c595-117">use Binding</span></span>

<span data-ttu-id="8c595-118">Das `use` -Schlüsselwort weist ein Formular `let` auf, das der-Bindung ähnelt:</span><span class="sxs-lookup"><span data-stu-id="8c595-118">The `use` keyword has a form that resembles that of the `let` binding:</span></span>

<span data-ttu-id="8c595-119">*Ausdruck* " *Wert* = verwenden"</span><span class="sxs-lookup"><span data-stu-id="8c595-119">use *value* = *expression*</span></span>

<span data-ttu-id="8c595-120">Sie bietet die gleiche Funktionalität wie eine `let` Bindung, fügt aber einen- `Dispose` Rückruf für den Wert hinzu, wenn der Wert den Gültigkeitsbereich verlässt.</span><span class="sxs-lookup"><span data-stu-id="8c595-120">It provides the same functionality as a `let` binding but adds a call to `Dispose` on the value when the value goes out of scope.</span></span> <span data-ttu-id="8c595-121">Beachten Sie, dass der Compiler eine NULL-Überprüfung für den Wert einfügt, sodass der `null` `Dispose` -Vorgang nicht versucht wird, wenn der Wert ist.</span><span class="sxs-lookup"><span data-stu-id="8c595-121">Note that the compiler inserts a null check on the value, so that if the value is `null`, the call to `Dispose` is not attempted.</span></span>

<span data-ttu-id="8c595-122">Im folgenden Beispiel wird gezeigt, wie eine Datei automatisch mit dem `use` -Schlüsselwort geschlossen wird.</span><span class="sxs-lookup"><span data-stu-id="8c595-122">The following example shows how to close a file automatically by using the `use` keyword.</span></span>

[!code-fsharp[Main](~/samples/snippets/fsharp/lang-ref-2/snippet6301.fs)]

> [!NOTE]
> <span data-ttu-id="8c595-123">Sie können in `use` Berechnungs Ausdrücken verwenden. in diesem Fall wird eine angepasste Version `use` des Ausdrucks verwendet.</span><span class="sxs-lookup"><span data-stu-id="8c595-123">You can use `use` in computation expressions, in which case a customized version of the `use` expression is used.</span></span> <span data-ttu-id="8c595-124">Weitere Informationen finden Sie unter [Sequenzen](sequences.md), [asynchrone Workflows](asynchronous-workflows.md)und [Berechnungs Ausdrücke](computation-expressions.md).</span><span class="sxs-lookup"><span data-stu-id="8c595-124">For more information, see [Sequences](sequences.md), [Asynchronous Workflows](asynchronous-workflows.md), and [Computation Expressions](computation-expressions.md).</span></span>

## <a name="using-function"></a><span data-ttu-id="8c595-125">using-Funktion</span><span class="sxs-lookup"><span data-stu-id="8c595-125">using Function</span></span>

<span data-ttu-id="8c595-126">Die `using` Funktion hat die folgende Form:</span><span class="sxs-lookup"><span data-stu-id="8c595-126">The `using` function has the following form:</span></span>

<span data-ttu-id="8c595-127">`using`(*expression1*) *Function-or-Lambda*</span><span class="sxs-lookup"><span data-stu-id="8c595-127">`using` (*expression1*) *function-or-lambda*</span></span>

<span data-ttu-id="8c595-128">In einem `using` -Ausdruck erstellt *expression1* das-Objekt, das verworfen werden muss.</span><span class="sxs-lookup"><span data-stu-id="8c595-128">In a `using` expression, *expression1* creates the object that must be disposed.</span></span> <span data-ttu-id="8c595-129">Das Ergebnis von *expression1* (das-Objekt, das verworfen werden muss) wird zu einem Argument, einem *Wert*, einer *Funktion oder einem Lambda*, das entweder eine Funktion ist, die ein einzelnes verbleibendes Argument eines Typs erwartet, das mit dem Wert übereinstimmt, der von *erzeugt wurde. expression1*oder ein Lambda-Ausdruck, der ein Argument dieses Typs erwartet.</span><span class="sxs-lookup"><span data-stu-id="8c595-129">The result of *expression1* (the object that must be disposed) becomes an argument, *value*, to *function-or-lambda*, which is either a function that expects a single remaining argument of a type that matches the value produced by *expression1*, or a lambda expression that expects an argument of that type.</span></span> <span data-ttu-id="8c595-130">Am Ende der Ausführung der Funktion ruft `Dispose` die Laufzeit die Ressourcen auf und gibt Sie frei (es sei denn, der Wert ist `null`. in diesem Fall wird der Aufruf von "verwerfen" nicht versucht).</span><span class="sxs-lookup"><span data-stu-id="8c595-130">At the end of the execution of the function, the runtime calls `Dispose` and frees the resources (unless the value is `null`, in which case the call to Dispose is not attempted).</span></span>

<span data-ttu-id="8c595-131">Im folgenden Beispiel wird der `using` Ausdruck mit einem Lambda-Ausdruck veranschaulicht.</span><span class="sxs-lookup"><span data-stu-id="8c595-131">The following example demonstrates the `using` expression with a lambda expression.</span></span>

[!code-fsharp[Main](~/samples/snippets/fsharp/lang-ref-2/snippet6302.fs)]

<span data-ttu-id="8c595-132">Das nächste Beispiel zeigt den `using` -Ausdruck mit einer-Funktion.</span><span class="sxs-lookup"><span data-stu-id="8c595-132">The next example shows the `using` expression with a function.</span></span>

[!code-fsharp[Main](~/samples/snippets/fsharp/lang-ref-2/snippet6303.fs)]

<span data-ttu-id="8c595-133">Beachten Sie, dass die Funktion eine Funktion sein kann, für die bereits einige Argumente angewendet wurden.</span><span class="sxs-lookup"><span data-stu-id="8c595-133">Note that the function could be a function that has some arguments applied already.</span></span> <span data-ttu-id="8c595-134">Dies wird im folgenden Codebeispiel veranschaulicht.</span><span class="sxs-lookup"><span data-stu-id="8c595-134">The following code example demonstrates this.</span></span> <span data-ttu-id="8c595-135">Es wird eine Datei erstellt, die die `XYZ`Zeichenfolge enthält.</span><span class="sxs-lookup"><span data-stu-id="8c595-135">It creates a file that contains the string `XYZ`.</span></span>

[!code-fsharp[Main](~/samples/snippets/fsharp/lang-ref-2/snippet6304.fs)]

<span data-ttu-id="8c595-136">Die `using` -Funktion und `use` die-Bindung sind nahezu gleichwertig, um das gleiche zu erreichen.</span><span class="sxs-lookup"><span data-stu-id="8c595-136">The `using` function and the `use` binding are nearly equivalent ways to accomplish the same thing.</span></span> <span data-ttu-id="8c595-137">Das `using` -Schlüsselwort bietet mehr Kontrolle `Dispose` darüber, wenn aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="8c595-137">The `using` keyword provides more control over when `Dispose` is called.</span></span> <span data-ttu-id="8c595-138">Wenn Sie verwenden `using`, `Dispose` wird am Ende der Funktion oder des Lambda Ausdrucks aufgerufen. Wenn Sie das `use` Schlüsselwort verwenden, `Dispose` wird am Ende des enthaltenden Codeblocks aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="8c595-138">When you use `using`, `Dispose` is called at the end of the function or lambda expression; when you use the `use` keyword, `Dispose` is called at the end of the containing code block.</span></span> <span data-ttu-id="8c595-139">Im Allgemeinen empfiehlt es sich, anstelle `use` `using` der-Funktion zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="8c595-139">In general, you should prefer to use `use` instead of the `using` function.</span></span>

## <a name="see-also"></a><span data-ttu-id="8c595-140">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="8c595-140">See also</span></span>

- [<span data-ttu-id="8c595-141">F#-Sprachreferenz</span><span class="sxs-lookup"><span data-stu-id="8c595-141">F# Language Reference</span></span>](index.md)
